if (self.CavalryLogger) { CavalryLogger.start_js(["1JHAn"]); }

__d("AdsVideoCaptionLoadingView.react",["cx","fbt","React","SUIBusinessTheme","SUIButton.react","SUISpinner.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_bdi"},c("React").createElement(c("SUISpinner.react"),{size:"large",theme:c("SUIBusinessTheme")}),c("React").createElement("span",null,i._("Loading Caption Editor...")),c("React").createElement("span",null,c("React").createElement(c("SUIButton.react"),{height:"short",label:i._("Cancel"),theme:c("SUIBusinessTheme"),use:"default",onClick:this.props.onCancel})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("AdBreakExperimentalTextUtils",["fbt","React","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";var i={getHoldoutToolTipContentForVideo:function j(){return c("React").createElement("div",null,i.getToolTipTitle(),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},h._("For this video, a small percentage of your viewers will be split into a group for the test. Some viewers will see ads and some won't. The remaining viewers are not affected.")),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},h._("When you turn on holdout testing for a video, the test will run for 14 days or until the test group with ad breaks earns $100. Test results are available in your Page's Insights.")))},getToolTipTitle:function j(){return c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("How Holdouts Work For Ad Breaks"))}};f.exports=i}),null);
__d("BrandedContentComposerInterceptReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AFFILIATE_LINK:"affiliate_link",CREATOR_NOT_WHITELISTED:"creator_not_whitelisted",SELF_DISCLOSURE:"self_disclosure"})}),null);
__d("BrandedContentPostTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:BrandedContentPostLoggerConfig",this.$BrandedContentPostTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:BrandedContentPostLoggerConfig",this.$BrandedContentPostTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$BrandedContentPostTypedLogger1={};return this};h.prototype.updateData=function(j){this.$BrandedContentPostTypedLogger1=babelHelpers["extends"]({},this.$BrandedContentPostTypedLogger1,j);return this};h.prototype.setAdAccountID=function(j){this.$BrandedContentPostTypedLogger1.ad_account_id=j;return this};h.prototype.setAppID=function(j){this.$BrandedContentPostTypedLogger1.app_id=j;return this};h.prototype.setBcAccessGranted=function(j){this.$BrandedContentPostTypedLogger1.bc_access_granted=j;return this};h.prototype.setBcRequestPageID=function(j){this.$BrandedContentPostTypedLogger1.bc_request_page_id=j;return this};h.prototype.setBrandedContentEvent=function(j){this.$BrandedContentPostTypedLogger1.branded_content_event=j;return this};h.prototype.setBrandedContentPageType=function(j){this.$BrandedContentPostTypedLogger1.branded_content_page_type=j;return this};h.prototype.setComposerInterceptReason=function(j){this.$BrandedContentPostTypedLogger1.composer_intercept_reason=j;return this};h.prototype.setCreatorID=function(j){this.$BrandedContentPostTypedLogger1.creator_id=j;return this};h.prototype.setDirectShareStatus=function(j){this.$BrandedContentPostTypedLogger1.direct_share_status=j;return this};h.prototype.setExtraFields=function(j){this.$BrandedContentPostTypedLogger1.extra_fields=j;return this};h.prototype.setIsAd=function(j){this.$BrandedContentPostTypedLogger1.is_ad=j;return this};h.prototype.setIsBackdatedPost=function(j){this.$BrandedContentPostTypedLogger1.is_backdated_post=j;return this};h.prototype.setIsDraftPost=function(j){this.$BrandedContentPostTypedLogger1.is_draft_post=j;return this};h.prototype.setIsReviewablePost=function(j){this.$BrandedContentPostTypedLogger1.is_reviewable_post=j;return this};h.prototype.setIsScheduledPost=function(j){this.$BrandedContentPostTypedLogger1.is_scheduled_post=j;return this};h.prototype.setIsSponsorChanged=function(j){this.$BrandedContentPostTypedLogger1.is_sponsor_changed=j;return this};h.prototype.setPostCreationAppID=function(j){this.$BrandedContentPostTypedLogger1.post_creation_app_id=j;return this};h.prototype.setPostCreationTime=function(j){this.$BrandedContentPostTypedLogger1.post_creation_time=j;return this};h.prototype.setPostID=function(j){this.$BrandedContentPostTypedLogger1.post_id=j;return this};h.prototype.setPostMessage=function(j){this.$BrandedContentPostTypedLogger1.post_message=j;return this};h.prototype.setPostType=function(j){this.$BrandedContentPostTypedLogger1.post_type=j;return this};h.prototype.setSponsorCount=function(j){this.$BrandedContentPostTypedLogger1.sponsor_count=j;return this};h.prototype.setSponsorIds=function(j){this.$BrandedContentPostTypedLogger1.sponsor_ids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setSponsorRelationship=function(j){this.$BrandedContentPostTypedLogger1.sponsor_relationship=j;return this};h.prototype.setVC=function(j){this.$BrandedContentPostTypedLogger1.vc=j;return this};var i={ad_account_id:true,app_id:true,bc_access_granted:true,bc_request_page_id:true,branded_content_event:true,branded_content_page_type:true,composer_intercept_reason:true,creator_id:true,direct_share_status:true,extra_fields:true,is_ad:true,is_backdated_post:true,is_draft_post:true,is_reviewable_post:true,is_scheduled_post:true,is_sponsor_changed:true,post_creation_app_id:true,post_creation_time:true,post_id:true,post_message:true,post_type:true,sponsor_count:true,sponsor_ids:true,sponsor_relationship:true,vc:true};f.exports=h}),null);
__d("BrandedContentVideoUploadComposerInterceptDialog.react",["cx","fbt","BrandedContentPostTypedLogger","BrandedContentComposerInterceptReason","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){"use strict";k.constructor.call(this,m);this.$BrandedContentVideoUploadComposerInterceptDialog1=function(){this.setState({showInterceptDialog:false});new(c("BrandedContentPostTypedLogger"))().setBrandedContentEvent("bc_composer_intercept").setExtraFields(JSON.stringify({override_userid:this.props.pageID})).setComposerInterceptReason(this.props.interceptReason).setPostMessage(this.props.text).setPostType("video").log()}.bind(this);this.state={showInterceptDialog:true}}l.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialog.react"),{shown:this.state.showInterceptDialog,width:600},c("React").createElement(c("XUIDialogTitle.react"),null,i._("Are you partnering with a business or brand for this post?")),c("React").createElement(c("XUIDialogBody.react"),{className:"_60b7"},c("React").createElement("div",{className:"_2pi4 _2pit"},c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{shade:"medium"},this.props.interceptReason===c("BrandedContentComposerInterceptReason").SELF_DISCLOSURE?i._("We noticed your post is about an ad. If you're partnering with a third party brand, product or business in your post for an exchange of value, you'll need to tag your business partner's Page below."):null,this.props.interceptReason===c("BrandedContentComposerInterceptReason").AFFILIATE_LINK?i._("We noticed you mentioned a third party product or business in your post. If you're partnering for an exchange of value, you'll need to tag your business partner's Page below. If the product is yours, you don't need to tag anyone."):null)))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{className:"_60b8",action:"cancel",label:i._("Skip"),onClick:this.$BrandedContentVideoUploadComposerInterceptDialog1})))};f.exports=l}),null);
__d("FeedTargetingComposerDialogLocation",["ArbiterMixin","CSS","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l){"use strict";i.constructor.call(this);this._root=k;this._name=l}j.prototype.conditionShow=function(k){"use strict";c("CSS").conditionShow(this._root,k)};j.prototype.getName=function(){"use strict";return this._name};f.exports=j}),null);
__d("FeedTargetingComposerDialogCity",["ArbiterMixin","FeedTargetingComposerDialogLocation","mixin","classWithMixins","CSS"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("classWithMixins")(c("FeedTargetingComposerDialogLocation"),c("mixin")(c("ArbiterMixin"))));i=h&&h.prototype;function j(k,l,m,n,o,p){"use strict";__p&&__p();i.constructor.call(this,k,"city");this._tokenizer=l;this._typeahead=m;this._rows=o;this._country=n;this._typeId=p;n.getData().addEntries(o);n.subscribe(["select","unselect"],function(){this.toggleCityTypeahead()}.bind(this));n.subscribe(["select","unselect"],this._onChange.bind(this));l.subscribe(["removeToken","addToken"],this._onChange.bind(this))}j.prototype.conditionShow=function(k){"use strict";c("CSS").conditionShow(this._root,k);this.toggleCityTypeahead()};j.prototype.toggleCityTypeahead=function(){"use strict";var k=this._country.getCore().getHiddenValue();this._tokenizer.reset();if(k){this._typeahead.getCore().setEnabled(true);this._typeahead.getData().setQueryData({country:k});this._typeahead.getData().dirty()}else this._typeahead.getCore().setEnabled(false)};j.prototype.getLocationValues=function(){"use strict";var k=[],l=[this._country.getCore().getHiddenValue()],m=[];this._tokenizer.getTokens().forEach(function(n){k.push(n.info.text);m.push(n.info.uid)});return{text:k.join(", "),values:{countries:l,location_type:[this._typeId],location_ids:m}}};j.prototype.reset=function(){"use strict";this._tokenizer.reset()};j.prototype._onChange=function(){"use strict";this.inform("change")};f.exports=j}),null);
__d("FeedTargetingComposerDialogCountry",["FeedTargetingComposerDialogLocation"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FeedTargetingComposerDialogLocation"));i=h&&h.prototype;function j(k,l,m,n){"use strict";i.constructor.call(this,k,"country");this._root=k;this._tokenizer=l;this._typeahead=m;this._rows=n;m.getData().addEntries(n);l.subscribe(["removeToken","addToken"],this._onChange.bind(this))}j.prototype.getLocationValues=function(){"use strict";var k=[],l=[];this._tokenizer.getTokens().forEach(function(m){k.push(m.info.text);l.push(m.info.uid)});return{text:k.join(", "),values:{countries:l,location_type:[],location_ids:[]}}};j.prototype.reset=function(){"use strict";this._tokenizer.reset()};j.prototype._onChange=function(){"use strict";this.inform("change")};f.exports=j}),null);
__d("FeedTargetingComposerDialogRegion",["ArbiterMixin","FeedTargetingComposerDialogLocation","mixin","classWithMixins"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("classWithMixins")(c("FeedTargetingComposerDialogLocation"),c("mixin")(c("ArbiterMixin"))));i=h&&h.prototype;function j(k,l,m,n,o,p){"use strict";__p&&__p();i.constructor.call(this,k,"region");this._root=k;this._tokenizer=l;this._typeahead=m;this._select=n;this._rows=o;this._typeId=p;var q=this.getRowsForCountry(this._select.getValue());m.getData().addEntries(q);n.subscribe(["select","unselect","change"],this.reflow.bind(this));this._tokenizer.subscribe(["removeToken","addToken"],this._onChange.bind(this));this._select.subscribe(["change"],this._onChange.bind(this))}j.prototype.reflow=function(){"use strict";var k=this.getRowsForCountry(this._select.getValue());this._typeahead.getData().dirty();this._typeahead.getData().addEntries(k);this._tokenizer.reset()};j.prototype.reset=function(){"use strict";this._tokenizer.reset()};j.prototype._onChange=function(){"use strict";this.inform("change")};j.prototype.getRowsForCountry=function(k){"use strict";var l=[];this._rows.forEach(function(m){if(m.country==k)l.push(m)});return l};j.prototype.getLocationValues=function(){"use strict";var k=[],l=[this._select.getValue()],m=[];this._tokenizer.getTokens().forEach(function(n){k.push(n.info.text);m.push(n.info.region_key)});return{text:k.join(", "),values:{countries:l,location_type:[this._typeId],location_ids:m}}};f.exports=j}),null);
__d("TargetingComposerTagger",["Animation","ArbiterMixin","CSS","isEmpty","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r){"use strict";__p&&__p();i.constructor.call(this);this._root=k;this._menu=l;this._rows=m;this._addTargetingEnabled=n;this._addTargetingDisabled=o;this._pageId=p;this._targetingSpec={};this._add_menus={};this._isPage=r;this._useFocWithTargeting=false;this._autoexpandTargeting=q;this.init()}j.prototype.init=function(){"use strict";__p&&__p();this._menu.subscribe("itemclick",this._menuClick.bind(this));if(this._autoexpandTargeting){c("CSS").hide(this._addTargetingDisabled);c("CSS").hide(this._addTargetingEnabled)}for(var k in this._rows){var l=this._rows[k];l.subscribe("remove",this.removeCallback.bind(this,k));l.subscribe(["update","remove"],this.refreshTargeting.bind(this))}if(this._autoexpandTargeting)this._menu.forEachItem(this._processMenuClick.bind(this))};j.prototype.removeCallback=function(k,l,m){"use strict";if(this._add_menus[k]){if(!this._autoexpandTargeting&&this.isTargetingAllDone()){c("CSS").hide(this._addTargetingDisabled);c("CSS").show(this._addTargetingEnabled)}c("CSS").show(this._add_menus[k].getRoot());delete this._add_menus[k]}};j.prototype.reset=function(){"use strict";for(var k in this._rows){this._rows[k].resetTargetingValues();this._rows[k].removeFromDOM();this.removeCallback(k)}this.refreshTargeting()};j.prototype.incrementRefreshAttempt=function(){"use strict";this._targetingRefreshAttempt++};j.prototype.getRefreshAttempt=function(){"use strict";return this._targetingRefreshAttempt};j.prototype._menuClick=function(k,l){"use strict";this._processMenuClick(l.item)};j.prototype._processMenuClick=function(k){"use strict";__p&&__p();if(k){this._rows[k.getValue()].show();this.glow(this._rows[k.getValue()]);this._add_menus[k.getValue()]=k;c("CSS").hide(k.getRoot());if(!this._autoexpandTargeting&&this.isTargetingAllDone()){c("CSS").hide(this._addTargetingEnabled);c("CSS").show(this._addTargetingDisabled)}this.refreshTargeting()}};j.prototype.glow=function(k){"use strict";var l=new(c("Animation"))(k._root);l.from("background","#fffbe2").to("background","#fff").duration(1e3).go()};j.prototype.getTargetingSpec=function(){"use strict";var k={};for(var l in this._rows){var m=this._rows[l],n=m.getTargetingValues();for(var o in n)k[o]=n[o]}return k};j.prototype.refreshTargeting=function(){"use strict";this.inform("refresh")};j.prototype.isTargetingSet=function(){"use strict";return!c("isEmpty")(this._add_menus)};j.prototype.isTargetingAllDone=function(){"use strict";return Object.keys(this._add_menus).length==Object.keys(this._rows).length};j.prototype.getRoot=function(){"use strict";return this._root};j.prototype.getRows=function(){"use strict";return this._rows};f.exports=j}),null);
__d("FeedTargetingComposerTagger",["AsyncRequest","CSS","DOM","PagesEventObserver","TargetingComposerTagger","isEmpty"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("TargetingComposerTagger"));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();i.constructor.call(this,k,l,m,o,p,q,t,v);this._total=n;this._loadingText=r;this._warningArea=s;this._warningIcon=null;this._targetingRefreshAttempt=0;this._reachEstimate=u;if(!this._isPage)c("CSS").hide(this._total.parentNode)}j.prototype.incrementRefreshAttempt=function(){"use strict";this._targetingRefreshAttempt++};j.prototype.getRefreshAttempt=function(){"use strict";return this._targetingRefreshAttempt};j.prototype.updateWarningIcon=function(k){"use strict";if(this._warningArea){this._warningIcon=k;c("DOM").setContent(this._warningArea,this._warningIcon)}};j.prototype.hasWarning=function(){"use strict";return!!this._warningIcon};j.prototype.refreshTargeting=function(k){"use strict";var l=this.getTargetingSpec();if(this._isPage)j.refreshTargeting(k||0,this,this._total,l,this._pageId,this._loadingText,this._reachEstimate);i.refreshTargeting.call(this)};j.refreshTargeting=function(k,l,m,n,o,p,q){"use strict";__p&&__p();if(!k)k=1;if(k>=j.REFRESH_ATTEMPTS_LIMIT){c("DOM").setContent(m,"?");c("DOM").empty(q);return}l.incrementRefreshAttempt();var r=l.getRefreshAttempt();new(c("AsyncRequest"))().setURI("/ajax/pages/targeting/reach_estimator.php").setData({page_id:o,targeting_spec:n}).setHandler(function(t){if(r==l.getRefreshAttempt()){var u=t.getPayload();c("DOM").setContent(m,u.reach);l.updateWarningIcon(u.warning);if(c("isEmpty")(n))c("DOM").empty(q);else c("DOM").setContent(q,c("DOM").create("input",{type:"hidden",name:"feed_targeted_data[reach_estimate]",value:u.reach_raw}))}}.bind(this)).setErrorHandler(function(t){if(r==l.getRefreshAttempt()){this.refreshTargeting(k+1);c("DOM").empty(q)}}.bind(l)).send();c("DOM").setContent(m,p);var s={page_id:o,event_name:"composer_targeting_selected",targeting_data:n};c("PagesEventObserver").logData_DEPRECATED(s,c("PagesEventObserver").VITAL_WAIT)};j.REFRESH_ATTEMPTS_LIMIT=2;f.exports=j}),null);
__d("FeedTargetingDialog",["ArbiterMixin","DOM","Event","$","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m,n,o){"use strict";__p&&__p();i.constructor.call(this);this._root=k;this._dialog=l;this._showLink=m;this._inputDiv=n;this._placeholder=o;this._locationValues={text:"",values:{}};if(this.constructor===j)this.init()}j.prototype.init=function(){"use strict";var k=this._dialog.subscribe("aftershow",function(){this.reflow();this._dialog.unsubscribe(k)}.bind(this));c("Event").listen(this._showLink,"click",this.show.bind(this));this._updateLinkDescription();this._dialog.subscribe("confirm",this._onSubmit.bind(this))};j.prototype._updateLinkDescription=function(){"use strict";var k=this.getLocationValues().text||this._placeholder;c("DOM").setContent(this._showLink,c("DOM").create("span",{"class":"uiFeedTargeterText"},k))};j.prototype.show=function(){"use strict";return this._dialog.show()};j.prototype._onSubmit=function(){"use strict";this.updateTargeting();this.updateHiddenDiv();this._dialog.hide();this._updateLinkDescription();this.inform("submit")};j.prototype.updateHiddenDiv=function(){"use strict";c("DOM").empty(this._inputDiv);for(var k in this.getLocationValues().values){var l=this.getLocationValues().values[k];l.forEach(function(m){var n="feed_targeted_data["+k+"][]";c("DOM").appendContent(this._inputDiv,c("DOM").create("input",{type:"hidden",name:n,value:m}))}.bind(this))}};j.prototype.updateTargeting=function(){"use strict";throw new Error("Implement me.  Quack quack")};j.prototype.reflow=function(){"use strict";throw new Error("Implement me.  Quack quack")};j.prototype.getLocationValues=function(){"use strict";throw new Error("Implement me.  Quack quack")};j.initOnArbiterSignal=function(k,l,m,n,o,p,q,r){"use strict";var s=k.subscribe(l,function(){m.init(c("$")(n),o,p,q);k.unsubscribe(s)})};j.disableFeedTypeahead=function(k,l){"use strict";var m=k.subscribe("aftershow",function(){l.getTypeahead().getCore().setEnabled(false);k.unsubscribe(m)})};f.exports=j}),null);
__d("FeedTargetingLanguageDialog",["FeedTargetingDialog","$"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FeedTargetingDialog"));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r){"use strict";i.constructor.call(this,k,l,m,n,o);this._tokenizer=q;this._typeahead=p;this._rows=r;p.getData().addEntries(r);this.init()}j.prototype.getLocationValues=function(){"use strict";var k=[],l=[];this._tokenizer.getTokens().forEach(function(m){k.push(m.info.text);l.push(m.info.uid)});return{text:k.join(", "),values:{locales:l}}};j.prototype.updateTargeting=function(){"use strict";this._locationValues=this.getLocationValues()};j.prototype.reflow=function(){"use strict";this._locationValues=this.getLocationValues()};j.initOnArbiterSignal=function(k,l,m,n,o,p,q,r){"use strict";var s=k.subscribe(l,function(){m.init(c("$")(n),o,p,q);k.unsubscribe(s)})};j.disableFeedTypeahead=function(k,l){"use strict";var m=k.subscribe("aftershow",function(){l.getTypeahead().getCore().setEnabled(false);k.unsubscribe(m)})};j.prototype.reset=function(){"use strict";this._tokenizer.reset();this._updateLinkDescription()};f.exports=j}),null);
__d("FeedTargetingLocationDialog",["CSS","Event","FeedTargetingComposerTagger","FeedTargetingDialog","$"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FeedTargetingDialog"));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();i.constructor.call(this,k,l,o,p,q);this._radios=m;this._root=k;this._sections=n;if(u)this._locationValues=u;this._total=r;this._pageID=s;this._loadingText=t;this._targetingRefreshAttempt=0;this._isPage=v;l.subscribe("aftershow",this.updateTargetCount.bind(this));this.init()}j.prototype.init=function(){"use strict";i.init.call(this);var k=this._dialog.subscribe("aftershow",function(){this._radios.forEach(function(l){c("Event").listen(l,"click",this.reflow.bind(this));var m=c("$")(l).value;this._sections[m].subscribe("change",this._onChange.bind(this))}.bind(this));this._dialog.unsubscribe(k)}.bind(this))};j.prototype._onChange=function(){"use strict";this.updateTargetCount();this.inform("change")};j.prototype.updateTargetCount=function(){"use strict";this.updateTargeting();this.refreshTargeting()};j.prototype.incrementRefreshAttempt=function(){"use strict";this._targetingRefreshAttempt++};j.prototype.getRefreshAttempt=function(){"use strict";return this._targetingRefreshAttempt};j.prototype.refreshTargeting=function(k){"use strict";if(this._isPage)c("FeedTargetingComposerTagger").refreshTargeting(0,this,c("$")(this._total),this._locationValues.values,this._pageID,this._loadingText);else c("CSS").hide(c("$")(this._total).parentNode);this.inform("refresh")};j.prototype.getLocationValues=function(){"use strict";return this._locationValues};j.prototype.updateTargeting=function(){"use strict";for(var k=0;k<this._radios.length;k++){var l=c("$")(this._radios[k]),m=l.value;if(l.checked&&m==this._sections[m].getName()){this._locationValues=this._sections[m].getLocationValues();return}}this._locationValues={}};j.prototype.reflow=function(){"use strict";for(var k=0;k<this._radios.length;k++){var l=c("$")(this._radios[k]),m=l.value;this._sections[m].conditionShow(l.checked)}this._onChange()};j.prototype.reset=function(){"use strict";for(var k in this._sections){var l=this._sections[k];l.reset()}this._locationValues={};this._updateLinkDescription()};f.exports=j}),null);
__d("FeedTargetingRow",["ArbiterMixin","CSS","DOM","Event","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m){"use strict";i.constructor.call(this);this._root=k;this._rootParent=this._root.parentNode;this._name=l;this._removeLink=m;this._targetingValuesCallbacks=[];this._targetingValuesResetCallbacks=[];this.init()}j.prototype.init=function(){"use strict";this._removeLink.onclick=this.hide.bind(this);var k=this._removeLink.parentNode;c("Event").listen(this._root,"mouseenter",function(){c("CSS").show(k)});c("Event").listen(this._root,"mouseleave",function(){c("CSS").hide(k)});c("CSS").hide(this._root);this.hide(this._removeLink)};j.prototype.hide=function(k){"use strict";c("DOM").remove(this._root);this.inform("remove",k)};j.prototype.removeFromDOM=function(){"use strict";c("DOM").remove(this._root)};j.prototype.show=function(){"use strict";c("DOM").appendContent(this._rootParent,this._root);c("CSS").hide(this._removeLink.parentNode);c("CSS").show(this._root);this.inform("show")};j.prototype.getTargetingValues=function(){"use strict";var k={};if(!this._root.parentNode||!c("CSS").shown(this._root))return k;this._targetingValuesCallbacks.forEach(function(l){var m=l();for(var n in m)k[n]=m[n]});return k};j.prototype.resetTargetingValues=function(){"use strict";this._targetingValuesResetCallbacks.forEach(function(k){return k()})};j.prototype.getTargetingValuesCallbacks=function(){"use strict";return this._targetingValuesCallbacks};j.registerAgeRanges=function(k,l){"use strict";__p&&__p();var m=false,n=function n(o){__p&&__p();if(m)return true;m=true;var p=k.getSelected()[0];p=p&&parseInt(p,10)||13;var q=l.getSelected()[0];q=q&&parseInt(q,10)||65;if(q<p)if(o)l.setValue(p.toString());else k.setValue(q.toString());m=false};k.subscribe("change",n.bind(null,true));l.subscribe("change",n.bind(null,false))};j.tieToSelector=function(k,l){"use strict";__p&&__p();l.subscribe("change",function(){k.inform("update")});k._targetingValuesCallbacks.push(function(){var m=l.getSelected(),n={};if(m.length){var o=l.getName().substr("feed_targeted_data[".length);o=o.substr(0,o.length-1);n[o]=m}return n});k._targetingValuesResetCallbacks.push(l.clearInputElements.bind(l));k.subscribe("show",l.updateHiddenInput.bind(l));l.clearInputElements()};j.tieToLocationDialog=function(k,l,m){"use strict";if(m)k.show();l.subscribe("submit",function(){k.inform("update")});k._targetingValuesCallbacks.push(function(){return l.getLocationValues().values});k._targetingValuesResetCallbacks.push(l.reset.bind(l))};f.exports=j}),null);
__d("XPubcontentTopicTagController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/topictagger/extract_topics/",{essay:{type:"StringVector",required:true}})}),null);
__d("FeedTargetingTopicsDialog",["Arbiter","FeedTargetingDialog","$","Token","XPubcontentTopicTagController","AsyncRequest","DOMQuery"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FeedTargetingDialog"));i=h&&h.prototype;function j(k,l,m,n,o,p,q){"use strict";i.constructor.call(this,k,l,m,n,o);this._topicValues={text:"",values:{}};this._tokenizer=q;this._typeahead=p;this._autotopics=[];c("Arbiter").subscribe("composer/linkScraped",this._onLinkScraped.bind(this));c("Arbiter").subscribe("composer/linkRemoved",this._onLinkRemoved.bind(this));this.init()}j.prototype._onTopicTaggerCallComplete=function(k){"use strict";this._autotopics=k.getPayload();this._autotopics.forEach(function(l){var m={};m.text=l.wikiUrl;m.uid=l.bestPageId;m.freeform=true;var n=new(c("Token"))(m,l.bestPageId);this._tokenizer.addToken(n)},this)};j.prototype._onLinkRemoved=function(k){"use strict";this.reset()};j.prototype._onLinkScraped=function(k,l){"use strict";__p&&__p();var m=c("DOMQuery").scry(l,'input[name="attachment[params][title]"]');if(m.length>0)m=m[0].getAttribute("value");else m="";var n=c("DOMQuery").scry(l,'input[name="attachment[params][summary]"]');if(n.length>0)n=n[0].getAttribute("value");else n="";var o=c("XPubcontentTopicTagController").getURIBuilder().setStringVector("essay",[m,n]).getURI();new(c("AsyncRequest"))().setURI(o).setHandler(this._onTopicTaggerCallComplete.bind(this)).send()};j.prototype.getLocationValues=function(){"use strict";var k=[],l=[];this._tokenizer.getTokens().forEach(function(m){k.push(m.info.text);l.push(m.info.uid)});return{text:k.join(", "),values:{fan_of:l}}};j.prototype.updateTargeting=function(){"use strict";this._locationValues=this.getLocationValues()};j.prototype.reflow=function(){"use strict";this._locationValues=this.getLocationValues()};j.prototype.reset=function(){"use strict";this._tokenizer.reset();this._updateLinkDescription()};j.initOnArbiterSignal=function(k,l,m,n,o,p,q,r){"use strict";var s=k.subscribe(l,function(){m.init(c("$")(n),o,p,q);k.unsubscribe(s)})};f.exports=j}),null);
__d("OptionSelectableMenu",["ArbiterMixin","DOM","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r){"use strict";__p&&__p();i.constructor.call(this);this._root=k;this._link=l;this._menu=m;this._hiddenDiv=n;this._name=o;this._emptyText=p;this._selected=q;this._multiple=r;this.init()}j.prototype.init=function(){"use strict";this._menu.subscribe("change",function(k,l){this._onChange(l)}.bind(this));this.updateHiddenInput()};j.prototype._onChange=function(k){"use strict";__p&&__p();var l=[],m=[];if(!(k instanceof Array))k=[k];k.forEach(function(n){l.push(n.label);m.push(n.value)});this._selected=m;c("DOM").setContent(this._link,c("DOM").create("span",{"class":"uiFeedTargeterText"},l.length?l.join(","):this._emptyText));this.updateHiddenInput();this.inform("change")};j.prototype.updateHiddenInput=function(){"use strict";c("DOM").empty(this._hiddenDiv);var k=this._name;if(this._multiple)k+="[]";this._selected.forEach(function(l){c("DOM").appendContent(this._hiddenDiv,c("DOM").create("input",{type:"hidden",name:k,value:l}))}.bind(this))};j.prototype.clearInputElements=function(){"use strict";c("DOM").empty(this._hiddenDiv)};j.prototype.getSelected=function(){"use strict";if(this._hiddenDiv.children.length===0)return[];else return this._selected};j.prototype.getName=function(){"use strict";return this._name};j.prototype.setValue=function(k){"use strict";return this._menu.setValue(k)};f.exports=j}),null);
__d("ComposerXProductTaggerTokenizer",["ComposerVideoUploadActions","ComposerXTokenizer"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ComposerXTokenizer"));i=h&&h.prototype;function j(k,l,m,n){"use strict";i.constructor.call(this,k,l,m);this._composerID=n}j.prototype.addToken=function(k){"use strict";i.addToken.call(this,k);this._updateNumberProducts()};j.prototype.removeToken=function(k){"use strict";i.removeToken.call(this,k);this._updateNumberProducts()};j.prototype._updateNumberProducts=function(){"use strict";c("ComposerVideoUploadActions").updateNumProducts(this._composerID,this.tokens.length)};f.exports=j}),null);
__d("ComposerXTimelineTagger",["cx","Arbiter","ComposerXPlusTagger","CSS","DOMQuery","Event","Focus"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("ComposerXPlusTagger"));j=i&&i.prototype;k.prototype.init=function(l,m){"use strict";__p&&__p();j.init.call(this,l);if(!m)m="backdateicon";this._datepicker=this.getTimelineDatepickerComponent(l);this._datepickerIcon=l.getComponent(m);if(this._datepickerIcon&&this._datepicker){this.registerTagger("date",this._datepicker,this._datepickerIcon);var n=c("DOMQuery").find(this._datepicker.element,"select.periodMenu.yearMenu");this.setTaggerCallback("date",c("Focus").set.bind(null,n));this._subscriptions.push(this._datepicker.instance.subscribe("changed",this._handleDateChanged.bind(this)));this._subscriptions.push(c("Arbiter").subscribe("Datepicker/schedulingPosts",this._handleDateChanged.bind(this)));this._subscriptions.push(c("Arbiter").subscribe("Datepicker/resetSchedulingPosts",function(){this._handleDateChanged("Datepicker/resetSchedulingPosts");this.hideTaggers()}.bind(this)));c("Event").listen(this._datepickerIcon.element,"click",function(){c("Arbiter").inform("Datepicker/clicked")})}c("Arbiter").inform("ComposerXTimelineTagger/init",{composerTimelineTagger:this,datePickerElement:this._datepicker?this._datepicker.element:null,datePickerInstance:this._datepicker?this._datepicker.instance:null},c("Arbiter").BEHAVIOR_STATE)};k.prototype.getTimelineDatepickerComponent=function(l){"use strict";return l.getComponent("backdatepicker")};k.prototype._handleDateChanged=function(event){"use strict";var l=this._datepicker.instance.isSet();c("CSS").conditionClass(this._datepickerIcon.element,"_4_na",(l||event=="Datepicker/schedulingPosts")&&event!="Datepicker/resetSchedulingPosts")};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerXPagesTimelineTagger",["csx","cx","ComposerXTimelineTagger","CSS","DOM","PagesEventObserver","getElementText"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("ComposerXTimelineTagger"));k=j&&j.prototype;function l(m,n,o,p,q,r,s){"use strict";k.constructor.call(this,n);this._useWith=m;this._dialog=o;this._showSponsor=q;this._showProduct=r;this._showMessenger=s;this._defaultPostText=null;this._root=null}l.prototype.initAndRegisterWithTagger=function(){"use strict";if(this._useWith)k.initAndRegisterWithTagger.call(this)};l.prototype.init=function(m){"use strict";__p&&__p();k.init.call(this,m);this._root=m.getRoot();this._defaultPostText=c("getElementText")(this._getPostButton());if(this._showSponsor){this._sponsorIcon=m.getComponent("sponsoricon");this._sponsorTagger=m.getComponent("sponsortagger");this._sponsorTaggerPrefix=m.getComponent("sponsortaggerprefix");this._sponsorLearnMore=m.getComponent("sponsorlearnmore");this._sponsorRelationshipCheckbox=m.getComponent("sponsorrelationshipcheckbox");this._sharedToSponsorCheckbox=m.getComponent("sharedtosponsorcheckbox");this._initSponsor()}if(this._showProduct){this._productIcon=m.getComponent("producticon");this._productTagger=m.getComponent("producttagger");this._initProduct()}if(this._showMessenger){this._messengerIcon=m.getComponent("messengericon");this._messengerTagger=m.getComponent("messengertagger");this._initMessenger()}if(this._dialog)this._dialog.show();var n=m.getComponent("pagesbackdatepicker");if(n&&n.instance)n.instance.subscribe("changePostButton",function(event,o){var p=o.newText,q=this._getPostButton(),r="padding: 0 6px";if(!p){p=this._defaultPostText;r="none"}if(q)q.setAttribute("style",r);this._changePostButtonText(p)}.bind(this))};l.prototype._initTargeting=function(){"use strict";if(this._targeting){this._targeting.instance.subscribe("refresh",function(){var m=this._targeting.instance.isTargetingSet();c("CSS").conditionClass(this._targetingIcon.element,"selected",m);c("CSS").conditionClass(this._targetingIcon.element,"_21yl",m)}.bind(this));this.registerTagger("targeting",this._targeting,this._targetingIcon);this.setTaggerCallback("targeting",this._logTargetingOpen.bind(this))}};l.prototype._initSponsor=function(){"use strict";__p&&__p();if(this._sponsorTagger){this.registerTagger("sponsor",this._sponsorTagger,this._sponsorIcon);this.initTaggerInput("sponsor",this._sponsorTagger.instance.getInput());this.registerTaggerSideElement("sponsor","sponsor_prefix",this._sponsorTaggerPrefix);this.registerTaggerSideElement("sponsor","sponsor_learn_more",this._sponsorLearnMore);if(this._sponsorRelationshipCheckbox)this.registerTaggerSideElement("sponsor","sponsor_relationship_checkbox",this._sponsorRelationshipCheckbox);if(this._sharedToSponsorCheckbox)this.registerTaggerSideElement("sponsor","shared_to_sponsor_checkbox",this._sharedToSponsorCheckbox);this._subscriptions.push(this._sponsorTagger.instance.subscribe(["addToken","removeToken","init"],this._updateSponsorTaggerUI.bind(this)))}};l.prototype._updateSponsorTaggerUI=function(){"use strict";if(!this._sponsorTagger||!this._sponsorIcon)return;c("CSS").conditionClass(this._sponsorIcon.element,"_9k-",this._sponsorTagger.instance.getTokens().length>0)};l.prototype.getMoreExtraTaggedTextData=function(){"use strict";if(!this._hasProductTagger())return{};var m=this._productTagger.instance.getTokens();if(m.length===0)return{};return{productIDs:m.map(function(n){return n.info.uid})}};l.prototype._initProduct=function(){"use strict";if(this._productTagger){this.registerTagger("product",this._productTagger,this._productIcon);this.initTaggerInput("product",this._productTagger.instance.getInput());this._subscriptions.push(this._productTagger.instance.subscribe(["addToken","removeToken","init"],this._updateProductTaggerUI.bind(this)))}};l.prototype._initMessenger=function(){"use strict";if(this._messengerTagger)this.registerTagger("messenger",this._messengerTagger,this._messengerIcon)};l.prototype._hasProductTagger=function(){"use strict";return this._productTagger&&this._productIcon};l.prototype._hasMessengerTagger=function(){"use strict";return this._messengerTagger&&this._messengerIcon};l.prototype._updateProductTaggerUI=function(){"use strict";if(!this._hasProductTagger())return;this.updateTaggedText();c("CSS").conditionClass(this._productIcon.element,"_3__c",this._productTagger.instance.getTokens().length>0)};l.prototype._logTargetingOpen=function(){"use strict";if(this._config.targetIsPage===true&&this._config.targetID){var m={page_id:this._config.targetID,event_name:"composer_targeting_open"};c("PagesEventObserver").logData_DEPRECATED(m,c("PagesEventObserver").VITAL_WAIT)}};l.prototype.getTimelineDatepickerComponent=function(m){"use strict";var n=m.getComponent("pagesbackdatepicker");if(!n)return null;return{instance:n.instance.getDatepicker(),element:n.element}};l.prototype._getPostButton=function(){"use strict";if(!this._root)return null;var m=c("DOM").scry(this._root,"._1dso ._11b");return m.length>0?m[0]:null};l.prototype._changePostButtonText=function(m){"use strict";var n=this._getPostButton();if(m&&n)c("DOM").setContent(n,m)};l.prototype.initAndRegisterInterestTagger=function(){"use strict"};f.exports=l}),null);
__d("ComposerXPagesTimelineTaggerWithOG",["ComposerXOGTaggerBehavior","ComposerXPagesTimelineTagger","classWithMixins","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("classWithMixins")(c("ComposerXPagesTimelineTagger"),c("mixin")(c("ComposerXOGTaggerBehavior"))));i=h&&h.prototype;j.prototype.init=function(k){"use strict";i.init.call(this,k);this.initOGTagger(k)};j.prototype.cleanup=function(){"use strict";i.cleanup.call(this);this.cleanupOGTagger()};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("XBrandedContentComposerInterceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/branded_content/composer/intercept/",{composer_post_text:{type:"String"},target_id:{type:"String"},sponsor_id:{type:"String"}})}),null);
__d("ComposerXVideoUploadAttachment",["csx","cx","fbt","Promise","ActorURI","$","Arbiter","AsyncRequest","BanzaiODS","Bootloader","BrandedContentVideoUploadComposerInterceptDialog.react","Button","ComposerWaterfallEvent","ComposerXAttachment","ComposerXAttachmentUtils","ComposerXController","ComposerXMarauderLogger","ComposerVideoPostUtils","CSS","ErrorDialog","Event","Form","OptimisticVideoPostUtils","Parent","PrivacyConst","ProfileVideoWWWFrontendActionTypedLogger","React","ReactDOM","ReactComposerMultilingualStatusStore","ReactObjectiveFirstPagesComposerGlobalFlags","Run","SubscriptionsHandler","VideoContainerType","VideoCopyrightAPI","VideoSurveySource","VideoUploadFile","VideoUploadProcessingDialog.react","XBrandedContentComposerInterceptController","XVideoManagerSurveyController","ShowsVideoDataSource","ge","ifRequired"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m="/ajax/composerx/attachment/status/";k=babelHelpers.inherits(n,c("ComposerXAttachment"));l=k&&k.prototype;function n(o,p){"use strict";__p&&__p();l.constructor.call(this);p=p||{};this.root=o;this.cancelButton=p.cancelButton;this.originalComposerID=p.originalComposerID;this.processingDialogContainer=p.processingDialogContainer;this.progressBar=p.progressBar;this.submitButton=p.submitButton;this.tagger=p.tagger;this.videoUploader=p.videoUploader;this.copyrightConfirmationDialog=p.copyrightConfirmationDialog;this.attachmentClassName="_92";this.postActionsButton=p.post_actions_button;this.videoPreview=p.videoPreview;this.isProfileVideo=p.isProfileVideo;this.isUploading=false;this.postPending=false;this.userDisplayName=p.userDisplayName;this.userProfilePictureURI=p.userProfilePictureURI;this.userCanSeeOptimisticPost=p.userCanSeeOptimisticPost;this.isPageToPage=p.isPageToPage;this.isProfileVideo=p.isProfileVideo;this.shouldShowNewEditDialog=p.shouldShowNewEditDialog;this.shouldShowVideoEditButton=p.shouldShowVideoEditButton;this.pageID=p.pageID;this.refreshTimeout=p.refreshTimeout;this.shouldRefreshAfterEncoding=p.shouldRefreshAfterEncoding;this.shouldShowVideoLibrary=p.shouldShowVideoLibrary;this.canSeeVideoManagerSurvey=p.canSeeVideoManagerSurvey;this.composerIntercept=p.composerIntercept;this.showBrandedContentIntercept=p.showBrandedContentIntercept;this.isBrandedContentInterceptShown=false}n.prototype.getRoot=function(){"use strict";return this.root};n.prototype.getComposerRoot=function(){"use strict";var o=this.getComposerID(),p=this.getRoot();while(p!=null){p=p.parentNode;if(p&&p.id==o)break}return p};n.prototype.initWithComponents=function(){"use strict";__p&&__p();c("Button").setEnabled(this.submitButton,false);var o=this.getComponent("maininput");c("CSS").show(this.cancelButton);this.videoFileSelected=false;this.uploadFinished=false;this.tagger.init(this);this.subscriptionsHandler=new(c("SubscriptionsHandler"))();if(!this.filesAddedSubscription)this.filesAddedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesAdded/"+this.getComposerID()+"/videoupload",this.onFileSelected.bind(this));if(!this.filesDroppedSubscription)this.filesDroppedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesDropped/"+this.getComposerID()+"/videoupload",this.onFileDropped.bind(this));var p=this.getComposerRoot();c("ComposerXAttachmentUtils").initMentions(o,j._("Say something about this video..."),p);this.initVideoUploader()};n.prototype.initVideoUploader=function(){"use strict";__p&&__p();var o=this.getComposerRoot();c("ComposerXController").registerConditionForComposerCancel(o,function(){return this.videoFileSelected}.bind(this));c("Run").onLeave(function(){this.videoUploader.abandon()}.bind(this));c("Run").onUnload(function(){this.videoUploader.abandon()}.bind(this));this.subscriptionsHandler.addSubscriptions(c("Event").listen(this.submitButton,"click",this.onSubmit.bind(this)),this.videoUploader.subscribe("upload-finished",this.handleUploadFinished.bind(this)),this.videoUploader.subscribe("upload-failed",this.handleUploadFailed.bind(this)),this.videoUploader.subscribe("post-finished",this.handlePostFinished.bind(this)),this.videoUploader.subscribe("post-failed",this.handlePostFailed.bind(this)));if(this.cancelButton)this.subscriptionsHandler.addSubscriptions(c("Event").listen(this.cancelButton,"click",this.onCancel.bind(this)));if(this.copyrightConfirmationDialog)this.subscriptionsHandler.addSubscriptions(this.copyrightConfirmationDialog.subscribe("confirm",this.handleCopyrightConfirmation.bind(this)));if(this.postActionsButton!=null)this.postActionsButton.initHiddenInputs(this.getComponent("pabhiddeninputs").instance)};n.prototype.cleanup=function(){"use strict";__p&&__p();this.videoFileSelected=false;this.postPending=false;this.isUploading=false;if(this.tagger)this.tagger.cleanup();this.subscriptionsHandler.release();if(this.fileInput)this.fileInput.clear();this.videoUploader.abandon();this.hideUploadProgressBar();if(this.progressBar)this.progressBar.reset()};n.prototype.canSwitchAway=function(){"use strict";return!this.videoUploader.isSessionInProgress()};n.prototype.reset=function(){"use strict";if(this.tagger)this.tagger.reset()};n.prototype.abandon=function(){"use strict";this.videoUploader.abandon();this.isUploading=false;this.uploadFinished=false;this.hideUploadProgressBar();this.progressBar.reset();c("Button").setEnabled(this.$ComposerXVideoUploadAttachment1,true);c("CSS").show(this.$ComposerXVideoUploadAttachment2)};n.showTooManyFilesErrorDialog=function(){"use strict";c("ErrorDialog").show(j._("Too many files"),j._("Please select only one video file at a time."))};n.prototype.onFileSelected=function(o,p){"use strict";__p&&__p();this.videoFileSelected=true;this.fileInput=p.fileInput;this.videoFile=c("VideoUploadFile").fromFileInput(this.fileInput.getInput());var q=this.videoFile.getFileInput();if(q.files&&q.files.length>1){n.showTooManyFilesErrorDialog();this.onCancel()}if(this.videoPreview){this.videoPreview.setVideo(q);this.upload()}c("Button").setEnabled(this.submitButton,true);this.logComposerWaterfallEvent(c("ComposerWaterfallEvent").VIDEO_ADD)};n.prototype.onFileDropped=function(o,p){"use strict";this.videoFileSelected=true;if(p.files&&p.files.length>1){n.showTooManyFilesErrorDialog();this.onCancel()}this.videoFile=c("VideoUploadFile").fromFile(p.files[0]);c("Button").setEnabled(this.submitButton,true)};n.prototype.handleUploadFinished=function(){"use strict";if(this.uploadFinished)c("BanzaiODS").bumpEntityKey("www_composer_video_upload","unexpected_upload_finished");this.isUploading=false;this.uploadFinished=true;this.hideUploadProgressBar();if(this.isPostPending())this.postUpload()};n.prototype.handleUploadFailed=function(event,o){"use strict";this.isUploading=false;if(o)c("ErrorDialog").show(o.error_summary,o.error_description);this.hideUploadProgressBar();c("ComposerXController").getAttachment(this.getComposerID(),m)};n.prototype.getPrivacySetting=function(o){"use strict";var p=parseInt(o.privacyx,10);switch(p){case c("PrivacyConst").PostParam.FRIENDS:return c("PrivacyConst").BaseValue.ALL_FRIENDS;case c("PrivacyConst").PostParam.FRIENDS_OF_FRIENDS:return c("PrivacyConst").BaseValue.FRIENDS_OF_FRIENDS;case c("PrivacyConst").PostParam.ONLY_ME:return c("PrivacyConst").BaseValue.NOBODY;default:var q=!!o.targeted_privacy_data;return q?c("PrivacyConst").BaseValue.CUSTOM:c("PrivacyConst").BaseValue.EVERYONE}};n.prototype.handlePostFinished=function(event,o){"use strict";__p&&__p();var p=c("ge")(this.getComposerID()),q=void 0;if(this.isProfileVideo)q=j._("Your profile is updating...");c("Arbiter").inform("videoUpload/complete",{videoID:o.video_id,containerType:o.video_container,copyrighted:o.copyrighted,videoAssetID:o.video_asset_id,videoTitle:o.video_title,videoDescription:o.xhpc_message_text,videoThumbnailBlob:o.thumb,userDisplayName:this.userDisplayName,userProfilePictureURI:this.userProfilePictureURI,isScheduledPost:!!o.scheduled,isHiddenFromTimeline:o.no_story,isSecret:o.secret,privacySetting:this.getPrivacySetting(o),isPageToPage:this.isPageToPage,isDraft:o.draft=="true",progressCompleteText:q,shouldShowNewEditDialog:this.shouldShowNewEditDialog,shouldShowVideoEditButton:this.shouldShowVideoEditButton,originalComposerID:this.originalComposerID,pageID:this.pageID,refreshTimeout:this.refreshTimeout,shouldRefreshAfterEncoding:this.shouldRefreshAfterEncoding,shouldShowVideoLibrary:this.shouldShowVideoLibrary,isEpisode:o.episode_data_json!==null&&o.episode_data_json!==undefined&&JSON.parse(o.episode_data_json).isEpisode});var r=babelHelpers["extends"]({},o,{isPageToPage:this.isPageToPage}),s=!c("OptimisticVideoPostUtils").shouldShowOptimisticPost(r)||!this.userCanSeeOptimisticPost;if(this.processingDialogContainer&&s)c("ReactDOM").render(c("React").createElement(c("VideoUploadProcessingDialog.react"),{videoID:o.video_id,show:true,shouldShowNewEditDialog:this.shouldShowNewEditDialog,pageID:this.pageID,isSecretVideo:o.secret,shouldShowVideoLibrary:this.shouldShowVideoLibrary}),this.processingDialogContainer);this.$ComposerXVideoUploadAttachment3();this.hideThrobber(p);c("ComposerXController").reset(p)};n.prototype.handlePostFailed=function(event,o){"use strict";this.hideThrobber(this.getComposerID());c("ErrorDialog").show(o.error_summary,o.error_description);c("Button").setEnabled(this.submitButton,true);c("CSS").show(this.cancelButton)};n.prototype.showCopyrightDialog=function(){"use strict";this.copyrightConfirmationDialog.show()};n.prototype.handleCopyrightConfirmation=function(){"use strict";this.copyrightConfirmationDialog.hide();this.doSubmit();return false};n.prototype.onSubmit=function(){"use strict";__p&&__p();c("ComposerVideoPostUtils").logSphericalComposerDataIfNeeded(this.getComposerID(),true);c("ComposerVideoPostUtils").logShowsVideoData(this.getComposerID(),this.videoUploader.getVideoID(),c("ShowsVideoDataSource").UPLOAD,this.pageID);if(this.copyrightConfirmationDialog)this.showCopyrightDialog();else if(this.showBrandedContentIntercept&&!this.isBrandedContentInterceptShown)this.$ComposerXVideoUploadAttachment4();else this.doSubmit();if(this.isProfileVideo)new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("save_profile_video_click").setSessionID(this.originalComposerID).log();return false};n.prototype.doSubmit=function(){"use strict";__p&&__p();this.$ComposerXVideoUploadAttachment5();if(this.cancelButton)c("CSS").hide(this.cancelButton);c("Button").setEnabled(this.submitButton,false);if(this.videoUploader.postUserRequest)this.videoUploader.postUserRequest();if(this.uploadFinished)this.postUpload();else{if(!this.isUploading)this.upload();this.postPending=true;this.showUploadProgressBar()}};n.prototype.isPostPending=function(){"use strict";return this.postPending};n.prototype.onCancel=function(o){"use strict";this.videoUploader.cancel();this.isUploading=false;c("ComposerXController").getAttachment(this.getComposerID(),m);this.logComposerWaterfallEvent(c("ComposerWaterfallEvent").VIDEO_REMOVE)};n.prototype.postUpload=function(){"use strict";__p&&__p();this.postPending=false;this.showThrobber(this.getComposerID());var o=c("Form").serialize(this.root),p=c("ReactComposerMultilingualStatusStore").getPostData(this.getComposerID()),q={};if(this.originalComposerID)c("ifRequired")("ReactComposerCivicEngagementStore",function(r){q=r.getData(this.originalComposerID)}.bind(this));return this.getVideoStoreData().then(function(r){o=babelHelpers["extends"]({},o,r,p,q);if(!this.validateData(o))return;if(o)o.bypass_copyright_check=!!this.copyrightConfirmationDialog;if(o.create_copyright_via_api&&this.videoUploader.getVideoID())this.postCopyrightedVideoUpload(o);else this.videoUploader.post(o)}.bind(this))};n.prototype.validateData=function(){"use strict";return true};n.prototype.getVideoStoreData=function(){"use strict";return c("Promise").resolve({})};n.prototype.upload=function(){"use strict";this.isUploading=true;this.videoUploader.upload(this.videoFile)};n.prototype.showUploadProgressBar=function(){"use strict";c("CSS").addClass(this.root,"_5suz")};n.prototype.hideUploadProgressBar=function(){"use strict";c("CSS").removeClass(this.root,"_5suz")};n.prototype.showThrobber=function(o){"use strict";c("ComposerXController").showAttachmentThrobber(o)};n.prototype.hideThrobber=function(o){"use strict";c("ComposerXController").hideAttachmentThrobber(o)};n.prototype.$ComposerXVideoUploadAttachment3=function(){"use strict";if(this.canSeeVideoManagerSurvey){var o=c("XVideoManagerSurveyController").getURIBuilder().setInt("page_id",this.pageID).setEnum("source",c("VideoSurveySource").UPLOAD).getURI();new(c("AsyncRequest"))(o).send()}};n.prototype.logComposerWaterfallEvent=function(event){"use strict";if(!c("Parent").bySelector(c("$")(this.root),"._119"))return;c("ComposerXMarauderLogger").logEvent(event,this.getComposerID())};n.prototype.$ComposerXVideoUploadAttachment5=function(){"use strict";if(c("ReactObjectiveFirstPagesComposerGlobalFlags").getIsObjectiveFirstPagesComposer())c("Bootloader").loadModules(["PagesPublishingLoggingActions"],function(o){return o.postStarted()},"ComposerXVideoUploadAttachment")};n.prototype.postCopyrightedVideoUpload=function(o){"use strict";__p&&__p();var p=o.videoDurationInSec*1e3;c("VideoCopyrightAPI").copyrightVideo(o.access_token,this.pageID.toString(),this.videoUploader.getVideoID(),o,"video_upload_composer").done(function(q){o.copyrighted=false;if(o.video_container===c("VideoContainerType").COPYRIGHT_REFERENCE_VIDEO){o.video_title=o.xhpc_message;o.xhpc_message="";o.xhpc_message_text=""}this.videoUploader.post(o)}.bind(this),function(q){this.hideThrobber(this.getComposerID());c("Button").setEnabled(this.submitButton,true);c("CSS").show(this.cancelButton)}.bind(this))};n.prototype.$ComposerXVideoUploadAttachment4=function(){"use strict";__p&&__p();this.isBrandedContentInterceptShown=true;var o=c("Form").serialize(this.root),p=c("ActorURI").create(c("XBrandedContentComposerInterceptController").getURIBuilder().setString("composer_post_text",o.xhpc_message_text).setString("target_id",this.pageID).getURI(),this.pageID);new(c("AsyncRequest"))(p).setHandler(function(q){var r=q.getPayload();if(r&&r.shouldInterceptPotentialBCPost){c("ReactDOM").render(c("React").createElement(c("BrandedContentVideoUploadComposerInterceptDialog.react"),{interceptReason:r.interceptReason,text:o.xhpc_message_text,pageID:this.pageID}),this.composerIntercept);this.tagger.switchToTagger("sponsor")}else this.doSubmit()}.bind(this)).send()};f.exports=n}),null);
__d("ComposerXMessengerIconReset",["cx","CSS"],(function a(b,c,d,e,f,g,h){function i(j){c("CSS").removeClass(j.element,"_16oz");c("CSS").removeClass(j.element,"_509o")}f.exports=i}),null);
__d("ComposerXMessengerTaggerEventListener",["cx","CSS","Event","getByPath"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={attachMessengerIconOnClickListener:function j(k){__p&&__p();c("Event").listen(k,"click",function(event){__p&&__p();var k=document.getElementById("composermessengericon"),l=document.getElementById("messenger_tagger_cta_type");if(c("getByPath")(document.getElementById("messenger_tagger_cta_type"),["value"])!="MESSAGE_PAGE"){if(k)c("CSS").conditionClass(k,"_16oz",true);var m=document.getElementsByClassName("_3igh")[0];if(m)c("CSS").show(m);if(l){l=l;l.value="MESSAGE_PAGE"}}else if(k){var n=document.getElementsByClassName("_3igh")[0];if(n)c("CSS").hide(n);c("CSS").removeClass(k,"_16oz");if(l){l=l;l.value=""}}})},attachMessengerBannerOnDismissListener:function j(k){__p&&__p();c("Event").listen(k,"click",function(event){__p&&__p();var l=document.getElementById("composermessengericon");if(l)c("CSS").removeClass(l,"_16oz");var m=document.getElementsByClassName("_3igh")[0];if(m)c("CSS").hide(m);var n=document.getElementById("messenger_tagger_cta_type");if(n){n=n;n.value=""}})}};f.exports=i}),null);
__d("ComposerXMessengerTaggerReset",["CSS"],(function a(b,c,d,e,f,g){function h(i){var j=document.getElementById("messenger_tagger_cta_type");if(j!==null)j.value="";c("CSS").hide(i.element)}f.exports=h}),null);
__d("ComposerXPagesTargetingReset",["CSS"],(function a(b,c,d,e,f,g){function h(i){i.instance.reset();c("CSS").hide(i.element)}f.exports=h}),null);
__d("ComposerXPeopleTaggerReset",["CSS"],(function a(b,c,d,e,f,g){function h(i){i.instance.reset();c("CSS").hide(i.element)}f.exports=h}),null);
__d("ComposerXProductIconReset",["cx","CSS"],(function a(b,c,d,e,f,g,h){function i(j){c("CSS").removeClass(j.element,"_3__c");c("CSS").removeClass(j.element,"_509o")}f.exports=i}),null);
__d("ComposerXProductTaggerReset",["CSS"],(function a(b,c,d,e,f,g){function h(i){i.instance.reset();c("CSS").hide(i.element)}f.exports=h}),null);
__d("ModernScheduledVideoAnnouncementSubscribeMutation.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"input",type:"ScheduledVideoAnnouncementSubscribeData!",defaultValue:null}],j=[{kind:"LinkedField",alias:null,name:"scheduled_video_announcement_subscribe",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"ScheduledVideoAnnouncementSubscribeData!"}],concreteType:"ScheduledVideoAnnouncementSubscribeResponsePayload",plural:false,selections:[{kind:"ScalarField",alias:null,name:"subscribed",args:null,storageKey:null}]}];return{kind:"Request",operationKind:"mutation",name:"ModernScheduledVideoAnnouncementSubscribeMutation",id:"1625878820778072",text:null,metadata:{},fragment:{kind:"Fragment",name:"ModernScheduledVideoAnnouncementSubscribeMutation",type:"Mutation",metadata:null,argumentDefinitions:i,selections:j},operation:{kind:"Operation",name:"ModernScheduledVideoAnnouncementSubscribeMutation",argumentDefinitions:i,selections:j}}}();f.exports=h}),null);
__d("ModernScheduledVideoAnnouncementSubscribeMutation",["RelayModern","ModernScheduledVideoAnnouncementSubscribeMutation.graphql"],(function a(b,c,d,e,f,g){"use strict";var h=c("RelayModern").commitMutation,i=c("RelayModern").graphql,j=function j(){return c("ModernScheduledVideoAnnouncementSubscribeMutation.graphql")};function k(l,m,n){return h(l,{mutation:j,variables:{input:{actor_id:m.actorID,video_announcement_id:m.announcementID,subscribe:m.subscribe}},onCompleted:n&&n.onCompleted,onError:n&&n.onError})}f.exports={commit:k}}),null);
__d("ScheduledVideoAnnouncementAttachment.react",["ix","cx","fbt","CssBackgroundImage.react","Image.react","React","ModernScheduledVideoAnnouncementSubscribeMutation","VideoLink.react","RelayFBEnvironment","XUIButton.react","CurrentUser","fbglyph","formatDate","idx"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){"use strict";__p&&__p();l.constructor.call(this,n);this.$ScheduledVideoAnnouncementAttachment1=function(){var o=this.props.announcementID;if(!o)return;c("ModernScheduledVideoAnnouncementSubscribeMutation").commit(c("RelayFBEnvironment"),{actorID:c("CurrentUser").getAccountID(),announcementID:o,subscribe:!this.state.isSubscribed},{onCompleted:function(p){var q,r=((q=p)!=null?(q=q.scheduled_video_announcement_subscribe)!=null?q.subscribed:q:q)||false;this.setState({buttonDisabled:false,isSubscribed:r})}.bind(this)})}.bind(this);this.$ScheduledVideoAnnouncementAttachment2=function(){if(this.props.videoLinkData)return;this.setState({buttonDisabled:true},this.$ScheduledVideoAnnouncementAttachment1)}.bind(this);this.state={buttonDisabled:false,isSubscribed:n.isSubscribed}}m.prototype.$ScheduledVideoAnnouncementAttachment3=function(){"use strict";__p&&__p();var n=Boolean(this.props.videoLinkData),o=this.state.isSubscribed,p=null,q=null;if(n)p=j._("Watch Now");else if(o){p=j._("Reminder Set");q=c("React").createElement(c("Image.react"),{src:h("114568")})}else p=j._("Remind Me");var r=c("React").createElement(c("XUIButton.react"),{className:"_23za"+(o?" _23zc":"")+(n?" _23zd":""),disabled:this.state.buttonDisabled,image:q,label:p,onClick:this.$ScheduledVideoAnnouncementAttachment2});if(n)return c("React").createElement(c("VideoLink.react"),this.props.videoLinkData,r);else return r};m.prototype.$ScheduledVideoAnnouncementAttachment4=function(){"use strict";if(this.props.videoLinkData)return j._("Now Released");return c("formatDate")(this.props.scheduledTime,"g:ia M j")};m.prototype.$ScheduledVideoAnnouncementAttachment5=function(){"use strict";return c("React").createElement("div",null,c("React").createElement("div",{className:"_23zh"},c("React").createElement(c("Image.react"),{className:"_23zj",src:this.props.showmarkURI}),c("React").createElement("div",{className:"_23zk"},this.$ScheduledVideoAnnouncementAttachment4()),c("React").createElement("div",{className:"_23zl"},this.props.title)),c("React").createElement("div",{className:"_23zm"},this.$ScheduledVideoAnnouncementAttachment3()))};m.prototype.render=function(){"use strict";return c("React").createElement(c("CssBackgroundImage.react"),{className:"_23zn"+(this.props.isPreview?" _3q2v":""),imageURI:this.props.backgroundImageURI},c("React").createElement("div",{className:"_23zo"},c("React").createElement("div",{className:"_23zp"},this.$ScheduledVideoAnnouncementAttachment5())))};f.exports=m}),null);
__d("VideoScheduleAnnouncementPostPreview.react",["cx","fbt","React","XUIText.react","XUIGrayText.react","StoryProfile.react","ComposerVideoUploadStore","ScheduledVideoAnnouncementAttachment.react","CenteredContainer.react","PrivacyConst"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){if(!this.props.showPreview)return c("React").createElement(c("CenteredContainer.react"),{className:"_3xz4",fullHeight:true,vertical:true},c("React").createElement(c("XUIGrayText.react"),{size:"meta1"},i._("Select Announcement Post in order to see preview")));var m=this.props.config,n=m.profilePic,o=m.profileURL,p=m.profileName,q=this.props.composerID,r=c("ComposerVideoUploadStore").getTitle(q),s=c("ComposerVideoUploadStore").getThumbnail(q);return c("React").createElement("div",{className:"_3xz5"},c("React").createElement(c("StoryProfile.react"),{profilePicture:n,profileURL:o,username:p,uploadTime:i._("Just Now"),description:i._("scheduled a new video"),privacySetting:c("PrivacyConst").BaseValue.EVERYONE}),c("React").createElement(c("XUIText.react"),{className:"_3-8o",display:"block"},this.props.title),c("React").createElement(c("ScheduledVideoAnnouncementAttachment.react"),{isSubscribed:false,scheduledTime:this.props.scheduledTime/1e3,title:r,backgroundImageURI:s.getURL(),isPreview:true}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoScheduleAnnouncementPostSection.react",["cx","fbt","React","XUICheckboxInput.react","Image.react","InputLabel.react","Layout.react","EditorState","MentionsInputUtility","getMentionsInputDecorator","getMentionsTextForContentState","VideoEditMentionsTextArea.react","WebAsyncSearchSource"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.onMessageChange=function(p){var q=c("getMentionsTextForContentState")(p.getCurrentContent());this.setState({messageEditorState:p});this.props.onChange(this.state.announcementToggle,q)}.bind(this);this.state={announcementToggle:true,messageEditorState:this.$VideoScheduleAnnouncementPostSection1(o.message)}}n.prototype.$VideoScheduleAnnouncementPostSection1=function(o){if(o)return c("MentionsInputUtility").createFromTextWithMentions(o,c("getMentionsInputDecorator")());return c("EditorState").createEmpty(c("getMentionsInputDecorator")())};n.prototype.render=function(){var o=c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.announcementToggle,onChange:function(){this.props.onChange(!this.state.announcementToggle);this.setState({announcementToggle:!this.state.announcementToggle})}.bind(this)});return c("React").createElement("div",{className:"_3-8-"},c("React").createElement(c("InputLabel.react"),{label:i._("Announcement Post")},o),this.$VideoScheduleAnnouncementPostSection2())};n.prototype.$VideoScheduleAnnouncementPostSection2=function(){if(!this.state.announcementToggle)return null;return c("React").createElement("div",{className:"_3-8x _t0j"},c("React").createElement(c("Layout.react"),{className:"_2rgz"},c("React").createElement(l,{className:"_2rg-"},c("React").createElement(c("Image.react"),{src:this.props.profilePic})),c("React").createElement(m,null,c("React").createElement(c("VideoEditMentionsTextArea.react"),{className:"_2rg_",placeholder:i._("Say something about this upcoming video..."),searchSource:this.props.mentionsSource,editorState:this.state.messageEditorState,onChange:this.onMessageChange,textWithMentions:this.props.message}))))};f.exports=n}),null);
__d("PostScheduleAndPostEndDialog.react",["ix","cx","fbt","DatePickerRestraints","ExpirationType","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","React","ReactLayeredComponentMixin_DEPRECATED","XUIAmbientNUX.react","XUICheckboxInput.react","XUIDateTimePicker.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIGrayText.react","XUINotice.react","XUIText.react","InputLabel.react","Image.react","Layout.react","VideoScheduleAnnouncementPostSection.react","VideoScheduleAnnouncementPostPreview.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("Layout.react").Column,l=c("Layout.react").FillColumn,m=c("React").PropTypes,n=60*1e3,o=60*n,p=24*60*60*1e3,q=30,r=6*q*p,s=11,t=450,u=857,v=325,w=c("React").createClass({displayName:"PostScheduleAndPostEndDialog",mixins:[c("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{initialPublishDate:m.instanceOf(Date),initialPostEndDate:m.instanceOf(Date),isReschedule:m.bool,timezoneStr:m.string.isRequired,onSubmit:m.func.isRequired,defaultScheduledTimeDelta:m.number,showPostEndDate:m.bool,showExpire:m.bool,showExpireNux:m.bool,onNuxAcked:m.func,submitLabel:m.string,canCreateAnnouncementPost:m.bool,announcementPostConfig:m.object,composerID:m.string},getDefaultProps:function x(){return{defaultScheduledTimeDelta:s*n}},getInitialState:function x(){return{shown:false,publishDate:this.props.initialPublishDate?this.props.initialPublishDate:new Date(Date.now()+this.props.defaultScheduledTimeDelta),postEndDate:this.props.initialPostEndDate?this.props.initialPostEndDate:new Date(Date.now()+o),scheduleToggle:true,postEndToggle:false,expireDate:new Date(Date.now()+o),expireToggle:false,expirationType:c("ExpirationType").HIDE,showNux:false,announcementToggle:this.props.canCreateAnnouncementPost,announcementTitle:this.props.announcementPostConfig?this.props.announcementPostConfig.defaultMessage:""}},show:function x(){var y=this.getInitialState();y.showNux=this.props.showExpireNux;y.shown=true;this.setState(y)},_onNuxClose:function x(){this.setState({showNux:false});this.props.onNuxAcked&&this.props.onNuxAcked()},renderLayers:function x(){var y=this.props.isReschedule?j._("Reschedule Post"):j._("Schedule Post"),z=this.props.submitLabel?this.props.submitLabel:this.state.scheduleToggle?this.props.isReschedule?j._("Reschedule"):j._("Schedule"):j._("Publish"),A=null;if(this.state.showNux&&this.refs.expirationToggle)A=c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:this._getContextRef,onCloseButtonClick:this._onNuxClose,position:"left",shown:true},j._("You can now choose when your post will unpublish."));var B=this._renderInvalidTimeNotice();return c("React").createElement("div",null,c("React").createElement(c("XUIDialog.react"),{shown:this.state.shown,width:this.props.canCreateAnnouncementPost?u:t,fixedTopPosition:v,className:"_yjl"},c("React").createElement(c("XUIDialogTitle.react"),null,y),c("React").createElement(c("XUIDialogBody.react"),{className:"_hg8"},this._renderBody(B)),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogCancelButton.react"),{className:"_3-90"}),c("React").createElement(c("XUIDialogButton.react"),{action:"confirm",label:z,onClick:this._onSubmitClick,disabled:B!==null,use:"confirm"}))),A)},_renderBody:function x(y){if(this.props.canCreateAnnouncementPost)return c("React").createElement(c("Layout.react"),null,c("React").createElement(k,null,this._renderScheduledForm(y)),c("React").createElement(l,null,this._renderAnnouncementPostPreview()));return this._renderScheduledForm(y)},_renderAnnouncementPostPreview:function x(){return c("React").createElement("div",{className:"_yjn"},c("React").createElement("div",null,c("React").createElement(c("Image.react"),{src:h("126073")}),c("React").createElement(c("XUIGrayText.react"),{size:"meta1",weight:"bold",className:"_yko"},j._("Announcement Preview"))),c("React").createElement(c("VideoScheduleAnnouncementPostPreview.react"),{config:this.props.announcementPostConfig||{},showPreview:this.state.announcementToggle,title:this.state.announcementTitle,scheduledTime:this.state.publishDate.getTime(),composerID:this.props.composerID}))},_renderScheduledForm:function x(y){var z=c("React").createElement(c("XUICheckboxInput.react"),{ref:"postEndToggle",checked:this.state.postEndToggle,onChange:function(){return this.setState({postEndToggle:!this.state.postEndToggle})}.bind(this)});return c("React").createElement("div",{className:"_ykp"},c("React").createElement("div",{className:"_t0h"},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},j._("Publishing Schedule"))),c("React").createElement(c("InputLabel.react"),{label:j._("Publication")},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.scheduleToggle,onChange:function(){return this.setState({scheduleToggle:!this.state.scheduleToggle})}.bind(this)})),c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1",display:"block",className:"_t0j"},j._("Select a date and time in the future for when you want your post to publish.")),this._renderSchedule(),this._renderAnnouncementPostSection(),this._renderExpireSection(),c("React").createElement("div",{className:"_t0k"},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},j._("Distribution Schedule"))),c("React").createElement(c("InputLabel.react"),{label:j._("Stop News Feed Distribution")},z),c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1",display:"block",className:"_t0j"},j._("Select a date and time in the future for when you want your post to stop showing in News Feed. The post will still be visible, but News Feed distribution will end.")),this._renderPostEndDate(),y)},_isPublishTimeValid:function x(){if(!this.state.scheduleToggle)return true;var y=this.state.publishDate.getTime(),z=Date.now()+10*n,A=Date.now()+r;return y>z&&y<A},_isPostEndOrExpireTimeValid:function x(y){var z=this.state.publishDate.getTime(),A=Date.now()+10*n,B=Date.now()+r;if(this.state.scheduleToggle)A=z+10*n;return y>=A&&y<=B},_renderSchedule:function x(){if(!this.state.scheduleToggle)return null;return c("React").createElement("div",null,c("React").createElement(c("XUIDateTimePicker.react"),{allowEmpty:false,dateRestraints:[c("DatePickerRestraints").enforceDateIsNoEarlierThan(new Date(Date.now()-p)),c("DatePickerRestraints").enforceDateIsNoLaterThan(new Date(Date.now()+r))],className:"_3-8x _t0j",date:this.state.publishDate,onChange:function(y){return this.setState({publishDate:y})}.bind(this),timezone:this.props.timezoneStr}))},_renderAnnouncementPostSection:function x(){if(!this.props.canCreateAnnouncementPost||!this.state.scheduleToggle)return null;var y=this.props.announcementPostConfig||{};return c("React").createElement(c("VideoScheduleAnnouncementPostSection.react"),{message:this.state.announcementTitle,mentionsSource:y.mentionsSource,profilePic:y.profilePic,onChange:this._onAnnouncementChange})},_onAnnouncementChange:function x(y,z){if(z!==undefined)this.setState({announcementTitle:z,announcementToggle:y});else this.setState({announcementToggle:y})},_renderExpireSection:function x(){if(!this.props.showExpire)return null;var y=c("React").createElement(c("XUICheckboxInput.react"),{ref:"expirationToggle",checked:this.state.expireToggle,onChange:function(){return this.setState({expireToggle:!this.state.expireToggle,showNux:false})}.bind(this)});return c("React").createElement("div",{className:"_3-8-"},c("React").createElement(c("InputLabel.react"),{label:j._("Expiration")},y),c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1",display:"block",className:"_t0j"},j._("When a post expires, it will no longer be visible to the public. Page admins can still view unpublished posts and their Insights."))),this._renderExpire())},_renderExpire:function x(){if(!this.state.expireToggle)return null;return c("React").createElement("div",{className:"_3-8x _t0j"},c("React").createElement(c("XUIDateTimePicker.react"),{allowEmpty:false,dateRestraints:[c("DatePickerRestraints").enforceDateIsNoEarlierThan(new Date(Date.now()-p)),c("DatePickerRestraints").enforceDateIsNoLaterThan(new Date(Date.now()+r))],date:this.state.expireDate,onChange:function(y){return this.setState({expireDate:y})}.bind(this),timezone:this.props.timezoneStr}),c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_3-8x"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.expirationType===c("ExpirationType").DELETE,onChange:this._handleExpirationTypeChanged}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),null,c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1",weight:"normal"},j._("Delete the post. Permanently remove the post and its insights at the scheduled time.")))))},_renderPostEndDate:function x(){if(!this.state.postEndToggle)return null;return c("React").createElement("div",{className:"_3-8x _t0j"},c("React").createElement(c("XUIDateTimePicker.react"),{allowEmpty:false,dateRestraints:[c("DatePickerRestraints").enforceDateIsNoEarlierThan(new Date(Date.now()-p)),c("DatePickerRestraints").enforceDateIsNoLaterThan(new Date(Date.now()+r))],date:this.state.postEndDate,onChange:function(y){return this.setState({postEndDate:y})}.bind(this),timezone:this.props.timezoneStr}))},_renderInvalidTimeNotice:function x(){__p&&__p();var y=this._isPublishTimeValid(),z=!this.state.postEndToggle||this._isPostEndOrExpireTimeValid(this.state.postEndDate.getTime()),A=!this.state.expireToggle||this._isPostEndOrExpireTimeValid(this.state.expireDate.getTime()),B=y&&z&&A;if(B)return null;var C=null;if(!y)C=j._("Scheduled posts need to be shared between 10 minutes and 6 months from when you create them.");else if(!z&&this.state.scheduleToggle)C=j._("News Feed distribution can only end between 10 minutes from when they are published and 6 months from now.");else if(!z)C=j._("News Feed distribution can only end between 10 minutes and 6 months from when you create them.");else if(!A&&this.state.scheduleToggle)C=j._("Posts need to be expired between 10 minutes from when they are published and 6 months from now.");else if(!A)C=j._("Posts need to be expired between 10 minutes and 6 months from when you create them.");return c("React").createElement(c("XUINotice.react"),{use:"warn",className:"_3-8y"},C)},render:function x(){return c("React").createElement("div",null)},_handleExpirationTypeChanged:function x(event){var y=event.target.checked?c("ExpirationType").DELETE:c("ExpirationType").HIDE;this.setState({expirationType:y})},_onSubmitClick:function x(){__p&&__p();var y=null,z=null,A=null,B=null,C=null;if(this.state.scheduleToggle){y=this.state.publishDate;if(this.props.canCreateAnnouncementPost&&this.state.announcementToggle)C=this.state.announcementTitle}if(this.state.postEndToggle)z=this.state.postEndDate;if(this.state.expireToggle){A=this.state.expireDate;B=this.state.expirationType}this.props.onSubmit(y,z,A,B,C);this.setState({shown:false})},_getContextRef:function x(){return this.refs.expirationToggle}});f.exports=w}),null);
__d("PostActionsHiddenInputsUpdater",["$","AdsAPITargetFields","DOM","DOMQuery"],(function a(b,c,d,e,f,g){__p&&__p();var h="feed_targeted_data",i="targeted_privacy_data",j={clearHiddenInputsParams:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0];this._clearParams(l)},_getInput:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=c("DOM").scry(l,m);if(n.length)return n[0];else return{}},updateScheduleHiddenInputs:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c("$")("pabhiddeninputs"):arguments[2],o=this._getInput(n,'input[name="future_date"]'),p=this._getInput(n,'input[name="future_time"]'),q=this._getInput(n,'input[name="scheduled"]');o.value=l;p.value=m;q.value=l?true:""},updateAnnouncementHiddenInputs:function k(l){var m=arguments.length<=1||arguments[1]===undefined?c("$")("pabhiddeninputs"):arguments[1],n=this._getInput(m,'input[name="scheduled_announcement_title"]');if(n.value!==undefined)n.value=l;else this._appendInput(m,"scheduled_announcement_title",l)},updatePostEndDateHiddenInputs:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c("$")("pabhiddeninputs"):arguments[2];this._appendInput(n,h+"[relevant-until-date]",l);this._appendInput(n,h+"[relevant-until-time]",m)},updateExpireHiddenInputs:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c("$")("pabhiddeninputs"):arguments[2],o=this._getInput(n,'input[name="expire_time"]'),p=this._getInput(n,'input[name="expiring"]'),q=this._getInput(n,'input[name="expire_type"]');o.value=l;p.value=l?true:"";q.value=m},updateBackdateHiddenInputs:function k(l,m,n,o){var p=arguments.length<=4||arguments[4]===undefined?c("$")("pabhiddeninputs"):arguments[4];this._clearParams(p);var q=this._getInput(p,'input[name="backdated_date[year]"]'),r=this._getInput(p,'input[name="backdated_date[month]"]'),s=this._getInput(p,'input[name="backdated_date[day]"]'),t=this._getInput(p,'input[name="hide_from_newsfeed"]');q.value=l;r.value=m;s.value=n;t.value=o},updatePoliticalDistrictHiddenInputs:function k(l){var m=arguments.length<=1||arguments[1]===undefined?c("$")("pabhiddeninputs"):arguments[1];if(!l)return;this._appendInput(m,i+"[political_district]",l)},updateTargetHiddenInputs:function k(l){var m=arguments.length<=1||arguments[1]===undefined?c("$")("pabhiddeninputs"):arguments[1];this._deleteTargetInputs(m);if(l.hints)this._setInputValue(m,l.hints,h);if(l.targeting)this._setInputValue(m,l.targeting,h);if(l.gating)this._setInputValue(m,l.gating,i)},_clearParams:function k(l){for(var m=0;m<l.children.length;m++)l.children[m].value=""},_deleteTargetInputs:function k(l){var m=c("DOMQuery").scry(l,"input");for(var n=0;n<m.length;n++){var o=(m[n].name.indexOf(h)==0||m[n].name.indexOf(i)==0)&&m[n].name!==h+"[relevant-until-time]"&&m[n].name!==h+"[relevant-until-date]";if(o)c("DOM").remove(m[n])}},_setBackdateParams:function k(l){__p&&__p();var m=l.getRoot(),n=this._getInput(m,'input[name="year"]').value,o=this._getInput(m,'input[name="hide"]'),p=c("DOM").scry(m,'input[name="month"]'),q=c("DOM").scry(m,'input[name="day"]');p=p.length&&p[0].value!==null&&p[0].value!=="0"?p[0].value:null;q=q.length&&q[0].value!==null&&q[0].value!=="0"?q[0].value:null;var r=c("$")("pabhiddeninputs");this._clearParams(r);var s=this._getInput(r,'input[name="backdated_date[year]"]'),t=this._getInput(r,'input[name="backdated_date[month]"]'),u=this._getInput(r,'input[name="backdated_date[day]"]'),v=this._getInput(r,'input[name="hide_from_newsfeed"]');s.value=n;t.value=p;u.value=q;v.value=o.checked},_setInputValue:function k(){__p&&__p();var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];for(var o in m){var p=m[o],q=n+"["+o+"]";if(o===c("AdsAPITargetFields").AGE_MAX||o===c("AdsAPITargetFields").AGE_MIN||o===c("AdsAPITargetFields").GENDERS){var r=o===c("AdsAPITargetFields").GENDERS?p[0]:p;this._appendInput(l,q,r)}else if(o===c("AdsAPITargetFields").GEO_LOCATIONS||o===c("AdsAPITargetFields").EXCLUDED_GEO_LOCATIONS)this._appendInput(l,q,JSON.stringify(p));else if(o===c("AdsAPITargetFields").INTERESTS||o==="fan_of"){q=n+"["+o+"][]";this._appendArrayValueId(l,p,q)}else{q=n+"["+o+"][]";this._appendArrayValue(l,p,q)}}},_appendArrayValueId:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];m.forEach(function(o){this._appendInput(l,n,o.id)},this)},_appendArrayValue:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];m.forEach(function(o){this._appendInput(l,n,o)},this)},_appendInput:function k(){var l=arguments.length<=0||arguments[0]===undefined?c("$")("pabhiddeninputs"):arguments[0],m=arguments[1],n=arguments[2];c("DOM").appendContent(l,c("DOM").create("input",{type:"hidden",name:m,value:n}))}};f.exports=j}),null);
__d("PostExpirationNuxType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COMPOSER_NUX:"composer_nux",TIMELINE_NUX:"timeline_nux",SCHEDULE_DIALOG_NUX:"schedule_dialog_nux"})}),null);
__d("XPostExpirationNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/page/expiring_post/nux/",{})}),null);
__d("ComposerXPostActionDropDownV2",["csx","cx","Arbiter","AsyncRequest","BanzaiODS","Button","CSS","DOM","Event","PagesEventObserver","PostActionsHiddenInputsUpdater","PostBackdateDialog.react","PostExpirationNuxType","PostScheduleAndPostEndDialog.react","PromotedPostConstants","React","ReactComposerPoliticalInfoUtils","ReactComposerTaggerType","ReactDOM","ReactTargetingTaggerStore.react","VideoComposerDialogUIEvent","VideoComposerDialogUITypedLogger","VideoComposerDialogVersion","XPostExpirationNuxController","formatDate"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n,o,p,q){"use strict";__p&&__p();this.menuInstance=k;this.postButton=l;this.postActionsButton=m;this.pageID=n.page_id;this.defaultAction=n.default_action;this.scheduleDialogPlaceholder=o;this.backdateDialogPlaceholder=p;this.buttonGroup=q;this.timezone_str=n.timezone_str;this.minBackdateTime=n.min_backdate_time;this.showExpire=n.should_show_expire;this.defaultScheduleTimeDelta=n.default_schedule_time_delta;this.showExpireNux=n.should_show_expire_nux;this.hiddenInputs=n.hidden_inputs;this.composerID=n.composerID;this.canCreateAnnouncementPost=n.can_create_announcement_post;this.announcementPostConfig=n.announcement_post_config;this.isVideoDialog=n.is_video_dialog;this.composerEntryPointRef=n.composer_entry_point_ref;c("Arbiter").subscribe("composer/disablePostButton",function(event,r){__p&&__p();if(r.disabled){c("CSS").addClass(this.postActionsButton,"_2dha");if(r.errorMessage)this.buttonGroup.setAttribute("data-tooltip-content",r.errorMessage);else this.buttonGroup.setAttribute("data-tooltip-content","")}else{this.buttonGroup.setAttribute("data-tooltip-content","");if(!c("CSS").matchesSelector(this.postButton,"._42fr"))c("CSS").removeClass(this.postActionsButton,"_2dha")}}.bind(this));c("Arbiter").subscribe("composer/publish",function(event,r){c("CSS").addClass(this.postActionsButton,"_2dha")}.bind(this));this.menuInstance.subscribe("itemclick",function(r,s){__p&&__p();switch(s.item.getValue()){case"ads_post":this.$ComposerXPostActionDropDownV21();break;case"draft":this.$ComposerXPostActionDropDownV22();break;case"schedule":this.$ComposerXPostActionDropDownV23();break;case"backdate":this.$ComposerXPostActionDropDownV24();break;case"post":this.$ComposerXPostActionDropDownV25();break}}.bind(this));c("Event").listen(this.postActionsButton,"click",function(){this.$ComposerXPostActionDropDownV26("pab_dropdown_click")}.bind(this));if(n.handle_post_click)c("Event").listen(this.postButton,"click",function(){__p&&__p();var r=c("ReactTargetingTaggerStore.react").getTaggerData(this.pageID,c("ReactComposerTaggerType").TARGETING);c("PostActionsHiddenInputsUpdater").updateTargetHiddenInputs(r,this.hiddenInputs);var s=c("ReactComposerPoliticalInfoUtils").getPoliticalDistrict(this.composerID,this.pageID);c("PostActionsHiddenInputsUpdater").updatePoliticalDistrictHiddenInputs(s,this.hiddenInputs);c("ReactTargetingTaggerStore.react").clearComposerData(this.pageID);if(this.canCreateAnnouncementPost)c("Arbiter").inform("composer/publish",{});else{if(this.composerID)c("BanzaiODS").bumpEntityKey("videos","upload_post_button.with_composer_id");else c("BanzaiODS").bumpEntityKey("videos","upload_post_button.without_composer_id");c("Arbiter").inform("composer/publish",{composer_id:this.composerID})}}.bind(this));this.scheduleAnother=c("Arbiter").subscribe("composer/schedule_another",function(r){this.$ComposerXPostActionDropDownV23();this.scheduleAnother.unsubscribe();this.scheduleAnother=null}.bind(this));if(n.should_show_nux){c("Arbiter").inform("composer/reset_pab_nux");this.$ComposerXPostActionDropDownV27();this.renderNuxSubscription=c("Arbiter").subscribe("composer/render_pab_nux",function(r){if(!n.nux_uri)return;new(c("AsyncRequest"))().setURI(n.nux_uri).send();this.renderNuxSubscription.unsubscribe();this.renderNuxSubscription=null}.bind(this))}c("Arbiter").subscribe("AsyncRequest/error",function(r,s){if(s.request&&s.request.relativeTo===this.postButton.form)this.$ComposerXPostActionDropDownV28(true)}.bind(this));c("Arbiter").subscribe(["composer/reset"],function(r){if(this.hiddenInputsInstance)this.hiddenInputsInstance.afterSubmitPost(this.pageID);this.$ComposerXPostActionDropDownV28(true)}.bind(this))}j.prototype.initHiddenInputs=function(k){"use strict";this.hiddenInputsInstance=k;if(this.defaultAction==="save")this.hiddenInputsInstance.setDraftInputs()};j.prototype.$ComposerXPostActionDropDownV27=function(){"use strict";var k=c("DOM").scry(document,"#pab_nux_moved_indicator")[0],l=c("DOM").scry(document,"#pab_nux_click_to_finish")[0];if(k)k.removeAttribute("id");if(l)l.removeAttribute("id");this.postActionsButton.setAttribute("id","pab_nux_moved_indicator");this.postButton.setAttribute("id","pab_nux_click_to_finish")};j.prototype.$ComposerXPostActionDropDownV28=function(k){"use strict";if(this.hiddenInputsInstance)this.hiddenInputsInstance.resetInputs();this.$ComposerXPostActionDropDownV29()};j.prototype.$ComposerXPostActionDropDownV25=function(){"use strict";this.$ComposerXPostActionDropDownV28();this.$ComposerXPostActionDropDownV26("pab_post_selected");this.postButton.click();this.menuInstance.done()};j.prototype.$ComposerXPostActionDropDownV210=function(k){"use strict";var l=null,m=null;if(k){l=c("formatDate")(k,"m/d/Y",{skipPatternLocalization:true});m=60*(k.getHours()*60+k.getMinutes())}c("PostActionsHiddenInputsUpdater").clearHiddenInputsParams(this.hiddenInputs);c("PostActionsHiddenInputsUpdater").updateScheduleHiddenInputs(l,m,this.hiddenInputs)};j.prototype.$ComposerXPostActionDropDownV211=function(k,l,m,n,o){"use strict";__p&&__p();this.$ComposerXPostActionDropDownV210(k);var p=null,q=null;if(l){p=c("formatDate")(l,"m/d/Y",{skipPatternLocalization:true});q=60*(l.getHours()*60+l.getMinutes())}c("PostActionsHiddenInputsUpdater").updatePostEndDateHiddenInputs(p,q,this.hiddenInputs);var r=null;if(m)r=m.getTime()/1e3;c("PostActionsHiddenInputsUpdater").updateExpireHiddenInputs(r,n,this.hiddenInputs);if(o)c("PostActionsHiddenInputsUpdater").updateAnnouncementHiddenInputs(o,this.hiddenInputs);this.$ComposerXPostActionDropDownV212(c("VideoComposerDialogUIEvent").POST_SCHEDULE_ATTEMPT);this.postButton.click()};j.prototype.$ComposerXPostActionDropDownV213=function(){"use strict";this.showExpireNux=false;var k=c("XPostExpirationNuxController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(k).setMethod("POST").setData({nux:c("PostExpirationNuxType").SCHEDULE_DIALOG_NUX,impression:true}).send()};j.prototype.$ComposerXPostActionDropDownV214=function(){"use strict";this.showExpireNux=false;var k=c("XPostExpirationNuxController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(k).setMethod("POST").setData({nux:c("PostExpirationNuxType").SCHEDULE_DIALOG_NUX,impression:true}).send()};j.prototype.$ComposerXPostActionDropDownV23=function(){"use strict";this.$ComposerXPostActionDropDownV26("pab_schedule_selected");var k=c("React").createElement(c("PostScheduleAndPostEndDialog.react"),{timezoneStr:this.timezone_str,onSubmit:this.$ComposerXPostActionDropDownV211.bind(this),defaultScheduledTimeDelta:this.defaultScheduleTimeDelta,showExpire:this.showExpire,showExpireNux:this.showExpireNux,onNuxAcked:this.$ComposerXPostActionDropDownV214.bind(this),canCreateAnnouncementPost:this.canCreateAnnouncementPost,announcementPostConfig:this.announcementPostConfig,composerID:this.composerID});if(this.showExpireNux)this.$ComposerXPostActionDropDownV213();k=c("ReactDOM").render(k,this.scheduleDialogPlaceholder);k.show();this.menuInstance.done()};j.prototype.$ComposerXPostActionDropDownV21=function(){"use strict";this.$ComposerXPostActionDropDownV28();this.$ComposerXPostActionDropDownV26("pab_ads_post_selected");this.$ComposerXPostActionDropDownV215();this.hiddenInputsInstance.setAdspostInputs();this.menuInstance.done();this.postButton.click()};j.prototype.$ComposerXPostActionDropDownV22=function(){"use strict";this.$ComposerXPostActionDropDownV28();this.$ComposerXPostActionDropDownV26("pab_draft_selected");this.$ComposerXPostActionDropDownV212(c("VideoComposerDialogUIEvent").POST_DRAFT_ATTEMPT);this.$ComposerXPostActionDropDownV215();this.hiddenInputsInstance.setDraftInputs();this.menuInstance.done();this.postButton.click()};j.prototype.$ComposerXPostActionDropDownV24=function(){"use strict";this.$ComposerXPostActionDropDownV26("pab_backdate_selected");var k=c("React").createElement(c("PostBackdateDialog.react"),{maxTime:Date.now()/1e3,minTime:this.minBackdateTime,onSubmit:this.$ComposerXPostActionDropDownV216.bind(this)});k=c("ReactDOM").render(k,this.backdateDialogPlaceholder);k.show();this.menuInstance.done()};j.prototype.$ComposerXPostActionDropDownV216=function(k,l,m,n){"use strict";c("PostActionsHiddenInputsUpdater").updateBackdateHiddenInputs(k,l,m,n,this.hiddenInputs);this.$ComposerXPostActionDropDownV212(c("VideoComposerDialogUIEvent").POST_BACKDATE_ATTEMPT);this.postButton.click(k,l,m,n)};j.prototype.$ComposerXPostActionDropDownV26=function(k){"use strict";var l={page_id:this.pageID,event_name:k};c("PagesEventObserver").logData_DEPRECATED(l,c("PagesEventObserver").VITAL_WAIT)};j.prototype.$ComposerXPostActionDropDownV212=function(event){"use strict";if(this.isVideoDialog)new(c("VideoComposerDialogUITypedLogger"))().setEvent(event).setActorID(this.pageID).setComposerDialogVersion(c("VideoComposerDialogVersion").V1).setComposerEntryPoint(this.composerEntryPointRef).log()};j.prototype.$ComposerXPostActionDropDownV217=function(){"use strict";var k=this.$ComposerXPostActionDropDownV218();if(k)return k;var l=c("DOM").scry(document,"div.fbBoostedPost")[0];if(!l)return null;return this.$ComposerXPostActionDropDownV219(l)};j.prototype.$ComposerXPostActionDropDownV219=function(k){"use strict";return c("DOM").scry(k,"button._4dyi")[0]};j.prototype.$ComposerXPostActionDropDownV218=function(){"use strict";var k=this.postActionsButton,l="_1dsp";do{if(c("CSS").hasClass(k,l))return this.$ComposerXPostActionDropDownV219(k);k=k.parentNode}while(k)};j.prototype.$ComposerXPostActionDropDownV29=function(){"use strict";var k=this.$ComposerXPostActionDropDownV217();if(!k)return;c("Button").setEnabled(k,true);c("CSS").removeClass(k,"_ho3")};j.prototype.$ComposerXPostActionDropDownV215=function(){"use strict";var k=this.$ComposerXPostActionDropDownV217();if(!k)return;c("Button").setEnabled(k,false);c("CSS").addClass(k,"_ho3");c("Arbiter").inform(c("PromotedPostConstants").CLEAR_COMPOSER_BOOST)};f.exports=j}),null);
__d("PostActionsHiddenInputs",["ActorURI","AsyncRequest","XUnpublishedPostSuccessController"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l,m,n,o,p,q,r,s,t){"use strict";__p&&__p();this.dateInput=i;this.timeInput=j;this.schedulingInput=k;this.draftInput=l;this.backdateYearInput=m;this.backdateMonthInput=n;this.backdateDayInput=o;this.hideFromNewsFeedInput=p;this.expireTimeInput=q;this.expiringInput=r;this.expireTypeInput=s;this.adsPostInput=t}h.prototype.updateInputs=function(i){"use strict";__p&&__p();switch(i.element){case"dateinput":this.dateInput.value=i.value;this.schedulingInput.value=true;break;case"timeinput":this.timeInput.value=i.value;this.schedulingInput.value=true;break;case"backdater":this.setBackdateInputs(i);break;case"hidefromnewsfeed":this.setHideFromNewsfeed(i);break;default:break}};h.prototype.setScheduleInputs=function(i){"use strict";if(this.schedulingInput){this.schedulingInput.value=true;this.dateInput.value=i.date;this.timeInput.value=i.time}};h.prototype.setDraftInputs=function(){"use strict";if(this.draftInput)this.draftInput.value=true};h.prototype.setBackdateInputs=function(i){"use strict";if(this.backdateYearInput){this.backdateYearInput.value=i.value.year||null;this.backdateMonthInput.value=i.value.month||null;this.backdateDayInput.value=i.value.day||null}};h.prototype.setHideFromNewsfeed=function(i){"use strict";this.hideFromNewsFeedInput.value=i.value};h.prototype.setAdspostInputs=function(){"use strict";if(this.adsPostInput)this.adsPostInput.value=true};h.prototype.resetInputs=function(){"use strict";__p&&__p();if(this.schedulingInput){this.dateInput.value="";this.timeInput.value="";this.schedulingInput.value=""}if(this.expiringInput){this.expiringInput.value="";this.expireTimeInput.value="";this.expireTypeInput.value=""}if(this.backdateYearInput){this.backdateYearInput.value=null;this.backdateMonthInput.value=null;this.backdateDayInput.value=null;this.hideFromNewsFeedInput.value=""}if(this.draftInput)this.draftInput.value="";if(this.adsPostInput)this.adsPostInput.value=""};h.prototype.afterSubmitPost=function(i){"use strict";__p&&__p();var j;if(this.schedulingInput&&this.schedulingInput.value)j="scheduled";else if(this.expiringInput&&this.expiringInput.value)j="expiring";else if(this.draftInput&&this.draftInput.value)j="draft";if(!j)return;var k=c("XUnpublishedPostSuccessController").getURIBuilder().setString("type",j).getURI();k=c("ActorURI").create(k,i);new(c("AsyncRequest"))().setURI(k).send()};f.exports=h}),null);
__d("FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"query",type:"String!",defaultValue:null},{kind:"LocalArgument",name:"limit",type:"Int!",defaultValue:null},{kind:"LocalArgument",name:"scale",type:"Float!",defaultValue:null}],j=[{kind:"Variable",name:"query",variableName:"query",type:"String"}],k=[{kind:"Variable",name:"first",variableName:"limit",type:"Int"},{kind:"Literal",name:"is_fundraiser_for_story_eligible",value:true,type:"Boolean"},{kind:"Literal",name:"is_fundraiser_person_to_charity_eligible",value:false,type:"Boolean"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},m={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},n={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Variable",name:"scale",variableName:"scale",type:"Float"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},o={kind:"LinkedField",alias:null,name:"charity_picker_subtitle",storageKey:null,args:null,concreteType:"TextWithEntities",plural:false,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},p={kind:"ScalarField",alias:null,name:"is_verified",args:null,storageKey:null};return{kind:"Request",operationKind:"query",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",id:"1443517632408644",text:null,metadata:{},fragment:{kind:"Fragment",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"fundraiser_charity_search",storageKey:null,args:j,concreteType:"FundraiserCharitySearchQuery",plural:false,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:null,args:k,concreteType:"FundraiserCharitySearchResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"FundraiserCharitySearchResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[l,m,n,o,{kind:"InlineFragment",type:"FundraiserCharity",selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:false,selections:[p]}]}]}]}]}]}]},operation:{kind:"Operation",name:"FundraiserForStoryCharityPickerRelaySearchSourceQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"fundraiser_charity_search",storageKey:null,args:j,concreteType:"FundraiserCharitySearchQuery",plural:false,selections:[{kind:"LinkedField",alias:null,name:"search_results",storageKey:null,args:k,concreteType:"FundraiserCharitySearchResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"FundraiserCharitySearchResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},l,m,n,o,{kind:"InlineFragment",type:"FundraiserCharity",selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:false,selections:[p,l]}]}]}]}]}]}]}}}();f.exports=h}),null);
__d("VideoComposerDialogCaptionEditorCaptionsListGenerator_node.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"VideoComposerDialogCaptionEditorCaptionsListGenerator_node",type:"VideoSubtitle",metadata:null,argumentDefinitions:[],selections:[i,{kind:"ScalarField",alias:null,name:"locale",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"process_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"review_expire_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"video_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"captions",storageKey:'captions(first:3000,orderby:["chronological"])',args:[{kind:"Literal",name:"first",value:3e3,type:"Int"},{kind:"Literal",name:"orderby",value:["chronological"],type:"[VideoSubtitleCaptionsOrdering]"}],concreteType:"VideoSubtitleCaptionsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"VideoSubtitleCaptionsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"VideoSubtitleCaption",plural:false,selections:[i,{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start_time_in_ms",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"duration_in_ms",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"confidence",args:null,storageKey:null}]}]}]}]}}();f.exports=h}),null);
__d("VideoComposerDialogCaptionEditorEditCaptionsContainerRelayQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"caption_id",type:"ID!",defaultValue:null}],j=[{kind:"Variable",name:"id",variableName:"caption_id",type:"ID!"}],k={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",operationKind:"query",name:"VideoComposerDialogCaptionEditorEditCaptionsContainerRelayQuery",id:"1860721543945586",text:null,metadata:{},fragment:{kind:"Fragment",name:"VideoComposerDialogCaptionEditorEditCaptionsContainerRelayQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[{kind:"FragmentSpread",name:"VideoComposerDialogCaptionEditorCaptionsListGenerator_node",args:null}]}]},operation:{kind:"Operation",name:"VideoComposerDialogCaptionEditorEditCaptionsContainerRelayQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},k,{kind:"InlineFragment",type:"VideoSubtitle",selections:[{kind:"ScalarField",alias:null,name:"locale",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"process_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"review_expire_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"video_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"captions",storageKey:'captions(first:3000,orderby:["chronological"])',args:[{kind:"Literal",name:"first",value:3e3,type:"Int"},{kind:"Literal",name:"orderby",value:["chronological"],type:"[VideoSubtitleCaptionsOrdering]"}],concreteType:"VideoSubtitleCaptionsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"VideoSubtitleCaptionsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"VideoSubtitleCaption",plural:false,selections:[k,{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start_time_in_ms",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"duration_in_ms",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"confidence",args:null,storageKey:null}]}]}]}]}]}]}}}();f.exports=h}),null);
__d("VideoComposerDialogCaptionEditorPlayerSectionBodyContainerRelayQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"video_id",type:"ID!",defaultValue:null}],j=[{kind:"Variable",name:"id",variableName:"video_id",type:"ID!"}];return{kind:"Request",operationKind:"query",name:"VideoComposerDialogCaptionEditorPlayerSectionBodyContainerRelayQuery",id:"1722809507743436",text:null,metadata:{},fragment:{kind:"Fragment",name:"VideoComposerDialogCaptionEditorPlayerSectionBodyContainerRelayQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[{kind:"FragmentSpread",name:"VideoComposerDialogCaptionEditorVideoPlayerContainer_video",args:null}]}]},operation:{kind:"Operation",name:"VideoComposerDialogCaptionEditorPlayerSectionBodyContainerRelayQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:j,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"InlineFragment",type:"Video",selections:[{kind:"ScalarField",alias:null,name:"playable_duration_in_ms",args:null,storageKey:null}]}]}]}}}();f.exports=h}),null);
__d("VideoComposerDialogCaptionEditorVideoPlayerContainer_video.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h={kind:"Fragment",name:"VideoComposerDialogCaptionEditorVideoPlayerContainer_video",type:"Video",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"playable_duration_in_ms",args:null,storageKey:null}]};f.exports=h}),null);
__d("AdBreakAdminPreviewTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:AdBreakAdminPreviewLoggerConfig",this.$AdBreakAdminPreviewTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:AdBreakAdminPreviewLoggerConfig",this.$AdBreakAdminPreviewTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$AdBreakAdminPreviewTypedLogger1={};return this};h.prototype.updateData=function(j){this.$AdBreakAdminPreviewTypedLogger1=babelHelpers["extends"]({},this.$AdBreakAdminPreviewTypedLogger1,j);return this};h.prototype.setAdBreakTimeOffsets=function(j){this.$AdBreakAdminPreviewTypedLogger1.ad_break_time_offsets=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setEvent=function(j){this.$AdBreakAdminPreviewTypedLogger1.event=j;return this};h.prototype.setException=function(j){this.$AdBreakAdminPreviewTypedLogger1.exception=j;return this};h.prototype.setTimeConsumedInMs=function(j){this.$AdBreakAdminPreviewTypedLogger1.time_consumed_in_ms=j;return this};h.prototype.setVC=function(j){this.$AdBreakAdminPreviewTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$AdBreakAdminPreviewTypedLogger1.video_id=j;return this};var i={ad_break_time_offsets:true,event:true,exception:true,time_consumed_in_ms:true,vc:true,video_id:true};f.exports=h}),null);
__d("VideoCaptionsPublishTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:VideoCaptionsPublishLoggerConfig",this.$VideoCaptionsPublishTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:VideoCaptionsPublishLoggerConfig",this.$VideoCaptionsPublishTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$VideoCaptionsPublishTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoCaptionsPublishTypedLogger1=babelHelpers["extends"]({},this.$VideoCaptionsPublishTypedLogger1,j);return this};h.prototype.setError=function(j){this.$VideoCaptionsPublishTypedLogger1.error=j;return this};h.prototype.setEvent=function(j){this.$VideoCaptionsPublishTypedLogger1.event=j;return this};h.prototype.setIsCaptionEditor=function(j){this.$VideoCaptionsPublishTypedLogger1.is_caption_editor=j;return this};h.prototype.setIsCaptionsEditor=function(j){this.$VideoCaptionsPublishTypedLogger1.is_captions_editor=j;return this};h.prototype.setPublishPhase=function(j){this.$VideoCaptionsPublishTypedLogger1.publish_phase=j;return this};h.prototype.setSubtitleID=function(j){this.$VideoCaptionsPublishTypedLogger1.subtitle_id=j;return this};h.prototype.setVC=function(j){this.$VideoCaptionsPublishTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$VideoCaptionsPublishTypedLogger1.video_id=j;return this};h.prototype.setVideoLanguage=function(j){this.$VideoCaptionsPublishTypedLogger1.video_language=j;return this};h.prototype.setVideoLocale=function(j){this.$VideoCaptionsPublishTypedLogger1.video_locale=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$VideoCaptionsPublishTypedLogger1=babelHelpers["extends"]({},this.$VideoCaptionsPublishTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={error:true,event:true,is_caption_editor:true,is_captions_editor:true,publish_phase:true,subtitle_id:true,vc:true,video_id:true,video_language:true,video_locale:true};f.exports=h}),null);
__d("ReactFeedTargetingTaggerButton.react",["fbt","cx","Arbiter","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerTargetingTaggerButtonMixin","PagesComposerAudiences.react","React","ReactComposerTargetingUtils","ReactLayeredComponentMixin_DEPRECATED","TooltipLink.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ReactFeedTargetingTaggerButton",mixins:[c("ReactComposerContextProviderMixin"),c("ReactComposerTargetingTaggerButtonMixin"),c("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{contextConfig:c("ReactComposerContextConfig").isRequired,rootElement:j.object.isRequired,saveData:j.func,canSeeCompleteList:j.bool,feedTargetingReachEstimateGK:j.bool,canSeeDemographicOptions:j.bool,useTargetingAsFilter:j.bool,useFromLegacyComposer:j.bool,allowExclusionsWithoutInclusions:j.bool},getInitialState:function l(){return{hasData:false,selected:false}},componentWillMount:function l(){c("Arbiter").subscribe(["composer/publish","composer/reset"],function(){c("ReactComposerTargetingUtils").setData(this.props.contextConfig.targetID,{});this._setHasData(false)}.bind(this));var m=this._getInitDataAvailability();if(m!==this.state.hasData)this.setState({hasData:m})},renderLayers:function l(){if(!this.state.dialogShown)return{};return c("React").createElement(c("PagesComposerAudiences.react"),{accessToken:this.props.contextConfig.accessToken,appID:this.props.contextConfig.appID,shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false)}.bind(this),rootElement:this.props.rootElement,callbackDataStatus:this._setHasData,callbackSelectionStatus:this._setSelected,saveData:this.props.saveData,canSeeCompleteList:this.props.canSeeCompleteList,feedTargetingReachEstimateGK:this.props.feedTargetingReachEstimateGK,canSeeDemographicOptions:this.props.canSeeDemographicOptions,useTargetingAsFilter:this.props.useTargetingAsFilter,useFromLegacyComposer:this.props.useFromLegacyComposer,allowExclusionsWithoutInclusions:this.props.allowExclusionsWithoutInclusions})},_getInitDataAvailability:function l(){var m=c("ReactComposerTargetingUtils").getDataFromTargetingTaggerStore(this.props.contextConfig.targetID);if(m&&(m.targeting||m.gating))return true;return false},_setHasData:function l(m){if(this.isMounted())this.setState({hasData:m})},_setSelected:function l(m){if(this.isMounted())this.setState({selected:m})},render:function l(){var m="_3xem"+(this.state.selected?" _50hx":""),n=c("joinClasses")("_3xen"+(this.state.hasData?" _6xe":""),this.getClassName());return c("React").createElement(c("TooltipLink.react"),{onClick:this._onSelectX,tooltip:this.getTooltip(),"data-tooltip-content":this.getTooltip(),className:m,tabIndex:0,role:"button"},c("React").createElement("span",{className:"accessible_elem"},this.getTitle()),c("React").createElement("div",{className:n}))}});f.exports=k}),null);
__d("ReactPrivacyTaggerButton.react",["Arbiter","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerPagesPrivacySelector.react","ReactComposerTaggerType","ReactComponentWithPureRenderMixin","React","ReactTargetingTaggerStore.react","StoreBasedStateMixinHelper"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactPrivacyTaggerButton",mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerContextProviderMixin")],propTypes:{contextConfig:c("ReactComposerContextConfig").isRequired,lockToPrivacy:h.string,isVideoDialog:h.bool,defaultDemographicsConfig:h.object},getInitialState:function j(){return{}},componentWillMount:function j(){this._mixin=new(c("StoreBasedStateMixinHelper"))([c("ReactTargetingTaggerStore.react")]);this._mixin.subscribeCallback(function(){this.setState(this.constructor.calculateState(this.props))}.bind(this));c("Arbiter").subscribe(["composer/publish","composer/close"],function(){this.setState({gatingSentences:undefined})}.bind(this))},componentWillUnmount:function j(){this._mixin.release()},statics:{calculateState:function j(k){var l=c("ReactTargetingTaggerStore.react").getTaggerData(k.contextConfig.targetID,c("ReactComposerTaggerType").TARGETING)||{};return{gatingSentences:l&&l.gatingSentences}}},render:function j(){var k=this.props.defaultDemographicsConfig,l=k?k.defaultDemographicsList:[];return c("React").createElement(c("ReactComposerPagesPrivacySelector.react"),{gatingSentences:this.state.gatingSentences,useReactPrivacyDialogForLegacy:true,isVideoDialog:this.props.isVideoDialog,useTargetingAsFilter:this.props.useTargetingAsFilter,defaultDemographicsList:l})}});f.exports=i}),null);
__d("ReactComposerCTAActionType",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){f.exports=c("keyMirrorRecursive")({ADD_OPTION:null,ALLOW_MULTI_MEDIA:null,SET_CTA_CONFIG:null,HAS_PHOTO_FOR_ENTPOST:null,HAS_PHOTO:null,NEEDS_PHOTO:null,HAS_VIDEO:null,NEEDS_VIDEO:null,USING_PREMADE_POST_VIDEO:null},"ReactComposerCTAActionType")}),null);
__d("ReactComposerCTAStore",["DOM","ReactComposerCTAActionType","ReactComposerEvents","ReactComposerStoreBase"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerStoreBase"));i=h&&h.prototype;function j(){"use strict";__p&&__p();var k=void 0;i.constructor.call(this,function(){return{ctaType:"",ctaValues:{},hasPhoto:c("ReactComposerCTAActionType").NEEDS_PHOTO}},function(l){__p&&__p();switch(l.type){case c("ReactComposerCTAActionType").SET_CTA_CONFIG:k&&k.$ReactComposerCTAStore1(l);break;case c("ReactComposerCTAActionType").ALLOW_MULTI_MEDIA:k&&k.$ReactComposerCTAStore2(l);break;case c("ReactComposerCTAActionType").HAS_PHOTO:k&&k.$ReactComposerCTAStore3(l);break;case c("ReactComposerCTAActionType").HAS_PHOTO_FOR_ENTPOST:k&&k.$ReactComposerCTAStore4(l);break;case c("ReactComposerCTAActionType").NEEDS_PHOTO:k&&k.$ReactComposerCTAStore5(l);break;case c("ReactComposerCTAActionType").HAS_VIDEO:k&&k.$ReactComposerCTAStore6(l);break;case c("ReactComposerCTAActionType").NEEDS_VIDEO:k&&k.$ReactComposerCTAStore7(l);break;case c("ReactComposerCTAActionType").USING_PREMADE_POST_VIDEO:k&&k.$ReactComposerCTAStore8(l);break;default:break}});k=this}j.prototype.$ReactComposerCTAStore2=function(k){"use strict";var l=this.getComposerData(k.composerID);l.allowMultiMedia=k.allowMultiMedia;this.emitChange(k.composerID)};j.prototype.$ReactComposerCTAStore3=function(k){"use strict";var l=this.getComposerData(k.composerID);l.hasPhoto=c("ReactComposerCTAActionType").HAS_PHOTO;l.hasCTAVideo=false;l.videoID=null;l.photoID=null;this.emitChange(k.composerID)};j.prototype.$ReactComposerCTAStore4=function(k){"use strict";var l=this.getComposerData(k.composerID);l.hasPhoto=c("ReactComposerCTAActionType").HAS_PHOTO;l.photoID=k.photoID;l.hasCTAVideo=false;l.videoID=null;this.emitChange(k.composerID)};j.prototype.$ReactComposerCTAStore5=function(k){"use strict";var l=this.getComposerData(k.composerID);l.hasPhoto=c("ReactComposerCTAActionType").NEEDS_PHOTO;this.emitChange(k.composerID)};j.prototype.$ReactComposerCTAStore6=function(k){"use strict";var l=this.getComposerData(k.composerID);l.hasCTAVideo=c("ReactComposerCTAActionType").HAS_VIDEO;l.videoID=k.videoID;l.hasPhoto=false;l.photoID=null;this.emitChange(k.composerID)};j.prototype.$ReactComposerCTAStore7=function(k){"use strict";var l=this.getComposerData(k.composerID);l.hasCTAVideo=c("ReactComposerCTAActionType").NEEDS_VIDEO;this.emitChange(k.composerID)};j.prototype.$ReactComposerCTAStore8=function(k){"use strict";var l=this.getComposerData(k.composerID);l.usingPremadePostVideo=c("ReactComposerCTAActionType").USING_PREMADE_POST_VIDEO;this.emitChange(k.composerID)};j.prototype.removeListeners=function(){"use strict";this.removeAllListeners(c("ReactComposerEvents").CHANGE)};j.prototype.allowMultiMedia=function(k){"use strict";return this.getComposerData(k).allowMultiMedia===true};j.prototype.hasCTAPhotoID=function(k){"use strict";return this.getComposerData(k).photoID!==null};j.prototype.hasCTAPhoto=function(k){"use strict";return this.getComposerData(k).hasPhoto===c("ReactComposerCTAActionType").HAS_PHOTO};j.prototype.hasCTAVideo=function(k){"use strict";return this.getComposerData(k).hasCTAVideo===c("ReactComposerCTAActionType").HAS_VIDEO};j.prototype.isUsingPremadePostVideo=function(k){"use strict";return this.getComposerData(k).usingPremadePostVideo===c("ReactComposerCTAActionType").USING_PREMADE_POST_VIDEO};j.prototype.getCTAType=function(k){"use strict";return this.getComposerData(k).ctaType};j.prototype.getCTAData=function(k){"use strict";return{type:this.getComposerData(k).ctaType,value:this.getComposerData(k).ctaValues}};j.prototype.getCTAMarkup=function(k){"use strict";return this.getComposerData(k).ctaMarkup};j.prototype.getVideoID=function(k){"use strict";var l=this.getComposerData(k);return l.videoID};j.prototype.getAttachmentConfig=function(k){"use strict";__p&&__p();var l=this.getComposerData(k);if(!l.ctaMarkup)return null;var m=l.ctaMarkup,n=l.ctaAttachmentConfig;if(this.allowMultiMedia(k))n.params.allowMultiMedia=l.allowMultiMedia;if(this.hasCTAVideo(k)){n.params.videoID=l.videoID;n.params.usingPremadePostVideo=this.isUsingPremadePostVideo(k)}else if(this.hasCTAPhotoID(k))n.params.photoID=l.photoID;else{var o=c("DOM").scry(m,'input[name="attachment[params][images][0]"]').pop(),p=c("DOM").scry(m,'input[name="attachment[params][title]"]').pop(),q=c("DOM").scry(m,'input[name="attachment[params][summary]"]').pop();if(o){if(!n.params.images)n.params.images=[];n.params.images[0]=o.value}if(p)n.params.title=p.value;if(q)n.params.summary=q.value}return n};j.prototype.$ReactComposerCTAStore1=function(k){"use strict";var l=this.validateAction(k,["composerID","config"]),m=l[0],n=l[1],o=this.getComposerData(m);o.ctaType=n.ctaType;o.ctaValues=n.ctaValues;o.ctaMarkup=n.markup;o.ctaAttachmentConfig=n.attachmentConfig;this.emitChange(m)};f.exports=new j()}),null);
__d("ReactComposerCTAActions",["ReactComposerCTAActionType","ReactComposerDispatcher","ReactComposerCTAStore"],(function a(b,c,d,e,f,g){__p&&__p();c("ReactComposerCTAStore");h.prototype.setConfig=function(i,j){"use strict";var k={composerID:i,type:c("ReactComposerCTAActionType").SET_CTA_CONFIG,config:j};c("ReactComposerDispatcher").dispatch(k)};h.prototype.setAllowMultiMedia=function(i,j){"use strict";var k={composerID:i,type:c("ReactComposerCTAActionType").ALLOW_MULTI_MEDIA,allowMultiMedia:j};c("ReactComposerDispatcher").dispatch(k)};h.prototype.setHasPhoto=function(i){"use strict";var j={composerID:i,type:c("ReactComposerCTAActionType").HAS_PHOTO};c("ReactComposerDispatcher").dispatch(j)};h.prototype.setHasPhotoForEntPost=function(i,j){"use strict";var k={composerID:i,type:c("ReactComposerCTAActionType").HAS_PHOTO_FOR_ENTPOST,photoID:j};c("ReactComposerDispatcher").dispatch(k)};h.prototype.setNeedsPhoto=function(i){"use strict";var j={composerID:i,type:c("ReactComposerCTAActionType").NEEDS_PHOTO};c("ReactComposerDispatcher").dispatch(j)};h.prototype.setHasVideo=function(i,j){"use strict";var k={composerID:i,type:c("ReactComposerCTAActionType").HAS_VIDEO,videoID:j};c("ReactComposerDispatcher").dispatch(k)};h.prototype.setNeedsVideo=function(i){"use strict";var j={composerID:i,type:c("ReactComposerCTAActionType").NEEDS_VIDEO};c("ReactComposerDispatcher").dispatch(j)};h.prototype.setPostingPremadePostCard=function(i){"use strict";var j={composerID:i,type:c("ReactComposerCTAActionType").USING_PREMADE_POST_VIDEO};c("ReactComposerDispatcher").dispatch(j)};function h(){"use strict"}f.exports=new h()}),null);
__d("FundraiserForStoryCharityPickerRelaySearchSource",["AbstractRelaySearchSource","RelayFBEnvironment","SearchableEntry","RelayModern","idx","FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("RelayModern").graphql,k=10,l=function l(){return c("FundraiserForStoryCharityPickerRelaySearchSourceQuery.graphql")};function m(q){return{query:l,variables:{query:q,limit:k}}}function n(q){var r,s=(r=q)!=null?(r=r.fundraiser_charity_search)!=null?(r=r.search_results)!=null?r.edges:r:r:r;if(!s)return[];return s.map(function(t,u){var v,w,x,y=t.node;return new(c("SearchableEntry"))({uniqueID:y.id,title:y.name,subtitle:(v=y)!=null?(v=v.charity_picker_subtitle)!=null?v.text:v:v,photo:(w=y)!=null?(w=w.profile_picture)!=null?w.uri:w:w,order:u,auxiliaryData:{verified:(x=y)!=null?(x=x.page)!=null?x.is_verified:x:x}})})}var o=function o(q,r){return r(q)};h=babelHelpers.inherits(p,c("AbstractRelaySearchSource"));i=h&&h.prototype;function p(){var q={bootstrapRequests:[{gen:function r(s){return m(s)}}],queryRequests:[{gen:function r(s){return m(s)}}],packageFn:n,getAllForEmptyQuery:true};i.constructor.call(this,c("RelayFBEnvironment"),q,o)}f.exports=p}),null);
__d("PageComposerMessengerCTATaggerBannerButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=Object.freeze({DARK:"dark",LIGHT:"light"}),n=Object.freeze({MEDIUM:"medium",SMALL:"small"}),o=Object.freeze({BUTTON:"button",RESET:"reset",SUBMIT:"submit"});j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;p.prototype.render=function(){var q=this.props.size,r=this.props.shade,s="_50zy"+(q===n.SMALL?" _50zz":"")+(q===n.MEDIUM?" _50-0":"")+(r===m.LIGHT?" _50z_":"")+(r===m.DARK?" _50z-":""),t=this.props.label,u=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!t)t=i._("Remove");u=t}return c("React").createElement(c("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,s),"data-hover":this.props.tooltip&&"tooltip","data-tooltip-alignh":this.props.tooltip&&"center","data-tooltip-content":this.props.tooltip,label:t,title:u,type:this.props.href?null:this.props.type}))};function p(){j.apply(this,arguments)}p.propTypes={shade:l.oneOf([m.DARK,m.LIGHT]),size:l.oneOf([n.MEDIUM,n.SMALL]),type:l.oneOf([o.BUTTON,o.RESET,o.SUBMIT])};p.defaultProps={size:"medium",shade:"dark",type:"button"};f.exports=p}),null);
__d("PageComposerMessengerCTATaggerBanner.react",["cx","fbt","LeftRight.react","PageComposerMessengerCTATaggerBannerButton.react","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props,o=n.closeButtonText,p=babelHelpers.objectWithoutProperties(n,["closeButtonText"]),q=c("React").createElement(c("PageComposerMessengerCTATaggerBannerButton.react"),{className:"_51-t",label:o,onClick:this.props.onClick}),r=c("React").Children.toArray(this.props.children);return c("React").createElement("div",babelHelpers["extends"]({},p,{className:c("joinClasses")(this.props.className,"_xbh")}),c("React").createElement(c("LeftRight.react"),null,c("React").createElement("h3",{className:"_xbj"},r&&r[0]),c("React").createElement("div",{className:"_26pn"},r&&r.slice(1),q)))};function m(){j.apply(this,arguments)}m.propTypes={closeButtonText:l.string,onClick:l.func.isRequired};m.defaultProps={closeButtonText:i._("Remove the Send Message button")};f.exports=m}),null);
__d("XMessengerMonetizationSmartSendMessageCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/commerce/messenger_monetization/smart_send_message_cta/",{auto_select:{type:"Bool",defaultValue:false}})}),null);
__d("ReactComposerMessagingTaggerButton.react",["cx","fbt","AsyncRequest","React","ReactComposerCTAActions","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerButtonMixin","ReactComposerTaggerStore","ReactComposerTaggerType","XCommerceSelfServeMerchantNUXSeenController","XMessengerMonetizationSmartSendMessageCTAController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ReactComposerMessagingTaggerButton",mixins:[c("ReactComposerTaggerButtonMixin")],statics:{loggingName:c("ReactComposerLoggingName").MESSAGING_TAGGER,taggerID:c("ReactComposerTaggerType").MESSAGING,savedAutoSelect:undefined},propTypes:{autoSelect:j.bool,nuxType:j.string},getTitle:function l(){return i._("Add a send message CTA")},getNUX:function l(){if(!this.state.showNUX||!this.state.contextRef)return null;var m=i._("Add this button to your post so people can reply directly in Messenger.");return c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"center",contextRef:function(){return this.state.contextRef}.bind(this),onCloseButtonClick:this._hideNUX,position:"below",shown:true,width:"auto"},m)},getTooltip:function l(){return i._("Add a Messenger button")},getClassName:function l(){return"_3dnl"},getRef:function l(){return"fbReactComposerMessagingTaggerButton"},_hideNUX:function l(){c("ReactComposerTaggerActions").handleSetTaggerShowNUX(this.context.composerID,c("ReactComposerTaggerType").MESSAGING,false);var m=c("XCommerceSelfServeMerchantNUXSeenController").getURIBuilder().setInt("page_id",this.context.actorID).setEnum("nux_type",this.props.nuxType).getURI();new(c("AsyncRequest"))(m).send()},componentDidMount:function l(){__p&&__p();this.setState({contextRef:this.refs.fbReactComposerMessagingTaggerButton});if(this.constructor.savedAutoSelect===undefined)this.constructor.savedAutoSelect=this.props.autoSelect;if(this.constructor.savedAutoSelect){var m=c("ReactComposerTaggerStore").getSelectedTagger(this.context.composerID);if(m!==c("ReactComposerTaggerType").MESSAGING){this.constructor.savedAutoSelect=!this.constructor.savedAutoSelect;this._onSelect()}}},_onSelectX:function l(){var m=c("ReactComposerTaggerStore").hasData(this.context.composerID,this.constructor.taggerID);if(m){c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").MESSAGING_TAGGER,c("ReactComposerTaggerType").MESSAGING,{hasCTA:false});var n={ctaType:null,ctaValues:{is_cta_share_post:true,service_config_id:null},ctaMarkup:"",ctaAttachmentConfig:""};c("ReactComposerCTAActions").setConfig(this.context.composerID,n)}this.constructor.savedAutoSelect=!this.constructor.savedAutoSelect;var o=c("XMessengerMonetizationSmartSendMessageCTAController").getURIBuilder().setBool("auto_select",this.constructor.savedAutoSelect).getURI();new(c("AsyncRequest"))(o).send()}});f.exports=k}),null);
__d("ReactComposerMessagingTaggerComponent.react",["fbt","AdsCallToActionTypes","PageComposerMessengerCTATaggerBanner.react","React","ReactComposerCTAActions","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerType"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.dismissButtonOnClick=function(){this.setState({setCTAConfig:false});var m={ctaType:null,ctaValues:{is_cta_share_post:true,service_config_id:null},ctaMarkup:"",ctaAttachmentConfig:""};this.setTaggerData(false);this.deselectMessagingTagger();c("ReactComposerCTAActions").setConfig(this.props.reactComposerID,m)}.bind(this);this.state={setCTAConfig:true}}k.prototype.render=function(){if(this.state.setCTAConfig)return c("React").createElement(c("PageComposerMessengerCTATaggerBanner.react"),{onClick:this.dismissButtonOnClick},h._("This post includes a button so people can reply in Messenger"));return null};k.prototype.componentDidMount=function(){this.setState({setCTAConfig:true});this.setTaggerData(true);var l={ctaType:c("AdsCallToActionTypes").TYPES.MESSAGE_PAGE.name,ctaValues:{is_cta_share_post:true,service_config_id:null},ctaMarkup:"",ctaAttachmentConfig:""};c("ReactComposerCTAActions").setConfig(this.props.reactComposerID,l)};k.prototype.setTaggerData=function(l){c("ReactComposerTaggerActions").setTaggerData(this.props.reactComposerID,c("ReactComposerLoggingName").MESSAGING_TAGGER,c("ReactComposerTaggerType").MESSAGING,{hasCTA:l})};k.prototype.deselectMessagingTagger=function(){c("ReactComposerTaggerActions").deselectCurrentTagger(this.props.reactComposerID,c("ReactComposerLoggingName").MESSAGING_TAGGER)};f.exports=k}),null);
__d("ReactComposerMessagingTaggerContainer.react",["React","ReactComposerLoggingName","ReactComposerMessagingTaggerComponent.react","ReactComposerTaggerContainerMixin","ReactComposerTaggerType"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerMessagingTaggerContainer",_subscriptions:undefined,mixins:[c("ReactComposerTaggerContainerMixin")()],statics:{taggerID:c("ReactComposerTaggerType").MESSAGING,loggingName:c("ReactComposerLoggingName").MESSAGING_TAGGER,taggerComponent:c("ReactComposerMessagingTaggerComponent.react")},propTypes:{reactComposerID:h.string.isRequired},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release()}});f.exports=i}),null);
__d("FBSphericalMetadataTags",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPHERICAL:"FBSpherical:Spherical",INITIAL_VERTICAL_FOV_DEGREES:"FBSpherical:InitialVerticalFOVDegrees",GUIDE:"FBSpherical:Guide",HOTSPOT:"FBSpherical:HotspotMetadata"})}),null);
__d("GSphericalMetadataTags",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPHERICAL:"GSpherical:Spherical",INITIAL_VIEW_HEADING_DEGREES:"GSpherical:InitialViewHeadingDegrees",INITIAL_VIEW_PITCH_DEGREES:"GSpherical:InitialViewPitchDegrees",PROJECTION_TYPE:"GSpherical:ProjectionType",STEREO_MODE:"GSpherical:StereoMode",STITCHED:"GSpherical:Stitched",STITCHING_SOFTWARE:"GSpherical:StitchingSoftware"})}),null);
__d("SphericalVideoMetadataTags",["FBSphericalMetadataTags","GSphericalMetadataTags"],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({GSPHERICAL:c("GSphericalMetadataTags"),FBSPHERICAL:c("FBSphericalMetadataTags")});f.exports=h}),null);
__d("VideoCaptionConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={DIALOG_HEIGHT:480,EDITOR_DIALOG_WIDTH:1e3,MENU_DIALOG_HEIGHT:430,UPLOADER_DIALOG_WIDTH:600}}),null);
__d("VideoCaptionRenderUtil",["fbt","LayerFadeOnHide","LayerFadeOnShow","React","SimpleXUIDialog","VideoCaptionConstants","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();i.prototype.renderDialog=function(j,k,l,m){return c("React").createElement(c("XUIDialog.react"),{behaviors:{LayerFadeOnHide:c("LayerFadeOnHide"),LayerFadeOnShow:c("LayerFadeOnShow")},shown:true,width:j,onToggle:m},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},k),c("React").createElement(c("XUIDialogBody.react"),{style:{height:c("VideoCaptionConstants").DIALOG_HEIGHT}},l))};i.prototype.renderAbortGenAutoCaption=function(j){var k=h._("Captions Have Not Finished Generating or Loading"),l=h._("Any captions that have already been generated will not be saved. To add captions to your video, you'll need to generate them again or upload an SRT files.");c("SimpleXUIDialog").showConfirm(l,k,function(m){if(m)j()})};function i(){}f.exports=new i()}),null);
__d("XLiveBroadcastCaptionEditorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/live/caption/editor/",{video_id:{type:"FBID"}})}),null);
__d("LiveVideoCaptionsSection.react",["fbt","AsyncRequest","AdsVideoCaptionLoadingView.react","JSResource","React","RelayDeferredContainer","RelayVideoCaptionRoute","VideoCaptionConstants","VideoCaptionRenderUtil","VideoCaptionPlacements","XUIButton.react","XLiveBroadcastCaptionEditorController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$LiveVideoCaptionsSection2=function(event){this.setState({showCaptionEditor:true})}.bind(this);this.$LiveVideoCaptionsSection4=function(m){this.setState({liveCaptions:m.getPayload()})}.bind(this);this.$LiveVideoCaptionsSection5=function(m){this.setState({showCaptionEditor:false})}.bind(this);this.state={liveCaptions:{},showCaptionEditor:false}}k.prototype.componentDidMount=function(){this.props.videoID&&this.$LiveVideoCaptionsSection1()};k.prototype.render=function(){var l=c("React").createElement(c("XUIButton.react"),{label:h._("Edit Live Captions"),use:"default",onClick:this.$LiveVideoCaptionsSection2});return c("React").createElement("div",null,l,this.$LiveVideoCaptionsSection3())};k.prototype.$LiveVideoCaptionsSection1=function(){var l=c("XLiveBroadcastCaptionEditorController").getURIBuilder().setFBID("video_id",this.props.videoID).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("POST").setHandler(this.$LiveVideoCaptionsSection4).send()};k.prototype.$LiveVideoCaptionsSection3=function(){var l=this.state.liveCaptions;if(!this.state.showCaptionEditor||!l.id)return null;var m=new(c("RelayVideoCaptionRoute"))({caption_id:l.id,hide_apply_button:false,hide_save_button:true,placement:c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT,onExit:this.$LiveVideoCaptionsSection5}),n=h._("Edit Live Captions"),o=c("React").createElement(c("RelayDeferredContainer"),{loader:c("JSResource")("VideoCaptionEditorContainer.react").__setRef("LiveVideoCaptionsSection.react"),render:function p(q,r){return c("React").createElement(q,r)},renderLoading:function(){return c("React").createElement(c("AdsVideoCaptionLoadingView.react"),{onCancel:function(){this.setState({showCaptionEditor:false})}.bind(this)})}.bind(this),route:m});return c("VideoCaptionRenderUtil").renderDialog(c("VideoCaptionConstants").EDITOR_DIALOG_WIDTH,n,o,this.$LiveVideoCaptionsSection5)};f.exports=k}),null);
__d("VideoUploadAutoCaptionsSection.react",["ix","fbt","AdsVideoCaptionLoadingView.react","Image.react","InsightsLocaleNamesSwitch","JSResource","React","RelayDeferredContainer","RelayVideoCaptionRoute","Tooltip","VideoCaptionConstants","VideoCaptionEditEvents","VideoCaptionEditorLogger","VideoCaptionFile","VideoCaptionRenderUtil","VideoCaptionPlacements","VideoCaptionUtil","XUIButton.react","fbglyph","VideoCaptionEditorStateEnums"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("VideoCaptionEditorStateEnums").EditorStateEnum,m=c("InsightsLocaleNamesSwitch").module;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){__p&&__p();k.constructor.call(this,o);this.$VideoUploadAutoCaptionsSection3=function(event){var p=this.state.autoCaptions[0];this.setState({showCaptionEditor:true});this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").CLICK_EDIT_AUTO_CAPTION,p&&p.id,this.props.videoID,null,this.props.hasAutoCaption.toString(),c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}.bind(this);this.$VideoUploadAutoCaptionsSection6=function(){c("VideoCaptionRenderUtil").renderAbortGenAutoCaption(this.$VideoUploadAutoCaptionsSection7)}.bind(this);this.$VideoUploadAutoCaptionsSection7=function(){var p=this.state.autoCaptions[0];this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").ABORT_WAIT_GEN,p&&p.id,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT);this.$VideoUploadAutoCaptionsSection8()}.bind(this);this.$VideoUploadAutoCaptionsSection5=function(p,q){__p&&__p();var r,s=this;this.$VideoUploadAutoCaptionsSection8();if(p===l.SAVING)(function(){var u=s.state.autoCaptions[0].locale||"en_US",v=s.props.addedCaptions.filter(function(x){return x.getLocale()!==u});if(q){var w=new(c("VideoCaptionFile"))(q,u,m[u]);w.setIsAutoGenerated(true);w.setIsDefault(true);s.props.onSaveCaptions(v.concat([w]))}else s.props.onSaveCaptions(v)})();else{var t=this.state.autoCaptions[0];this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").CANCEL_EDIT,t&&t.id,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}}.bind(this);this.$VideoUploadAutoCaptionsSection1=new(c("VideoCaptionEditorLogger"))();this.state={autoCaptions:[],showCaptionEditor:false}}n.prototype.componentDidMount=function(){this.props.videoID&&this.$VideoUploadAutoCaptionsSection2()};n.prototype.componentDidUpdate=function(o){this.props.videoID&&!o.videoID&&this.$VideoUploadAutoCaptionsSection2()};n.prototype.$VideoUploadAutoCaptionsSection2=function(){c("VideoCaptionUtil").fetchAutoCaption(this.props.videoID,this.props.accessToken).then(function(o){o.data&&this.setState({autoCaptions:o.data});var p=o.data;if(p&&p[0]&&p[0].id)this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").FETCHED_SUCCESS,p.id,this.props.videoID,null,true.toString(),c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}.bind(this)).done();this.$VideoUploadAutoCaptionsSection1.log(c("VideoCaptionEditEvents").RENDER_CAPTION_ENTRY,null,this.props.videoID,null,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)};n.prototype.render=function(){var o=void 0;if(this.props.hasAutoCaption)o=c("React").createElement(c("XUIButton.react"),{label:i._("Edit Captions"),use:"default",onClick:this.$VideoUploadAutoCaptionsSection3});else{var p=this.props.disabled?i._("We only support edit auto caption now and will support to edit all captions in the near future."):i._("Automatically generate captions");o=this.state.autoCaptions[0]?c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({disabled:this.props.disabled,image:c("React").createElement(c("Image.react"),{src:h("142451")}),label:i._("Generate"),href:"#",use:"default",onClick:this.$VideoUploadAutoCaptionsSection3},c("Tooltip").propsFor(p))):null}return c("React").createElement("div",null,o,this.$VideoUploadAutoCaptionsSection4())};n.prototype.$VideoUploadAutoCaptionsSection4=function(){var o=this.state.autoCaptions[0];if(!this.state.showCaptionEditor||!o.id)return null;var p=new(c("RelayVideoCaptionRoute"))({caption_id:o.id,hide_apply_button:true,hide_save_button:false,placement:c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT,onExit:this.$VideoUploadAutoCaptionsSection5}),q=i._("Review Captions"),r=c("React").createElement(c("RelayDeferredContainer"),{loader:c("JSResource")("VideoCaptionEditorContainer.react").__setRef("VideoUploadAutoCaptionsSection.react"),render:function s(t,u){return c("React").createElement(t,u)},renderLoading:function(){return c("React").createElement(c("AdsVideoCaptionLoadingView.react"),{onCancel:this.$VideoUploadAutoCaptionsSection6})}.bind(this),route:p});return c("VideoCaptionRenderUtil").renderDialog(c("VideoCaptionConstants").EDITOR_DIALOG_WIDTH,q,r,this.$VideoUploadAutoCaptionsSection5)};n.prototype.$VideoUploadAutoCaptionsSection8=function(){this.setState({showCaptionEditor:false})};f.exports=n}),null);
__d("VideoComposerDialogActions",["VideoComposerDialogActionTypes","VideoComposerDialogDispatcher","VideoUploadProgressBar"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(L,M,N,O){var P={type:c("VideoComposerDialogActionTypes").BACKDATE_CONFIRM,year:L,month:M,day:N,hideFromNewsFeed:O};c("VideoComposerDialogDispatcher").dispatch(P)},i=function i(L){var M={type:c("VideoComposerDialogActionTypes").BOOTLOAD_PARAMETERS,data:L};c("VideoComposerDialogDispatcher").dispatch(M)},j=function j(){var L={type:c("VideoComposerDialogActionTypes").CLOSE_CONFIRM_DIALOG};c("VideoComposerDialogDispatcher").dispatch(L)},k=function k(){var L={type:c("VideoComposerDialogActionTypes").CLOSE_PUBLISH_CONFIRM_DIALOG};c("VideoComposerDialogDispatcher").dispatch(L)},l=function l(){var L={type:c("VideoComposerDialogActionTypes").EXIT_DIALOG};c("VideoComposerDialogDispatcher").dispatch(L)},m=function m(){var L={type:c("VideoComposerDialogActionTypes").EXIT_DIALOG_ATTEMPT};c("VideoComposerDialogDispatcher").dispatch(L)},n=function n(L,M){var N={type:c("VideoComposerDialogActionTypes").FILE_ADDED,file:L,fileInput:M};c("VideoComposerDialogDispatcher").dispatch(N)},o=function o(L){var M={type:c("VideoComposerDialogActionTypes").METADATA_LOADED_FROM_HTML_PLAYER,videoPlayer:L};c("VideoComposerDialogDispatcher").dispatch(M)},p=function p(L){var M={type:c("VideoComposerDialogActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER,data:L};c("VideoComposerDialogDispatcher").dispatch(M)},q=function q(L,M,N,O,P,Q){var R={type:c("VideoComposerDialogActionTypes").INITIALIZE_COMPOSER,actorID:L,targetID:M,composerEntryPointRef:N,composerID:O,fileInput:P,file:Q};c("VideoComposerDialogDispatcher").dispatch(R)},r=function r(L){var M={type:c("VideoComposerDialogActionTypes").INITIALIZE_EDIT_COMPOSER,editParams:L};c("VideoComposerDialogDispatcher").dispatch(M)},s=function s(L){var M={type:c("VideoComposerDialogActionTypes").INIT_VIDEO_UPLOADER,videoUploader:L};c("VideoComposerDialogDispatcher").dispatch(M)},t=function t(L){var M={type:c("VideoComposerDialogActionTypes").LOAD_VIDEO_DATA_FOR_ID,videoData:L};c("VideoComposerDialogDispatcher").dispatch(M)},u=function u(){var L={type:c("VideoComposerDialogActionTypes").NAVIGATED_FROM_PAGE};c("VideoComposerDialogDispatcher").dispatch(L)},v=function v(event,L){var M={type:c("VideoComposerDialogActionTypes").POST_FAILED,errorData:L};c("VideoComposerDialogDispatcher").dispatch(M)},w=function w(event,L){var M={type:c("VideoComposerDialogActionTypes").POST_FINISHED,data:L};c("VideoComposerDialogDispatcher").dispatch(M)},x=function x(){var L={type:c("VideoComposerDialogActionTypes").PUBLISH_POST};c("VideoComposerDialogDispatcher").dispatch(L)},y=function y(){var L={type:c("VideoComposerDialogActionTypes").RESET_COMPOSER};c("VideoComposerDialogDispatcher").dispatch(L)},z=function z(){var L={type:c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_ABORT};c("VideoComposerDialogDispatcher").dispatch(L)},A=function A(){var L={type:c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_ATTEMPT};c("VideoComposerDialogDispatcher").dispatch(L)},B=function B(){var L={type:c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_CONFIRM};c("VideoComposerDialogDispatcher").dispatch(L)},C=function C(){var L={type:c("VideoComposerDialogActionTypes").CANCEL_UPLOAD};c("VideoComposerDialogDispatcher").dispatch(L)},D=function D(L,M,N,O,P){var Q={type:c("VideoComposerDialogActionTypes").SCHEDULE_CONFIRM,scheduleDate:L,postEndDate:M,expireDate:N,expirationType:O,announcementPostTitle:P};c("VideoComposerDialogDispatcher").dispatch(Q)},E=function E(L){var M={type:c("VideoComposerDialogActionTypes").SELECT_TAB,tab:L};c("VideoComposerDialogDispatcher").dispatch(M)},F=function F(L){var M={type:c("VideoComposerDialogActionTypes").UPDATE_TITLE,title:L};c("VideoComposerDialogDispatcher").dispatch(M)},G=function G(event,L){var M={type:c("VideoComposerDialogActionTypes").UPLOAD_FAILED,errorData:L};c("VideoComposerDialogDispatcher").dispatch(M)},H=function H(){var L={type:c("VideoComposerDialogActionTypes").UPLOAD_FINISHED};c("VideoComposerDialogDispatcher").dispatch(L)},I=function I(event,L){var M=c("VideoUploadProgressBar").computeProgress(L.start_offset,L.sent_bytes,L.file_size,0,0),N={type:c("VideoComposerDialogActionTypes").UPLOAD_PROGRESSED,progress:Math.round(10*M)/10};c("VideoComposerDialogDispatcher").dispatch(N)},J=function J(){var L={type:c("VideoComposerDialogActionTypes").CONFIRM_RIGHTS};c("VideoComposerDialogDispatcher").dispatch(L)},K=function K(L){var M={type:c("VideoComposerDialogActionTypes").VIDEO_TYPE_CHANGED,videoType:L};c("VideoComposerDialogDispatcher").dispatch(M)};f.exports={backdateConfirm:h,bootloadParameters:i,cancelUpload:C,closeConfirmDialog:j,closePublishConfirmDialog:k,confirmRights:J,exitDialog:l,exitDialogAttempt:m,fileAdded:n,initializeComposer:q,initializeEditComposer:r,initVideoUploader:s,loadVideoDataForID:t,navigatedFromPage:u,metadataLoadedFromHTMLPlayer:o,metadataLoadedFromVideoUploader:p,postFailed:v,postFinished:w,publishPost:x,resetComposer:y,saveAsDraftAbort:z,saveAsDraftAttempt:A,saveAsDraftConfirm:B,scheduleConfirm:D,selectTab:E,updateTitle:F,uploadFailed:G,uploadFinished:H,uploadProgressed:I,videoTypeChanged:K}}),null);
__d("VideoComposerDialogBasicActions",["VideoComposerDialogActionTypes","VideoComposerDialogDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h=function h(k){var l={type:c("VideoComposerDialogActionTypes").BOOTLOAD_DEFAULT_TAB_PARAMETERS,data:k};c("VideoComposerDialogDispatcher").dispatch(l)},i=function i(k){var l={type:c("VideoComposerDialogActionTypes").UPDATE_CONTENT_TAGS,tags:k};c("VideoComposerDialogDispatcher").dispatch(l)},j=function j(k){var l={type:c("VideoComposerDialogActionTypes").UPDATE_DESCRIPTION,description:k};c("VideoComposerDialogDispatcher").dispatch(l)};f.exports={bootloadDefaultTabParameters:h,updateContentTags:i,updateDescription:j}}),null);
__d("VideoComposerDialogDistributionActions",["VideoComposerDialogDispatcher","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(r){var s={type:c("VideoComposerDialogActionTypes").BOOTLOAD_DISTRIBUTION_TAB,data:r};c("VideoComposerDialogDispatcher").dispatch(s)},i=function i(){var r={type:c("VideoComposerDialogActionTypes").TOGGLE_NEWS_FEED};c("VideoComposerDialogDispatcher").dispatch(r)},j=function j(){var r={type:c("VideoComposerDialogActionTypes").TOGGLE_EMBEDDING};c("VideoComposerDialogDispatcher").dispatch(r)},k=function k(){var r={type:c("VideoComposerDialogActionTypes").TOGGLE_SECRET_VIDEO};c("VideoComposerDialogDispatcher").dispatch(r)},l=function l(r){var s={type:c("VideoComposerDialogActionTypes").CROSSPOST_PAGES_FETCHED,pages:r};c("VideoComposerDialogDispatcher").dispatch(s)},m=function m(r){var s={type:c("VideoComposerDialogActionTypes").TOGGLE_CROSSPOST_PAGE,pageID:r};c("VideoComposerDialogDispatcher").dispatch(s)},n=function n(){var r={type:c("VideoComposerDialogActionTypes").TOGGLE_GRAPHIC_WARNING};c("VideoComposerDialogDispatcher").dispatch(r)},o=function o(){var r={type:c("VideoComposerDialogActionTypes").TOGGLE_BLOCK_SOCIAL};c("VideoComposerDialogDispatcher").dispatch(r)},p=function p(){var r={type:c("VideoComposerDialogActionTypes").CROSSPOST_LINK_CLICKED};c("VideoComposerDialogDispatcher").dispatch(r)},q=function q(){var r={type:c("VideoComposerDialogActionTypes").REFRESH_CROSSPOST_PAGES};c("VideoComposerDialogDispatcher").dispatch(r)};f.exports={bootloadTab:h,toggleNewsFeed:i,toggleEmbedding:j,toggleSecretVideo:k,crosspostPagesFetched:l,toggleCrosspostPage:m,toggleGraphicWarning:n,toggleBlockSocial:o,crosspostLinkClicked:p,refreshCrosspostPages:q}}),null);
__d("VideoComposerDialogRightsActions",["VideoComposerDialogDispatcher","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(r){var s={type:c("VideoComposerDialogActionTypes").BOOTLOAD_RIGHTS_PARAMETERS,data:r};c("VideoComposerDialogDispatcher").dispatch(s)},i=function i(r){var s={type:c("VideoComposerDialogActionTypes").UPDATE_MONITORING_TYPE,monitoringType:r};c("VideoComposerDialogDispatcher").dispatch(s)},j=function j(r){var s={type:c("VideoComposerDialogActionTypes").UPDATE_SHOULD_DETECT_MATCHES,shouldDetectMatches:r};c("VideoComposerDialogDispatcher").dispatch(s)},k=function k(r){var s={type:c("VideoComposerDialogActionTypes").UPDATE_FB_WHITELISTED_USERS,fbWhitelistedUsers:r};c("VideoComposerDialogDispatcher").dispatch(s)},l=function l(r){var s={type:c("VideoComposerDialogActionTypes").UPDATE_IG_WHITELISTED_USERS,igWhitelistedUsers:r};c("VideoComposerDialogDispatcher").dispatch(s)},m=function m(r,s){var t={type:c("VideoComposerDialogActionTypes").UPDATE_OWNERSHIP_COUNTRIES,ownershipCountries:r,areCountriesIncluded:s};c("VideoComposerDialogDispatcher").dispatch(t)},n=function n(r){var s={type:c("VideoComposerDialogActionTypes").UPDATE_MATCH_RULE,matchRuleID:r};c("VideoComposerDialogDispatcher").dispatch(s)},o=function o(r){var s={type:c("VideoComposerDialogActionTypes").UPDATE_ATTRIBUTION,attributionID:r};c("VideoComposerDialogDispatcher").dispatch(s)},p=function p(r){var s={type:c("VideoComposerDialogActionTypes").UPDATE_CATEGORY,category:r};c("VideoComposerDialogDispatcher").dispatch(s)},q=function q(){var r={type:c("VideoComposerDialogActionTypes").UPDATE_CATEGORY_REQUIRED_ERROR};c("VideoComposerDialogDispatcher").dispatch(r)};f.exports={bootloadParameters:h,updateAttribution:o,updateCategory:p,updateFBWhitelistedUsers:k,updateIGWhitelistedUsers:l,updateMatchRule:n,updateMonitoringType:i,updateOwnershipCountries:m,updateShouldDetectMatches:j,updateShowCategoryRequiredError:q}}),null);
__d("VideoComposerDialogThumbnailActions",["VideoComposerDialogDispatcher","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(n){var o={type:c("VideoComposerDialogActionTypes").GENERATED_THUMBNAILS,data:n};c("VideoComposerDialogDispatcher").dispatch(o)},i=function i(n){var o={type:c("VideoComposerDialogActionTypes").SELECT_SECTION,section:n};c("VideoComposerDialogDispatcher").dispatch(o)},j=function j(n){var o={type:c("VideoComposerDialogActionTypes").TOGGLE_SELECTED_GENERATED_THUMBNAIL,index:n};c("VideoComposerDialogDispatcher").dispatch(o)},k=function k(n){var o={type:c("VideoComposerDialogActionTypes").UPDATE_CUSTOM_THUMBNAIL,thumbnail:n};c("VideoComposerDialogDispatcher").dispatch(o)},l=function l(n){var o={type:c("VideoComposerDialogActionTypes").UPDATE_SCRUBBED_THUMBNAIL,thumbnail:n};c("VideoComposerDialogDispatcher").dispatch(o)},m=function m(n){var o={type:c("VideoComposerDialogActionTypes").UPDATE_SELECTED_THUMBNAIL,thumbnail:n};c("VideoComposerDialogDispatcher").dispatch(o)};f.exports={generatedThumbnails:h,selectThumbnailSection:i,toggleSelectedGeneratedThumbnail:j,updateCustomThumbnail:k,updateScrubbedThumbnail:l,updateSelectedThumbnail:m}}),null);
__d("VideoComposerDialogTrackingActions",["VideoComposerDialogDispatcher","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h=function h(j){var k={type:c("VideoComposerDialogActionTypes").UPDATE_CUSTOM_LABELS,customLabels:j};c("VideoComposerDialogDispatcher").dispatch(k)},i=function i(j){var k={type:c("VideoComposerDialogActionTypes").UPDATE_UNIVERSAL_ID,universalID:j};c("VideoComposerDialogDispatcher").dispatch(k)};f.exports={updateCustomLabels:h,updateUniversalID:i}}),null);
__d("VideoComposerDialogCaptionEditorActions",["VideoComposerDialogDispatcher","immutable","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(x,y){var z={type:c("VideoComposerDialogActionTypes").ADD_CAPTION_ENTRY,caption:y,idx:x};c("VideoComposerDialogDispatcher").dispatch(z)},i=function i(x){var y={type:c("VideoComposerDialogActionTypes").REMOVE_CAPTION_ENTRY,idx:x};c("VideoComposerDialogDispatcher").dispatch(y)},j=function j(x,y){var z={type:c("VideoComposerDialogActionTypes").EDIT_CAPTION_ENTRY,caption:y,idx:x};c("VideoComposerDialogDispatcher").dispatch(z)},k=function k(x){var y={type:c("VideoComposerDialogActionTypes").SET_PREVIEW_ENTRY,idx:x};c("VideoComposerDialogDispatcher").dispatch(y)},l=function l(x){var y={type:c("VideoComposerDialogActionTypes").PLAY_PREVIEW_ENTRY,idx:x};c("VideoComposerDialogDispatcher").dispatch(y)},m=function m(x){var y={type:c("VideoComposerDialogActionTypes").SET_NEXT_ENTRY,idx:x};c("VideoComposerDialogDispatcher").dispatch(y)},n=function n(){var x={type:c("VideoComposerDialogActionTypes").CONFIRM_CLOSE_DIALOG};c("VideoComposerDialogDispatcher").dispatch(x)},o=function o(){var x={type:c("VideoComposerDialogActionTypes").CANCEL_CLOSE_DIALOG};c("VideoComposerDialogDispatcher").dispatch(x)},p=function p(x,y,z,A,B,C){var D={type:c("VideoComposerDialogActionTypes").SET_CAPTIONS,captions:x,captionID:y,captionLocale:z,videoID:A,appID:B,placement:C};c("VideoComposerDialogDispatcher").dispatch(D)},q=function q(x){var y={type:c("VideoComposerDialogActionTypes").SET_EDITOR_LANGUAGE,language:x};c("VideoComposerDialogDispatcher").dispatch(y)},r=function r(x){var y={type:c("VideoComposerDialogActionTypes").SET_EDITOR_LOCALE,locale:x};c("VideoComposerDialogDispatcher").dispatch(y)},s=function s(){var x={type:c("VideoComposerDialogActionTypes").INITIALIZE_EDITOR_LANGUAGE};c("VideoComposerDialogDispatcher").dispatch(x)},t=function t(){var x={type:c("VideoComposerDialogActionTypes").SHOW_EXIT_DIALOG};c("VideoComposerDialogDispatcher").dispatch(x)},u=function u(){var x={type:c("VideoComposerDialogActionTypes").START_SAVE_CAPTION_CHANGESET};c("VideoComposerDialogDispatcher").dispatch(x)},v=function v(x){var y={type:c("VideoComposerDialogActionTypes").FINISH_SAVE_CAPTION_CHANGESET,error:x};c("VideoComposerDialogDispatcher").dispatch(y)},w=function w(){var x={type:c("VideoComposerDialogActionTypes").RESET_CAPTION_EDITOR};c("VideoComposerDialogDispatcher").dispatch(x)};f.exports={addCaptionEntry:h,removeCaptionEntry:i,editingCaptionEntry:j,setPreviewEntry:k,selectLanguage:q,selectLocale:r,setCaptions:p,setNextEntry:m,playPreviewEntry:l,confirmCloseDialog:n,cancelCloseDialog:o,showExitDialog:t,startSaveCaptionChangeset:u,finishSaveCaptionChangeset:v,setLanguage:s,resetCaptionEditor:w}}),null);
__d("VideoComposerDialogCaptionEditorPlayerActions",["VideoComposerDialogDispatcher","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h=function h(m){c("VideoComposerDialogDispatcher").dispatch({type:c("VideoComposerDialogActionTypes").RESET_PLAYER,video:m})},i=function i(m){c("VideoComposerDialogDispatcher").dispatch({type:c("VideoComposerDialogActionTypes").SET_VPC,vpc:m})},j=function j(m){c("VideoComposerDialogDispatcher").dispatch({type:c("VideoComposerDialogActionTypes").SET_CURRENT_PLAY_POSITION,position:m})},k=function k(m){c("VideoComposerDialogDispatcher").dispatch({type:c("VideoComposerDialogActionTypes").SET_DURATION,duration:m})},l=function l(m){c("VideoComposerDialogDispatcher").dispatch({type:c("VideoComposerDialogActionTypes").SET_PLAYER_STATE,isPlaying:m})};f.exports={resetPlayer:h,setVPC:i,setCurrentPlayPosition:j,setDuration:k,setPlayerState:l}}),null);
__d("VideoComposerDialogCaptionsTabActions",["VideoComposerDialogDispatcher","immutable","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(){var L={type:c("VideoComposerDialogActionTypes").SHOW_CAPTION_EDITOR};c("VideoComposerDialogDispatcher").dispatch(L)},i=function i(){var L={type:c("VideoComposerDialogActionTypes").HIDE_CAPTION_EDITOR};c("VideoComposerDialogDispatcher").dispatch(L)},j=function j(L,M,N,O,P,Q,R,S){var T={type:c("VideoComposerDialogActionTypes").INITIALIZE_CAPTION_LANDING_SCREEN,videoFile:L,video_id:M,accessToken:N,composerID:O,pageID:P,videoDurationInSec:Q,isEditFlow:R,isOldComposer:S};c("VideoComposerDialogDispatcher").dispatch(T)},k=function k(){var L={type:c("VideoComposerDialogActionTypes").CAPTION_LANDING_SCREEN_OPEN_EVENT};c("VideoComposerDialogDispatcher").dispatch(L)},l=function l(){var L={type:c("VideoComposerDialogActionTypes").OLD_COMPOSER_CAPTION_TAB_OPEN_EVENT};c("VideoComposerDialogDispatcher").dispatch(L)},m=function m(){var L={type:c("VideoComposerDialogActionTypes").RESET_OPEN_LANDING_SCREEN_STATE};c("VideoComposerDialogDispatcher").dispatch(L)},n=function n(L){var M={type:c("VideoComposerDialogActionTypes").FINISHED_FETCH_DRAFTS,drafts:L};c("VideoComposerDialogDispatcher").dispatch(M)},o=function o(){var L={type:c("VideoComposerDialogActionTypes").GENERATE};c("VideoComposerDialogDispatcher").dispatch(L)},p=function p(){var L={type:c("VideoComposerDialogActionTypes").CANCEL_GENERATE};c("VideoComposerDialogDispatcher").dispatch(L)},q=function q(L){var M={type:c("VideoComposerDialogActionTypes").GENERATE_PROGRESS_UPDATE,progress:L};c("VideoComposerDialogDispatcher").dispatch(M)},r=function r(){var L={type:c("VideoComposerDialogActionTypes").CREATE};c("VideoComposerDialogDispatcher").dispatch(L)},s=function s(L){var M={type:c("VideoComposerDialogActionTypes").EDIT_CAPTIONS_DRAFT,id:L};c("VideoComposerDialogDispatcher").dispatch(M)},t=function t(L){var M={type:c("VideoComposerDialogActionTypes").DELETE_CAPTIONS_DRAFT,id:L};c("VideoComposerDialogDispatcher").dispatch(M)},u=function u(L){var M={type:c("VideoComposerDialogActionTypes").START_SRT_UPLOAD,captions:L};c("VideoComposerDialogDispatcher").dispatch(M)},v=function v(L){var M={type:c("VideoComposerDialogActionTypes").SELECT_SPOKEN_LANGUAGE,language:L};c("VideoComposerDialogDispatcher").dispatch(M)},w=function w(L){var M={type:c("VideoComposerDialogActionTypes").SELECT_SPOKEN_LOCALE,locale:L};c("VideoComposerDialogDispatcher").dispatch(M)},x=function x(L,M,N){var O={type:c("VideoComposerDialogActionTypes").GENERATE_COMPLETE,captions:L,locale:M,subtitlesID:N};c("VideoComposerDialogDispatcher").dispatch(O)},y=function y(L){var M={type:c("VideoComposerDialogActionTypes").UPDATE_ERROR_STATE,errors:L};c("VideoComposerDialogDispatcher").dispatch(M)},z=function z(){var L={type:c("VideoComposerDialogActionTypes").CREATE_COMPLETE};c("VideoComposerDialogDispatcher").dispatch(L)},A=function A(){var L={type:c("VideoComposerDialogActionTypes").UPDATE_CAPTION_FILES};c("VideoComposerDialogDispatcher").dispatch(L)},B=function B(L,M,N){var O={type:c("VideoComposerDialogActionTypes").FINISH_SRT_UPLOAD,success:L,error:M,uploadedVideoSubtitles:N};c("VideoComposerDialogDispatcher").dispatch(O)},C=function C(){var L={type:c("VideoComposerDialogActionTypes").RESET_CAPTIONS_LANDING_TAB};c("VideoComposerDialogDispatcher").dispatch(L)},D=function D(){var L={type:c("VideoComposerDialogActionTypes").RETRY_AUTO_GENERATION};c("VideoComposerDialogDispatcher").dispatch(L)},E=function E(){var L={type:c("VideoComposerDialogActionTypes").RESET_AUTO_GENERATING_LOCALE};c("VideoComposerDialogDispatcher").dispatch(L)},F=function F(){var L={type:c("VideoComposerDialogActionTypes").RESUME_AUTO_GENERATION};c("VideoComposerDialogDispatcher").dispatch(L)},G=function G(){var L={type:c("VideoComposerDialogActionTypes").TRY_RESUME_AUTO_GENERATION};c("VideoComposerDialogDispatcher").dispatch(L)},H=function H(L){var M={type:c("VideoComposerDialogActionTypes").INITIALIZE_ALL_CAPTION_FILES,subtitles:L};c("VideoComposerDialogDispatcher").dispatch(M)},I=function I(L){var M={type:c("VideoComposerDialogActionTypes").BOOTLOAD_PARAMETERS_CAPTIONS_TAB,data:L};c("VideoComposerDialogDispatcher").dispatch(M)},J=function J(L){var M={type:c("VideoComposerDialogActionTypes").CHANGE_PUBLISHED_STATE,id:L};c("VideoComposerDialogDispatcher").dispatch(M)},K=function K(){var L={type:c("VideoComposerDialogActionTypes").PENDING_TO_PUBLISHED};c("VideoComposerDialogDispatcher").dispatch(L)};f.exports={showCaptionEditor:h,hideCaptionEditor:i,initialize:j,generate:o,cancelGenerate:p,updateGenerateProgress:q,create:r,editCaptionsDraft:s,deleteCaptionsDraft:t,upload:u,selectSpokenLanguage:v,selectSpokenLocale:w,generateComplete:x,createComplete:z,finishedFetchDrafts:n,updateCaptionFiles:A,updateErrorState:y,finishSRTUpload:B,resetCaptionsLandingTab:C,retryAutoGeneration:D,resetAutoGeneratingLocale:E,resumeAutoGeneration:F,tryResumeAutoGeneration:G,initializeAllCaptionFiles:H,bootloadParametersCaptionsTab:I,changePublishedState:J,changePublishedStatePendingToPublished:K,tryLogCaptionLandingScreenOpenEvent:k,emitOldComposerCaptionTabOpenEvent:l,resetOpenLandingScreenState:m}}),null);
__d("VideoComposerDialogSphericalDirectorActions",["VideoComposerDialogDispatcher","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h=function h(k){var l={type:c("VideoComposerDialogActionTypes").BOOTLOAD_SPHERICAL_DIRECTOR_PARAMETERS,data:k};c("VideoComposerDialogDispatcher").dispatch(l)},i=function i(k){var l={type:c("VideoComposerDialogActionTypes").BOOTLOAD_SPHERICAL_COMPOSER_CONFIG,data:k};c("VideoComposerDialogDispatcher").dispatch(l)},j=function j(k){var l={type:c("VideoComposerDialogActionTypes").TOGGLE_SPHERICAL,data:k};c("VideoComposerDialogDispatcher").dispatch(l)};f.exports={bootloadParameters:h,bootloadSphericalComposerConfig:i,toggleSpherical:j}}),null);
__d("VideoComposerDialogAdjustHeightBehavior",["csx","DOM","Event","Style","SubscriptionsHandler","Vector","throttle"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=800,j=720,k=660,l=80;function m(n){"use strict";__p&&__p();this.$VideoComposerDialogAdjustHeightBehavior4=function(){var o=c("Vector").getViewportDimensions().y,p=void 0;if(o>=i+l)p=i;else if(o>=j+l)p=j;else p=k;c("Style").set(this.$VideoComposerDialogAdjustHeightBehavior3,"height",p+"px");this.$VideoComposerDialogAdjustHeightBehavior2.updatePosition()}.bind(this);this.$VideoComposerDialogAdjustHeightBehavior2=n}m.prototype.enable=function(){"use strict";this.$VideoComposerDialogAdjustHeightBehavior1=new(c("SubscriptionsHandler"))();this.$VideoComposerDialogAdjustHeightBehavior1.addSubscriptions(this.$VideoComposerDialogAdjustHeightBehavior2.subscribe("beforeshow",this.$VideoComposerDialogAdjustHeightBehavior4),c("Event").listen(window,"resize",c("throttle")(this.$VideoComposerDialogAdjustHeightBehavior4)));this.$VideoComposerDialogAdjustHeightBehavior3=c("DOM").find(this.$VideoComposerDialogAdjustHeightBehavior2.getRoot(),"._2rjf")};m.prototype.disable=function(){"use strict";this.$VideoComposerDialogAdjustHeightBehavior1&&this.$VideoComposerDialogAdjustHeightBehavior1.release();this.$VideoComposerDialogAdjustHeightBehavior1=null};f.exports=m}),null);
__d("VideoComposerDialogTab",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BASIC:"basic",DISTRIBUTION:"distribution",CAPTIONS:"captions",AD_BREAKS:"ad_breaks",RIGHTS:"rights",TRACKING:"tracking",THUMBNAILS:"thumbnails",SPHERICAL_DIRECTOR:"spherical_director",OLD_ADBREAKS:"old_ad-breaks-tab",OLD_ATTRIBUTIONS:"old_attributions-tab",OLD_BASIC:"old_basic-tab",OLD_DESTINATION:"old_destination-tab",OLD_ADVANCED:"old_advanced-tab",OLD_CAPTIONS:"old_captions-tab",OLD_SPHERICAL:"old_spherical-controls-tab",OLD_PERMISSIONS:"old_permissions-tab",OLD_RIGHTS:"old_rights-tab",OLD_WHITELIST:"old_whitelist-tab",OLD_SUMMARY:"old_summary-tab"})}),null);
__d("VideoComposerDialogBodySection.react",["cx","React","ScrollableArea.react","VideoComposerDialogTab","VideoComposerDialogTabs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=c("VideoComposerDialogTabs").get(this.props.selectedTab).bodyContainer;return c("React").createElement("div",{className:"_65jy"+(this.props.selectedTab!==c("VideoComposerDialogTab").SPHERICAL_DIRECTOR?" _158t":"")},c("React").createElement("div",{className:"_3_7b"+(this.props.selectedTab===c("VideoComposerDialogTab").SPHERICAL_DIRECTOR?" _1ktk":"")+(this.props.selectedTab===c("VideoComposerDialogTab").BASIC||this.props.selectedTab===c("VideoComposerDialogTab").SPHERICAL_DIRECTOR?" _1ktl":"")+(this.props.selectedTab===c("VideoComposerDialogTab").BASIC||this.props.selectedTab===c("VideoComposerDialogTab").SPHERICAL_DIRECTOR?" _1ktm":"")},c("React").createElement(l,null)))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogLeftSection.react",["cx","React","VideoComposerDialogBodySectionContainer.react","VideoComposerDialogFooterSectionContainer.react","VideoComposerDialogTitleSectionContainer.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:"_2gly"},c("React").createElement(c("VideoComposerDialogTitleSectionContainer.react"),null),c("React").createElement(c("VideoComposerDialogBodySectionContainer.react"),null),c("React").createElement(c("VideoComposerDialogFooterSectionContainer.react"),null))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogRightSection.react",["cx","React","VideoComposerDialogTabSectionContainer.react","VideoComposerDialogVideoTypeSectionContainer.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:"_kwk"},c("React").createElement(c("VideoComposerDialogVideoTypeSectionContainer.react"),null),c("React").createElement(c("VideoComposerDialogTabSectionContainer.react"),null))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogConstants",[],(function a(b,c,d,e,f,g){"use strict";var h={SIXTEEN_NINE:16/9,DIALOG_WIDTH:980,GENERATED_THUMBNAILS:10,PLAYER_HEIGHT:360,PLAYER_WIDTH:640,THUMBNAIL_HEIGHT:100,THUMBNAIL_WIDTH:178};f.exports=h}),null);
__d("VideoComposerDialogRoot.react",["ix","cx","fbt","FBConfirmDialog.react","FlexLayout.react","Image.react","Link.react","React","VideoComposerDialogActions","VideoComposerDialogAdjustHeightBehavior","VideoComposerDialogConstants","VideoComposerDialogLeftSection.react","VideoComposerDialogRightSection.react","XUIDialog.react","XUIDialogBody.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.$VideoComposerDialogRoot1=function(n){if(!n)c("VideoComposerDialogActions").closeConfirmDialog()};m.prototype.render=function(){var n=c("React").createElement(c("XUIDialogBody.react"),{className:"_2rjf"},c("React").createElement(c("FlexLayout.react"),{justify:"all",align:"stretch",className:"_2rjg"},c("React").createElement(c("VideoComposerDialogLeftSection.react"),null),c("React").createElement(c("VideoComposerDialogRightSection.react"),null)));return c("React").createElement(c("XUIDialog.react"),{className:"_2rjm",label:"placeholder",labelIsHidden:true,layerHideOnBlur:false,behaviors:{VideoComposerDialogAdjustHeightBehavior:c("VideoComposerDialogAdjustHeightBehavior")},shown:this.props.shown,width:c("VideoComposerDialogConstants").DIALOG_WIDTH},n,c("React").createElement(c("Link.react"),{href:"#",onClick:this.props.onCloseButtonClick,className:"_2rjv"},c("React").createElement(c("Image.react"),{alt:j._("Close"),src:h("125923")})),c("React").createElement(c("FBConfirmDialog.react"),{className:"_2rjw",title:j._("Exit Session"),content:j._("Are you sure you want to leave?"),onConfirm:c("VideoComposerDialogActions").exitDialog,onCancel:c("VideoComposerDialogActions").closeConfirmDialog,onToggle:this.$VideoComposerDialogRoot1,shown:this.props.showExitConfirmDialog}))};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("VideoComposerDialogTabSection.react",["cx","React","ScrollableArea.react","VideoComposerDialogTabUtils"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:"_1k_f"},c("VideoComposerDialogTabUtils").getTabContainers(this.props.displayedTabs))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogPublishConfirmDialog.react",["cx","fbt","ix","FlexLayout.react","Image.react","LeftRight.react","List.react","React","VideoComposerDialogActions","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","formatDate","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){__p&&__p();var n=[],o=void 0;if(this.props.isDraft){o=j("429286");n.push(c("React").createElement("div",{className:"_kve"},c("React").createElement("div",{className:"_kvf _3-95"},i._("Your Video post was Successfully Saved!")),c("React").createElement("div",null,i._("It can be found in Publishing Tools > Video Library or your Page Timeline Tools"))))}else if(this.props.scheduleDate){o=j("429287");n.push(c("React").createElement("div",{className:"_kve"},i._("Video Post Scheduled Date:"),c("React").createElement("div",{className:"_kvf"},i._("{schedule date}",[i.param("schedule date",this.$VideoComposerDialogPublishConfirmDialog1(this.props.scheduleDate))]))))}else{o=j("425005");n.push(c("React").createElement("div",{className:"_kve"},c("React").createElement("div",{className:"_kvf _3-95"},i._("Your video post is processing")),c("React").createElement("div",null,i._("When finished your video will be posted and you will be notified."))))}if(this.props.expireDate)n.push(c("React").createElement("div",{className:"_kve"},i._("Video Post Expire Date:"),c("React").createElement("div",{className:"_kvf"},i._("{expire date}",[i.param("expire date",this.$VideoComposerDialogPublishConfirmDialog1(this.props.expireDate))]))));if(this.props.postEndDate)n.push(c("React").createElement("div",{className:"_kve"},i._("News feed Distribution Stop Date:"),c("React").createElement("div",{className:"_kvf"},i._("{post end date}",[i.param("post end date",this.$VideoComposerDialogPublishConfirmDialog1(this.props.postEndDate))]))));return c("React").createElement(c("XUIDialog.react"),{isStrictlyControlled:true,label:"confirm dialog",shown:this.props.shown,width:680},c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("LeftRight.react"),null,c("React").createElement("div",null),c("React").createElement(c("Image.react"),{style:{cursor:"pointer"},src:j("363596"),onClick:c("VideoComposerDialogActions").closePublishConfirmDialog})),c("React").createElement(c("FlexLayout.react"),{direction:"vertical",align:"center"},c("React").createElement(c("Image.react"),{src:o,className:"_kvb"}),c("React").createElement(c("List.react"),{className:"_kvc"},n.map(function(p,q){return c("React").createElement("li",{key:q},p)})))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{size:"xlarge",use:"confirm",onClick:c("VideoComposerDialogActions").closePublishConfirmDialog,label:i._("Continue")})))};m.prototype.$VideoComposerDialogPublishConfirmDialog1=function(n){if(!n)return"";return c("formatDate")(n,"F jS Y \\a\\t g:ia",{skipPatternLocalization:true})};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("VideoComposerDialogWrapper.react",["React","VideoComposerDialogPublishConfirmDialog.react","VideoComposerDialogRootContainer.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.dialogShown?c("React").createElement(c("VideoComposerDialogRootContainer.react"),null):null;return c("React").createElement("div",null,k,c("React").createElement(c("VideoComposerDialogPublishConfirmDialog.react"),babelHelpers["extends"]({shown:this.props.publishConfirmDialogShown},this.props.publishConfirmDialogData)))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("VideoComposerDialogCaptionEditorConstants",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h={SMALLEST_UNIT:.09,TOP:50,START_TIME_OFFSET_IN_MS:100,DURATION_TIME_IN_MS:1e3,DIALOG_WIDTH:970,MIN_HEIGHT:645,MAX_HEIGHT:645,LEFT_PANE_WIDTH:670,RIGHT_PANE_WIDTH:300,INITIAL_SPOKEN_LOCALE:"xx_XX",EMPTY_LOCALE:"",NO_LANGUAGE_SELECTED:"Select Language",AUTO_GENERATED:"AUTO_GENERATION",SPEECH_NON_SPEECH:"SPEECH_NON_SPEECH",SRT_UPLOAD:"SRT_UPLOAD",MANUAL:"MANUAL",AUTO_GENERATION:"AUTO_GENERATION",AUTO_GENERATE_RETRY_TEXT:"Error auto-generating captions. Retrying.",AUTO_GENERATABLE_HEAD_LOCALES:c("immutable").Set(["en_US","es_LA"]),GENERAL_LOCALES_TO_HEAD:c("immutable").Map({en_XX:"en_US",es_XX:"es_LA",fr_XX:"fr_FR",ja_XX:"ja_JP",nl_XX:"nl_NL",pt_XX:"pt_BR",tl_XX:"tl_PH"}),HEAD_TO_GENERAL_LOCALES:c("immutable").Map({en_US:"en_XX",es_LA:"es_XX",fr_FR:"fr_XX",ja_JP:"ja_XX",nl_NL:"nl_XX",pt_BR:"pt_XX",tl_PH:"tl_XX"}),NO_PAYLOAD:"NO_PAYLOAD",GENERATION_PILL_WIDTH:368,MAX_FAKE_POLL_ITERATIONS:6e3,POLL_FAKE_FREQUENCY_GENERATE_MS:1e3,DEFAULT_PROCESSING_SPEED:2,GENERATION_RETRY_THRESHOLD:{PCT:175,TIME_S:75},BUTTON_UNIFORM:{use:{"default":{normal:{background:"transparent"},tall:{background:"transparent"}}},padding:{normal:{onlyIcon:"0px"},tall:{onlyIcon:"0px"}},height:{normal:16,tall:20}},VIDEO_DURATION_PADDING:1e4,EMPTY_CAPTION_TEXT:" ",SEGMENT_LENGTH:76,RESUME_PLAYBACK_AFTER:1e3,AUTO_GEN_PROGRESS_RATE_FACTOR:.5};f.exports=h}),null);
__d("VideoComposerDialogCaptionEditorDialog.react",["cx","React","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorPlayerSection.react","VideoComposerDialogCaptionEditorRightSectionContainer.react","XUIDialog.react","XUIDialogBody.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=c("React").createElement(c("XUIDialogBody.react"),{className:"_2gd1"},c("React").createElement(c("VideoComposerDialogCaptionEditorPlayerSection.react"),{video_id:this.props.video_id}),c("React").createElement(c("VideoComposerDialogCaptionEditorRightSectionContainer.react"),{caption:this.props.caption}));return c("React").createElement(c("XUIDialog.react"),{className:"_2gd2",label:"captionEditor",labelIsHidden:true,layerHideOnBlur:false,shown:this.props.show_caption_editor,width:c("VideoComposerDialogCaptionEditorConstants").DIALOG_WIDTH},l)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogCaptionEditorLoadingShimmer.react",["cssVar","cx","FBLoadShimmer.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("span",{className:"_176x"},c("React").createElement(c("FBLoadShimmer.react"),{style:{backgroundColor:"#e9ebee"},className:"_3-96",height:14,width:45}),c("React").createElement(c("FBLoadShimmer.react"),{style:{backgroundColor:"#e9ebee"},className:"_3-94",height:14,width:260}),c("React").createElement(c("FBLoadShimmer.react"),{style:{backgroundColor:"#e9ebee"},className:"_3-96",height:14,width:106}),c("React").createElement(c("FBLoadShimmer.react"),{style:{backgroundColor:"#e9ebee"},height:14,width:45}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogCaptionEditorListLoading.react",["cx","React","VideoComposerDialogCaptionEditorLoadingShimmer.react","XUINotice.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.$VideoComposerDialogCaptionEditorListLoading1=function(l){var m=[];for(var n=0;n<l;n++)m.push(c("React").createElement(c("VideoComposerDialogCaptionEditorLoadingShimmer.react"),{key:n}));return m};k.prototype.render=function(){var l=this.props.showShimmer?this.$VideoComposerDialogCaptionEditorListLoading1(4):null;return c("React").createElement("span",null,c("React").createElement("span",{className:"_176x"},c("React").createElement(c("XUINotice.react"),{use:"notify"},c("React").createElement("span",{className:"_177r"},this.props.header),c("React").createElement("span",{className:"_178h"},this.props.description))),l)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogCaptionEditorEditCaptions.react",["fbt","React","RelayFBEnvironment","RelayModern","VideoComposerDialogCaptionEditorCaptionsListGenerator.react","VideoComposerDialogCaptionEditorListLoading.react","VideoComposerDialogCaptionEditorEditCaptionsContainerRelayQuery.graphql"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l=c("RelayModern").QueryRenderer,m=c("RelayModern").graphql;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){return c("React").createElement(l,{cacheConfig:{force:true},environment:c("RelayFBEnvironment"),query:i||(i=function i(){return c("VideoComposerDialogCaptionEditorEditCaptionsContainerRelayQuery.graphql")}),variables:{caption_id:this.props.caption.id},render:function(o){var p=o.error,q=o.props;if(p)return c("React").createElement("div",null,h._("Loading failed"));else if(q)return c("React").createElement(c("VideoComposerDialogCaptionEditorCaptionsListGenerator.react"),{node:q.node,id:this.props.caption.id});return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogCaptionEditorListLoading.react"),{header:this.props.loadingStateHeader,description:this.props.loadingStateDescription,showShimmer:true}))}.bind(this)})};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d("VideoComposerDialogCaptionEditorPlayerSection.react",["cx","React","VideoComposerDialogCaptionEditorFooterContainer.react","VideoComposerDialogCaptionEditorPlayerSectionBodyContainer.react","VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer.react","VideoComposerDialogCaptionEditorSubtitlesDragAreaContainer.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("span",{className:"_647w"},c("React").createElement("div",{className:"_647x"},c("React").createElement(c("VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer.react"),null),c("React").createElement(c("VideoComposerDialogCaptionEditorPlayerSectionBodyContainer.react"),this.props),c("React").createElement(c("VideoComposerDialogCaptionEditorSubtitlesDragAreaContainer.react"),null)),c("React").createElement("span",null,c("React").createElement(c("VideoComposerDialogCaptionEditorFooterContainer.react"),null)))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogCaptionEditorRightSection.react",["cx","fbt","React","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorLanguageSearchContainer.react","VideoComposerDialogCaptionEditorEditCaptions.react","VideoComposerDialogCaptionEditorListLoading.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.$VideoComposerDialogCaptionEditorRightSection1=function(m){if(m)return{header:i._("Creating Time Segments"),description:i._("You can write and edit your captions after we've finished creating the time segments."),showShimmer:m};else return{header:i._("Select a Language"),description:i._("Select a language for your captions to proceed."),showShimmer:m}};l.prototype.render=function(){var m=this.props.language!==c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED&&this.props.language!==c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE,n=this.$VideoComposerDialogCaptionEditorRightSection1(m),o=this.props.caption&&this.props.caption.id&&m?c("React").createElement(c("VideoComposerDialogCaptionEditorEditCaptions.react"),{caption:this.props.caption,loadingStateHeader:n.header,loadingStateDescription:n.description}):c("React").createElement(c("VideoComposerDialogCaptionEditorListLoading.react"),n);return c("React").createElement("div",{className:"_1qsh"},c("React").createElement(c("VideoComposerDialogCaptionEditorLanguageSearchContainer.react"),null),o)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogCaptionLandingAddSubtitleButtons.react",["ix","cx","fbt","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorUtils","React","FileInput.react","SUIBusinessTheme","SUIButton.react","SUIGlyphIcon.react","asset","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$VideoComposerDialogCaptionLandingAddSubtitleButtons2=function(event){var s=event.target;if(s.value){this.props.onUpload(s);this.refs.captionFileInput.getFileInput().clear()}}.bind(this),o}m.prototype.render=function(){var n=this.$VideoComposerDialogCaptionLandingAddSubtitleButtons1();return c("React").createElement("div",{style:{display:"flex"},className:this.props.disableSection?"_2sq3":""},n,c("React").createElement("span",{className:"_4qg7"},c("React").createElement(c("FileInput.react"),{accept:".srt",ref:"captionFileInput",multiple:true,onChange:this.$VideoComposerDialogCaptionLandingAddSubtitleButtons2,onClick:this.props.onUploadClick},c("React").createElement(c("SUIButton.react"),{icon:c("React").createElement(c("SUIGlyphIcon.react"),{srcDefault:h("407716"),srcDisabled:h("126934")}),use:"default",label:j._("Upload"),theme:c("SUIBusinessTheme"),href:{url:"#"}}))))};m.prototype.$VideoComposerDialogCaptionLandingAddSubtitleButtons3=function(){return c("VideoComposerDialogCaptionEditorUtils").isAutoGenerateable(this.props.spokenLocale)};m.prototype.$VideoComposerDialogCaptionLandingAddSubtitleButtons1=function(){var n=this.props.shouldShowGenerate,o=this.props.enableFeatures?c("React").createElement("span",{className:"_2q5p"},c("React").createElement("span",{className:(n?"_4qg7":"")+(!n?" _4qg8":"")},c("React").createElement(c("SUIButton.react"),{icon:c("React").createElement(c("SUIGlyphIcon.react"),{srcDefault:h("123226"),srcDisabled:h("126430")}),label:j._("Auto-Generate"),disabled:!this.$VideoComposerDialogCaptionLandingAddSubtitleButtons3(),theme:c("SUIBusinessTheme"),onClick:this.props.onGenerate,width:144}),this.$VideoComposerDialogCaptionLandingAddSubtitleButtons4()),c("React").createElement("span",{className:"_4qg7"},c("React").createElement(c("SUIButton.react"),{icon:c("React").createElement(c("SUIGlyphIcon.react"),{srcDefault:h("123350"),srcDisabled:h("126554")}),label:j._("Write"),theme:c("SUIBusinessTheme"),onClick:this.props.onCreate}))):null;return o};m.prototype.$VideoComposerDialogCaptionLandingAddSubtitleButtons4=function(){if(this.props.spokenLanguage==c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED)return null;if(this.$VideoComposerDialogCaptionLandingAddSubtitleButtons3())return null;return c("React").createElement("div",null,c("React").createElement("div",{className:"_4omu"},c("React").createElement(c("SUIGlyphIcon.react"),{srcDefault:h("132174")})),c("React").createElement("div",{className:"_4om_"},j._("Auto-generate unavailable for this language")))};f.exports=m}),null);
__d("VideoComposerDialogCaptionLandingAddSubtitleSection.react",["cx","React","VideoComposerDialogCaptionLandingAddSubtitleDescriptionContainer.react","VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("span",{className:"_2a8-"},c("React").createElement(c("VideoComposerDialogCaptionLandingAddSubtitleDescriptionContainer.react"),null),c("React").createElement(c("VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer.react"),{shouldShowGenerate:this.props.shouldShowGenerate}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogCaptionLandingSection.react",["cx","fbt","React","immutable","XUINotice.react","XUIText.react","VideoComposerDialogCaptionLandingAddSubtitleSection.react","VideoComposerDialogLandingScreenDraftSection.react","VideoComposerDialogLandingScreenSpokenLanguageContainer.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=this.props.shouldShowDrafts||this.props.isAutoGenerating,n=this.props.enableFeatures?c("React").createElement("span",{className:this.props.isVideoUploaded===false?"_41jb":""},c("React").createElement("span",{className:"_4s3o"},c("React").createElement(c("VideoComposerDialogLandingScreenSpokenLanguageContainer.react"),null))):null;return c("React").createElement("div",null,this.$VideoComposerDialogCaptionLandingSection1(),this.$VideoComposerDialogCaptionLandingSection2(),n,c("React").createElement("span",{className:this.props.isVideoUploaded===false&&this.props.enableFeatures?"_41jb":""},c("React").createElement("span",{className:(m?"_4s3o":"")+(!m?" _4s3p":"")},c("React").createElement(c("VideoComposerDialogLandingScreenDraftSection.react"),null)),c("React").createElement("span",null,c("React").createElement(c("VideoComposerDialogCaptionLandingAddSubtitleSection.react"),{shouldShowGenerate:!(this.props.hasAutoGenerated||this.props.isAutoGenerating||!this.props.enableFeatures)}))))};l.prototype.$VideoComposerDialogCaptionLandingSection1=function(){return this.props.isVideoUploaded===false&&this.props.enableFeatures?c("React").createElement(c("XUINotice.react"),{className:"_3-95",use:"notify"},c("React").createElement(c("XUIText.react"),{display:"block",size:"body2",weight:"bold"},i._("Your Video is Still Uploading")),c("React").createElement(c("XUIText.react"),{display:"block",size:"meta1"},i._("You can add captions after the video upload is complete."))):null};l.prototype.$VideoComposerDialogCaptionLandingSection2=function(){return this.props.errors.size>0?c("React").createElement(c("XUINotice.react"),{className:"_3-95",use:"warn"},this.$VideoComposerDialogCaptionLandingSection3()):null};l.prototype.$VideoComposerDialogCaptionLandingSection3=function(){var m=[];for(var n=0;n<this.props.errors.size;n++)m.push(this.$VideoComposerDialogCaptionLandingSection4(n,this.props.errors.get(n)));return m};l.prototype.$VideoComposerDialogCaptionLandingSection4=function(m,n){return c("React").createElement("div",{key:m},n)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogLandingScreenDraftSection.react",["cx","fbt","React","VideoComposerDialogLandingScreenDraftListContainer.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=i._("Manage Captions"),n=i._("Captions that are set to publish will appear on your video once the post is saved.");return c("React").createElement("div",{className:"_2a8-"},c("React").createElement("span",{className:"_1lt4"},c("React").createElement("span",{className:"_1lt5"},m),c("React").createElement("span",{className:"_1lt6"},n)),c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogLandingScreenDraftListContainer.react"),null)))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogCaptionEditorScrubBarTimeRuler.react",["cssVar","cx","React","VideoComposerDialogCaptionEditorUtils"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.shouldComponentUpdate=function(m){return this.props.scale!==m.scale||this.props.duration!==m.duration};l.prototype.render=function(){__p&&__p();var m=c("VideoComposerDialogCaptionEditorUtils").getWidth(this.props.duration,this.props.scale),n=[],o=0,p=5,q=null,r="0%";for(var s=0;s<=this.props.duration;s+=200){o=c("VideoComposerDialogCaptionEditorUtils").getWidth(s,this.props.scale);if(s%1e3===0){if(s===0)r="0%";else r="50%";p=10;q=c("React").createElement("div",{className:"_647t"},c("React").createElement("div",{style:{right:r,position:"relative"}},c("VideoComposerDialogCaptionEditorUtils").getTimeStamp(s)))}else{p=5;q=null}n.push(c("React").createElement("div",{className:"_647u",key:s,style:{left:o,height:p}},q))}return c("React").createElement("div",{className:"_647v",style:{width:m}},n)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("Resizer.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l)}k.prototype.componentDidMount=function(){window.addEventListener("mousemove",this.onMouseMove.bind(this),false);window.addEventListener("mouseup",this.onMouseUp.bind(this),false)};k.prototype.componentWillUnmount=function(){window.removeEventListener("mousemove",this.onMouseMove.bind(this),false);window.removeEventListener("mouseup",this.onMouseUp.bind(this),false)};k.prototype.onMouseDown=function(l){this.props.updateStateResizing(this.props.id,true,l.clientX)};k.prototype.onMouseMove=function(l){if(this.props.isResizing)this.props.funcResizing(this.props.id,l.clientX,l.clientY)};k.prototype.onMouseUp=function(l){if(this.props.isResizing)this.props.updateStateResizing(this.props.id,false,l.clientX)};k.prototype.shouldComponentUpdate=function(l){return this.props!=l};k.prototype.render=function(){var l={width:this.props.resizerWidth,height:this.props.resizerHeight};return c("React").createElement("span",{ref:this.props.className,className:(this.props.className==="videoCaptionsScrubBar/left"&&this.props.isSelected?"_2tfo":"")+(this.props.className==="videoCaptionsScrubBar/left"&&!this.props.isSelected?" _34tz":"")+(this.props.className==="videoCaptionsScrubBar/right"&&this.props.isSelected?" _2tfp":"")+(this.props.className==="videoCaptionsScrubBar/right"&&!this.props.isSelected?" _34t_":""),isSelected:this.props.isSelected,style:l,onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this)})};f.exports=k}),null);
__d("DraggableResizableText.react",["cx","React","Resizer.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l)}k.prototype.onMouseDown=function(l){var m=document.elementFromPoint(l.clientX,l.clientY);if(m.className!=="_2tfo"&&m.className!==" _2tfp"&&!this.props.isRisizingLeft&&!this.props.isResizingRight)this.props.updateStateDragging(this.props.id,true)};k.prototype.onMouseUp=function(l){this.props.updateStateDragging(this.props.id,false)};k.prototype.onDragStart=function(l){if(this.props.isDragging&&!this.props.isResizingLeft&&!this.props.isResizingRight){l.dataTransfer.setData("application/json",JSON.stringify({id:this.props.id,x:l.clientX,y:l.clientY}));l.dataTransfer.effectAllowed="move"}};k.prototype.onDragEnd=function(l){this.props.updateStateDragging(this.props.id,false)};k.prototype.shouldComponentUpdate=function(l){return JSON.stringify(this.props)!=JSON.stringify(l)};k.prototype.render=function(){var l={left:this.props.left,width:this.props.width};return c("React").createElement("div",{ref:"node",draggable:this.props.isDragging,id:"item_"+this.props.id,className:(this.props.isSelected?"_2tfq":"")+(this.props.isDragging?" _2tfu":"")+(!this.props.isSelected?" _2tfv":""),style:l,onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this),onDragStart:this.onDragStart.bind(this),onDragEnd:this.onDragEnd.bind(this)},c("React").createElement(c("Resizer.react"),{ref:"resizerLeft",id:this.props.id,isResizing:this.props.isResizingLeft,isSelected:this.props.isSelected,resizerWidth:0,resizerHeight:"inherit",updateStateResizing:this.props.updateStateResizingLeft,className:"videoCaptionsScrubBar/left",funcResizing:this.props.funcResizingLeft}),c("React").createElement("span",{className:(this.props.isSelected?"_2tfx":"")+(!this.props.isSelected?" _2tfy":"")}),c("React").createElement("span",{className:(this.props.isSelected?"_2tfz":"")+(!this.props.isSelected?" _2tf-":"")},this.props.text),c("React").createElement(c("Resizer.react"),{ref:"resizerRight",id:this.props.id,isResizing:this.props.isResizingRight,isSelected:this.props.isSelected,resizerWidth:0,resizerHeight:"inherit",updateStateResizing:this.props.updateStateResizingRight,className:"videoCaptionsScrubBar/right",funcResizing:this.props.funcResizingRight}))};f.exports=k}),null);
__d("VideoComposerDialogCaptionEditorSubtitlesDragArea.react",["cx","DraggableResizableText.react","React","VideoComposerDialogCaptionEditorActions","VideoComposerDialogCaptionEditorPlayheadContainer.react","VideoComposerDialogCaptionEditorScrubBarTimeRuler.react","immutable","VideoComposerDialogCaptionEditorConstants"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;"use strict";i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.state={list:this.props.list.map(function(m,n){return{isDragging:false,isResizingLeft:false,isResizingRight:false,initialLeft:0,top:c("VideoComposerDialogCaptionEditorConstants").TOP,left:this.props.list.get(n).node.left,width:this.props.list.get(n).node.width}}.bind(this))};this.onDrop=function(m){__p&&__p();var n=JSON.parse(m.dataTransfer.getData("application/json")),o=this.state.list,p=o.get(n.id),q=m.clientX-n.x;p.isDragging=false;if(this.checkForOverlap(n.id,p.left+q,p.width))return;p.left+=q;var r=JSON.parse(JSON.stringify(this.props.list.get(n.id)));r.node.left=p.left;r.node.start_time_in_ms=p.left/c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT;c("VideoComposerDialogCaptionEditorActions").editingCaptionEntry(n.id,r);m.preventDefault()}.bind(this);this.updateStateDragging=function(m,n){var o=this.state.list,p=o.get(m);p.isDragging=n;var q={list:o};this.setState(q);if(n===false)c("VideoComposerDialogCaptionEditorActions").playPreviewEntry(m)}.bind(this);this.updateStateResizingLeft=function(m,n,o){__p&&__p();var p=this.state.list,q=p.get(m);q.isResizingLeft=n;q.initialLeft=o;var r={list:p};this.setState(r);if(n===false){var s=JSON.parse(JSON.stringify(this.props.list.get(m)));s.node.left=q.left;s.node.width=q.width;s.node.start_time_in_ms=q.left/c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT;s.node.duration_in_ms=q.width/c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT;c("VideoComposerDialogCaptionEditorActions").editingCaptionEntry(m,s);c("VideoComposerDialogCaptionEditorActions").playPreviewEntry(m)}}.bind(this);this.updateStateResizingRight=function(m,n,o){__p&&__p();var p=this.state.list,q=p.get(m);q.isResizingRight=n;q.initialLeft=o-q.width;var r={list:p};this.setState(r);if(n===false){var s=JSON.parse(JSON.stringify(this.props.list.get(m)));s.node.left=q.left;s.node.width=q.width;s.node.start_time_in_ms=q.left/c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT;s.node.duration_in_ms=q.width/c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT;c("VideoComposerDialogCaptionEditorActions").editingCaptionEntry(m,s);c("VideoComposerDialogCaptionEditorActions").playPreviewEntry(m)}}.bind(this);this.funcResizingLeft=function(m,n,o){var p=this.state.list,q=p.get(m),r=q.initialLeft-n,s=q.left-r;if(this.checkForOverlap(m,s,q.width))return;q.width+=r;q.initialLeft=n;q.left=s;var t={list:p};this.setState(t)}.bind(this);this.funcResizingRight=function(m,n,o){var p=this.state.list,q=p.get(m),r=n-(q.initialLeft+q.width);if(this.checkForOverlap(m,q.left,q.width+r))return;q.width+=r;var s={list:p};this.setState(s)}.bind(this)}k.prototype.componentWillReceiveProps=function(l){__p&&__p();if(this.props!=l){var m=JSON.stringify(this.props.list),n=JSON.stringify(l.list),o={list:c("immutable").List()};if(m!==n){if(this.state.list.size!==0&&l.list.size===this.state.list.size){var p=this.state.list;p=p.set(l.captionSelected,{isDragging:false,isResizingLeft:false,isResizingRight:false,initialLeft:0,top:c("VideoComposerDialogCaptionEditorConstants").TOP,left:l.list.get(l.captionSelected).node.left,width:l.list.get(l.captionSelected).node.width,height:25});o={list:p}}else o={list:l.list.map(function(q,r){return{isDragging:false,isResizingLeft:false,isResizingRight:false,initialLeft:0,top:c("VideoComposerDialogCaptionEditorConstants").TOP,left:q.node.left,width:q.node.width,height:25}})};this.setState(o)}}};k.prototype.shouldComponentUpdate=function(l,m){return this.props!=l||this.state!=m};k.prototype.checkForOverlap=function(l,m,n){var o=this.state.list,p=false,q=false;if(l>0)p=o.get(l-1).left+o.get(l-1).width>m;if(l+1<o.size)q=o.get(l+1).left<n+m;return p||q};k.prototype.onDragOver=function(l){l.dataTransfer.dropEffect="move";l.preventDefault();return false};k.prototype.render=function(){var l=[],m=c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT*this.props.duration;l=this.props.list.map(function(n,o){return c("React").createElement(c("DraggableResizableText.react"),{isSelected:o===this.props.captionSelected,ref:"node_"+o,text:n.node.text,key:o,id:o,top:this.state.list.get(o).top,left:this.state.list.get(o).left,width:this.state.list.get(o).width,isDragging:this.state.list.get(o).isDragging,isResizingLeft:this.state.list.get(o).isResizingLeft,isResizingRight:this.state.list.get(o).isResizingRight,updateStateDragging:this.updateStateDragging,updateStateResizingLeft:this.updateStateResizingLeft,updateStateResizingRight:this.updateStateResizingRight,funcResizingLeft:this.funcResizingLeft,funcResizingRight:this.funcResizingRight})}.bind(this));return c("React").createElement("div",{className:"_1coi",onDragOver:this.onDragOver,onDrop:this.onDrop},c("React").createElement(c("VideoComposerDialogCaptionEditorScrubBarTimeRuler.react"),{duration:this.props.duration,scale:1}),c("React").createElement("div",{className:"_1coj",style:{width:m}},c("React").createElement(c("VideoComposerDialogCaptionEditorPlayheadContainer.react"),null),l))};f.exports=k}),null);
__d("XVideoComposerDialogBootloadAdBreaksTabController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/bootload_ad_breaks/",{target_id:{type:"FBID",required:true}})}),null);
__d("VideoComposerDialogAdBreakUtils",["ActorURI","AdBreakPageOnboardingConstants","AdBreakPageOnboardingType","AdBreakPageOnboardingTypedLogger","AsyncRequest","AsyncResponse","VideoComposerDialogAdBreakActions","XAdBreakPageOnboardingController","XVideoComposerDialogBootloadAdBreaksTabController","goURI"],(function a(b,c,d,e,f,g){"use strict";var h=function h(j){var k=c("XVideoComposerDialogBootloadAdBreaksTabController").getURIBuilder().setFBID("target_id",j).getURI(),l=c("ActorURI").create(k,j);new(c("AsyncRequest"))(l).setHandler(function(m){c("VideoComposerDialogAdBreakActions").bootloadParameters(m.payload)}).send()},i=function i(j){new(c("AdBreakPageOnboardingTypedLogger"))().setPageID(j).setAdBreakPageOnboardingEventType(c("AdBreakPageOnboardingType").COMPOSER_ENTRY_POINT).log();var k=c("XAdBreakPageOnboardingController").getURIBuilder().setFBID("creator_id",j).setEnum("entrypoint",c("AdBreakPageOnboardingConstants").FROM_COMPOSER).getURI();c("goURI")(k,true)};f.exports={beginBootloadingAdBreaksTab:h,startPageOnboarding:i}}),null);
__d("VideoComposerDialogAdBreakStore",["Promise","AdBreakStatus","PagesSettingsInstreamAdsBlockListStore","DateConsts","VideoComposerDialogDispatcher","FluxReduceStore","immutable","PagesSettingsInstreamAdsBlockListActions","VideoComposerDialogActionTypes","VideoComposerDialogAdBreakActions","VideoComposerDialogAdBreakUtils","VideoPlayerController","generateVideoThumbnails"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=1e3,m=60,n={adBreaksDisabled:false,currentAdBreakTimeOffset:0,currentPreviewIndex:null,hasGapRule:true,holdoutTestEnabled:false,holdoutTestPublicMetadata:{isStarted:false,isExpired:false,isEligibleCreator:false},holdoutTestRevenueLossThresholdInCents:1e4,insertedAdBreaks:c("immutable").List(),isAdBreakAutoAdjustmentEnabled:true,isAdBreakInsertionRedesignV1:false,isAdBreakInsertionRedesignV2:false,isAdBreaksTabVisible:false,isBrandedContentVideo:false,isPageOnboardingVisible:false,serverSideDisabledReasons:c("immutable").List(),videoRightsAgreed:false,vpc:null};h=babelHelpers.inherits(o,c("immutable").Record(n));i=h&&h.prototype;function o(){h.apply(this,arguments)}j=babelHelpers.inherits(p,c("FluxReduceStore"));k=j&&j.prototype;p.prototype.getInitialState=function(){return new o()};p.prototype.reduce=function(q,r){__p&&__p();switch(r.type){case c("VideoComposerDialogActionTypes").FILE_ADDED:return this.$VideoComposerDialogAdBreakStore1(q);case c("VideoComposerDialogActionTypes").RESET_COMPOSER:return this.$VideoComposerDialogAdBreakStore2();case c("VideoComposerDialogActionTypes").AGREE_VIDEO_RIGHTS:return this.$VideoComposerDialogAdBreakStore3(q);case c("VideoComposerDialogActionTypes").BOOTLOAD_AD_BREAK_PARAMETERS:return this.$VideoComposerDialogAdBreakStore4(q,r.data);case c("VideoComposerDialogActionTypes").DELETE_AD_BREAK:return this.$VideoComposerDialogAdBreakStore5(q,r.adBreakIndex);case c("VideoComposerDialogActionTypes").INSERT_AD_BREAK:return this.$VideoComposerDialogAdBreakStore6(q);case c("VideoComposerDialogActionTypes").SET_CURRENT_AD_BREAK:return this.$VideoComposerDialogAdBreakStore7(q,r.adBreakTimeOffset);case c("VideoComposerDialogActionTypes").SET_CURRENT_PREVIEW_INDEX:return this.$VideoComposerDialogAdBreakStore8(q,r.currentPreviewIndex);case c("VideoComposerDialogActionTypes").SET_IS_AD_BREAK_AUTO_ADJUSTMENT_ENABLED:return this.$VideoComposerDialogAdBreakStore9(q,r.isAdBreakAutoAdjustmentEnabled);case c("VideoComposerDialogActionTypes").SET_IS_BRANDED_CONTENT_VIDEO:return this.$VideoComposerDialogAdBreakStore10(q,r.isBrandedContentVideo);case c("VideoComposerDialogActionTypes").START_PAGE_ONBOARDING:return this.$VideoComposerDialogAdBreakStore11(q,r.pageID);case c("VideoComposerDialogActionTypes").UPDATE_AD_BREAK_STATUS:return this.$VideoComposerDialogAdBreakStore12(q,r.adBreaksDisabled);case c("VideoComposerDialogActionTypes").UPDATE_HOLDOUT_TEST_STATUS:return this.$VideoComposerDialogAdBreakStore13(q,r.enabled);case c("VideoComposerDialogActionTypes").UPDATE_THUMBNAIL_URL:return this.$VideoComposerDialogAdBreakStore14(q,r.adBreakTimeOffset,r.thumbnailURL);case c("VideoComposerDialogActionTypes").UPDATE_VPC:return this.$VideoComposerDialogAdBreakStore15(q,r.vpc);default:return q}};p.prototype.getPostData=function(){var q=this.getState(),r=q.adBreaksDisabled||q.isBrandedContentVideo,s=q.insertedAdBreaks.map(function(w){return{time_offset:w.timeOffset*c("DateConsts").MS_PER_SEC,status:r?c("AdBreakStatus").DISABLED:c("AdBreakStatus").ENABLED}}).toArray(),t=c("PagesSettingsInstreamAdsBlockListStore").getComposerBlockListIdsToApply(),u=q.holdoutTestEnabled&&!r&&s.length>0,v={};v.ad_breaks=s;v.ad_breaks_experiment_revenue_loss_threshold=q.holdoutTestRevenueLossThresholdInCents;v.enable_ad_breaks_experiment=u;if(t)v.ad_breaks_block_lists=t;v.should_auto_adjust_manual_ad_breaks=q.isAdBreakInsertionRedesignV1?q.isAdBreakAutoAdjustmentEnabled:false;return c("Promise").resolve(v)};p.prototype.$VideoComposerDialogAdBreakStore1=function(q){return q.merge({adBreaksDisabled:n.adBreaksDisabled,currentAdBreakTimeOffset:n.currentAdBreakTimeOffset,currentPreviewIndex:n.currentPreviewIndex,insertedAdBreaks:n.insertedAdBreaks,videoRightsAgreed:n.videoRightsAgreed,vpc:n.vpc})};p.prototype.$VideoComposerDialogAdBreakStore2=function(){return this.getInitialState()};p.prototype.$VideoComposerDialogAdBreakStore3=function(q){q=q.set("videoRightsAgreed",true);return q};p.prototype.$VideoComposerDialogAdBreakStore4=function(q,r){c("PagesSettingsInstreamAdsBlockListActions").initializeBlockLists(r.pageID,null);q=q.set("holdoutTestPublicMetadata",r.holdoutTestPublicMetadata);q=q.set("serverSideDisabledReasons",c("immutable").List(r.serverSideDisabledReasons));q=q.set("hasGapRule",r.hasGapRule);q=q.set("isAdBreakInsertionRedesignV1",r.isAdBreakInsertionRedesignV1);q=q.set("isAdBreakInsertionRedesignV2",r.isAdBreakInsertionRedesignV2);q=q.set("isAdBreaksTabVisible",r.isAdBreaksTabVisible);q=q.set("isPageOnboardingVisible",r.isPageOnboardingVisible);return q};p.prototype.$VideoComposerDialogAdBreakStore5=function(q,r){q=q.set("insertedAdBreaks",q.insertedAdBreaks.splice(r,1));return q};p.prototype.$VideoComposerDialogAdBreakStore6=function(q){if(q.insertedAdBreaks.findIndex(function(r){return r.timeOffset===q.currentAdBreakTimeOffset})>=0)return q;q=q.set("insertedAdBreaks",q.insertedAdBreaks.push({status:q.adBreaksDisabled?c("AdBreakStatus").DISABLED:c("AdBreakStatus").ENABLED,thumbnailURL:null,timeOffset:q.currentAdBreakTimeOffset}).sort(function(r,s){return r.timeOffset-s.timeOffset}));this.$VideoComposerDialogAdBreakStore16(q);return q};p.prototype.$VideoComposerDialogAdBreakStore7=function(q,r){var s=Math.round(r*l)/l;q=q.set("currentAdBreakTimeOffset",s);return q};p.prototype.$VideoComposerDialogAdBreakStore8=function(q,r){q=q.set("currentPreviewIndex",r);return q};p.prototype.$VideoComposerDialogAdBreakStore9=function(q,r){q=q.set("isAdBreakAutoAdjustmentEnabled",r);return q};p.prototype.$VideoComposerDialogAdBreakStore10=function(q,r){q=q.set("isBrandedContentVideo",r);return q};p.prototype.$VideoComposerDialogAdBreakStore11=function(q,r){c("VideoComposerDialogAdBreakUtils").startPageOnboarding(r);return q};p.prototype.$VideoComposerDialogAdBreakStore12=function(q,r){q=q.set("adBreaksDisabled",r);q=q.set("insertedAdBreaks",q.insertedAdBreaks.map(function(s){s.status=r?c("AdBreakStatus").DISABLED:c("AdBreakStatus").ENABLED;return s}));return q};p.prototype.$VideoComposerDialogAdBreakStore13=function(q,r){q=q.set("holdoutTestEnabled",r);return q};p.prototype.$VideoComposerDialogAdBreakStore14=function(q,r,s){var t=q.insertedAdBreaks.findIndex(function(u){return u.timeOffset===r});if(t<0)return q;return q.updateIn(["insertedAdBreaks",t],function(u){return babelHelpers["extends"]({},u,{thumbnailURL:s})})};p.prototype.$VideoComposerDialogAdBreakStore15=function(q,r){q=q.set("vpc",r);this.$VideoComposerDialogAdBreakStore16(q);return q};p.prototype.$VideoComposerDialogAdBreakStore16=function(q){__p&&__p();var r,s=q.vpc,t=q.insertedAdBreaks;if(s&&s.getVideoNodeNullable()){var u=function u(v){var w=t.get(v);if(w.thumbnailURL!==null)return"continue";c("generateVideoThumbnails")(s.getVideoNode(),m,m,1,"cover",w.timeOffset).done(function(x){c("VideoComposerDialogAdBreakActions").updateThumbnailURL(w.timeOffset,x.thumbnails[0].getURL())})};for(var v=0;v<t.count();v++){var r=u(v);if(r==="continue")continue}}};function p(){j.apply(this,arguments)}f.exports=new p(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogAdBreaksTabConfig",["ix","fbt","Promise","VideoComposerDialogAdBreakContainer.react","VideoComposerDialogAdBreaksTabContainer.react","VideoComposerDialogTab","VideoComposerDialogAdBreakStore","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={key:c("VideoComposerDialogTab").AD_BREAKS,glyphSelected:h("401205"),glyphUnselected:h("401215"),title:i._("Ad Breaks"),defaultDescription:null,tabContainer:c("VideoComposerDialogAdBreaksTabContainer.react"),bodyContainer:c("VideoComposerDialogAdBreakContainer.react"),getPostData:function k(){return c("VideoComposerDialogAdBreakStore").getPostData()},fetchEditPostData:function k(){return c("Promise").resolve()}};f.exports=j}),null);
__d("XVideoComposerDialogBootloadDefaultTabController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/bootload_default/",{target_id:{type:"FBID",required:true}})}),null);
__d("VideoComposerDialogBasicUtils",["fbt","ActorURI","AnyTokenSearchSource","AsyncRequest","CompositeSearchSource","SearchableEntry","VideoComposerDialogBasicActions","VideoComposerDialogSphericalDirectorActions","WebAsyncSearchSource","XInterestTaxonomyTypeaheadDataSourceController","XVideoComposerDialogBootloadDefaultTabController","InterestTaxonomyTypeaheadAppType"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function i(m){var n=c("XVideoComposerDialogBootloadDefaultTabController").getURIBuilder().setFBID("target_id",m).getURI(),o=c("ActorURI").create(n,m);new(c("AsyncRequest"))(o).send()},j=function j(m){if(m.length<=0)return[];return m.filter(function(n){return!n.getAuxiliaryData().isFreeForm}).map(function(n){return n.getUniqueID()})},k=function k(){var m=c("XInterestTaxonomyTypeaheadDataSourceController").getURIBuilder().setEnum("app",c("InterestTaxonomyTypeaheadAppType").VIDEO_CREATION).getURI();return new(c("CompositeSearchSource"))([new(c("WebAsyncSearchSource"))({queryRequests:[{uri:m}]}),new(c("AnyTokenSearchSource"))(function(n){var o=h._("Add a new tag \"{free form tag}\"",[h.param("free form tag",n)]);return new(c("SearchableEntry"))({uniqueID:n,title:o,auxiliaryData:{isFreeForm:true}})})])},l=function l(m){if(m.length<=0)return[];return m.filter(function(n){return n.getAuxiliaryData().isFreeForm}).map(function(n){return n.getUniqueID()})};f.exports={beginBootloadingDefaultTab:i,bootloadDefaultTab:function m(n){c("VideoComposerDialogBasicActions").bootloadDefaultTabParameters(n);c("VideoComposerDialogSphericalDirectorActions").bootloadSphericalComposerConfig(n.composerConfig)},getContentTagEntryIDs:j,getContentTagSearchSource:k,getFreeFormContentTags:l}}),null);
__d("VideoComposerDialogBasicStore",["invariant","Promise","AdsCallToActionTypes","ReactComposerTaggerType","FluxReduceStore","immutable","ReactComposerPostDataUtils","ReactComposerTaggerStore","StaticSearchSource","VideoComposerDialogActionTypes","VideoComposerDialogBasicUtils","VideoComposerDialogDispatcher","dotAccess"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m={bootloaded:false,composerConfig:null,contentTags:[],description:"",improvedContentTags:false,mentionsSearchSource:new(c("StaticSearchSource"))([]),taggerSearchSource:new(c("StaticSearchSource"))([])};i=babelHelpers.inherits(n,c("immutable").Record(m));j=i&&i.prototype;function n(){i.apply(this,arguments)}k=babelHelpers.inherits(o,c("FluxReduceStore"));l=k&&k.prototype;o.prototype.getInitialState=function(){return new n()};o.prototype.reduce=function(p,q){__p&&__p();switch(q.type){case c("VideoComposerDialogActionTypes").BOOTLOAD_DEFAULT_TAB_PARAMETERS:p=p.set("composerConfig",q.data.composerConfig);p=p.set("improvedContentTags",q.data.improvedContentTags);p=p.set("mentionsSearchSource",q.data.mentionsSearchSource);p=p.set("taggerSearchSource",q.data.taggerSearchSource);p=p.set("bootloaded",true);return p;case c("VideoComposerDialogActionTypes").UPDATE_CONTENT_TAGS:p=p.set("contentTags",q.tags);return p;case c("VideoComposerDialogActionTypes").UPDATE_DESCRIPTION:p=p.set("description",q.description);return p;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:p=this.getInitialState();return p;default:return p}};o.prototype.getPostData=function(){var p=this.getState(),q=p.bootloaded,r=p.composerConfig,s=p.contentTags,t=p.description;q&&r||h(0);var u=r.taggersConfig,v=u.get(c("ReactComposerTaggerType").TARGETING),w=v?c("dotAccess")(v,"feedTargetingGK"):false,x=c("ReactComposerPostDataUtils").getPostData({composerID:r.contextConfig.composerID,targetID:parseInt(r.contextConfig.targetID,10),composerConfig:{contextInfo:{}},useHints:w}),y=c("ReactComposerTaggerStore").hasMessagingCTA(r.contextConfig.composerID)?c("AdsCallToActionTypes").TYPES.MESSAGE_PAGE.name:null;return c("Promise").resolve({action_type_id:x.action_type_id,composertags_place:x.composertags_place,composertags_place_name:x.composertags_place_name,composertags_product_items:x.composertags_product_items,composertags_sponsor:x.composertags_sponsors,composertags_with:x.composertags_with,content_tags:c("VideoComposerDialogBasicUtils").getContentTagEntryIDs(s),cta_type:y,direct_share_status:x.direct_share_status,feed_targeted_data:x.feed_targeted_data,free_form_tags:c("VideoComposerDialogBasicUtils").getFreeFormContentTags(s),icon_id:x.icon_id,object_id:x.object_id,object_str:x.object_str,sponsor_relationship:x.sponsor_relationship,targeted_privacy_data:x.targeted_privacy_data,xhpc_message:t})};function o(){k.apply(this,arguments)}f.exports=new o(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogBasicTabConfig",["ix","fbt","Promise","React","SimpleNUXMessageTypes","VideoComposerDialogBasicContainer.react","VideoComposerDialogBasicStore","VideoComposerDialogBasicTabContainer.react","VideoComposerDialogTab","XUIText.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={key:c("VideoComposerDialogTab").BASIC,glyphSelected:h("401220"),glyphUnselected:h("401227"),title:i._("Video Details"),defaultDescription:i._("Add details to your video and create your video post."),tabContainer:c("VideoComposerDialogBasicTabContainer.react"),bodyContainer:c("VideoComposerDialogBasicContainer.react"),getPostData:function k(){return c("VideoComposerDialogBasicStore").getPostData()},fetchEditPostData:function k(){return c("Promise").resolve()},nuxMessage:c("SimpleNUXMessageTypes").VIDEO_COMPOSER_V2_INTRO,nuxWidth:290,renderNuxMessage:function k(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",size:"header4"},i._("Welcome to the New Video Uploader")),c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Access all of the tools you need to upload your video in one place.")))}};f.exports=j}),null);
__d("VideoComposerDialogCaptionsTabConfig",["ix","fbt","Promise","VideoComposerDialogCaptionEditorMasterContainer.react","VideoComposerDialogCaptionsTabContainer.react","VideoComposerDialogTab","VideoComposerDialogCaptionsStore","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={key:c("VideoComposerDialogTab").CAPTIONS,glyphSelected:h("401199"),glyphUnselected:h("401202"),title:i._("Subtitles & Captions(CC)"),defaultDescription:i._("Add subtitles in multiple languages to your video. You can upload existing files, transcribe or auto-generate subtitles."),tabContainer:c("VideoComposerDialogCaptionsTabContainer.react"),bodyContainer:c("VideoComposerDialogCaptionEditorMasterContainer.react"),getPostData:function k(){return c("VideoComposerDialogCaptionsStore").getPostData()},fetchEditPostData:function k(){return c("Promise").resolve()}};f.exports=j}),null);
__d("VideoComposerDialogDistributionTabConfig",["ix","fbt","Promise","VideoComposerDialogDistributionContainer.react","VideoComposerDialogDistributionStore","VideoComposerDialogDistributionTabContainer.react","VideoComposerDialogTab","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={key:c("VideoComposerDialogTab").DISTRIBUTION,glyphSelected:h("416637"),glyphUnselected:h("416644"),title:i._("Distribution"),defaultDescription:i._("Choose where your video will appear and who can watch or crosspost it."),tabContainer:c("VideoComposerDialogDistributionTabContainer.react"),bodyContainer:c("VideoComposerDialogDistributionContainer.react"),getPostData:function k(){return c("VideoComposerDialogDistributionStore").getPostData()},fetchEditPostData:function k(){return c("Promise").resolve()}};f.exports=j}),null);
__d("VideoComposerDialogRightsTabConfig",["ix","fbt","Promise","VideoComposerDialogTab","VideoComposerDialogRightsContainer.react","VideoComposerDialogRightsStore","VideoComposerDialogRightsTabContainer.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={key:c("VideoComposerDialogTab").RIGHTS,glyphSelected:h("426191"),glyphUnselected:h("426199"),title:i._("Rights Management"),defaultDescription:i._("This video is not monitored for rights and matching uploads."),tabContainer:c("VideoComposerDialogRightsTabContainer.react"),bodyContainer:c("VideoComposerDialogRightsContainer.react"),getPostData:function k(){return c("VideoComposerDialogRightsStore").getPostData()},fetchEditPostData:function k(){return c("Promise").resolve()}};f.exports=j}),null);
__d("ComposerVideoUploadSphericalMetadataUtils",["ComposerVideoUploadSphericalAction","FBHotspotMetadata","ComposerVideoUploadSphericalGuideKeyframeData","immutable"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("immutable").List,i=40,j=90,k={initWithOriginalSphericalMetadata:function l(m,n){__p&&__p();if(n.stereoMode)c("ComposerVideoUploadSphericalAction").updateStereoMode(m,n.stereoMode);if(n.projectionType)c("ComposerVideoUploadSphericalAction").updateProjection(m,n.projectionType);if(n.fbSpatialAudioMetadata||n.ytSpatialAudioMetadata)c("ComposerVideoUploadSphericalAction").updateHasSpatialAudio(m,true);if(n.initialFOV&&n.initialFOV>=i&&n.initialFOV<=j)c("ComposerVideoUploadSphericalAction").updateFOV(m,n.initialFOV);var o=n.initialPitch&&Number.isFinite(n.initialPitch)?n.initialPitch:0,p=n.initialYaw&&Number.isFinite(n.initialYaw)?n.initialYaw:0;c("ComposerVideoUploadSphericalAction").updateCurrentViewport(m,o,p);var q=new(c("ComposerVideoUploadSphericalGuideKeyframeData"))({timestamp:0,yaw:Math.round(p),pitch:Math.round(o),thumbnailURI:null,isSelected:true});c("ComposerVideoUploadSphericalAction").updateSaveGuideKeyframe(m,q);var r=void 0;if(n.guideData){var s=n.guideData.keyframes.map(function(t){return new(c("ComposerVideoUploadSphericalGuideKeyframeData"))({timestamp:t.timestamp,yaw:t.yaw,pitch:t.pitch,thumbnailURI:null,isSelected:false})});r=h([q].concat(s));c("ComposerVideoUploadSphericalAction").updateGuideKeyframes(m,r)}else r=h([q]);if(n.fbHotspotMetadata)c("ComposerVideoUploadSphericalAction").updateHotspots(m,n.fbHotspotMetadata);else c("ComposerVideoUploadSphericalAction").updateHotspots(m,new(c("FBHotspotMetadata"))({hotspots:[]}));c("ComposerVideoUploadSphericalAction").updateOriginalSphericalMetadata(m,n)}};f.exports=k}),null);
__d("ISOVideoBoxConstants",[],(function a(b,c,d,e,f,g){"use strict";var h={BOX_BASE_SIZE:8,GSPHERICAL_UUID:[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],FBSPHERICAL_UUID:[174,36,178,77,60,143,79,24,138,123,224,9,193,56,53,193]};f.exports=h}),null);
__d("ISOVideoBoxFieldDefinition",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({NUMBER:10,FIELD:11,REMAINING_SPACE:12}),i=Object.freeze({NUMBER:100,STRING:101,ARRAY_OF_NUMBERS:102,ARRAY_OF_STRINGS:103,ARRAY_BUFFER:104}),j=Object.freeze({INT_8_SIZE:1,INT_16_SIZE:2,ATOM_LENGTH_BYTES:4,ATOM_NAME_BYTES:4,INT_32_SIZE:4});f.exports=Object.freeze({ISOVideoBoxFieldType:i,ISOVideoBoxFieldSize:j,ISOVideoBoxFieldLength:h})}),null);
__d("ISOVideoBoxUtils",["ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,i={readString:function j(k,l,m){var n=[];for(var o=0;o<m;o++)n.push(String.fromCharCode(k.getUint8(l+o)));return n.join("")},readNumber:function j(k,l,m){switch(m){case h.INT_8_SIZE:return k.getUint8(l);case h.INT_16_SIZE:return k.getUint16(l);case h.ATOM_LENGTH_BYTES:case h.ATOM_NAME_BYTES:case h.INT_32_SIZE:return k.getUint32(l);default:throw new Error("Unexpected field size: "+m)}},writeString:function j(k,l,m){for(var n=0;n<m.length;n++){var o=m.charCodeAt(n);k.setUint8(l+n,o)}},writeNumber:function j(k,l,m,n){switch(m){case h.INT_8_SIZE:return k.setUint8(l,n);case h.INT_16_SIZE:return k.setUint16(l,n);case h.ATOM_LENGTH_BYTES:case h.ATOM_NAME_BYTES:case h.INT_32_SIZE:return k.setUint32(l,n);default:throw new Error("Unexpected field size: "+m)}},writeArrayBuffer:function j(k,l,m){var n=new DataView(m);for(var o=0;o<m.byteLength;o++)k.setUint8(l+o,n.getUint8(o))}};f.exports=i}),null);
__d("ISOVideoBox",["Promise","ISOVideoBoxFieldDefinition","Int64","ISOVideoBoxConstants","ISOVideoBoxUtils","fileSlice"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,i=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType;function j(k){__p&&__p();this.__size=k.size||c("ISOVideoBoxConstants").BOX_BASE_SIZE;this.__boxtype=k.boxtype;this.__extraFields=k.extraFields;if(k.isLargeSize)this.__isLargeSize=true;else this.__isLargeSize=false;this.__parent=null;this.__children=[];this.__size=k.size||this.getFieldsSize();if(k.source)this.__source=k.source}j.getExtraFieldDefinitions=function(){return[]};j.prototype.getBoxtype=function(){return this.__boxtype};j.prototype.getSize=function(){return this.__size};j.prototype.getExtraFields=function(){return this.__extraFields};j.prototype.getChildren=function(){return this.__children};j.prototype.getParent=function(){return this.__parent};j.prototype.getSource=function(){return this.__source};j.prototype.getBuffer=function(k){__p&&__p();return new(c("Promise"))(function(l,m){__p&&__p();var n,o=this,p=this.getExtraFields()[k];if(!p){m(k+" was not found in box fields");return}if(p.type==="buffer"){l(p.buffer);return}if(p.type==="info"){if(!this.__source){m("buffer was requested but source is missing from box");return}var q=p.startOffset,r=q+p.length;if(this.__source instanceof File)(function(){var s=new FileReader();s.onload=function(event){var t=s.result;l(t)};s.onerror=function(t){m(t)};s.readAsArrayBuffer(c("fileSlice").call(o.__source,q,r))})();else l(this.__source.slice(q,r));return}m(k+" is not a buffer type")}.bind(this))};j.prototype.getFieldsSize=function(){__p&&__p();var k=2*h.INT_32_SIZE;if(this.__isLargeSize)k+=2*h.INT_32_SIZE;var l=this.constructor.getExtraFieldDefinitions();l.forEach(function(m){__p&&__p();var n=void 0;switch(m.type){case i.NUMBER:k+=m.size;break;case i.STRING:n=m.requiredValue!==undefined?m.requiredValue:this.__extraFields[m.name];if(!(typeof n==="string"))throw new Error("Field "+m.name+" is not a string");k+=n.length;break;case i.ARRAY_OF_NUMBERS:case i.ARRAY_OF_STRINGS:n=m.requiredValue!==undefined?m.requiredValue:this.__extraFields[m.name];if(!Array.isArray(n))throw new Error("Field "+m.name+" is not an array");k+=n.length*m.size;break;case i.ARRAY_BUFFER:n=this.__extraFields[m.name];if(n instanceof ArrayBuffer)k+=n.byteLength;else if(typeof n.startOffset==="number"&&typeof n.length==="number")k+=n.length;else throw new Error("Field '"+m.name+"' is not an ArrayBuffer or an ArrayBuffer reference");break;default:throw new Error("Unexpected field type: "+m.type)}}.bind(this));return k};j.prototype.$ISOVideoBox1=function(k){this.__size+=k;if(this.__parent)this.__parent.$ISOVideoBox1(k)};j.prototype.addChild=function(k){var l=arguments.length<=1||arguments[1]===undefined?true:arguments[1],m=k.getSize();k.$ISOVideoBox2(this);this.__children.push(k);if(l)this.$ISOVideoBox1(m)};j.prototype.$ISOVideoBox2=function(k){this.__parent=k};j.prototype.removeChild=function(k){__p&&__p();var l=arguments.length<=1||arguments[1]===undefined?0:arguments[1];for(var m=0;m<this.__children.length;m++)if(this.__children[m].getBoxtype()===k)if(l===0){var n=this.__children[m].getSize();this.__children.splice(m,1);this.$ISOVideoBox1(-n);return true}else l-=1;return false};j.prototype.$ISOVideoBox3=function(k){for(var l=0;l<this.__children.length;l++)if(this.__children[l]===k){var m=this.__children[l].getSize();this.__children.splice(l,1);this.$ISOVideoBox1(-m);return}};j.prototype.remove=function(){if(!this.__parent)return;this.__parent.$ISOVideoBox3(this)};j.prototype.setSource=function(k){this.__source=k};j.prototype.boxToArrayBuffer=function(k,l,m){this.__boxToArrayBufferImpl(k,l,m)};j.prototype.__boxToArrayBufferImpl=function(k,l,m){__p&&__p();this.__headerToArrayBuffer(k,l,m);for(var n=this.__children,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;r.__boxToArrayBufferImpl(k,l,m)}};j.prototype.__headerToArrayBuffer=function(k,l,m){__p&&__p();if(this.__isLargeSize)k.setUint32(l.getOffset(),1);else k.setUint32(l.getOffset(),this.__size);l.incrementOffset(h.INT_32_SIZE);c("ISOVideoBoxUtils").writeString(k,l.getOffset(),this.__boxtype);l.incrementOffset(h.INT_32_SIZE);if(this.__isLargeSize){var n=c("Int64").fromNumber(this.__size);k.setUint32(l.getOffset(),n.getHighBits());k.setUint32(l.getOffset()+h.INT_32_SIZE,n.getLowBitsUnsigned());l.incrementOffset(h.INT_32_SIZE*2)}this.__extraHeaderToArrayBuffer(k,l,m)};j.prototype.__extraHeaderToArrayBuffer=function(k,l,m){__p&&__p();this.constructor.getExtraFieldDefinitions().forEach(function(n){__p&&__p();var o=this.__extraFields[n.name];switch(n.type){case i.NUMBER:o=n.requiredValue!==undefined?n.requiredValue:o;if(typeof o!=="number")throw new Error("Field '"+n.name+"' is not a number");c("ISOVideoBoxUtils").writeNumber(k,l.getOffset(),n.size,o);l.incrementOffset(n.size);break;case i.STRING:o=n.requiredValue!==undefined?n.requiredValue:o;if(typeof o!=="string")throw new Error("Field '"+n.name+"' is not a string");c("ISOVideoBoxUtils").writeString(k,l.getOffset(),o);l.incrementOffset(o.length);break;case i.ARRAY_OF_NUMBERS:o=n.requiredValue!==undefined?n.requiredValue:o;if(!Array.isArray(o))throw new Error("Field '"+n.name+"' is not an array");var p=n.size;o.forEach(function(v){if(typeof v!=="number")throw new Error("An array entry of '"+n.name+"' is not a number");c("ISOVideoBoxUtils").writeNumber(k,l.getOffset(),p,v);l.incrementOffset(p)});break;case i.ARRAY_OF_STRINGS:o=n.requiredValue!==undefined?n.requiredValue:o;if(!Array.isArray(o))throw new Error("Field '"+n.name+"' is not an array");var q=n.size;o.forEach(function(v){if(typeof v!=="string")throw new Error("An array entry of '"+n.name+"' is not a number");c("ISOVideoBoxUtils").writeString(k,l.getOffset(),v);l.incrementOffset(q)});break;case i.ARRAY_BUFFER:if(o instanceof ArrayBuffer){c("ISOVideoBoxUtils").writeArrayBuffer(k,l.getOffset(),o);l.incrementOffset(o.byteLength)}else if(typeof o.startOffset==="number"&&typeof o.length==="number"){var r=o,s=r.startOffset,t=r.length;if(!m)throw new Error("Original file buffer is not provided");for(var u=0;u<t;u++){k.setUint8(l.getOffset(),m.getUint8(s+u));l.incrementOffset(h.INT_8_SIZE)}}else throw new Error("Field '"+n.name+"' is not an ArrayBuffer or an ArrayBuffer reference");break;default:throw new Error("Unexpected field type: "+n.type)}}.bind(this))};j.prototype.toSimpleObject=function(k){__p&&__p();var l,m=this;if(k)(function(){var t=k;Object.keys(m.__extraFields).forEach(function(u){var v=this.__extraFields[u];if(v instanceof ArrayBuffer)t.push(v)}.bind(m))})();var n=[];for(var o=this.__children,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;n.push(s.toSimpleObject(k))}return{children:n,size:this.__size,isLargeSize:this.__isLargeSize,boxtype:this.__boxtype,extraFields:this.__extraFields}};f.exports=j}),null);
__d("FullBox",["ISOVideoBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(m,c("ISOVideoBox"));i=h&&h.prototype;m.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"version",type:k.NUMBER,size:j.INT_8_SIZE},{name:"flags",type:k.ARRAY_OF_NUMBERS,size:j.INT_8_SIZE,length:{type:l.NUMBER,value:3}}])};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("HDLRBox",["FullBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(m,c("FullBox"));i=h&&h.prototype;m.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"pre_defined",type:k.NUMBER,size:j.INT_32_SIZE,requiredValue:0},{name:"handler_type",type:k.STRING,length:{type:l.NUMBER,value:j.INT_32_SIZE}},{name:"reserved",type:k.ARRAY_OF_NUMBERS,size:j.INT_32_SIZE,length:{type:l.NUMBER,value:3},requiredValue:[0,0,0]},{name:"name",type:k.STRING,length:{type:l.REMAINING_SPACE}}])};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("ISOVideoBoxPath",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$ISOVideoBoxPath1=[]}h.prototype.addPath=function(i,j){this.$ISOVideoBoxPath1.push({boxtype:i,index:j||0});return this};h.prototype.addWildCardPath=function(){this.$ISOVideoBoxPath1.push({boxtype:"",index:0});return this};h.prototype.clearPath=function(){this.$ISOVideoBoxPath1=[]};h.prototype.getPath=function(){return this.$ISOVideoBoxPath1};f.exports=h}),null);
__d("FTYPBox",["ISOVideoBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(m,c("ISOVideoBox"));i=h&&h.prototype;m.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"major_brand",type:k.STRING,length:{type:l.NUMBER,value:j.INT_32_SIZE}},{name:"minor_version",type:k.NUMBER,size:j.INT_32_SIZE},{name:"compatible_brands",type:k.ARRAY_OF_STRINGS,size:j.INT_32_SIZE,length:{type:l.REMAINING_SPACE}}])};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("SA3DBox",["ISOVideoBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(m,c("ISOVideoBox"));i=h&&h.prototype;m.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"version",type:k.NUMBER,size:j.INT_8_SIZE},{name:"ambisonic_type",type:k.NUMBER,size:j.INT_8_SIZE},{name:"ambisonic_order",type:k.NUMBER,size:j.INT_32_SIZE},{name:"ambisonic_channel_ordering",type:k.NUMBER,size:j.INT_8_SIZE},{name:"ambisonic_normalization",type:k.NUMBER,size:j.INT_8_SIZE},{name:"num_channels",type:k.NUMBER,size:j.INT_32_SIZE},{name:"channel_map",type:k.ARRAY_OF_NUMBERS,size:j.INT_32_SIZE,length:{type:l.FIELD,definition:{name:"num_channels",type:k.NUMBER,size:j.INT_32_SIZE}}}])};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("SSDBox",["ISOVideoBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(m,c("ISOVideoBox"));i=h&&h.prototype;m.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"reserved",type:k.ARRAY_OF_NUMBERS,size:j.INT_8_SIZE,length:{type:l.NUMBER,value:6},requiredValue:[0,0,0,0,0,0]},{name:"drefIndex",type:k.NUMBER,size:j.INT_16_SIZE},{name:"qtAudioEncodingVersion",type:k.NUMBER,size:j.INT_16_SIZE},{name:"qtAudioEncodingRevision",type:k.NUMBER,size:j.INT_16_SIZE},{name:"qtAudioEncodingVendor",type:k.STRING,length:{type:l.NUMBER,value:j.INT_32_SIZE}},{name:"channelCount",type:k.NUMBER,size:j.INT_16_SIZE},{name:"sampleSize",type:k.NUMBER,size:j.INT_16_SIZE},{name:"qtAudioCompressionID",type:k.NUMBER,size:j.INT_16_SIZE},{name:"qtAudioPacketSize",type:k.NUMBER,size:j.INT_16_SIZE,requiredValue:0},{name:"sampleRate",type:k.NUMBER,size:j.INT_16_SIZE},{name:"sampleRateLowerBits",type:k.NUMBER,size:j.INT_16_SIZE,requiredValue:0}])};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("STCOBox",["FullBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(m,c("FullBox"));i=h&&h.prototype;m.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"entry_count",type:k.NUMBER,size:j.INT_32_SIZE},{name:"chunk_offsets",type:k.ARRAY_OF_NUMBERS,length:{type:l.FIELD,definition:{name:"entry_count",type:k.NUMBER,size:j.INT_32_SIZE}},size:j.INT_32_SIZE}])};m.prototype.updateChunkOffsets=function(n){var o=this.__extraFields.chunk_offsets;for(var p=0,q=o.length;p<q;p++)o[p]+=n};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("STSDBox",["FullBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType;h=babelHelpers.inherits(l,c("FullBox"));i=h&&h.prototype;l.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"num_descriptions",type:k.NUMBER,size:j.INT_32_SIZE}])};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("TKHDBox",["FullBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength,m=4,n=8,o=2,p=36;h=babelHelpers.inherits(q,c("FullBox"));i=h&&h.prototype;q.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"creation_time",type:k.NUMBER,size:j.INT_32_SIZE},{name:"modification_time",type:k.NUMBER,size:j.INT_32_SIZE},{name:"track_id",type:k.NUMBER,size:j.INT_32_SIZE},{name:"reserved_1",type:k.ARRAY_BUFFER,length:{type:l.NUMBER,value:m}},{name:"duration",type:k.NUMBER,size:j.INT_32_SIZE},{name:"reserved_2",type:k.ARRAY_BUFFER,length:{type:l.NUMBER,value:n}},{name:"layer",type:k.NUMBER,size:j.INT_16_SIZE},{name:"alternate_group",type:k.NUMBER,size:j.INT_16_SIZE},{name:"volume",type:k.NUMBER,size:j.INT_16_SIZE},{name:"reserved_3",type:k.ARRAY_BUFFER,length:{type:l.NUMBER,value:o}},{name:"matrix_structure",type:k.ARRAY_BUFFER,length:{type:l.NUMBER,value:p}},{name:"track_width",type:k.NUMBER,size:j.INT_32_SIZE},{name:"track_height",type:k.NUMBER,size:j.INT_32_SIZE}])};function q(){h.apply(this,arguments)}f.exports=q}),null);
__d("UUIDBox",["ISOVideoBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,l=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(m,c("ISOVideoBox"));i=h&&h.prototype;m.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"usertype",type:k.ARRAY_OF_NUMBERS,size:j.INT_8_SIZE,length:{type:l.NUMBER,value:16}},{name:"data",type:k.ARRAY_BUFFER,length:{type:l.REMAINING_SPACE}}])};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("UnformedBox",["ISOVideoBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(l,c("ISOVideoBox"));i=h&&h.prototype;l.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"unformed_data",type:j.ARRAY_BUFFER,length:{type:k.REMAINING_SPACE}}])};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("XMLBox",["FullBox","ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength;h=babelHelpers.inherits(l,c("FullBox"));i=h&&h.prototype;l.getExtraFieldDefinitions=function(){return h.getExtraFieldDefinitions.call(this).concat([{name:"xml_string",type:j.STRING,length:{type:k.REMAINING_SPACE}}])};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("ISOVideoBoxTypeMap",["FTYPBox","FullBox","HDLRBox","ISOVideoBox","SA3DBox","SSDBox","STCOBox","STSDBox","TKHDBox","UnformedBox","UUIDBox","XMLBox"],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({mdia:c("ISOVideoBox"),minf:c("ISOVideoBox"),moov:c("ISOVideoBox"),stbl:c("ISOVideoBox"),trak:c("ISOVideoBox"),meta:c("FullBox"),ftyp:c("FTYPBox"),hdlr:c("HDLRBox"),stco:c("STCOBox"),uuid:c("UUIDBox"),"xml ":c("XMLBox"),stsd:c("STSDBox"),mp4a:c("SSDBox"),SA3D:c("SA3DBox"),tkhd:c("TKHDBox")}),i={getBoxType:function j(k){return h[k]||c("UnformedBox")}};f.exports=i}),null);
__d("ISOVideoReader",["ISOVideoBoxFieldDefinition"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize;function i(j){var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1];this.$ISOVideoReader1=j;this.$ISOVideoReader2=k}i.prototype.outOfBounds=function(j){return this.$ISOVideoReader2+j>this.$ISOVideoReader1.byteLength};i.prototype.getOffset=function(){return this.$ISOVideoReader2};i.prototype.incrementOffset=function(j){this.$ISOVideoReader2+=j};i.prototype.$ISOVideoReader3=function(j){switch(j){case h.INT_8_SIZE:return this.$ISOVideoReader1.getUint8(this.$ISOVideoReader2);case h.INT_16_SIZE:return this.$ISOVideoReader1.getUint16(this.$ISOVideoReader2);case h.ATOM_LENGTH_BYTES:case h.ATOM_NAME_BYTES:case h.INT_32_SIZE:return this.$ISOVideoReader1.getUint32(this.$ISOVideoReader2);default:throw new Error("Unexpected field size: "+j)}};i.prototype.readNumber=function(j){var k=this.$ISOVideoReader3(j);this.incrementOffset(j);return k};i.prototype.readString=function(j){var k=[];for(var l=this.$ISOVideoReader2;l<this.$ISOVideoReader2+j;l++)k.push(String.fromCharCode(this.$ISOVideoReader1.getUint8(l)));this.incrementOffset(j);return k.join("")};i.prototype.readNumberArray=function(j,k){var l=[];for(var m=0;m<k;m++){l.push(this.$ISOVideoReader3(j));this.incrementOffset(j)}return l};i.prototype.readStringArray=function(j,k){var l=[];for(var m=0;m<k;m++){var n=[];for(var o=this.$ISOVideoReader2;o<this.$ISOVideoReader2+j;o++)n.push(String.fromCharCode(this.$ISOVideoReader1.getUint8(o)));l.push(n.join(""));this.incrementOffset(j)}return l};i.prototype.readArrayBuffer=function(j){var k=new ArrayBuffer(j),l=new DataView(k);for(var m=0;m<j;m++)l.setUint8(m,this.$ISOVideoReader1.getUint8(this.$ISOVideoReader2+m));this.incrementOffset(j);return k};f.exports=i}),null);
__d("ISOVideoBoxParser",["invariant","regeneratorRuntime","Promise","fileSlice","Int64","ISOVideoBoxFieldDefinition","ISOVideoBox","ISOVideoBoxTypeMap","ISOVideoFile","ISOVideoReader"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldSize,j=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldType,k=c("ISOVideoBoxFieldDefinition").ISOVideoBoxFieldLength,l=5242880;function m(n){__p&&__p();var o=arguments.length<=1||arguments[1]===undefined?true:arguments[1];this.$ISOVideoBoxParser5=n;this.$ISOVideoBoxParser2=o;this.$ISOVideoBoxParser9=[];this.$ISOVideoBoxParser10=[];this.$ISOVideoBoxParser12();if(n instanceof File){this.$ISOVideoBoxParser7=0;this.$ISOVideoBoxParser8=Math.min(n.size,l);this.$ISOVideoBoxParser6=n.size;this.$ISOVideoBoxParser3=n}else{this.$ISOVideoBoxParser7=0;this.$ISOVideoBoxParser8=n.byteLength;this.$ISOVideoBoxParser6=n.byteLength;this.$ISOVideoBoxParser4=n}}m.prototype.parse=function n(){__p&&__p();return c("regeneratorRuntime").async(function o(p){__p&&__p();while(1)switch(p.prev=p.next){case 0:if(!(this.$ISOVideoBoxParser5 instanceof File)){p.next=5;break}p.next=3;return c("regeneratorRuntime").awrap(this.$ISOVideoBoxParser13());case 3:p.next=6;break;case 5:this.$ISOVideoBoxParser14();case 6:return p.abrupt("return",new(c("ISOVideoFile"))(this.$ISOVideoBoxParser9,this.$ISOVideoBoxParser5));case 7:case"end":return p.stop()}},null,this)};m.prototype.$ISOVideoBoxParser13=function n(){__p&&__p();return c("regeneratorRuntime").async(function o(p){__p&&__p();while(1)switch(p.prev=p.next){case 0:return p.abrupt("return",new(c("Promise"))(function(q,r){__p&&__p();var s=new FileReader();s.onload=function t(event){__p&&__p();return c("regeneratorRuntime").async(function u(v){__p&&__p();while(1)switch(v.prev=v.next){case 0:if(s.result instanceof ArrayBuffer){v.next=2;break}throw new Error("File reading failed");case 2:this.$ISOVideoBoxParser1=new(c("ISOVideoReader"))(new DataView(s.result));this.$ISOVideoBoxParser15();if(!(this.$ISOVideoBoxParser7>=this.$ISOVideoBoxParser6)){v.next=7;break}q();return v.abrupt("return");case 7:v.next=9;return c("regeneratorRuntime").awrap(this.$ISOVideoBoxParser13());case 9:q();case 10:case"end":return v.stop()}},null,this)}.bind(this);s.onerror=function(t){r(t)};s.readAsArrayBuffer(c("fileSlice").call(this.$ISOVideoBoxParser3,this.$ISOVideoBoxParser7,this.$ISOVideoBoxParser8))}.bind(this)));case 1:case"end":return p.stop()}},null,this)};m.prototype.$ISOVideoBoxParser14=function(){this.$ISOVideoBoxParser1=new(c("ISOVideoReader"))(new DataView(this.$ISOVideoBoxParser4));this.$ISOVideoBoxParser15()};m.prototype.$ISOVideoBoxParser15=function(){__p&&__p();while(true){var n=this.$ISOVideoBoxParser16();if(n===null)break;n instanceof c("ISOVideoBox")||h(0);this.$ISOVideoBoxParser10.push(n);while(true){var o=this.$ISOVideoBoxParser10[this.$ISOVideoBoxParser10.length-1],p=o.getFieldsSize();for(var q=o.getChildren(),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;p+=u.getSize()}if(p===o.getSize())this.$ISOVideoBoxParser10.pop();else break;if(this.$ISOVideoBoxParser10.length===0){this.$ISOVideoBoxParser9.push(o);break}else{var v=this.$ISOVideoBoxParser10[this.$ISOVideoBoxParser10.length-1];v.addChild(o,false)}}}};m.prototype.$ISOVideoBoxParser16=function(){__p&&__p();if(this.$ISOVideoBoxParser11.size===null){if(this.$ISOVideoBoxParser1.outOfBounds(i.ATOM_LENGTH_BYTES)){this.$ISOVideoBoxParser17(i.ATOM_LENGTH_BYTES);return null}this.$ISOVideoBoxParser11.offset+=i.ATOM_LENGTH_BYTES;this.$ISOVideoBoxParser11.size=this.$ISOVideoBoxParser1.readNumber(i.ATOM_LENGTH_BYTES)}if(this.$ISOVideoBoxParser11.boxType===null){if(this.$ISOVideoBoxParser1.outOfBounds(i.ATOM_NAME_BYTES)){this.$ISOVideoBoxParser17(i.ATOM_NAME_BYTES);return null}this.$ISOVideoBoxParser11.offset+=i.ATOM_NAME_BYTES;this.$ISOVideoBoxParser11.boxType=this.$ISOVideoBoxParser1.readString(i.ATOM_NAME_BYTES)}if(this.$ISOVideoBoxParser11.size===1&&this.$ISOVideoBoxParser11.isLargeSize===false){if(this.$ISOVideoBoxParser1.outOfBounds(i.INT_32_SIZE*2)){this.$ISOVideoBoxParser17(i.INT_32_SIZE*2);return null}this.$ISOVideoBoxParser11.offset+=i.INT_32_SIZE*2;var n=this.$ISOVideoBoxParser1.readNumber(i.INT_32_SIZE),o=this.$ISOVideoBoxParser1.readNumber(i.INT_32_SIZE);this.$ISOVideoBoxParser11.size=new(c("Int64"))(o,n).toNumber();this.$ISOVideoBoxParser11.isLargeSize=true}typeof this.$ISOVideoBoxParser11.boxType==="string"||h(0);var p=c("ISOVideoBoxTypeMap").getBoxType(this.$ISOVideoBoxParser11.boxType);if(this.$ISOVideoBoxParser11.definitions===null)this.$ISOVideoBoxParser11.definitions=p.getExtraFieldDefinitions();if(!this.$ISOVideoBoxParser18())return null;typeof this.$ISOVideoBoxParser11.boxType==="string"&&typeof this.$ISOVideoBoxParser11.size==="number"||h(0);var q={boxtype:this.$ISOVideoBoxParser11.boxType,size:this.$ISOVideoBoxParser11.size,isLargeSize:this.$ISOVideoBoxParser11.isLargeSize,extraFields:this.$ISOVideoBoxParser11.extraFields,source:this.$ISOVideoBoxParser5};this.$ISOVideoBoxParser12();return new p(q)};m.prototype.$ISOVideoBoxParser18=function(){__p&&__p();this.$ISOVideoBoxParser11.definitions||h(0);if(this.$ISOVideoBoxParser11.index===this.$ISOVideoBoxParser11.definitions.length)return true;var n=this.$ISOVideoBoxParser11.definitions[this.$ISOVideoBoxParser11.index],o=this.$ISOVideoBoxParser19(n);if(this.$ISOVideoBoxParser2&&n.type===j.ARRAY_BUFFER){this.$ISOVideoBoxParser11.extraFields[n.name]={type:"info",startOffset:this.$ISOVideoBoxParser7+this.$ISOVideoBoxParser1.getOffset(),length:o};this.$ISOVideoBoxParser1.incrementOffset(o)}else{var p=this.$ISOVideoBoxParser20(n);if(p===null)return false;if(n.type===j.ARRAY_BUFFER)this.$ISOVideoBoxParser11.extraFields[n.name]={type:"buffer",buffer:p};else this.$ISOVideoBoxParser11.extraFields[n.name]=p}this.$ISOVideoBoxParser11.offset+=o;this.$ISOVideoBoxParser11.index+=1;return this.$ISOVideoBoxParser18()};m.prototype.$ISOVideoBoxParser20=function(n){__p&&__p();var o=this.$ISOVideoBoxParser1,p=this.$ISOVideoBoxParser19(n),q=this.$ISOVideoBoxParser21(n);if(n.requiredValue!==undefined){o.incrementOffset(p);return n.requiredValue}if(o.outOfBounds(p)){this.$ISOVideoBoxParser17(p);return null}switch(n.type){case j.NUMBER:return o.readNumber(n.size);case j.STRING:return o.readString(q);case j.ARRAY_OF_NUMBERS:return o.readNumberArray(n.size,q);case j.ARRAY_OF_STRINGS:return o.readStringArray(n.size,q);case j.ARRAY_BUFFER:return o.readArrayBuffer(q);default:throw new Error("Unexpected field type: "+n.type)}};m.prototype.$ISOVideoBoxParser12=function(){this.$ISOVideoBoxParser11={size:null,offset:0,boxType:null,isLargeSize:false,extraFields:{},index:0,definitions:null}};m.prototype.$ISOVideoBoxParser17=function(n){if(!this.$ISOVideoBoxParser3){if(this.$ISOVideoBoxParser1.getOffset()<this.$ISOVideoBoxParser6)throw new Error("Reader went out of bounds with ArrayBuffer");return}this.$ISOVideoBoxParser7=this.$ISOVideoBoxParser7+this.$ISOVideoBoxParser1.getOffset();this.$ISOVideoBoxParser8=Math.min(this.$ISOVideoBoxParser6,Math.max(this.$ISOVideoBoxParser7+l,this.$ISOVideoBoxParser7+n))};m.prototype.$ISOVideoBoxParser19=function(n){var o=this.$ISOVideoBoxParser21(n);switch(n.type){case j.NUMBER:return n.size;case j.STRING:case j.ARRAY_BUFFER:return o;case j.ARRAY_OF_NUMBERS:case j.ARRAY_OF_STRINGS:return n.size*o;default:throw new Error("Unexpected field type: "+n.type)}};m.prototype.$ISOVideoBoxParser21=function(n){__p&&__p();if(n.type===j.NUMBER)return-1;switch(n.length.type){case k.NUMBER:return n.length.value;case k.FIELD:return this.$ISOVideoBoxParser11.extraFields[n.length.definition.name];case k.REMAINING_SPACE:typeof this.$ISOVideoBoxParser11.size==="number"||h(0);var o=this.$ISOVideoBoxParser11.size-this.$ISOVideoBoxParser11.offset;if(n.type===j.ARRAY_OF_NUMBERS||n.type===j.ARRAY_OF_STRINGS)return o/n.size;return o;default:throw new Error("Field "+n.name+" of type "+n.type+" "+("cannot have length type "+n.length.type))}};m.prototype.getBoxes=function(){return this.$ISOVideoBoxParser9};m.parseFromSimpleObject=function(n,o,p){var q=c("ISOVideoBoxTypeMap").getBoxType(n.boxtype),r=new q(n);if(p)r.setSource(p);return r};m.parseFromSimpleObjectRecursive=function(n,o,p){__p&&__p();var q=this.parseFromSimpleObject(n,o,p),r=n.children||[];for(var s=r,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v,x=this.parseFromSimpleObjectRecursive(w,o,p);q.addChild(x,false)}return q};f.exports=m}),null);
__d("ISOVideoFileEvent",[],(function a(b,c,d,e,f,g){"use strict";f.exports=Object.freeze({BUILD_PROGRESS:"buildProgress"})}),null);
__d("ISOVideoOffsetManager",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=1024*100,j=1024;function k(){this.$ISOVideoOffsetManager1=0;this.$ISOVideoOffsetManager2=0;this.$ISOVideoOffsetManager3=i;this.$ISOVideoOffsetManager4=[]}k.prototype.addOnUpdateCallback=function(l){this.$ISOVideoOffsetManager4.push(l);return this};k.prototype.setMinUpdateInterval=function(l){this.$ISOVideoOffsetManager3=Math.max(l,j);return this};k.prototype.getOffset=function(){return this.$ISOVideoOffsetManager1};k.prototype.getMinUpdateInterval=function(){return this.$ISOVideoOffsetManager3};k.prototype.incrementOffset=function(l){this.$ISOVideoOffsetManager1+=l;if(this.$ISOVideoOffsetManager1>=this.$ISOVideoOffsetManager2+this.$ISOVideoOffsetManager3){this.$ISOVideoOffsetManager2=this.$ISOVideoOffsetManager1;this.$ISOVideoOffsetManager4.forEach(function(m){return m()})}};f.exports=k}),null);
__d("ISOVideoFile",["regeneratorRuntime","Promise","EventEmitter","ISOVideoBox","ISOVideoBoxPath","ISOVideoFileEvent","ISOVideoOffsetManager","ISOVideoBoxParser","STCOBox"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=1e3;h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(l,m){__p&&__p();i.constructor.call(this);this.$ISOVideoFile1=l;this.$ISOVideoFile2=this.$ISOVideoFile5();if(m)if(m instanceof ArrayBuffer){this.$ISOVideoFile4=m;this.$ISOVideoFile3=null}else{this.$ISOVideoFile3=m;this.$ISOVideoFile4=null}}k.prototype.getBoxes=function(){return this.$ISOVideoFile1};k.prototype.findBoxes=function(l){return this.$ISOVideoFile6(this.$ISOVideoFile1,[],l)};k.prototype.$ISOVideoFile6=function(l,m,n){__p&&__p();for(var o=l,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(s.getBoxtype()===n)m.push(s);this.$ISOVideoFile6(s.getChildren(),m,n)}return m};k.prototype.$ISOVideoFile7=function(l,m){return m===""||l.getBoxtype()===m};k.prototype.findBoxAtExactLocation=function(l){__p&&__p();var m,n=this,o=this.$ISOVideoFile1,p=l.getPath(),q=function q(r){__p&&__p();var s=p[r].boxtype;if(s==="")throw new Error("Wildcard path is not allowed in exact location match");var t=p[r].index,u=o.filter(function(v){return this.$ISOVideoFile7(v,s)}.bind(n));if(u.length>t){if(r===p.length-1)return{v:u[t]};o=u[t].getChildren()}else return{v:null}};for(var r=0;r<p.length;r++){var m=q(r);if(typeof m==="object")return m.v}return null};k.prototype.findBoxesMatchingPath=function(l){var m=[];if(l.getPath().length===0)return m;this.$ISOVideoFile8(l,0,this.$ISOVideoFile1,m);return m};k.prototype.$ISOVideoFile8=function(l,m,n,o){var p=l.getPath(),q=p[m].boxtype,r=n.filter(function(s){return this.$ISOVideoFile7(s,q)}.bind(this));if(m===p.length-1)r.forEach(function(s){return o.push(s)});else r.forEach(function(s){return this.$ISOVideoFile8(l,m+1,s.getChildren(),o)}.bind(this))};k.prototype.injectBoxAtLocation=function(l,m){var n=this.findBoxAtExactLocation(m);if(n){n.addChild(l);this.$ISOVideoFile9(l.getSize());return true}else return false};k.prototype.removeBoxAtLocation=function(l){__p&&__p();var m=l.getPath(),n=m[m.length-1].boxtype,o=m[m.length-1].index;if(m.length===1){for(var p=0;p<this.$ISOVideoFile1.length;p++)if(this.$ISOVideoFile7(this.$ISOVideoFile1[p],n))if(o===0){var q=this.$ISOVideoFile1[p].getSize();this.$ISOVideoFile1.splice(p,1);this.$ISOVideoFile9(-q);return true}else o-=1;return false}var r=this.findBoxAtExactLocation(l);if(r){var s=r.getSize();r.remove();this.$ISOVideoFile9(-s);return true}return false};k.prototype.$ISOVideoFile5=function(){__p&&__p();var l=false;for(var m=this.$ISOVideoFile1,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(q.getBoxtype()==="mdat")l=true;if(q.getBoxtype()==="moov")return!l}return false};k.prototype.$ISOVideoFile9=function(l){__p&&__p();if(!this.$ISOVideoFile2)return;var m=this.findBoxes("stco");for(var n=m,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(!(r instanceof c("STCOBox")))throw new Error("found non-stco boxes when updating offsets");r.updateChunkOffsets(l)}};k.fromFile=function l(m){var n=arguments.length<=1||arguments[1]===undefined?true:arguments[1],o;return c("regeneratorRuntime").async(function p(q){while(1)switch(q.prev=q.next){case 0:o=new(c("ISOVideoBoxParser"))(m,n);q.next=3;return c("regeneratorRuntime").awrap(o.parse());case 3:return q.abrupt("return",q.sent);case 4:case"end":return q.stop()}},null,this)};k.fromArrayBuffer=function l(m){var n=arguments.length<=1||arguments[1]===undefined?true:arguments[1],o;return c("regeneratorRuntime").async(function p(q){while(1)switch(q.prev=q.next){case 0:o=new(c("ISOVideoBoxParser"))(m,n);q.next=3;return c("regeneratorRuntime").awrap(o.parse());case 3:return q.abrupt("return",q.sent);case 4:case"end":return q.stop()}},null,this)};k.prototype.toArrayBuffer=function l(){__p&&__p();return c("regeneratorRuntime").async(function m(n){__p&&__p();while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new(c("Promise"))(function(o,p){__p&&__p();var q,r=this,s=0;for(var t=this.$ISOVideoFile1,u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var w;if(u){if(v>=t.length)break;w=t[v++]}else{v=t.next();if(v.done)break;w=v.value}var x=w;s+=x.getSize()}var y=new ArrayBuffer(s),z=new DataView(y),A=new(c("ISOVideoOffsetManager"))();A.setMinUpdateInterval(Math.ceil(s/j)).addOnUpdateCallback(function(){var M=A.getOffset();this.emit(c("ISOVideoFileEvent").BUILD_PROGRESS,M/s)}.bind(this));var B=void 0;if(this.$ISOVideoFile4){B=new DataView(this.$ISOVideoFile4);for(var C=this.$ISOVideoFile1,D=Array.isArray(C),E=0,C=D?C:C[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var F;if(D){if(E>=C.length)break;F=C[E++]}else{E=C.next();if(E.done)break;F=E.value}var G=F;G.boxToArrayBuffer(z,A,B)}o(y)}else if(this.$ISOVideoFile3)(function(){__p&&__p();var M=r.$ISOVideoFile3,N=new FileReader();N.onload=function(){__p&&__p();if(!(N.result instanceof ArrayBuffer))throw new Error("File reading failed");B=new DataView(N.result);for(var O=this.$ISOVideoFile1,P=Array.isArray(O),Q=0,O=P?O:O[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var R;if(P){if(Q>=O.length)break;R=O[Q++]}else{Q=O.next();if(Q.done)break;R=Q.value}var S=R;S.boxToArrayBuffer(z,A,B)}o(y)}.bind(r);N.readAsArrayBuffer(M)})();else{for(var H=this.$ISOVideoFile1,I=Array.isArray(H),J=0,H=I?H:H[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var K;if(I){if(J>=H.length)break;K=H[J++]}else{J=H.next();if(J.done)break;K=J.value}var L=K;L.boxToArrayBuffer(z,A)}o(y)}}.bind(this)));case 1:case"end":return n.stop()}},null,this)};k.prototype.toSimpleObject=function(l){__p&&__p();var m=[];for(var n=this.$ISOVideoFile1,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;m.push(r.toSimpleObject(l))}if(l&&this.$ISOVideoFile4)l.push(this.$ISOVideoFile4);var s={boxes:m,mustUpdateOffsetsOnEdit:this.$ISOVideoFile2,originalFileBuffer:this.$ISOVideoFile4,file:this.$ISOVideoFile3};return s};k.fromSimpleObject=function(l){__p&&__p();var m=[],n=false,o=null;if(l.file){o=l.file;n=true}else if(l.originalFileBuffer){o=l.originalFileBuffer;n=true}for(var p=l.boxes,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s,u=o?c("ISOVideoBoxParser").parseFromSimpleObjectRecursive(t,n,o):c("ISOVideoBoxParser").parseFromSimpleObjectRecursive(t,n);m.push(u)}var v=new k(m,o);v.$ISOVideoFile2=l.mustUpdateOffsetsOnEdit;return v};f.exports=k}),null);
__d("SphericalVideoHotspotType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TEXT:"text",IMAGE:"image"})}),null);
__d("VideoSphericalMetadataUtil",["SphericalVideoMetadataTags","VideoProjection","VideoStereoFormat"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={parseXMLToDocument:function i(j){__p&&__p();if(!j)return null;j=j.replace(/\0/g,"");var k=void 0;if(window.DOMParser){var l=new DOMParser();k=l.parseFromString(j,"text/xml")}else{k=new window.ActiveXObject("Microsoft.XMLDOM");k.async="false";k.loadXML(j)}return k},stringToProjectionType:function i(j){if(Object.values(c("VideoProjection")).includes(j))return j;else return null},stringToStereoMode:function i(j){if(Object.values(c("VideoStereoFormat")).includes(j))return j;else return null},getUnsupportedGSphericalTagsXML:function i(j){__p&&__p();var k=j.getElementsByTagNameNS("*","*"),l=null;for(var m=0;m<k.length;m++){var n=k[m],o=n.nodeName,p=n.parentElement;if(o!=="parsererror"&&p&&p.nodeName!=="parsererror"&&Object.values(c("SphericalVideoMetadataTags").GSPHERICAL).indexOf(o)<0&&Object.values(c("SphericalVideoMetadataTags").GSPHERICAL).indexOf(p.nodeName)<0){if(!l)l="";var q=n.outerHTML;l+="<"+o+q.slice(o.length+1,-(o.length+1))+o+">"}}return l},arrayBufferToFile:function i(j,k,l){return new File([j],k,{type:l})},stringToArrayBuffer:function i(j){var k=new ArrayBuffer(j.length),l=new DataView(k);for(var m=0;m<j.length;m++)l.setUint8(m,j.charCodeAt(m));return k},bufferToFile:function i(j,k,l){var m=j.buffer;return this.arrayBufferToFile(m,k,l)}};f.exports=h}),null);
__d("VideoSphericalMetadataInjector",["FullBox","HDLRBox","ISOVideoBox","ISOVideoBoxConstants","ISOVideoBoxPath","ISOVideoFile","Map","SphericalVideoHotspotType","SphericalVideoMetadataTags","UUIDBox","VideoSphericalMetadataUtil","XMLBox","shallowArrayEqual"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h='<?xml version="1.0"?><rdf:SphericalVideo xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:GSpherical="http://ns.google.com/videos/1.0/spherical/">',i='<?xml version="1.0"?><rdf:SphericalVideo xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:FBSpherical="https://www.facebook.com/help/828417127257368">',j="</rdf:SphericalVideo>",k="face",l="GPAC face Handler",m={convertVerticalFOVToXML:function n(o){if(o)return"<"+c("SphericalVideoMetadataTags").FBSPHERICAL.INITIAL_VERTICAL_FOV_DEGREES+">"+(""+o)+("</"+c("SphericalVideoMetadataTags").FBSPHERICAL.INITIAL_VERTICAL_FOV_DEGREES+">");return null},convertFBGuideMetadataToXML:function n(o){__p&&__p();var p=null;if(o&&o.keyframes.length>0){p="";for(var q=o.keyframes,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;p+="<Keyframe>"+("<yaw>"+u.yaw+"</yaw>")+("<pitch>"+u.pitch+"</pitch>")+("<fov>"+u.fov+"</fov>")+("<timestamp>"+u.timestamp+"</timestamp>")+"</Keyframe>"}p="<"+c("SphericalVideoMetadataTags").FBSPHERICAL.GUIDE+">"+(""+p)+("</"+c("SphericalVideoMetadataTags").FBSPHERICAL.GUIDE+">")}return p},convertFBHotspotMetadataToXML:function n(o){__p&&__p();var p=null;if(o&&o.hotspots&&o.hotspots.length>0){var q=o.hotspots;p="";for(var r=q,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v.content,x="",y="";if(Object.prototype.hasOwnProperty.call(w,"linkAction")&&w.linkAction)y="<LinkAction"+(' url="'+w.linkAction.url+'"')+(' trigger="'+w.linkAction.trigger+'"')+" />";switch(w.type){case c("SphericalVideoHotspotType").TEXT:var z=w.text.replace(/[\u00A0-\u9999\<\>\&\"\'\/]/g,function(A){return"&#"+A.charCodeAt(0)+";"});x="<Text"+(' id="'+w.id+'"')+(' alignment="'+w.alignment+'"')+(' width="'+w.width+'"')+(' height="'+w.height+'"')+(' color="'+w.color+'"')+(' fontWeight="'+w.fontWeight+'"')+(' fontSize="'+w.fontSize+'"')+(' fontFamily="'+w.fontFamily+'"')+(' backgroundColor="'+w.backgroundColor+'"')+(' animation="'+w.animation+'">')+(""+z)+(""+y)+"</Text>";break;case c("SphericalVideoHotspotType").IMAGE:x="<Image"+(' id="'+w.id+'"')+(' width="'+w.width+'"')+(' height="'+w.height+'"')+(' animation="'+w.animation+'">')+(""+w.imageData)+(""+y)+"</Image>";break}p+="<Hotspot"+(' yaw="'+v.yaw+'"')+(' pitch="'+v.pitch+'"')+(' startTime="'+v.startTime+'"')+(' endTime="'+v.endTime+'">')+(""+x)+"</Hotspot>"}p="<"+c("SphericalVideoMetadataTags").FBSPHERICAL.HOTSPOT+">"+(""+p)+("</"+c("SphericalVideoMetadataTags").FBSPHERICAL.HOTSPOT+">")}return p},convertSphericalMetadataToXML:function n(o){__p&&__p();var p=new(c("Map"))().set(c("SphericalVideoMetadataTags").GSPHERICAL.INITIAL_VIEW_PITCH_DEGREES,o.initialPitch).set(c("SphericalVideoMetadataTags").GSPHERICAL.INITIAL_VIEW_HEADING_DEGREES,o.initialYaw).set(c("SphericalVideoMetadataTags").GSPHERICAL.PROJECTION_TYPE,o.projectionType).set(c("SphericalVideoMetadataTags").GSPHERICAL.SPHERICAL,"true").set(c("SphericalVideoMetadataTags").GSPHERICAL.STEREO_MODE,o.stereoMode).set(c("SphericalVideoMetadataTags").GSPHERICAL.STITCHED,"true").set(c("SphericalVideoMetadataTags").GSPHERICAL.STITCHING_SOFTWARE,o.stitchingSoftware),q="";for(var r=p.entries(),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v[0],x=v[1];if(x!==null&&x!==undefined)q+="<"+w+">"+x+"</"+w+">"}var y="",z=o.extraTagXML||"";if(q)y=h+q+z+j;var A=void 0,B=this.convertVerticalFOVToXML(o.initialFOV),C=this.convertFBGuideMetadataToXML(o.guideData),D=this.convertFBHotspotMetadataToXML(o.fbHotspotMetadata);if(B||C||D)A=i+("<"+c("SphericalVideoMetadataTags").FBSPHERICAL.SPHERICAL+">true</"+c("SphericalVideoMetadataTags").FBSPHERICAL.SPHERICAL+">")+(B||"")+(C||"")+(D||"")+j;return{GSphericalXML:y,FBSphericalXML:A}},injectMetadata:function n(o,p,q){__p&&__p();var r=this.convertSphericalMetadataToXML(p),s=r.GSphericalXML,t=r.FBSphericalXML,u=new(c("UUIDBox"))({boxtype:"uuid",extraFields:{usertype:c("ISOVideoBoxConstants").GSPHERICAL_UUID,data:c("VideoSphericalMetadataUtil").stringToArrayBuffer(s)}});if(t){var v=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak").addPath("uuid",1),w=o.findBoxAtExactLocation(v);if(w instanceof c("UUIDBox")&&c("shallowArrayEqual")(w.getExtraFields().usertype,c("ISOVideoBoxConstants").FBSPHERICAL_UUID))o.removeBoxAtLocation(v)}var x=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak").addPath("uuid",0),y=o.findBoxAtExactLocation(x);if(y instanceof c("UUIDBox")&&c("shallowArrayEqual")(y.getExtraFields().usertype,c("ISOVideoBoxConstants").GSPHERICAL_UUID))o.removeBoxAtLocation(x);var z=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak");o.injectBoxAtLocation(u,z);if(t){var A=new(c("UUIDBox"))({boxtype:"uuid",extraFields:{usertype:c("ISOVideoBoxConstants").FBSPHERICAL_UUID,data:c("VideoSphericalMetadataUtil").stringToArrayBuffer(t)}}),B=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak");o.injectBoxAtLocation(A,B)}if(q&&!p.fbSpatialAudioMetadata&&!p.ytSpatialAudioMetadata)this.injectBasicSpatialAudioMetadata(o)},injectBasicSpatialAudioMetadata:function n(o){__p&&__p();var p=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak",1),q=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak",2),r=new(c("ISOVideoBoxPath"))().addPath("moov").addPath("trak",3),s=o.findBoxAtExactLocation(p),t=o.findBoxAtExactLocation(q),u=o.findBoxAtExactLocation(r);if(!s||!t||!u)return false;var v=o.findBoxes("meta");for(var w=v,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z,B=A.getChildren();if(B.length===2&&B[0]instanceof c("HDLRBox")&&B[0].getExtraFields().handler_type===k&&B[0].getExtraFields().name()===l)return false}var C=this.createBasicSpatialAudioBoxes();o.injectBoxAtLocation(C[0],new(c("ISOVideoBoxPath"))().addPath("moov"));o.injectBoxAtLocation(C[1],p);o.injectBoxAtLocation(C[2],q);o.injectBoxAtLocation(C[3],r);return true},createBasicSpatialAudioBoxes:function n(){__p&&__p();var o="<fb360>\n\t<audio>",p="\t</audio>\n</fb360>",q=o+'\t\t<encoder_metadata name="FB Metadata Injector">\n</encoder_metadata>'+p,r=o+'\t\t<AudioChannelConfiguration schemeIdUri="tag:facebook.com,2016-08-16:fb360:audio:channel_layout" value="tbe_8a" />'+p,s=o+'\t\t<AudioChannelConfiguration schemeIdUri="tag:facebook.com,2016-08-16:fb360:audio:channel_layout" value="tbe_8b" />'+p,t=o+'\t\t<AudioChannelConfiguration schemeIdUri="tag:facebook.com,2016-08-16:fb360:audio:channel_layout" value="nda" />'+p,u={boxtype:"meta",extraFields:{}},v=new(c("FullBox"))(u),w=new(c("FullBox"))(u),x=new(c("FullBox"))(u),y=new(c("FullBox"))(u),z={boxtype:"hdlr",extraFields:{handler_type:k,name:l}},A=new(c("HDLRBox"))(z),B=new(c("HDLRBox"))(z),C=new(c("HDLRBox"))(z),D=new(c("HDLRBox"))(z),E={boxtype:"xml ",extraFields:{xml_string:q}},F={boxtype:"xml ",extraFields:{xml_string:r}},G={boxtype:"xml ",extraFields:{xml_string:s}},H={boxtype:"xml ",extraFields:{xml_string:t}},I=new(c("XMLBox"))(E),J=new(c("XMLBox"))(F),K=new(c("XMLBox"))(G),L=new(c("XMLBox"))(H);v.addChild(A);v.addChild(I);w.addChild(B);w.addChild(J);x.addChild(C);x.addChild(K);y.addChild(D);y.addChild(L);return[v,w,x,y]}};f.exports=m}),null);
__d("SphericalMetadata",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record({fbSpatialAudioMetadata:undefined,ytSpatialAudioMetadata:undefined,fbHotspotMetadata:undefined,guideData:undefined,mayHaveSpatialAudio:undefined,initialPitch:undefined,initialYaw:undefined,initialFOV:undefined,projectionType:undefined,spherical:undefined,stereoMode:undefined,stitched:undefined,stitchingSoftware:undefined,extraTagXML:undefined});h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("checkForSphericalTag",["VideoSphericalMetadataUtil"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=c("VideoSphericalMetadataUtil").parseXMLToDocument(i);if(!j)return false;var k=j.getElementsByTagNameNS("*","Spherical");if(k.length===0)return false;var l=k[0],m=l.childNodes[0].nodeValue;return m.toLowerCase()==="true"}f.exports=h}),null);
__d("VideoSphericalMetadataGatherer",["regeneratorRuntime","ISOVideoBoxConstants","checkForSphericalTag"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$VideoRawSphericalMetadataGatherer5=i;this.$VideoRawSphericalMetadataGatherer1=null;this.$VideoRawSphericalMetadataGatherer2=null;this.$VideoRawSphericalMetadataGatherer3=null;this.$VideoRawSphericalMetadataGatherer4=null;this.$VideoRawSphericalMetadataGatherer6=false;this.$VideoRawSphericalMetadataGatherer7=false;this.$VideoRawSphericalMetadataGatherer8=0}h.prototype.gatherRawSphericalMetadata=function i(){return c("regeneratorRuntime").async(function j(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return c("regeneratorRuntime").awrap(this.$VideoRawSphericalMetadataGatherer9());case 2:this.$VideoRawSphericalMetadataGatherer10();this.$VideoRawSphericalMetadataGatherer11();this.$VideoRawSphericalMetadataGatherer7=true;case 5:case"end":return k.stop()}},null,this)};h.prototype.getRawSphericalMetadata=function(){__p&&__p();if(!this.$VideoRawSphericalMetadataGatherer7)throw new Error("spherical metadata has not been gathered yet");var i={isSpherical:this.$VideoRawSphericalMetadataGatherer6,numAudioTracks:this.$VideoRawSphericalMetadataGatherer8};if(this.$VideoRawSphericalMetadataGatherer3)this.$VideoRawSphericalMetadataGatherer3="<fb360_spatial_audio>"+this.$VideoRawSphericalMetadataGatherer3+"</fb360_spatial_audio>";if(this.$VideoRawSphericalMetadataGatherer1!==null)i.FBSphericalMetadataXML=this.$VideoRawSphericalMetadataGatherer1;if(this.$VideoRawSphericalMetadataGatherer2!==null)i.GSphericalMetadataXML=this.$VideoRawSphericalMetadataGatherer2;if(this.$VideoRawSphericalMetadataGatherer3!==null)i.FBSpatialAudioMetadataXML=this.$VideoRawSphericalMetadataGatherer3;if(this.$VideoRawSphericalMetadataGatherer4!==null)i.YTSA3DMetadataJSON=this.$VideoRawSphericalMetadataGatherer4;return i};h.prototype.hasGathered=function(){return this.$VideoRawSphericalMetadataGatherer7};h.prototype.$VideoRawSphericalMetadataGatherer9=function i(){__p&&__p();var j,k,l,m,n,o;return c("regeneratorRuntime").async(function p(q){__p&&__p();while(1)switch(q.prev=q.next){case 0:j=this.$VideoRawSphericalMetadataGatherer5.findBoxes("uuid");k=j,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 2:if(!l){q.next=8;break}if(!(m>=k.length)){q.next=5;break}return q.abrupt("break",17);case 5:n=k[m++];q.next=12;break;case 8:m=k.next();if(!m.done){q.next=11;break}return q.abrupt("break",17);case 11:n=m.value;case 12:o=n;q.next=15;return c("regeneratorRuntime").awrap(this.$VideoRawSphericalMetadataGatherer12(o));case 15:q.next=2;break;case 17:case"end":return q.stop()}},null,this)};h.prototype.$VideoRawSphericalMetadataGatherer12=function i(j){__p&&__p();var k,l,m,n,o;return c("regeneratorRuntime").async(function p(q){__p&&__p();while(1)switch(q.prev=q.next){case 0:k=this.$VideoRawSphericalMetadataGatherer13(j.getExtraFields().usertype,c("ISOVideoBoxConstants").GSPHERICAL_UUID);l=this.$VideoRawSphericalMetadataGatherer13(j.getExtraFields().usertype,c("ISOVideoBoxConstants").FBSPHERICAL_UUID);if(!(k||l)){q.next=11;break}q.t0=Uint8Array;q.next=6;return c("regeneratorRuntime").awrap(j.getBuffer("data"));case 6:q.t1=q.sent;m=new q.t0(q.t1);n="";for(o=0;o<m.length;o++)n+=String.fromCharCode(m[o]);if(c("checkForSphericalTag")(n)){this.$VideoRawSphericalMetadataGatherer6=true;if(l)this.$VideoRawSphericalMetadataGatherer1=n;if(k)this.$VideoRawSphericalMetadataGatherer2=n}case 11:case"end":return q.stop()}},null,this)};h.prototype.$VideoRawSphericalMetadataGatherer10=function(){__p&&__p();var i=this.$VideoRawSphericalMetadataGatherer5.findBoxes("meta");for(var j=i,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}var n=m;this.$VideoRawSphericalMetadataGatherer14(n)}};h.prototype.$VideoRawSphericalMetadataGatherer14=function(i){__p&&__p();var j=i.getChildren(),k=null,l=null;for(var m=j,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(q.getBoxtype()==="hdlr")k=q;if(q.getBoxtype()==="xml ")l=q}if(k===null||l===null||k.getExtraFields().handler_type!=="face")return;var r=l.getExtraFields().xml_string,s=null,t=null,u=i.getParent();if(u&&u.getBoxtype()==="trak"){for(var v=u.getChildren(),w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var y;if(w){if(x>=v.length)break;y=v[x++]}else{x=v.next();if(x.done)break;y=x.value}var z=y;if(z.getBoxtype()==="tkhd")s=z}if(s!==null){t=s.getExtraFields().track_id;this.$VideoRawSphericalMetadataGatherer8++}}if(!this.$VideoRawSphericalMetadataGatherer3)this.$VideoRawSphericalMetadataGatherer3="";if(t!==null)this.$VideoRawSphericalMetadataGatherer3+='<track id="'+t.toString()+'">'+r+"</track>";else this.$VideoRawSphericalMetadataGatherer3+="<spatial_audio_formatting>"+r+"</spatial_audio_formatting>"};h.prototype.$VideoRawSphericalMetadataGatherer11=function(){__p&&__p();var i=this.$VideoRawSphericalMetadataGatherer5.findBoxes("SA3D");for(var j=i,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}var n=m;this.$VideoRawSphericalMetadataGatherer15(n)}};h.prototype.$VideoRawSphericalMetadataGatherer15=function(i){if(this.$VideoRawSphericalMetadataGatherer4!==null)return;var j=JSON.stringify(i.getExtraFields());this.$VideoRawSphericalMetadataGatherer4=j};h.prototype.$VideoRawSphericalMetadataGatherer13=function(i,j){if(i.length!==j.length)return false;for(var k=0;k<i.length;k++)if(i[k]!==j[k])return false;return true};f.exports=h}),null);
__d("FBGuideMetadata",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record({keyframes:undefined});h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("SphericalVideoHotspotAnimation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NO_ANIM:"no_anim"})}),null);
__d("SphericalVideoHotspotTextAlignment",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LEFT:"left",CENTER:"center",RIGHT:"right"})}),null);
__d("FBHotspot",["immutable","SphericalVideoHotspotAnimation","SphericalVideoHotspotTextAlignment","SphericalVideoHotspotType"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record({yaw:0,pitch:0,startTime:0,endTime:0,content:{id:-1,width:0,height:0,animation:c("SphericalVideoHotspotAnimation").NO_ANIM,type:c("SphericalVideoHotspotType").TEXT,text:"",alignment:c("SphericalVideoHotspotTextAlignment").CENTER,color:"",fontWeight:"",fontSize:0,fontFamily:"",backgroundColor:""}});h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FBSpatialAudioMetadata",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record({encoderMetadata:null,focusData:null,headlockedData:null,spatialData:null,trackData:null});h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("YTSpatialAudioMetadata",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record({ambisonic_channel_ordering:-1,ambisonic_normalization:-1,ambisonic_order:-1,ambisonic_type:-1,channel_map:[],num_channels:-1,version:-1});h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("VideoSphericalMetadataReader",["FBGuideMetadata","FBHotspot","FBHotspotMetadata","FBSpatialAudioMetadata","SphericalMetadata","SphericalVideoHotspotType","VideoSphericalMetadataUtil","YTSpatialAudioMetadata"],(function aa(ba,a,ca,da,b,ea){"use strict";__p&&__p();var c={parseGSphericalMetadataXML:function d(e,f){__p&&__p();var g=a("VideoSphericalMetadataUtil").parseXMLToDocument(e);if(!g)return f;var h=a("VideoSphericalMetadataUtil").getUnsupportedGSphericalTagsXML(g),i=g.getElementsByTagNameNS("*","Spherical")[0],j=g.getElementsByTagNameNS("*","InitialViewHeadingDegrees")[0],k=g.getElementsByTagNameNS("*","InitialViewPitchDegrees")[0],l=g.getElementsByTagNameNS("*","Stitched")[0],m=g.getElementsByTagNameNS("*","StitchingSoftware")[0],n=g.getElementsByTagNameNS("*","StereoMode")[0],o=g.getElementsByTagNameNS("*","ProjectionType")[0],p=null;if(j){var q=parseInt(j.childNodes[0].nodeValue,10);if(!isNaN(q))p=q}var r=null;if(k){var s=parseInt(k.childNodes[0].nodeValue,10);if(!isNaN(s))r=s}var t=i?i.childNodes[0].nodeValue.toLowerCase()==="true":null,u=l?l.childNodes[0].nodeValue.toLowerCase()==="true":null,v=m?m.childNodes[0].nodeValue:null,w=n?a("VideoSphericalMetadataUtil").stringToStereoMode(n.childNodes[0].nodeValue):null,x=o?a("VideoSphericalMetadataUtil").stringToProjectionType(o.childNodes[0].nodeValue):null;if(p!==null)f=f.set("initialYaw",p);if(r!==null)f=f.set("initialPitch",r);if(u!==null)f=f.set("stitched",u);if(v!==null)f=f.set("stitchingSoftware",v);if(t)f=f.set("spherical",t);if(w)f=f.set("stereoMode",w);if(x)f=f.set("projectionType",x);if(h)f=f.set("extraTagXML",h);return f},parseFBSphericalMetadataXML:function d(e,f){__p&&__p();var g,h=a("VideoSphericalMetadataUtil").parseXMLToDocument(e);if(!h)return f;var i=null,j=null,k=null,l=h.getElementsByTagNameNS("*","InitialVerticalFOVDegrees")[0];if(l){var m=parseInt(l.childNodes[0].nodeValue,10);if(!isNaN(m))i=m}var n=h.getElementsByTagNameNS("*","Guide")[0];if(n){var o=n.getElementsByTagName("Keyframe"),p=function p(u){__p&&__p();var Q=u.getElementsByTagName("pitch"),R=u.getElementsByTagName("yaw"),l=u.getElementsByTagName("fov"),S=u.getElementsByTagName("timestamp"),T=void 0;if(Q.length>0){var U=parseFloat(Q[0].textContent);if(!isNaN(U))T=U}var V=void 0;if(R.length>0){var W=parseFloat(R[0].textContent);if(!isNaN(W))V=W}var X=void 0;if(l.length>0){var Y=parseInt(l[0].textContent,10);if(!isNaN(Y))X=Y}var Z=void 0;if(S.length>0){var $=parseInt(S[0].textContent,10);if(!isNaN($))Z=$}if(T==null||V==null||X==null||Z==null)return"continue";if(!j)j=new(a("FBGuideMetadata"))({keyframes:[]});j=j.update("keyframes",function(ta){return ta.concat([{pitch:T,yaw:V,fov:X,timestamp:Z}])})};for(var q=o,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t,g=p(u);if(g==="continue")continue}}var v=h.getElementsByTagNameNS("*","HotspotMetadata")[0];if(v){var w=v.getElementsByTagName("Hotspot"),x=[];for(var y=w,z=Array.isArray(y),A=0,y=z?y:y[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var B;if(z){if(A>=y.length)break;B=y[A++]}else{A=y.next();if(A.done)break;B=A.value}var C=B,D=C.attributes,E=Number.parseFloat(D.getNamedItem("yaw").nodeValue),F=Number.parseFloat(D.getNamedItem("pitch").nodeValue),G=Number.parseInt(D.getNamedItem("startTime").nodeValue,10),fa=Number.parseInt(D.getNamedItem("endTime").nodeValue,10),H=void 0;for(var I=C.children,J=Array.isArray(I),K=0,I=J?I:I[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var L;if(J){if(K>=I.length)break;L=I[K++]}else{K=I.next();if(K.done)break;L=K.value}var M=L;if(H)throw new Error("Only one content type allowed per hotspot.");var N=M.attributes,ga=Number.parseInt(N.getNamedItem("id").nodeValue,10),ha=Number.parseFloat(N.getNamedItem("width").nodeValue),ia=Number.parseFloat(N.getNamedItem("height").nodeValue),ja=N.getNamedItem("animation").nodeValue,O={id:ga,width:ha,height:ia,animation:ja},P=M.getElementsByTagName("LinkAction");if(P.length>0){var ka={url:P[0].attributes.getNamedItem("url").nodeValue,trigger:P[0].attributes.getNamedItem("trigger").nodeValue};O=babelHelpers["extends"]({},O,{linkAction:ka})}switch(M.tagName){case"Text":var la=N.getNamedItem("alignment").nodeValue,ma=N.getNamedItem("color").nodeValue,na=N.getNamedItem("fontWeight").nodeValue,oa=Number.parseInt(N.getNamedItem("fontSize").nodeValue,10),pa=N.getNamedItem("fontFamily").nodeValue,qa=N.getNamedItem("backgroundColor").nodeValue,ra=M.textContent.trim();H=babelHelpers["extends"]({type:a("SphericalVideoHotspotType").TEXT,color:ma,fontWeight:na,fontSize:oa,fontFamily:pa,backgroundColor:qa,alignment:la,text:ra},O);break;case"Image":var sa=M.textContent.trim();H=babelHelpers["extends"]({type:a("SphericalVideoHotspotType").IMAGE,imageData:sa},O);break}}if(H)x.push(new(a("FBHotspot"))({yaw:E,pitch:F,startTime:G,endTime:fa,content:H}))}k=new(a("FBHotspotMetadata"))({hotspots:x})}if(i||j||k){if(i!==null)f=f.set("initialFOV",i);if(j!==null)f=f.set("guideData",j);if(k!==null)f=f.set("fbHotspotMetadata",k)}return f},parseFBSpatialAudioXML:function d(e){__p&&__p();var f=a("VideoSphericalMetadataUtil").parseXMLToDocument(e);if(!f)return null;var g=f.getElementsByTagName("encoder_metadata")[0],h=f.getElementsByTagName("spatial")[0],i=f.getElementsByTagName("headlocked")[0],j=f.getElementsByTagName("focus")[0],k=f.getElementsByTagName("track"),l=new(a("FBSpatialAudioMetadata"))();if(g)l=l.set("encoderMetadata",{gitCommitDate:g.getAttribute("git_commit_date"),gitHash:g.getAttribute("git_hash"),is64Bit:g.getAttribute("is64bit")==="yes",name:g.getAttribute("name"),osName:g.getAttribute("osName"),version:g.getAttribute("version")});if(h){var m=h.getAttribute("format"),n=h.getAttribute("channel_map"),o=[];if(n){var p=n.split(" ");for(var q=p,r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;o.push(parseInt(u,10))}}l=l.set("spatialData",{bitDepth:parseInt(h.getAttribute("bit_depth"),10),channelMap:o,format:m?m:"",sampleRate:parseInt(h.getAttribute("sample_rate"),10)})}if(i)l=l.set("headlockedData",{bitDepth:parseInt(h.getAttribute("bit_depth"),10),sampleRate:parseInt(h.getAttribute("sample_rate"),10)});if(j){var v=j.getAttribute("schemeIdUri");l=l.set("focusData",{enabled:j.getAttribute("enabled")==="true",focusWidthDegrees:parseFloat(j.getAttribute("focusWidthDegrees")),offFocusLevel:parseFloat(j.getAttribute("offFocusLevel")),offFocusLevelDB:parseFloat(j.getAttribute("offFocusLevelDB")),schemeIDUri:v?v:""})}if(k){var w=[];for(var x=k,y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}var B=A,C=B.getElementsByTagName("AudioChannelConfiguration"),D=void 0;if(C.length>1)D=C[1];else D=C[0];var E=D.getAttribute("schemeIdUri"),F=D.getAttribute("value");w.push({schemeIDUri:E?E:"",trackID:parseInt(B.getAttribute("id"),10),value:F?F:""})}l=l.set("trackData",w)}return l},parseYTSpatialAudioJSON:function d(e){var f=JSON.parse(e),g=f.ambisonic_channel_ordering,h=f.ambisonic_normalization,i=f.ambisonic_order,j=f.ambisonic_type,k=f.channel_map,l=f.num_channels,m=f.version;return new(a("YTSpatialAudioMetadata"))({ambisonic_channel_ordering:g,ambisonic_normalization:h,ambisonic_order:i,ambisonic_type:j,channel_map:k,num_channels:l,version:m})}};b.exports=c}),null);
__d("VideoSphericalMetadataReaderController",["regeneratorRuntime","ISOVideoFile","VideoSphericalMetadataGatherer","VideoSphericalMetadataReader","SphericalMetadata","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=3;function i(j){this.$VideoSphericalMetadataReaderController2=new(c("SphericalMetadata"))();this.$VideoSphericalMetadataReaderController3=false;switch(j.sourceType){case"fileObject":this.$VideoSphericalMetadataReaderController5=j.fileObject;this.$VideoSphericalMetadataReaderController4=new(c("VideoSphericalMetadataGatherer"))(this.$VideoSphericalMetadataReaderController5);break;case"metadata":this.$VideoSphericalMetadataReaderController1=j.metadata;break;default:throw new Error("Unrecognized source type")}}i.prototype.$VideoSphericalMetadataReaderController6=function(){__p&&__p();if(!this.$VideoSphericalMetadataReaderController1)return;if(!this.$VideoSphericalMetadataReaderController1.isSpherical)return;if(this.$VideoSphericalMetadataReaderController1.GSphericalMetadataXML)this.$VideoSphericalMetadataReaderController2=c("VideoSphericalMetadataReader").parseGSphericalMetadataXML(this.$VideoSphericalMetadataReaderController1.GSphericalMetadataXML,this.$VideoSphericalMetadataReaderController2);if(this.$VideoSphericalMetadataReaderController1.FBSphericalMetadataXML)this.$VideoSphericalMetadataReaderController2=c("VideoSphericalMetadataReader").parseFBSphericalMetadataXML(this.$VideoSphericalMetadataReaderController1.FBSphericalMetadataXML,this.$VideoSphericalMetadataReaderController2);if(this.$VideoSphericalMetadataReaderController1.FBSpatialAudioMetadataXML){var j=c("VideoSphericalMetadataReader").parseFBSpatialAudioXML(this.$VideoSphericalMetadataReaderController1.FBSpatialAudioMetadataXML);if(j)this.$VideoSphericalMetadataReaderController2=this.$VideoSphericalMetadataReaderController2.set("fbSpatialAudioMetadata",j)}if(this.$VideoSphericalMetadataReaderController1.YTSA3DMetadataJSON){var k=c("VideoSphericalMetadataReader").parseYTSpatialAudioJSON(this.$VideoSphericalMetadataReaderController1.YTSA3DMetadataJSON);this.$VideoSphericalMetadataReaderController2=this.$VideoSphericalMetadataReaderController2.set("ytSpatialAudioMetadata",k)}this.$VideoSphericalMetadataReaderController2=this.$VideoSphericalMetadataReaderController2.set("mayHaveSpatialAudio",this.$VideoSphericalMetadataReaderController1.numAudioTracks===h);this.$VideoSphericalMetadataReaderController3=true};i.objectToRawSphericalMetadata=function(j){__p&&__p();var k,l,m,n,o,p=j.streams.numAudioTracks,q=!!((k=j)!=null?(k=k.format)!=null?k.isSpherical:k:k),r={isSpherical:q,numAudioTracks:p};if(!q)return r;var s=(l=j)!=null?(l=l.metadata)!=null?l.sphericalMetadataXml:l:l;if(s)r.GSphericalMetadataXML=s;var t=(m=j)!=null?(m=m.metadata)!=null?m.FBSphericalMetadataXML:m:m;if(t)r.FBSphericalMetadataXML=t;var u=(n=j)!=null?(n=n.metadata)!=null?n.fbSpatialAudioMetadataXml:n:n;if(u)r.FBSpatialAudioMetadataXML=u;var v=(o=j)!=null?(o=o.metadata)!=null?o.ytSa3dMetadataJson:o:o;if(v)r.YTSA3DMetadataJSON=v;return r};i.prototype.getFileMetadata=function j(){__p&&__p();var k;return c("regeneratorRuntime").async(function l(m){__p&&__p();while(1)switch(m.prev=m.next){case 0:if(this.$VideoSphericalMetadataReaderController3){m.next=15;break}if(this.$VideoSphericalMetadataReaderController1){m.next=14;break}m.prev=2;k=this.$VideoSphericalMetadataReaderController4;if(!k){m.next=9;break}if(k.hasGathered()){m.next=8;break}m.next=8;return c("regeneratorRuntime").awrap(k.gatherRawSphericalMetadata());case 8:this.$VideoSphericalMetadataReaderController1=k.getRawSphericalMetadata();case 9:m.next=14;break;case 11:m.prev=11;m.t0=m["catch"](2);return m.abrupt("return",this.$VideoSphericalMetadataReaderController2);case 14:this.$VideoSphericalMetadataReaderController6();case 15:return m.abrupt("return",this.$VideoSphericalMetadataReaderController2);case 16:case"end":return m.stop()}},null,this,[[2,11]])};f.exports=i}),null);
__d("VideoComposerDialogSphericalDirectorStore",["Promise","ComposerVideoUploadSphericalMetadataUtils","ComposerVideoUploadSphericalStore","VideoComposerDialogDispatcher","FluxReduceStore","VideoSphericalMetadataInjector","VideoSphericalMetadataReaderController","immutable","VideoComposerDialogActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={composerConfig:null,metadata:null,showOmnistabSection:false,spherical:false};h=babelHelpers.inherits(m,c("immutable").Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m()};n.prototype.reduce=function(o,p){__p&&__p();switch(p.type){case c("VideoComposerDialogActionTypes").RESET_COMPOSER:o=this.$VideoComposerDialogSphericalDirectorStore1(o);return o;case c("VideoComposerDialogActionTypes").BOOTLOAD_SPHERICAL_DIRECTOR_PARAMETERS:o=o.set("showOmnistabSection",p.data.showOmnistabSection);return o;case c("VideoComposerDialogActionTypes").BOOTLOAD_SPHERICAL_COMPOSER_CONFIG:o=this.$VideoComposerDialogSphericalDirectorStore2(o,p.data);return o;case c("VideoComposerDialogActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER:o=this.$VideoComposerDialogSphericalDirectorStore3(o,p.data);return o;case c("VideoComposerDialogActionTypes").TOGGLE_SPHERICAL:o=o.set("spherical",p.data);return o;default:return o}};n.prototype.$VideoComposerDialogSphericalDirectorStore4=function(o,p,q){__p&&__p();if(q&&q.format){var r=q.format.isSpherical;o=o.set("spherical",r);if(r){var s=c("VideoSphericalMetadataReaderController").objectToRawSphericalMetadata(q);new(c("VideoSphericalMetadataReaderController"))({sourceType:"metadata",metadata:s}).getFileMetadata().then(function(t){c("ComposerVideoUploadSphericalMetadataUtils").initWithOriginalSphericalMetadata(p,t)}).done()}}return o};n.prototype.$VideoComposerDialogSphericalDirectorStore2=function(o,p){o=o.set("composerConfig",p);var q=this.getState().get("metadata");if(q)o=this.$VideoComposerDialogSphericalDirectorStore4(o,p.contextConfig.composerID,q);return o};n.prototype.$VideoComposerDialogSphericalDirectorStore1=function(o){var p=this.getState().get("composerConfig");if(p)c("ComposerVideoUploadSphericalStore").clearComposerData(p.contextConfig.composerID);o=this.getInitialState();return o};n.prototype.$VideoComposerDialogSphericalDirectorStore3=function(o,p){o=o.set("metadata",p);var q=this.getState().get("composerConfig");if(q)o=this.$VideoComposerDialogSphericalDirectorStore4(o,q.contextConfig.composerID,p);return o};n.prototype.getPostData=function(){__p&&__p();var o=this.getState().get("composerConfig");if(!o)return c("Promise").resolve({});var p=["enable_omnistab","guide_enabled","guide_keyframes","fov","hotspotXML","initialHeading","initialPitch","projection","spherical","stereoMode"],q=Object.assign({},c("ComposerVideoUploadSphericalStore").getPostData(o.contextConfig.composerID));q.spherical=this.getState().get("spherical");if(q.hotspots){var r=c("VideoSphericalMetadataInjector").convertFBHotspotMetadataToXML(q.hotspots);if(r)q.hotspotXML=new Blob([r],{type:"text/plain"})}var s=p.reduce(function(t,u){if(u in q)t[u]=q[u];return t},{});return c("Promise").resolve(s)};function n(){j.apply(this,arguments)}f.exports=new n(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogSphericalDirectorTabConfig",["ix","fbt","Promise","SphericalVideoExperiments","VideoComposerDialogSphericalDirectorContainer.react","VideoComposerDialogSphericalDirectorStore","VideoComposerDialogSphericalDirectorTabContainer.react","VideoComposerDialogTab","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=i._("Add more detail to your 360 video with guide points."),k=i._("Add more detail to your 360 video with guide points and text."),l=i._("Add more detail to your 360 video with guide points and images."),m=i._("Add more detail to your 360 video with guide points, text, and images."),n={key:c("VideoComposerDialogTab").SPHERICAL_DIRECTOR,glyphSelected:h("426964"),glyphUnselected:h("426965"),title:i._("360 Director Tools"),defaultDescription:c("SphericalVideoExperiments").enableTextHotspots?c("SphericalVideoExperiments").enableImageHotspots?m:k:c("SphericalVideoExperiments").enableImageHotspots?l:j,tabContainer:c("VideoComposerDialogSphericalDirectorTabContainer.react"),bodyContainer:c("VideoComposerDialogSphericalDirectorContainer.react"),getPostData:function o(){return c("VideoComposerDialogSphericalDirectorStore").getPostData()},fetchEditPostData:function o(){return c("Promise").resolve()}};f.exports=n}),null);
__d("VideoComposerDialogTabs",["immutable","VideoComposerDialogAdBreaksTabConfig","VideoComposerDialogBasicTabConfig","VideoComposerDialogCaptionsTabConfig","VideoComposerDialogDistributionTabConfig","VideoComposerDialogRightsTabConfig","VideoComposerDialogSphericalDirectorTabConfig","VideoComposerDialogTrackingTabConfig","VideoComposerDialogThumbnailsTabConfig"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").Map({basic:c("VideoComposerDialogBasicTabConfig"),distribution:c("VideoComposerDialogDistributionTabConfig"),captions:c("VideoComposerDialogCaptionsTabConfig"),ad_breaks:c("VideoComposerDialogAdBreaksTabConfig"),tracking:c("VideoComposerDialogTrackingTabConfig"),thumbnails:c("VideoComposerDialogThumbnailsTabConfig"),spherical_director:c("VideoComposerDialogSphericalDirectorTabConfig"),rights:c("VideoComposerDialogRightsTabConfig")});f.exports=h}),null);
__d("VideoComposerDialogThumbnailTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({GENERATED:"",CUSTOM:"",VIDEO_FRAME:""});f.exports={ThumbnailSection:h}}),null);
__d("VideoComposerDialogThumbnailUtils",["UserAgent","VideoComposerDialogConstants","VideoComposerDialogThumbnailActions","generateVideoThumbnails"],(function a(b,c,d,e,f,g){"use strict";var h=function h(j){var k=c("generateVideoThumbnails")(j,j.videoWidth?j.videoWidth:0,j.videoHeight?j.videoHeight:0,c("VideoComposerDialogConstants").GENERATED_THUMBNAILS,"contain");k.done(function(l){c("VideoComposerDialogThumbnailActions").generatedThumbnails(l)})},i=function i(){return c("UserAgent").isBrowser("Firefox >= 14")||c("UserAgent").isBrowser("Chrome")};f.exports={onMetadataLoaded:h,shouldShowThumbnailScrubber:i}}),null);
__d("VideoComposerDialogThumbnailsStore",["Promise","FileVideoThumbnail","FluxReduceStore","immutable","VideoComposerDialogActionTypes","VideoComposerDialogDispatcher","VideoComposerDialogThumbnailTypes","VideoComposerDialogThumbnailUtils","VideoThumbnailSource"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={customThumbnail:null,generatedThumbnails:[],hasSelectedGeneratedThumb:false,newFileAdded:false,scrubbedThumbnail:null,selectedGeneratedIndex:0,selectedSection:c("VideoComposerDialogThumbnailTypes").ThumbnailSection.GENERATED,selectedThumbnail:null};h=babelHelpers.inherits(m,c("immutable").Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m()};n.prototype.reduce=function(o,p){__p&&__p();var q=this.getState(),r=q.customThumbnail,s=q.generatedThumbnails,t=q.scrubbedThumbnail,u=q.selectedGeneratedIndex;switch(p.type){case c("VideoComposerDialogActionTypes").GENERATED_THUMBNAILS:o=o.set("selectedThumbnail",p.data.selectedThumbnail);o=o.set("generatedThumbnails",p.data.thumbnails);return o;case c("VideoComposerDialogActionTypes").METADATA_LOADED_FROM_HTML_PLAYER:if(o.generatedThumbnails.length===0||o.newFileAdded){c("VideoComposerDialogThumbnailUtils").onMetadataLoaded(p.videoPlayer);o=o.set("newFileAdded",false)}return o;case c("VideoComposerDialogActionTypes").FILE_ADDED:o=o.set("newFileAdded",true);return o;case c("VideoComposerDialogActionTypes").SELECT_SECTION:o=o.set("selectedSection",p.section);switch(p.section){case c("VideoComposerDialogThumbnailTypes").ThumbnailSection.GENERATED:o=o.set("selectedThumbnail",s[u]);break;case c("VideoComposerDialogThumbnailTypes").ThumbnailSection.CUSTOM:if(r!==null)o=o.set("selectedThumbnail",r);break;case c("VideoComposerDialogThumbnailTypes").ThumbnailSection.VIDEO_FRAME:if(t!==null)o=o.set("selectedThumbnail",t);break;default:break}return o;case c("VideoComposerDialogActionTypes").TOGGLE_SELECTED_GENERATED_THUMBNAIL:o=o.set("hasSelectedGeneratedThumb",true);o=o.set("selectedGeneratedIndex",p.index);o=o.set("selectedThumbnail",s[p.index]);return o;case c("VideoComposerDialogActionTypes").UPDATE_CUSTOM_THUMBNAIL:o=o.set("customThumbnail",p.thumbnail);o=o.set("selectedThumbnail",p.thumbnail);return o;case c("VideoComposerDialogActionTypes").UPDATE_SCRUBBED_THUMBNAIL:o=o.set("scrubbedThumbnail",p.thumbnail);o=o.set("selectedThumbnail",p.thumbnail);return o;case c("VideoComposerDialogActionTypes").UPDATE_SELECTED_THUMBNAIL:o=o.set("selectedThumbnail",p.thumbnail);return o;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:o=this.getInitialState();return o;default:return o}};n.prototype.getPostData=function(){__p&&__p();var o=this.getState(),p=o.hasSelectedGeneratedThumb,q=o.scrubbedThumbnail,r=o.selectedThumbnail,s={};if(r){if(r instanceof c("FileVideoThumbnail"))s.thumbnail_type=c("VideoThumbnailSource").CUSTOM;else if(q!==null&&q===r){s.thumbnail_type=c("VideoThumbnailSource").SCRUBBER_SELECTED;s.user_scrubbed_thumbnail_timestamp=r.getTime()}else s.thumbnail_type=p?c("VideoThumbnailSource").GENERATED_SELECTED:c("VideoThumbnailSource").GENERATED_DEFAULT;return r.getData().then(function(t){s.thumb=t;return s})}return c("Promise").resolve(s)};function n(){j.apply(this,arguments)}f.exports=new n(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogThumbnailsTabConfig",["ix","fbt","Promise","React","VideoComposerDialogTab","VideoComposerDialogThumbnailsContainer.react","VideoComposerDialogThumbnailsStore","VideoComposerDialogThumbnailsTabContainer.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={key:c("VideoComposerDialogTab").THUMBNAILS,glyphSelected:h("425096"),glyphUnselected:h("425099"),title:i._("Thumbnail"),defaultDescription:c("React").createElement("div",null),tabContainer:c("VideoComposerDialogThumbnailsTabContainer.react"),bodyContainer:c("VideoComposerDialogThumbnailsContainer.react"),getPostData:function k(){return c("VideoComposerDialogThumbnailsStore").getPostData()},fetchEditPostData:function k(){return c("Promise").resolve()}};f.exports=j}),null);
__d("VideoComposerDialogTrackingStore",["Promise","FluxReduceStore","immutable","VideoComposerDialogActionTypes","VideoComposerDialogDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={customLabels:[],universalID:""};h=babelHelpers.inherits(m,c("immutable").Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m()};n.prototype.reduce=function(o,p){switch(p.type){case c("VideoComposerDialogActionTypes").UPDATE_CUSTOM_LABELS:o=o.set("customLabels",p.customLabels);return o;case c("VideoComposerDialogActionTypes").UPDATE_UNIVERSAL_ID:o=o.set("universalID",p.universalID);return o;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:o=this.getInitialState();return o;default:return o}};n.prototype.getPostData=function(){var o=this.getState(),p=o.customLabels,q=o.universalID;return c("Promise").resolve({custom_labels:p,external_video_id:q})};function n(){j.apply(this,arguments)}f.exports=new n(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogTrackingTabConfig",["ix","fbt","Promise","VideoComposerDialogTab","VideoComposerDialogTrackingContainer.react","VideoComposerDialogTrackingStore","VideoComposerDialogTrackingTabContainer.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={key:c("VideoComposerDialogTab").TRACKING,glyphSelected:h("401232"),glyphUnselected:h("401239"),title:i._("Tracking"),defaultDescription:i._("Add labels to help you manage and search for your video."),tabContainer:c("VideoComposerDialogTrackingTabContainer.react"),bodyContainer:c("VideoComposerDialogTrackingContainer.react"),getPostData:function k(){return c("VideoComposerDialogTrackingStore").getPostData()},fetchEditPostData:function k(){return c("Promise").resolve()}};f.exports=j}),null);
__d("VideoComposerDialogField.react",["ix","cx","Image.react","React","Tooltip.react","XUIText.react","XUIGrayText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement("div",{className:this.props.showTopBorder?"_2fb1":""}),c("React").createElement("div",{className:"_gtn"+(this.props.showTopBorder?" _2pig":"")},c("React").createElement("div",{className:"_2fbh"},c("React").createElement("div",{className:"_ini"},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},this.props.title),this.props.tooltip?c("React").createElement(c("Tooltip.react"),{tooltip:this.props.tooltip},c("React").createElement(c("Image.react"),{className:"_inj",src:h("126340")})):null),this.props.subtitle?c("React").createElement(c("XUIGrayText.react"),{className:"_64dx",display:"block",size:"meta1"},this.props.subtitle):null,this.props.footer?c("React").createElement("div",{className:"_3-8y"},this.props.footer):null),c("React").createElement("div",{className:"_inl"+(this.props.inputPadding?" _648t":"")},this.props.input)))};function l(){j.apply(this,arguments)}l.defaultProps={inputPadding:false,showTopBorder:true};f.exports=l}),null);
__d("VideoComposerDialogAdBreakBlockListField.react",["fbt","PagesSettingsInstreamAdsBlockListContainer","React","VideoComposerDialogField.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props.pageID;if(l==null)return null;return c("React").createElement(c("VideoComposerDialogField.react"),{input:c("React").createElement(c("PagesSettingsInstreamAdsBlockListContainer"),{appliable:true,currentPageId:l,isNewComposerStyle:true,shouldInitializeOnMount:false}),inputPadding:true,subtitle:h._("Use block lists to prevent certain kinds of ads from appearing in your videos."),title:h._("Block Lists"),tooltip:h._("Use block lists to prevent certain types of ads from appearing in your videos. Block lists can be applied to specific videos or to all videos on your Page.")})};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogRadioButton.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={hovered:false},this.$VideoComposerDialogRadioButton1=function(){this.setState({hovered:true})}.bind(this),this.$VideoComposerDialogRadioButton2=function(){this.setState({hovered:false})}.bind(this),m}k.prototype.render=function(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_2e9s"+(this.props.checked?" _2e9y":"")),onClick:this.props.onSelect,onMouseEnter:this.$VideoComposerDialogRadioButton1,onMouseLeave:this.$VideoComposerDialogRadioButton2,role:"presentation"},c("React").createElement("div",{className:"_2e9z"+(this.state.hovered&&!this.props.checked?" _2e9-":"")+(this.props.checked?" _2e9y":"")}),c("React").createElement("div",{className:"_3-9b"},this.props.label))};f.exports=k}),null);
__d("VideoComposerDialogAdBreakHoldoutTestField.react",["cx","fbt","React","VideoComposerDialogField.react","VideoComposerDialogRadioButton.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$VideoComposerDialogAdBreakHoldoutTestField1=function(){this.props.onUpdateHoldoutTestStatus(true)}.bind(this),this.$VideoComposerDialogAdBreakHoldoutTestField2=function(){this.props.onUpdateHoldoutTestStatus(false)}.bind(this),n}l.prototype.render=function(){if(!this.props.holdoutTestPublicMetadata.isEligibleCreator||!this.props.hasEnabledAdBreaks)return null;return c("React").createElement(c("VideoComposerDialogField.react"),{input:c("React").createElement("div",{className:"_4rzm"},c("React").createElement(c("VideoComposerDialogRadioButton.react"),{checked:this.props.enabled,label:i._("Yes"),onSelect:this.$VideoComposerDialogAdBreakHoldoutTestField1}),c("React").createElement(c("VideoComposerDialogRadioButton.react"),{checked:!this.props.enabled,label:i._("No"),onSelect:this.$VideoComposerDialogAdBreakHoldoutTestField2})),inputPadding:true,subtitle:i._("Enable holdout testing to learn how your video performs when there are ad breaks."),title:i._("Viewer Holdout Testing"),tooltip:c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},i._("How Holdouts Work For Ad Breaks")),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},i._("For this video, a small percentage of your viewers will be split into a group for the test. Some viewers will see ads and some won't. The remaining viewers are not affected.")),c("React").createElement("br",null),c("React").createElement(c("XUIText.react"),{display:"block"},i._("When you turn on holdout testing for a video, the test will run for 14 days or until the test group with ad breaks earns $100. Test results are available in your Page's Insights.")))})};f.exports=l}),null);
__d("XVideoComposerDialogAdBreakNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/nux/",{nux_id:{type:"Int",required:true}})}),null);
__d("VideoComposerDialogAdBreakNUX.react",["cx","AsyncRequest","ContextualLayerShowAndHideOnScrollOut","ContextualLayerUpdateOnScroll","React","XBasicFBNuxDismissController","XUIAmbientNUX.react","XUINotice.react","XUIText.react","XVideoComposerDialogAdBreakNuxController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={dismissed:!!this.props.nuxID},this.$VideoComposerDialogAdBreakNUX1=function(){this.setState({dismissed:true});if(this.props.nuxID){var q=c("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",this.props.nuxID).getURI();new(c("AsyncRequest"))().setURI(q).send()}}.bind(this),m}k.prototype.componentWillMount=function(){if(this.props.nuxID){var l=c("XVideoComposerDialogAdBreakNuxController").getURIBuilder().setInt("nux_id",this.props.nuxID).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("GET").setReadOnly(true).setHandler(function(m){if(m.getPayload()&&m.getPayload().shouldShowNux)this.setState({dismissed:false})}.bind(this)).send()}};k.prototype.render=function(){__p&&__p();if(this.state.dismissed)return null;if(this.props.style==="notice"){var l=this.props.dismissible?{onDismiss:this.$VideoComposerDialogAdBreakNUX1}:{};return c("React").createElement(c("XUINotice.react"),babelHelpers["extends"]({className:"_w68",use:"notify"},l),c("React").createElement("div",{className:"_w69"},c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},this.props.title),c("React").createElement("div",{className:"_w6p"},c("React").createElement(c("XUIText.react"),{size:"meta1"},this.props.description))))}if(this.props.style==="tooltip"){var m=this.props.dismissible?{onCloseButtonClick:this.$VideoComposerDialogAdBreakNUX1}:{};return c("React").createElement(c("XUIAmbientNUX.react"),babelHelpers["extends"]({behaviors:{ContextualLayerUpdateOnScroll:c("ContextualLayerUpdateOnScroll"),ContextualLayerShowAndHideOnScrollOut:c("ContextualLayerShowAndHideOnScrollOut")},contextRef:this.props.contextRef,customwidth:300,position:"above",shown:!this.state.dismissed,width:"custom"},m),c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},this.props.title),c("React").createElement("div",{className:"_w6p"},c("React").createElement(c("XUIText.react"),{size:"meta1"},this.props.description))))}return null};f.exports=k}),null);
__d("VideoComposerDialogAdBreakAutoAdjustmentTooltip.react",["fbt","React","VideoComposerDialogAdBreakNUX.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=5575;function j(k){return c("React").createElement(c("VideoComposerDialogAdBreakNUX.react"),{contextRef:k.contextRef,description:c("React").createElement("div",null,h._("To give viewers the best possible experience, ad placements that interrupt speech in the video may be moved slightly earlier or later.")),dismissible:true,nuxID:i,style:"tooltip",title:h._("Optimized Ad Break Placements")})}f.exports=j}),null);
__d("VideoComposerDialogAdBreakAutoAdjustmentSettings.react",["cx","fbt","React","SUIBusinessTheme","SUIText.react","VideoComposerDialogAdBreakAutoAdjustmentTooltip.react","XUICheckboxInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$VideoComposerDialogAdBreakAutoAdjustmentSettings1=function(event){this.props.onEnableAdBreakAutoAdjustment(event.target.checked)}.bind(this),this.$VideoComposerDialogAdBreakAutoAdjustmentSettings2=function(){return this.refs.autoAdjustmentCheckbox}.bind(this),n}l.prototype.render=function(){return c("React").createElement("div",{className:"_65nk"},c("React").createElement("div",{className:"_3-90"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.isAdBreakAutoAdjustmentEnabled,ref:"autoAdjustmentCheckbox",onChange:this.$VideoComposerDialogAdBreakAutoAdjustmentSettings1}),c("React").createElement(c("VideoComposerDialogAdBreakAutoAdjustmentTooltip.react"),{contextRef:this.$VideoComposerDialogAdBreakAutoAdjustmentSettings2})),c("React").createElement(c("SUIText.react"),{color:"secondary",display:"block",theme:c("SUIBusinessTheme")},i._("Automatically adjust ad break placements to improve your viewers' experience")))};f.exports=l}),null);
__d("VideoComposerDialogAdBreakInsertionButton.react",["cx","fbt","DateConsts","React","Tooltip","VideoInstreamAdsConstants","VideoInstreamUtils","XUIButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.$VideoComposerDialogAdBreakInsertionButton1=function(){__p&&__p();if(!this.props.disabled)return null;var m=this.props.insertedAdBreaks.map(function(s){return{thumbnailURL:s.thumbnailURL,timeOffset:s.timeOffset}}),n=c("VideoInstreamUtils").getEligibleTimeSegments(m,this.props.videoDuration,this.props.hasGapRule);if(n.length===0){var o=c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration,this.props.hasGapRule);if(o>m.length)return i._({"*":"Ad breaks need to be at least {number} minutes apart. Based on where you've placed your current ad breaks, there isn't space for another one.","_1":"Ad breaks need to be at least 1 minute apart. Based on where you've placed your current ad breaks, there isn't space for another one."},[i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,"number")]);return i._("You've reached your ad break limit for this video.")}var p=c("VideoInstreamUtils").isInEligibleTimeSegments(this.props.currentAdBreakTimeOffset,this.props.videoDuration,m,this.props.hasGapRule);if(p)return null;var q=c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.props.currentAdBreakTimeOffset<q)return i._({"*":"Ad breaks cannot be placed in the first {number} seconds.","_1":"Ad breaks cannot be placed in the first 1 second."},[i.plural(q,"number")]);var r=c("VideoInstreamAdsConstants").AD_INSERTION_END_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.props.currentAdBreakTimeOffset>this.props.videoDuration-r)return i._({"*":"Ad breaks cannot be placed in the last {number} seconds.","_1":"Ad breaks cannot be placed in the last 1 second."},[i.plural(r,"number")]);return i._({"*":"Ad breaks cannot be placed less than {number} minutes apart.","_1":"Ad breaks cannot be placed less than 1 minute apart."},[i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,"number")])};l.prototype.render=function(){return c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({className:"_4vdf _3-8_",disabled:this.props.disabled||!c("VideoInstreamUtils").isInEligibleTimeSegments(this.props.currentAdBreakTimeOffset,this.props.videoDuration,this.props.insertedAdBreaks.map(function(m){return{timeOffset:m.timeOffset,thumbnailURL:m.thumbnailURL}}),this.props.hasGapRule),href:"#",label:this.props.hasGapRule?i._("Add"):i._("Insert"),labelIsHidden:false,type:"button",onClick:this.props.onInsertAdBreak},c("Tooltip").propsFor(this.$VideoComposerDialogAdBreakInsertionButton1(),"above","right")))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogAdBreakThumbnail.react",["cx","Image.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$VideoComposerDialogAdBreakThumbnail1=function(){if(this.props.isAdBreakDisabled)return;if(this.props.isPreviewingCurrentAdBreak)this.props.onCancelPreview();else if(!this.props.isPreviewingAdBreak&&this.props.adBreakIndex!=null)this.props.onPreviewAdBreak(this.props.adBreakIndex)}.bind(this),m}k.prototype.render=function(){return c("React").createElement("div",{className:"_4vea"+(this.props.isAdBreakDisabled||!this.props.isPreviewingCurrentAdBreak&&this.props.isPreviewingAdBreak?" _4vdt":""),role:"presentation",onClick:this.$VideoComposerDialogAdBreakThumbnail1},c("React").createElement("div",{className:"_4vec"+(this.props.isAdBreakDisabled?" _4vdt":"")},c("React").createElement("div",{className:(!this.props.isPreviewingCurrentAdBreak&&!this.props.isAdBreakDisabled?"_4vee":"")+(this.props.isPreviewingCurrentAdBreak&&!this.props.isAdBreakDisabled?" _4vef":"")})),c("React").createElement(c("Image.react"),{className:"_4veg",src:this.props.thumbnailURL}))};f.exports=k}),null);
__d("VideoComposerDialogAdBreakTimeOffsetEditorArrow.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props.disabled;return c("React").createElement("div",{className:"_4vd_"},c("React").createElement("div",{className:(!l?"_4ve1":"")+(l?" _4ve2":""),onMouseDown:this.props.onClickUpArrow}),c("React").createElement("div",{className:(!l?"_4ve4":"")+(l?" _4ve9":""),onMouseDown:this.props.onClickDownArrow}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogAdBreakTimeOffsetEditor.react",["cx","AbstractTextInput.react","DateConsts","React","VideoComposerDialogAdBreakTimeOffsetEditorArrow.react","VideoInstreamUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=10/c("DateConsts").MS_PER_SEC;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={isInputtingCurrentAdBreak:false,timeOffsetString:"00:00.000"},this.$VideoComposerDialogAdBreakTimeOffsetEditor1=function(event){this.setState({isInputtingCurrentAdBreak:true});this.props.onSetCurrentAdBreak(this.props.adBreakTimeOffset,true,true)}.bind(this),this.$VideoComposerDialogAdBreakTimeOffsetEditor2=function(event){this.setState({isInputtingCurrentAdBreak:false,timeOffsetString:m(this.props.adBreakTimeOffset)})}.bind(this),this.$VideoComposerDialogAdBreakTimeOffsetEditor3=function(event){this.setState({timeOffsetString:event.target.value});var s=c("VideoInstreamUtils").convertFormattedTimeToSeconds(event.target.value);if(this.state.isInputtingCurrentAdBreak)this.props.onSetCurrentAdBreak(Number(s),true,true)}.bind(this),this.$VideoComposerDialogAdBreakTimeOffsetEditor4=function(){this.$VideoComposerDialogAdBreakTimeOffsetEditor5(k)}.bind(this),this.$VideoComposerDialogAdBreakTimeOffsetEditor6=function(){this.$VideoComposerDialogAdBreakTimeOffsetEditor5(-k)}.bind(this),o}l.prototype.componentDidMount=function(){this.setState({timeOffsetString:m(this.props.adBreakTimeOffset)})};l.prototype.componentWillReceiveProps=function(n){if(!this.state.isInputtingCurrentAdBreak)this.setState({timeOffsetString:m(n.adBreakTimeOffset)})};l.prototype.$VideoComposerDialogAdBreakTimeOffsetEditor5=function(n){if(this.props.isPreviewingAdBreak)return;var o=this.props.adBreakTimeOffset+n;o=Math.max(o,0);o=Math.min(o,this.props.videoDuration);this.props.onSetCurrentAdBreak(o,true,true)};l.prototype.$VideoComposerDialogAdBreakTimeOffsetEditor7=function(){return this.props.adBreakIndex===null};l.prototype.render=function(){return c("React").createElement("div",{className:"_4vdy"},c("React").createElement("div",{className:"_4vdz"},this.props.adBreakIndex!==null?this.props.adBreakIndex+1:null),c("React").createElement(c("AbstractTextInput.react"),{className:"_4vd-",disabled:this.props.isPreviewingAdBreak||!this.$VideoComposerDialogAdBreakTimeOffsetEditor7(),placeholder:"00:00.000",value:this.state.timeOffsetString,onBlur:this.$VideoComposerDialogAdBreakTimeOffsetEditor2,onChange:this.$VideoComposerDialogAdBreakTimeOffsetEditor3,onDownArrow:this.$VideoComposerDialogAdBreakTimeOffsetEditor6,onFocus:this.$VideoComposerDialogAdBreakTimeOffsetEditor1,onUpArrow:this.$VideoComposerDialogAdBreakTimeOffsetEditor4}),this.$VideoComposerDialogAdBreakTimeOffsetEditor7()?c("React").createElement(c("VideoComposerDialogAdBreakTimeOffsetEditorArrow.react"),{disabled:this.props.isPreviewingAdBreak,onClickDownArrow:this.$VideoComposerDialogAdBreakTimeOffsetEditor6,onClickUpArrow:this.$VideoComposerDialogAdBreakTimeOffsetEditor4}):null)};var m=function m(n){return c("VideoInstreamUtils").convertTimestampToFormattedString(n)};f.exports=l}),null);
__d("VideoComposerDialogAdBreakDetailsItem.react",["cx","AdBreakStatus","React","VideoComposerDialogAdBreakInsertionButton.react","VideoComposerDialogAdBreakThumbnail.react","VideoComposerDialogAdBreakTimeOffsetEditor.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={hover:false},this.$VideoComposerDialogAdBreakDetailsItem1=function(){if(this.props.adBreakIndex!==null&&this.props.adBreakIndex!==undefined)this.props.onDeleteAdBreak(this.props.adBreakIndex)}.bind(this),this.$VideoComposerDialogAdBreakDetailsItem4=function(){this.setState({hover:true})}.bind(this),this.$VideoComposerDialogAdBreakDetailsItem5=function(){this.setState({hover:false})}.bind(this),m}k.prototype.$VideoComposerDialogAdBreakDetailsItem2=function(){return this.props.currentPreviewIndex!==null};k.prototype.$VideoComposerDialogAdBreakDetailsItem3=function(){return this.props.currentPreviewIndex!==null&&this.props.currentPreviewIndex===this.props.adBreakIndex};k.prototype.render=function(){return c("React").createElement("div",{className:"_4vdl _4vdo",onMouseEnter:this.$VideoComposerDialogAdBreakDetailsItem4,onMouseLeave:this.$VideoComposerDialogAdBreakDetailsItem5},c("React").createElement("div",{className:"_4vdp"+(this.props.adBreakIndex===0?" _4vdr":"")+(this.props.adBreakIndex===null?" _4vds":"")+(this.props.adBreak.status===c("AdBreakStatus").DISABLED||this.$VideoComposerDialogAdBreakDetailsItem2()&&!this.$VideoComposerDialogAdBreakDetailsItem3()?" _4vdt":"")},c("React").createElement(c("VideoComposerDialogAdBreakTimeOffsetEditor.react"),{adBreakIndex:this.props.adBreakIndex,adBreakTimeOffset:this.props.adBreak.timeOffset,isPreviewingAdBreak:this.$VideoComposerDialogAdBreakDetailsItem2(),videoDuration:this.props.videoDuration,onSetCurrentAdBreak:this.props.onSetCurrentAdBreak}),c("React").createElement("div",{className:"_4vdu"}),this.props.adBreakIndex!==null?c("React").createElement(c("VideoComposerDialogAdBreakThumbnail.react"),{adBreakIndex:this.props.adBreakIndex,isAdBreakDisabled:this.props.adBreak.status===c("AdBreakStatus").DISABLED,isPreviewingAdBreak:this.$VideoComposerDialogAdBreakDetailsItem2(),isPreviewingCurrentAdBreak:this.$VideoComposerDialogAdBreakDetailsItem3(),thumbnailURL:this.props.adBreak.thumbnailURL,onCancelPreview:this.props.onCancelPreview,onPreviewAdBreak:this.props.onPreviewAdBreak}):c("React").createElement(c("VideoComposerDialogAdBreakInsertionButton.react"),{currentAdBreakTimeOffset:this.props.adBreak.timeOffset,disabled:this.props.adBreak.status===c("AdBreakStatus").DISABLED||this.props.currentPreviewIndex!=null,hasGapRule:this.props.hasGapRule,insertedAdBreaks:this.props.insertedAdBreaks,videoDuration:this.props.videoDuration,onInsertAdBreak:this.props.onInsertAdBreak})),c("React").createElement("div",{className:"_4vdv"},c("React").createElement("div",{className:"_4vdw"+(!this.state.hover||this.props.adBreakIndex===null||this.props.currentPreviewIndex!=null?" _4vdx":""),role:"presentation",onClick:this.$VideoComposerDialogAdBreakDetailsItem1})))};f.exports=k}),null);
__d("VideoComposerDialogAdBreakDetails.react",["cx","AdBreakStatus","React","VideoComposerDialogAdBreakDetailsItem.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:"_4vdk"},c("React").createElement(l,this.props),c("React").createElement(m,this.props))};function k(){i.apply(this,arguments)}function l(n){return n.insertedAdBreaks.map(function(o,p){return c("React").createElement(c("VideoComposerDialogAdBreakDetailsItem.react"),{adBreak:o,adBreakIndex:p,currentPreviewIndex:n.currentPreviewIndex,hasGapRule:n.hasGapRule,insertedAdBreaks:n.insertedAdBreaks,key:p,videoDuration:n.videoDuration,onCancelPreview:n.onCancelPreview,onDeleteAdBreak:n.onDeleteAdBreak,onInsertAdBreak:n.onInsertAdBreak,onPreviewAdBreak:n.onPreviewAdBreak,onSetCurrentAdBreak:n.onSetCurrentAdBreak})})}function m(n){return c("React").createElement(c("VideoComposerDialogAdBreakDetailsItem.react"),{adBreak:{status:n.adBreaksDisabled?c("AdBreakStatus").DISABLED:c("AdBreakStatus").ENABLED,thumbnailURL:null,timeOffset:n.currentAdBreakTimeOffset},adBreakIndex:null,currentPreviewIndex:n.currentPreviewIndex,hasGapRule:n.hasGapRule,insertedAdBreaks:n.insertedAdBreaks,videoDuration:n.videoDuration,onCancelPreview:n.onCancelPreview,onDeleteAdBreak:n.onDeleteAdBreak,onInsertAdBreak:n.onInsertAdBreak,onPreviewAdBreak:n.onPreviewAdBreak,onSetCurrentAdBreak:n.onSetCurrentAdBreak})}f.exports=k}),null);
__d("VideoComposerDialogAdBreakInsertionField.react",["cx","fbt","BUISwitch.react","DateConsts","React","VideoComposerDialogAdBreakAutoAdjustmentSettings.react","VideoComposerDialogAdBreakDetails.react","VideoComposerDialogField.react","VideoInstreamAdsConstants","VideoInstreamUtils","XUIGrayText.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$VideoComposerDialogAdBreakInsertionField1=function(t){this.props.onUpdateAdBreakStatus(!t)}.bind(this),p}l.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogField.react"),{footer:c("React").createElement("div",{className:"_1kta"},c("React").createElement("div",{className:"_3-90"},c("React").createElement(c("BUISwitch.react"),{disabled:this.props.currentPreviewIndex!==null,value:!this.props.adBreaksDisabled,onToggle:this.$VideoComposerDialogAdBreakInsertionField1})),this.props.adBreaksDisabled?c("React").createElement(n,null):c("React").createElement(m,null)),input:c("React").createElement("div",{className:"_3_dp"},c("React").createElement(c("VideoComposerDialogAdBreakDetails.react"),{adBreaksDisabled:this.props.adBreaksDisabled,currentAdBreakTimeOffset:this.props.currentAdBreakTimeOffset,currentPreviewIndex:this.props.currentPreviewIndex,hasGapRule:this.props.hasGapRule,insertedAdBreaks:this.props.insertedAdBreaks,videoDuration:this.props.videoDuration,onCancelPreview:this.props.onCancelPreview,onDeleteAdBreak:this.props.onDeleteAdBreak,onInsertAdBreak:this.props.onInsertAdBreak,onPreviewAdBreak:this.props.onPreviewAdBreak,onSetCurrentAdBreak:this.props.onSetCurrentAdBreak}),this.props.isAdBreakInsertionRedesignV1?c("React").createElement(c("VideoComposerDialogAdBreakAutoAdjustmentSettings.react"),{isAdBreakAutoAdjustmentEnabled:this.props.isAdBreakAutoAdjustmentEnabled,onEnableAdBreakAutoAdjustment:this.props.onEnableAdBreakAutoAdjustment}):null),inputPadding:true,showTopBorder:false,subtitle:this.props.hasGapRule?i._({"*":"Place up to {number} ad breaks within the highlighted area of the video preview.","_1":"Place up to 1 ad break within the highlighted area of the video preview."},[i.plural(c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration,this.props.hasGapRule),"number")]):i._({"*":"Select up to {number} places where an ad break may be played. Ad break placements will be filled for each individual viewer based on ad availability.","_1":"Select up to 1 place where an ad break may be played. Ad break placements will be filled for each individual viewer based on ad availability."},[i.plural(c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration,this.props.hasGapRule),"number")]),title:this.props.hasGapRule?i._("Place Ad Breaks"):i._("Choose Ad Break Placements"),tooltip:this.props.hasGapRule?i._({"*":{"*":"Ad breaks can be placed after the first {start time offset} seconds and must be at least {insertion interval} minutes apart. When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."}},[i.param("start time offset",c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC,[0]),i.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])]):i._({"*":{"*":"Videos need to be at least {min video length} minutes long, and ad breaks may only be placed after {min start time} seconds . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys.","_1":"Videos need to be at least {min video length} minutes long, and ad breaks may only be placed after 1 second . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."},"_1":{"*":"Videos need to be at least 1 minute long, and ad breaks may only be placed after {min start time} seconds . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys.","_1":"Videos need to be at least 1 minute long, and ad breaks may only be placed after 1 second . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."}},[i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_MINIMUM_VIDEO_LENGTH_MS/c("DateConsts").MS_PER_MIN,"min video length"),i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC,"min start time")])})};function m(){return c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("AD BREAKS ON"))}function n(){return c("React").createElement(c("XUIGrayText.react"),{size:"meta1",weight:"bold"},i._("AD BREAKS OFF"))}f.exports=l}),null);
__d("VideoComposerDialogAdBreakPageOnboardingSection.react",["cx","fbt","React","VideoComposerDialogField.react","XUIButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$VideoComposerDialogAdBreakPageOnboardingSection1=function(){this.props.pageID&&this.props.onStartPageOnboarding(this.props.pageID)}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogField.react"),{input:c("React").createElement(c("XUIButton.react"),{className:"_4vdf",label:i._("Get Started"),labelIsHidden:false,onClick:this.$VideoComposerDialogAdBreakPageOnboardingSection1,type:"button"}),inputPadding:true,showTopBorder:false,subtitle:i._("Set up ad breaks to start earning money from your videos. You can choose when to start each break, which pauses your video so that a short ad can play."),title:i._("Earn Money With Ads")})};f.exports=l}),null);
__d("VideoComposerDialogAdBreakProgramRulesChangesNotice.react",["fbt","Link.react","React","VideoComposerDialogAdBreakNUX.react","VideoInstreamAdsConstants"],(function a(b,c,d,e,f,g,h){"use strict";var i=5553;function j(){if(!c("VideoInstreamAdsConstants").SHOULD_SHOW_V2_NOTICE)return null;return c("React").createElement(c("VideoComposerDialogAdBreakNUX.react"),{description:c("React").createElement("div",null,h._({"*":{"*":"We're making some changes to ad breaks in January 2018. Videos will need to be at least {min_length} minutes long, and ad breaks may only be placed after the first {min_start} minutes.","_1":"We're making some changes to ad breaks in January 2018. Videos will need to be at least {min_length} minutes long, and ad breaks may only be placed after the first minute."},"_1":{"*":"We're making some changes to ad breaks in January 2018. Videos will need to be at least 1 minute long, and ad breaks may only be placed after the first {min_start} minutes.","_1":"We're making some changes to ad breaks in January 2018. Videos will need to be at least 1 minute long, and ad breaks may only be placed after the first minute."}},[h.plural(c("VideoInstreamAdsConstants").AD_INSERTION_MINIMUM_VIDEO_LENGTH_MIN_FOR_NOTICE,"min_length"),h.plural(c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MIN_FOR_NOTICE,"min_start")])," ",c("React").createElement(c("Link.react"),{href:c("VideoInstreamAdsConstants").V2_NOTICE_URL,target:"_blank"},h._("Learn more")),"."),dismissible:true,nuxID:i,style:"notice",title:h._("Update to Ad Breaks")})}f.exports=j}),null);
__d("VideoComposerDialogAdBreakVideoRightsSection.react",["cx","fbt","React","VideoComposerDialogField.react","XUIButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogField.react"),{input:c("React").createElement(c("XUIButton.react"),{className:"_4vdf",label:i._("I Agree"),labelIsHidden:false,onClick:this.props.onAgree,type:"button"}),inputPadding:true,showTopBorder:false,subtitle:i._("To include ad breaks, you agree that you have the rights to use all of the content in your video."),title:i._("Content Ownership Rights")})};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogAdBreakInputSection.react",["cx","React","VideoComposerDialogAdBreakBlockListField.react","VideoComposerDialogAdBreakHoldoutTestField.react","VideoComposerDialogAdBreakInsertionField.react","VideoComposerDialogAdBreakPageOnboardingSection.react","VideoComposerDialogAdBreakProgramRulesChangesNotice.react","VideoComposerDialogAdBreakVideoRightsSection.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){if(this.props.isPageOnboardingVisible)return c("React").createElement(c("VideoComposerDialogAdBreakPageOnboardingSection.react"),{pageID:this.props.pageID,onStartPageOnboarding:this.props.onStartPageOnboarding});if(!this.props.videoRightsAgreed)return c("React").createElement(c("VideoComposerDialogAdBreakVideoRightsSection.react"),{onAgree:this.props.onAgreeVideoRights});return c("React").createElement("div",null,c("React").createElement("div",{className:"_35mv"},c("React").createElement(c("VideoComposerDialogAdBreakProgramRulesChangesNotice.react"),null)),c("React").createElement(c("VideoComposerDialogAdBreakInsertionField.react"),{adBreaksDisabled:this.props.adBreaksDisabled,currentAdBreakTimeOffset:this.props.currentAdBreakTimeOffset,currentPreviewIndex:this.props.currentPreviewIndex,hasGapRule:this.props.hasGapRule,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakAutoAdjustmentEnabled:this.props.isAdBreakAutoAdjustmentEnabled,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,videoDuration:this.props.videoDuration,onCancelPreview:this.props.onCancelPreview,onDeleteAdBreak:this.props.onDeleteAdBreak,onEnableAdBreakAutoAdjustment:this.props.onEnableAdBreakAutoAdjustment,onInsertAdBreak:this.props.onInsertAdBreak,onPreviewAdBreak:this.props.onPreviewAdBreak,onSetCurrentAdBreak:this.props.onSetCurrentAdBreak,onUpdateAdBreakStatus:this.props.onUpdateAdBreakStatus}),c("React").createElement(c("VideoComposerDialogAdBreakHoldoutTestField.react"),{enabled:this.props.holdoutTestEnabled,hasEnabledAdBreaks:!this.props.adBreaksDisabled&&this.props.insertedAdBreaks.length>0,holdoutTestPublicMetadata:this.props.holdoutTestPublicMetadata,onUpdateHoldoutTestStatus:this.props.onUpdateHoldoutTestStatus}),c("React").createElement(c("VideoComposerDialogAdBreakBlockListField.react"),{pageID:this.props.pageID}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("InstreamPlacement",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PRE_ROLL:"pre_roll",MID_ROLL:"mid_roll",POST_ROLL:"post_roll"})}),null);
__d("VideoComponentCommercialBreakStartingIndicator.react",["cx","CommercialBreakStartingIndicator.react","React","ReactDOM","VideoComponent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.enable=function(l){this.$VideoComponentCommercialBreakStartingIndicator1=l;this.$VideoComponentCommercialBreakStartingIndicator2()};k.prototype.disable=function(){this.$VideoComponentCommercialBreakStartingIndicator1=null};k.prototype.$VideoComponentCommercialBreakStartingIndicator2=function(l){if(this.$VideoComponentCommercialBreakStartingIndicator1&&this.refs.root)c("ReactDOM").render(c("React").createElement(c("CommercialBreakStartingIndicator.react"),{adsStopped:l,container:this.refs.root,controller:this.$VideoComponentCommercialBreakStartingIndicator1,vodTransitionRedesign:true}),this.refs.root)};k.prototype.componentDidMount=function(){this.$VideoComponentCommercialBreakStartingIndicator2()};k.prototype.componentWillReceiveProps=function(l){if(l.adsStopped!==this.props.adsStopped)this.$VideoComponentCommercialBreakStartingIndicator2(l.adsStopped)};k.prototype.shouldComponentUpdate=function(l,m){return false};k.prototype.render=function(){return c("React").createElement("div",{ref:"root",className:"_167h _2lwf _4ubd _3ee8 _20dq _2h-t _o9y _3htz _5odv"})};function k(){i.apply(this,arguments)}f.exports=c("VideoComponent").createContainer(k)}),null);
__d("VideoComponentCommercialBreakVodTransitionOverlay.react",["cx","React","VideoCommercialBreakTransitionOverlay","VideoComponent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.enable=function(l){this.$VideoComponentCommercialBreakVodTransitionOverlay1=new(c("VideoCommercialBreakTransitionOverlay"))(l,this.refs.root,this.refs.body)};k.prototype.disable=function(){this.$VideoComponentCommercialBreakVodTransitionOverlay1=null};k.prototype.shouldComponentUpdate=function(l,m){return false};k.prototype.render=function(){return c("React").createElement("div",{ref:"root",className:"_2lwf _4ubd _4fii _bvi _167h"},c("React").createElement("div",{ref:"body",className:"_3j0w"}))};function k(){i.apply(this,arguments)}f.exports=c("VideoComponent").createContainer(k)}),null);
__d("VideoComponentScrubberPreview.react",["React","RelayClassic","VideoComponent","VideoScrubberPreviewComponent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k)}j.prototype.componentWillReceiveProps=function(k){__p&&__p();var l=k.video;if(l&&l!==this.props.video){var m={};Object.assign(m,l.scrubberPreviewThumbnailInformation);if(Array.isArray(m.spriteIndexToURIMap)){var n=m.spriteIndexToURIMap.slice();n.unshift(null);m.spriteIndexToURIMap=n}new(c("VideoScrubberPreviewComponent"))(this.vpc,m)}};j.prototype.disable=function(k){};j.prototype.enable=function(k){this.vpc=k};j.prototype.render=function(){return null};f.exports=c("VideoComponent").createContainer(j,{relayVideoConfig:{fragments:{video:function k(){return function(){return{children:[{alias:"scrubberPreviewThumbnailInformation",calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallValue",callValue:45}},{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallValue",callValue:45}}],children:[{alias:"timeIntervalBetweenImages",fieldName:"time_interval_between_image",kind:"Field",metadata:{},type:"Int"},{alias:"previewScrubberWidth",fieldName:"thumbnail_width",kind:"Field",metadata:{},type:"Float"},{alias:"previewScrubberHeight",fieldName:"thumbnail_height",kind:"Field",metadata:{},type:"Float"},{alias:"maxImagesPerSprite",fieldName:"max_number_of_images_per_sprite",kind:"Field",metadata:{},type:"Int"},{alias:"imagesPerRow",fieldName:"num_images_per_row",kind:"Field",metadata:{},type:"Int"},{alias:"hasPreviewThumbnails",fieldName:"has_preview_thumbnails",kind:"Field",metadata:{},type:"Boolean"},{alias:"spriteIndexToURIMap",fieldName:"sprite_uris",kind:"Field",metadata:{isPlural:true},type:"String"},{alias:"scrubberVideoURI",fieldName:"scrubber_video_uri",kind:"Field",metadata:{},type:"String"}],fieldName:"scrubber_preview_thumbnail_information",kind:"Field",metadata:{canHaveSubselections:true},type:"ScrubberPreview"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("RelayClassic").QL.__id(),kind:"Fragment",metadata:{},name:"VideoComponentScrubberPreview_react_VideoRelayQL",type:"Video"}}()}}}})}),null);
__d("VideoComponentVodWithCommercialBreak.react",["InstreamVideoAdBreak","React","VideoComponent","VodWithCommercialBreak"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.enable=function(k){this.$VideoComponentVodWithCommercialBreak1=k;this.$VideoComponentVodWithCommercialBreak2=new(c("VodWithCommercialBreak"))(this.$VideoComponentVodWithCommercialBreak1,this.props.adBreaks)};j.prototype.componentWillReceiveProps=function(k){if(this.$VideoComponentVodWithCommercialBreak2&&JSON.stringify(k.adBreaks)!==JSON.stringify(this.props.adBreaks))this.$VideoComponentVodWithCommercialBreak2.setAdBreaks(k.adBreaks)};j.prototype.disable=function(){this.$VideoComponentVodWithCommercialBreak1=null;this.$VideoComponentVodWithCommercialBreak2=null};j.prototype.render=function(){return null};function j(){h.apply(this,arguments)}f.exports=c("VideoComponent").createContainer(j)}),null);
__d("VideoComponentWithSpacePlayPause.react",["React","VideoComponent","VideoWithSpacePlayPause"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.enable=function(k){new(c("VideoWithSpacePlayPause"))(k)};j.prototype.disable=function(){};j.prototype.render=function(){return null};function j(){h.apply(this,arguments)}f.exports=c("VideoComponent").createContainer(j)}),null);
__d("VideoComposerDialogAdBreakPreviewSection.react",["cx","DateConsts","InstreamPlacement","InstreamVideoAdBreak","React","VideoComponentClickPlayPause.react","VideoComponentCommercialBreakStartingIndicator.react","VideoComponentCommercialBreakVideoAdOverlay.react","VideoComponentCommercialBreakVodTransitionOverlay.react","VideoComponentContextMenu.react","VideoComponentEmbeddedControls.react","VideoComponentPlayButton.react","VideoComponentScrubberPreview.react","VideoComponentVodWithCommercialBreak.react","VideoComponentWithCommercialBreak.react","VideoComponentWithInstreamVideo.react","VideoComponentWithSpacePlayPause.react","VideoComposerDialogConstants","VideoPlayer.react","VideoPlayerController","VideoPlayerOrigins","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.$VideoComposerDialogAdBreakPreviewSection1=function(){if(!this.props.insertedAdBreaks||this.props.isAdBreakDisabled)return[];return this.props.insertedAdBreaks.map(function(l,m){return new(c("InstreamVideoAdBreak"))({adBreakDurationInMs:null,index:0,instreamPlacement:c("InstreamPlacement").MID_ROLL,isAdBreakAutoInserted:false,timeOffsetInMs:l.timeOffset*c("DateConsts").MS_PER_SEC})})};k.prototype.$VideoComposerDialogAdBreakPreviewSection2=function(){if(this.props.insertedAdBreaks&&this.props.currentPreviewIndex!=null)return this.props.insertedAdBreaks[this.props.currentPreviewIndex].thumbnailURL;return null};k.prototype.$VideoComposerDialogAdBreakPreviewSection3=function(){return this.props.currentPreviewIndex!=null};k.prototype.render=function(){var l=this.props.videoData;if(!l)return c("React").createElement("div",{className:"_1fxr"},c("React").createElement(c("XUISpinner.react"),{size:"large"}));return c("React").createElement(c("VideoPlayer.react"),{autoplay:false,className:"_4jg1",height:c("VideoComposerDialogConstants").PLAYER_HEIGHT,playerOrigin:c("VideoPlayerOrigins").COMPOSER,videoData:l,onVpcUpdate:this.props.onVPCUpdate},c("React").createElement(c("VideoComponentPlayButton.react"),null),c("React").createElement(c("VideoComponentEmbeddedControls.react"),{adBreaks:{insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:!this.props.hasGapRule,isPreviewingAdBreak:this.$VideoComposerDialogAdBreakPreviewSection3()},displayElapsedTime:true,displayMilliseconds:true,showFullscreenButton:false,showSettingsButton:false}),c("React").createElement(c("VideoComponentContextMenu.react"),null),c("React").createElement(c("VideoComponentClickPlayPause.react"),null),c("React").createElement(c("VideoComponentWithSpacePlayPause.react"),null),c("React").createElement(c("VideoComponentScrubberPreview.react"),null),c("React").createElement(c("VideoComponentWithInstreamVideo.react"),{shouldUsePreviewConfig:true,thumbnailURLForPreview:this.$VideoComposerDialogAdBreakPreviewSection2()}),c("React").createElement(c("VideoComponentWithCommercialBreak.react"),null),c("React").createElement(c("VideoComponentVodWithCommercialBreak.react"),{adBreaks:this.$VideoComposerDialogAdBreakPreviewSection1()}),c("React").createElement(c("VideoComponentCommercialBreakVideoAdOverlay.react"),{adsStopped:!this.$VideoComposerDialogAdBreakPreviewSection3()}),c("React").createElement(c("VideoComponentCommercialBreakVodTransitionOverlay.react"),null),c("React").createElement(c("VideoComponentCommercialBreakStartingIndicator.react"),{adsStopped:!this.$VideoComposerDialogAdBreakPreviewSection3()}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogAdBreakVideoPlayerController",["SubscriptionsHandler","VideoPlayerController","VideoPlayerReason","VideoPlayerReasonTransitionHelper"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=7,i=1;function j(){this.$VideoComposerDialogAdBreakVideoPlayerController4=new(c("SubscriptionsHandler"))();this.$VideoComposerDialogAdBreakVideoPlayerController1=[]}j.prototype.updateVPC=function(k){__p&&__p();if(this.$VideoComposerDialogAdBreakVideoPlayerController5===k)return;this.$VideoComposerDialogAdBreakVideoPlayerController4.release();if(!k)return;this.$VideoComposerDialogAdBreakVideoPlayerController5=k;this.$VideoComposerDialogAdBreakVideoPlayerController4=new(c("SubscriptionsHandler"))();this.$VideoComposerDialogAdBreakVideoPlayerController4.addSubscriptions(k.addListener("commercialBreak/vodBreakStarting",function(){this.$VideoComposerDialogAdBreakVideoPlayerController6(this.$VideoComposerDialogAdBreakVideoPlayerController7())}.bind(this)),k.addListener("playRequested",function(l){if(l===c("VideoPlayerReason").COMMERCIAL_BREAK)this.$VideoComposerDialogAdBreakVideoPlayerController6(null)}.bind(this)),k.addListener("updateStatus",function(){if(this.$VideoComposerDialogAdBreakVideoPlayerController2&&this.$VideoComposerDialogAdBreakVideoPlayerController5)this.$VideoComposerDialogAdBreakVideoPlayerController2(this.$VideoComposerDialogAdBreakVideoPlayerController5.getCurrentTimePosition())}.bind(this)))};j.prototype.updateInsertedAdBreaks=function(k){this.$VideoComposerDialogAdBreakVideoPlayerController1=k};j.prototype.updateCallbacks=function(k,l){this.$VideoComposerDialogAdBreakVideoPlayerController2=k;this.$VideoComposerDialogAdBreakVideoPlayerController3=l};j.prototype.unmount=function(){this.$VideoComposerDialogAdBreakVideoPlayerController6(null);this.$VideoComposerDialogAdBreakVideoPlayerController4.release();this.$VideoComposerDialogAdBreakVideoPlayerController5=null};j.prototype.seek=function(k,l){this.$VideoComposerDialogAdBreakVideoPlayerController5&&this.$VideoComposerDialogAdBreakVideoPlayerController5.seek(k);l&&this.pause()};j.prototype.play=function(){this.$VideoComposerDialogAdBreakVideoPlayerController5&&this.$VideoComposerDialogAdBreakVideoPlayerController5.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").AUTOPLAY))};j.prototype.pause=function(){this.$VideoComposerDialogAdBreakVideoPlayerController5&&this.$VideoComposerDialogAdBreakVideoPlayerController5.pause()};j.prototype.startAdBreakPreview=function(k){this.seek(this.$VideoComposerDialogAdBreakVideoPlayerController1[k].timeOffset-h,false);this.play()};j.prototype.stopAdBreakPreview=function(){this.$VideoComposerDialogAdBreakVideoPlayerController3(null)};j.prototype.$VideoComposerDialogAdBreakVideoPlayerController6=function(k){this.$VideoComposerDialogAdBreakVideoPlayerController3&&this.$VideoComposerDialogAdBreakVideoPlayerController3(k)};j.prototype.$VideoComposerDialogAdBreakVideoPlayerController7=function(){var k=this.$VideoComposerDialogAdBreakVideoPlayerController5?this.$VideoComposerDialogAdBreakVideoPlayerController5.getCurrentTimePosition():0;for(var l=0;l<this.$VideoComposerDialogAdBreakVideoPlayerController1.length;l++){var m=this.$VideoComposerDialogAdBreakVideoPlayerController1[l].timeOffset;if(k>=m-h&&k<=m+i)return l}return null};f.exports=new j()}),null);
__d("VideoComposerDialogAdBreakContainer.react",["cx","VideoComposerDialogAdBreakActions","FluxContainer","immutable","React","VideoComposerDialogAdBreakInputSection.react","VideoComposerDialogAdBreakPreviewSection.react","VideoComposerDialogAdBreakStore","VideoComposerDialogAdBreakVideoPlayerController","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogUploadStore","VideoPlayerController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("VideoComposerDialogAdBreakStore"),c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogUploadStore")]};k.calculateState=function(){var l=c("VideoComposerDialogAdBreakStore").getState(),m=c("VideoComposerDialogMetadataStore").getState(),n=c("VideoComposerDialogUploadStore").getState();return{adBreaksDisabled:l.adBreaksDisabled,currentAdBreakTimeOffset:l.currentAdBreakTimeOffset,currentPreviewIndex:l.currentPreviewIndex,hasGapRule:l.hasGapRule,holdoutTestEnabled:l.holdoutTestEnabled,holdoutTestPublicMetadata:l.holdoutTestPublicMetadata,insertedAdBreaks:l.insertedAdBreaks,isAdBreakAutoAdjustmentEnabled:l.isAdBreakAutoAdjustmentEnabled,isAdBreakInsertionRedesignV1:l.isAdBreakInsertionRedesignV1,isPageOnboardingVisible:l.isPageOnboardingVisible,pageID:m.targetID,videoData:n.videoData,videoDuration:Number(m.videoDuration),videoRightsAgreed:l.videoRightsAgreed,vpc:l.vpc}};k.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(k.getStores())};k.prototype.componentDidUpdate=function(l,m){c("VideoComposerDialogAdBreakVideoPlayerController").updateVPC(this.state.vpc);c("VideoComposerDialogAdBreakVideoPlayerController").updateInsertedAdBreaks(this.state.insertedAdBreaks.toArray());c("VideoComposerDialogAdBreakVideoPlayerController").updateCallbacks(c("VideoComposerDialogAdBreakActions").setCurrentAdBreak,c("VideoComposerDialogAdBreakActions").setCurrentPreviewIndex)};k.prototype.componentWillUnmount=function(){c("VideoComposerDialogAdBreakVideoPlayerController").unmount()};k.prototype.$VideoComposerDialogAdBreakContainer1=function(l,m,n){c("VideoComposerDialogAdBreakActions").setCurrentAdBreak(l);c("VideoComposerDialogAdBreakVideoPlayerController").seek(l,n)};k.prototype.$VideoComposerDialogAdBreakContainer2=function(l){c("VideoComposerDialogAdBreakVideoPlayerController").startAdBreakPreview(l)};k.prototype.$VideoComposerDialogAdBreakContainer3=function(){c("VideoComposerDialogAdBreakVideoPlayerController").stopAdBreakPreview()};k.prototype.render=function(){return c("React").createElement("div",{className:"_63z7"},c("React").createElement(c("VideoComposerDialogAdBreakPreviewSection.react"),{currentPreviewIndex:this.state.currentPreviewIndex,hasGapRule:this.state.hasGapRule,insertedAdBreaks:this.state.videoRightsAgreed?this.state.insertedAdBreaks.toArray():null,isAdBreakDisabled:this.state.adBreaksDisabled,videoData:this.state.videoData,onVPCUpdate:c("VideoComposerDialogAdBreakActions").updateVPC}),c("React").createElement("div",{className:"_63vb"},c("React").createElement(c("VideoComposerDialogAdBreakInputSection.react"),{adBreaksDisabled:this.state.adBreaksDisabled,currentAdBreakTimeOffset:this.state.currentAdBreakTimeOffset,currentPreviewIndex:this.state.currentPreviewIndex,hasGapRule:this.state.hasGapRule,holdoutTestEnabled:this.state.holdoutTestEnabled,holdoutTestPublicMetadata:this.state.holdoutTestPublicMetadata,insertedAdBreaks:this.state.insertedAdBreaks.toArray(),isAdBreakAutoAdjustmentEnabled:this.state.isAdBreakAutoAdjustmentEnabled,isAdBreakInsertionRedesignV1:this.state.isAdBreakInsertionRedesignV1,isPageOnboardingVisible:this.state.isPageOnboardingVisible,onAgreeVideoRights:c("VideoComposerDialogAdBreakActions").agreeVideoRights,onCancelPreview:this.$VideoComposerDialogAdBreakContainer3,onDeleteAdBreak:c("VideoComposerDialogAdBreakActions").deleteAdBreak,onEnableAdBreakAutoAdjustment:c("VideoComposerDialogAdBreakActions").setIsAdBreakAutoAdjustmentEnabled,onInsertAdBreak:c("VideoComposerDialogAdBreakActions").insertAdBreak,onPreviewAdBreak:this.$VideoComposerDialogAdBreakContainer2,onSetCurrentAdBreak:this.$VideoComposerDialogAdBreakContainer1,onStartPageOnboarding:c("VideoComposerDialogAdBreakActions").startPageOnboarding,onUpdateAdBreakStatus:c("VideoComposerDialogAdBreakActions").updateAdBreakStatus,onUpdateHoldoutTestStatus:c("VideoComposerDialogAdBreakActions").updateHoldoutTestStatus,pageID:this.state.pageID,videoDuration:this.state.videoDuration,videoRightsAgreed:this.state.videoRightsAgreed})))};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogAdBreaksTabUtils",["fbt","AdBreakInsertionDisabledReason","AdBreakStatus","Set","VideoInstreamAdsConstants","VideoInstreamUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Place ad breaks in this video to start making money from your content."),j=h._("Ad breaks have been disabled for this video."),k=function k(l,m,n,o,p,q){__p&&__p();if(l)return{disabled:false,tabDescription:i,tabTooltip:null};if(o==null)return{disabled:true,tabDescription:j,tabTooltip:null};var r=new(c("Set"))(m),s=c("VideoInstreamUtils").getMaxPossibleAdBreaks(o,q);if(s===0)r.add(c("AdBreakInsertionDisabledReason").VIDEO_TOO_SHORT);if(p)r.add(c("AdBreakInsertionDisabledReason").BRANDED_CONTENT);if(r.has(c("AdBreakInsertionDisabledReason").VIDEO_TOO_SHORT))return{disabled:true,tabDescription:j,tabTooltip:h._("Videos must be {insertion interval} seconds or longer. Your video is too short to include ad breaks.",[h.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_MINIMUM_VIDEO_LENGTH)])};if(r.has(c("AdBreakInsertionDisabledReason").BRANDED_CONTENT))return{disabled:true,tabDescription:j,tabTooltip:h._("Ad breaks not available. Ad breaks can't be used in this video because it contains tagged business partners.")};if(r.size>0)return{disabled:true,tabDescription:j,tabTooltip:null};var t=n.filter(function(u){return u.status===c("AdBreakStatus").ENABLED});if(t.length>0)return{disabled:false,tabDescription:h._("This video is opted into ad breaks."),tabTooltip:null};return{disabled:false,tabDescription:i,tabTooltip:null}};f.exports={getTabState:k}}),null);
__d("VideoComposerDialogTabItem.react",["cx","Image.react","React","ShimButton.react","SimpleNUXMessage","Tooltip","VideoComposerDialogActions","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=290;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={nuxShown:false},this.$VideoComposerDialogTabItem1=function(){c("VideoComposerDialogActions").selectTab(this.props.tabConfig.key)}.bind(this),this.$VideoComposerDialogTabItem2=function(){if(this.props.tabConfig.nuxMessage){c("SimpleNUXMessage").markMessageSeenByUser(this.props.tabConfig.nuxMessage);this.setState({nuxShown:false})}}.bind(this),n}l.prototype.componentDidMount=function(){this.setState({nuxShown:this.props.tabConfig.nuxMessage?!c("SimpleNUXMessage").hasUserSeenMessage(this.props.tabConfig.nuxMessage):false})};l.prototype.renderLayers=function(){var m=this.props.tabConfig;if(!m.renderNuxMessage)return null;return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.tabContainer}.bind(this),shown:this.state.nuxShown,position:"left",width:"custom",customwidth:m.nuxWidth?m.nuxWidth:k,onCloseButtonClick:this.$VideoComposerDialogTabItem2},m.renderNuxMessage())};l.prototype.render=function(){return c("React").createElement(c("ShimButton.react"),babelHelpers["extends"]({className:"_10ij"+(this.props.isSelected?" _2-q6":"")+(this.props.disabled?" _k3d":""),ref:"tabContainer",href:"#",onClick:this.props.disabled?null:this.$VideoComposerDialogTabItem1},c("Tooltip").propsFor(this.props.tooltip,"left")),c("React").createElement("div",{className:"_10ik"},c("React").createElement(c("Image.react"),{className:"_63kw _3-90",src:this.props.isSelected?this.props.tabConfig.glyphSelected:this.props.tabConfig.glyphUnselected}),c("React").createElement("span",null,this.props.tabConfig.title)),c("React").createElement("div",{className:"_10il"},this.props.customDescription?this.props.customDescription:this.props.tabConfig.defaultDescription),this.renderLayers())};l.defaultProps={disabled:false};f.exports=l}),null);
__d("VideoComposerDialogAdBreaksTabContainer.react",["FluxContainer","immutable","React","VideoComposerDialogAdBreakStore","VideoComposerDialogAdBreaksTabConfig","VideoComposerDialogAdBreaksTabUtils","VideoComposerDialogMetadataStore","VideoComposerDialogTabItem.react","VideoComposerDialogTab","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore"),c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogAdBreakStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab,m=c("VideoComposerDialogAdBreakStore").getState(),n=m.hasGapRule,o=m.insertedAdBreaks,p=m.isAdBreaksTabVisible,q=m.isBrandedContentVideo,r=m.isPageOnboardingVisible,s=m.serverSideDisabledReasons,t=c("VideoComposerDialogMetadataStore").getState(),u=t.videoDuration;return{hasGapRule:n,insertedAdBreaks:o,isBrandedContentVideo:q,isPageOnboardingVisible:r,isSelected:l===c("VideoComposerDialogTab").AD_BREAKS,isVisible:p,serverSideDisabledReasons:s,videoDuration:u}};j.prototype.render=function(){if(!this.state.isVisible)return null;var k=c("VideoComposerDialogAdBreaksTabUtils").getTabState(this.state.isPageOnboardingVisible,this.state.serverSideDisabledReasons.toArray(),this.state.insertedAdBreaks.toArray(),this.state.videoDuration,this.state.isBrandedContentVideo,this.state.hasGapRule);return c("React").createElement(c("VideoComposerDialogTabItem.react"),babelHelpers["extends"]({customDescription:k.tabDescription,disabled:k.disabled,tabConfig:c("VideoComposerDialogAdBreaksTabConfig"),tooltip:k.tabTooltip},this.state))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogBasicComposerTaggers.react",["invariant","BasicTypeaheadLoggerJSConstants","PlaceSearchConstants","React","ReactComposerActivityTaggerButton.react","ReactComposerActivityTaggerContainer.react","ReactComposerContextProviderMixin","ReactComposerImplicitLocationContainer.react","ReactComposerLocationTaggerButton.react","ReactComposerLocationTaggerContainer.react","ReactComposerMessagingTaggerButton.react","ReactComposerMessagingTaggerContainer.react","ReactComposerPeopleTaggerButton.react","ReactComposerPeopleTaggerContainer.react","ReactComposerProductTaggerButton.react","ReactComposerProductTaggerContainer.react","ReactComposerSponsorTaggerButton.react","ReactComposerSponsorTaggerContainer.react","ReactComposerTaggerButtons.react","ReactComposerTaggers.react","ReactComposerTaggerType","ReactComposerTaggerViewStyles","ReactComposerTargetingTaggerButton.react","ReactComposerTargetingTaggerContainer.react","dotAccess"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("BasicTypeaheadLoggerJSConstants").EventNames;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){if(!this.props.bootloaded||!this.props.composerConfig)return c("React").createElement("div",null);var n=this.props.composerConfig.taggersConfig,o=n.get(c("ReactComposerTaggerType").LOCATION),p=n.get(c("ReactComposerTaggerType").OG),q=n.get(c("ReactComposerTaggerType").TARGETING),r=n.get(c("ReactComposerTaggerType").SPONSOR),s=n.get(c("ReactComposerTaggerType").PRODUCT),t=n.get(c("ReactComposerTaggerType").MESSAGING),u=c("React").createElement(c("ReactComposerPeopleTaggerContainer.react"),{actorID:this.props.actorID,showEntriesOnFocus:false,taggerConfig:n.get(c("ReactComposerTaggerType").PEOPLE),taggerSource:this.props.taggerSearchSource}),v=p&&p.actionTypeIDsToPrefetch&&p.actionTypeIDsWithNoFreeForm&&p.rankVerbs?c("React").createElement(c("ReactComposerActivityTaggerContainer.react"),{actionTaggerViewStyle:c("ReactComposerTaggerViewStyles").SCROLLABLE,actionTypeIDsToPrefetch:p.actionTypeIDsToPrefetch,actionTypeIDsWithNoFreeForm:p.actionTypeIDsWithNoFreeForm,actorID:this.props.actorID,isPersonalTimeline:false,objectTaggerViewStyle:c("ReactComposerTaggerViewStyles").SCROLLABLE,rankVerbs:p.rankVerbs,typeaheadLoggerEventName:k.OGCOMPOSER_TAGGER}):null,w=o&&typeof o.implicitLocationEnabled==="boolean"?c("React").createElement(c("ReactComposerLocationTaggerContainer.react"),{implicitLocationEnabled:o.implicitLocationEnabled,taggerConfig:o,taggerViewStyle:c("ReactComposerTaggerViewStyles").SCROLLABLE,typeaheadLoggerEventName:k.REACT_COMPOSER_LOCATION_TAGGER,typeaheadSearchSource:c("PlaceSearchConstants").SOURCE_W_COMPOSER}):null,x=q&&q.enabled?c("React").createElement(c("ReactComposerTargetingTaggerContainer.react"),null):null,y=r&&r.enabled&&typeof r.showSponsorTaggerDirectBoost==="boolean"&&typeof r.showSponsorTaggerSponsorRelationship==="boolean"?c("React").createElement(c("ReactComposerSponsorTaggerContainer.react"),{viewer:this.props.actorID,showDirectBoost:r.showSponsorTaggerDirectBoost,showSponsorRelationship:r.showSponsorTaggerSponsorRelationship}):null;!!this.props.composerConfig||h(0);var z=s&&s.enabled&&typeof s.productTaggerType==="string"&&typeof s.showAddProduct==="boolean"?c("React").createElement(c("ReactComposerProductTaggerContainer.react"),{pageID:this.props.composerConfig.contextConfig.targetID,productTaggerType:s.productTaggerType,reactComposerID:this.props.composerConfig.contextConfig.composerID,showAddProduct:s.showAddProduct,viewer:this.props.actorID}):null,A=t&&t.enabled?c("React").createElement(c("ReactComposerMessagingTaggerContainer.react"),{reactComposerID:this.props.composerConfig.contextConfig.composerID}):null,B=c("React").createElement(c("ReactComposerPeopleTaggerButton.react"),null),C=c("React").createElement(c("ReactComposerActivityTaggerButton.react"),null),D=c("React").createElement(c("ReactComposerLocationTaggerButton.react"),null,c("React").createElement(c("ReactComposerImplicitLocationContainer.react"),null)),E=q&&q.enabled?c("React").createElement(c("ReactComposerTargetingTaggerButton.react"),{allowExclusionsWithoutInclusions:c("dotAccess")(q,"allowExclusionsWithoutInclusionsGK"),feedTargetingGK:c("dotAccess")(q,"feedTargetingGK"),feedTargetingShowReachGK:c("dotAccess")(q,"feedTargetingShowReachGK"),useTargetingAsFilter:!c("dotAccess")(q,"feedTargetingGK")}):null,F=r&&r.enabled?c("React").createElement(c("ReactComposerSponsorTaggerButton.react"),null):null,G=s&&s.productTaggerType?c("React").createElement(c("ReactComposerProductTaggerButton.react"),{productTaggerType:s.productTaggerType}):null,H=t&&t.enabled?c("React").createElement(c("ReactComposerMessagingTaggerButton.react"),{reactComposerID:this.props.composerConfig.contextConfig.composerID}):null;return c("React").createElement(m,{contextConfig:this.props.composerConfig.contextConfig},c("React").createElement(c("ReactComposerTaggers.react"),null,u,v,w,x,y,z,A),c("React").createElement(c("ReactComposerTaggerButtons.react"),null,B,C,D,E,F,G,H))};function l(){i.apply(this,arguments)}var m=c("React").createClass({displayName:"VideoComposerTaggerWrapper",mixins:[c("ReactComposerContextProviderMixin")],render:function n(){return this.props.children}});f.exports=l}),null);
__d("VideoComposerDialogBasicComposer.react",["cx","fbt","AtSignMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","EditorState","MentionsInput.react","MentionsInputTypeaheadView.react","MentionsInputUtility","React","ReactComposerContextProviderMixin","ReactComposerProfilePhoto.react","ReactComposerTaggerSummaryContainer.react","VideoComposerDialogBasicActions","VideoComposerDialogBasicComposerTaggers.react","emptyFunction","getMentionsInputDecorator","getMentionsTextForContentState"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(n){k.constructor.call(this,n);this.state={editorState:this.$VideoComposerDialogBasicComposer1(this.props.description)};this.$VideoComposerDialogBasicComposer3=function(p){var q=c("getMentionsTextForContentState")(p.getCurrentContent());this.setState({editorState:p});c("VideoComposerDialogBasicActions").updateDescription(q)}.bind(this);var o=new(c("DocumentMentionsSource"))(c("AtSignMentionsStrategy"),n.mentionsSearchSource);this.$VideoComposerDialogBasicComposer2=new(c("DocumentCompositeMentionsSource"))([o])}l.prototype.$VideoComposerDialogBasicComposer1=function(n){var o=void 0;if(n!=="")o=c("MentionsInputUtility").createFromTextWithMentions(n,c("getMentionsInputDecorator")());else o=c("EditorState").createEmpty(c("getMentionsInputDecorator")());return o};l.prototype.componentWillReceiveProps=function(n){if(n.bootloaded&&!this.props.bootloaded){var o=new(c("DocumentMentionsSource"))(c("AtSignMentionsStrategy"),n.mentionsSearchSource);this.$VideoComposerDialogBasicComposer2=new(c("DocumentCompositeMentionsSource"))([o])}};l.prototype.render=function(){return c("React").createElement("div",{className:"_64ik"},c("React").createElement("div",{className:"_64il"},c("React").createElement("div",{className:"_64im"},this.props.profilePicUri!==""?c("React").createElement(c("ReactComposerProfilePhoto.react"),{src:this.props.profilePicUri,onClick:c("emptyFunction")}):null),c("React").createElement(c("MentionsInput.react"),{className:"_64in",editorState:this.state.editorState,mentionsSource:this.$VideoComposerDialogBasicComposer2,placeholder:i._("Describe your video so people will know what it's about."),renderEmoji:true,typeaheadView:c("MentionsInputTypeaheadView.react"),onChange:this.$VideoComposerDialogBasicComposer3}),this.props.composerConfig?c("React").createElement(m,{contextConfig:this.props.composerConfig.contextConfig},c("React").createElement(c("ReactComposerTaggerSummaryContainer.react"),null)):null),c("React").createElement(c("VideoComposerDialogBasicComposerTaggers.react"),{actorID:this.props.actorID,bootloaded:this.props.bootloaded,composerConfig:this.props.composerConfig,taggerSearchSource:this.props.taggerSearchSource}))};var m=c("React").createClass({displayName:"VideoComposerTaggerSummaryWrapper",mixins:[c("ReactComposerContextProviderMixin")],render:function n(){return this.props.children}});f.exports=l}),null);
__d("VideoComposerDialogContentTagsField.react",["ix","cx","fbt","AudienceInterestsSearchSource","Image.react","React","SearchableEntry","VideoComposerDialogBasicActions","VideoComposerDialogBasicUtils","XUITokenizer.react","asset","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=8;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={currentEntries:[],queryString:"",showFreeFormOption:true},this.$VideoComposerDialogContentTagsField5=function(t){__p&&__p();if(this.$VideoComposerDialogContentTagsField4(t))return;var u=this.props.entries.slice();if(this.$VideoComposerDialogContentTagsField3())return;var v=t;if(t.getAuxiliaryData().isFreeForm)v=new(c("SearchableEntry"))({uniqueID:t.getUniqueID(),title:t.getUniqueID(),auxiliaryData:{isFreeForm:true}});u.push(v);this.$VideoComposerDialogContentTagsField2(u)}.bind(this),this.$VideoComposerDialogContentTagsField6=function(t){var u=this.props.entries.slice();if(this.$VideoComposerDialogContentTagsField4(t))u.splice(u.indexOf(t),1);this.$VideoComposerDialogContentTagsField2(u)}.bind(this),this.$VideoComposerDialogContentTagsField8=function(event){var t=event.target.value,u=this.$VideoComposerDialogContentTagsField7(t,this.props.entries.concat(this.state.currentEntries));this.setState({showFreeFormOption:!u,queryString:t})}.bind(this),this.$VideoComposerDialogContentTagsField9=function(t){var u=this.$VideoComposerDialogContentTagsField7(this.state.queryString,t.concat(this.state.currentEntries));this.setState({showFreeFormOption:this.state.showFreeFormOption&&!u,currentEntries:t})}.bind(this),p}n.prototype.componentWillMount=function(){this.$VideoComposerDialogContentTagsField1=c("VideoComposerDialogBasicUtils").getContentTagSearchSource()};n.prototype.$VideoComposerDialogContentTagsField2=function(o){c("VideoComposerDialogBasicActions").updateContentTags(o)};n.prototype.$VideoComposerDialogContentTagsField3=function(){return this.props.entries.length>=m};n.prototype.$VideoComposerDialogContentTagsField4=function(o){var p=o.getUniqueID(),q=o.getAuxiliaryData().isFreeForm,r=o.getTitle(),s=this.props.entries,t=s.some(function(o){if(o.getUniqueID()===p)return true;else if(q&&p===o.getTitle()||o.getAuxiliaryData().isFreeForm&&o.getUniqueID()===r)return true;return false});return t};n.prototype.$VideoComposerDialogContentTagsField7=function(o,p){var q=p.some(function(r){return o===r.getTitle()});return q};n.prototype.render=function(){var o=null;if(this.props.improvedContentTags)o=this.$VideoComposerDialogContentTagsField1;else o=c("AudienceInterestsSearchSource").getInstance({whitelistedInterestsOnly:false,accessToken:this.props.accessToken});var p={};if(this.props.improvedContentTags&&!this.state.showFreeFormOption)p[this.state.queryString]=new(c("SearchableEntry"))({uniqueID:this.state.queryString,title:this.state.queryString});return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_k38")},c("React").createElement("div",{className:"_k3a"},c("React").createElement(c("Image.react"),{className:"_k39",src:h("423746")})),c("React").createElement(c("XUITokenizer.react"),{className:"_k3b",entries:this.props.entries,excludedEntries:p,limit:m,placeholder:j._("Add tags to help people discover your video. Examples: Cat, Sports, Piano"),searchSource:o,onEntriesFound:this.$VideoComposerDialogContentTagsField9,onQueryStringChange:this.$VideoComposerDialogContentTagsField8,onRemoveEntryAttempt:this.$VideoComposerDialogContentTagsField6,onAddEntryAttempt:this.$VideoComposerDialogContentTagsField5}))};f.exports=n}),null);
__d("VideoComposerDialogVideoPlayer.react",["cx","React","VideoComponentEmbeddedControls.react","VideoComponentPlayButton.react","VideoComponentScrubberPreview.react","VideoComponentWithLoopingPlayback.react","VideoComponentWithSpacePlayPause.react","VideoComposerDialogConstants","VideoPlayer.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("VideoPlayer.react"),{className:"_4jg1",videoData:this.props.videoData,height:c("VideoComposerDialogConstants").PLAYER_HEIGHT,autoplay:false},c("React").createElement(c("VideoComponentPlayButton.react"),null),c("React").createElement(c("VideoComponentEmbeddedControls.react"),{showSettingsButton:true}),c("React").createElement(c("VideoComponentWithLoopingPlayback.react"),null),c("React").createElement(c("VideoComponentWithSpacePlayPause.react"),null),c("React").createElement(c("VideoComponentScrubberPreview.react"),null))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogBasicSection.react",["cx","React","VideoComposerDialogBasicComposer.react","VideoComposerDialogContentTagsField.react","VideoComposerDialogVideoPlayer.react","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props.videoData;return c("React").createElement("div",null,l?c("React").createElement(c("VideoComposerDialogVideoPlayer.react"),{videoData:l}):c("React").createElement("div",{className:"_1fxr"},c("React").createElement(c("XUISpinner.react"),{size:"large"})),c("React").createElement(c("VideoComposerDialogBasicComposer.react"),{bootloaded:this.props.bootloaded,composerConfig:this.props.composerConfig,description:this.props.description,mentionsSearchSource:this.props.mentionsSearchSource,taggerSearchSource:this.props.taggerSearchSource,profilePicUri:this.props.profilePictureURI,actorID:this.props.actorID}),this.props.bootloaded?c("React").createElement(c("VideoComposerDialogContentTagsField.react"),{className:"_3-8y",accessToken:this.props.accessToken,entries:this.props.contentTags,improvedContentTags:this.props.improvedContentTags}):null)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogMode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({VIDEO_UPLOAD:"video_upload",VIDEO_EDIT:"video_edit"})}),null);
__d("VideoComposerDialogBasicContainer.react",["FluxContainer","React","VideoComposerDialogBasicSection.react","VideoComposerDialogBasicStore","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogMode","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogBasicStore"),c("VideoComposerDialogUploadStore"),c("VideoComposerDialogMetadataStore")]};j.calculateState=function(){var k=c("VideoComposerDialogBasicStore").getState(),l=k.bootloaded,m=k.composerConfig,n=k.contentTags,o=k.description,p=k.improvedContentTags,q=k.mentionsSearchSource,r=k.taggerSearchSource,s=c("VideoComposerDialogUploadStore").getState(),t=s.videoData,u=c("VideoComposerDialogMetadataStore").getState(),v=u.accessToken,w=u.actorID,x=u.dialogMode,y=u.profilePictureURI,z=u.videoDataForID;return{accessToken:v,bootloaded:l,composerConfig:m,contentTags:n,description:o,dialogMode:x,improvedContentTags:p,mentionsSearchSource:q,taggerSearchSource:r,profilePictureURI:y,actorID:w?w:"",videoData:x===c("VideoComposerDialogMode").VIDEO_UPLOAD?t:z}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(j.getStores())};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogBasicSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogBasicTabContainer.react",["FluxContainer","React","VideoComposerDialogBasicStore","VideoComposerDialogBasicTabConfig","VideoComposerDialogDispatcher","VideoComposerDialogTab","VideoComposerDialogTabItem.react","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab;return{isSelected:l===c("VideoComposerDialogTab").BASIC}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogBasicStore")])};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTabItem.react"),babelHelpers["extends"]({tabConfig:c("VideoComposerDialogBasicTabConfig")},this.state))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogBodySectionContainer.react",["FluxContainer","React","VideoComposerDialogBodySection.react","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab;return{selectedTab:l}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogBodySection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogCheckboxItem.react",["ix","cx","FBCheckbox.react","FlexLayout.react","LeftRight.react","React","Tooltip","Image.react","XUICardSection.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$VideoComposerDialogCheckboxItem1=function(){if(!this.props.disabled)this.props.onToggle()}.bind(this),n}l.prototype.render=function(){var m=this.props.disabled&&this.props.disabledTooltip||null;return c("React").createElement(c("XUICardSection.react"),babelHelpers["extends"]({},c("Tooltip").propsFor(m,"below"),{onClick:this.$VideoComposerDialogCheckboxItem1,className:"_19pq"+(this.props.checked?" _2e9y":"")+(!this.props.disabled?" _242x":"")}),c("React").createElement(c("LeftRight.react"),null,c("React").createElement(c("FlexLayout.react"),{direction:"horizontal",align:"center",className:"_1qng"},c("React").createElement(c("FBCheckbox.react"),{className:"_246b",checked:this.props.checked,disabled:!!this.props.disabled}),c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold",className:"_19pr"},this.props.label)),c("React").createElement(c("FlexLayout.react"),{direction:"horizontal",align:"center",className:"_1qng"},this.props.tooltip?c("React").createElement(c("Image.react"),babelHelpers["extends"]({},c("Tooltip").propsFor(this.props.tooltip,"above"),{className:"_inj",src:h("126340")})):null,this.props.profilePicUri?c("React").createElement(c("Image.react"),{height:28,width:28,src:this.props.profilePicUri,className:"_1qnh"}):null)))};f.exports=l}),null);
__d("VideoComposerDialogCrossPostSection.react",["ix","cx","fbt","FlexLayout.react","Link.react","PageSettingsRef","React","VideoComposerDialogCheckboxItem.react","VideoComposerDialogDistributionActions","VideoComposerDialogField.react","XUIButton.react","XUICard.react","XUIGrayText.react","XUISpinner.react","XPagesManagerSettingsController","asset","Image.react","Tooltip"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=4;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={showAll:false},this.$VideoComposerDialogCrossPostSection3=function(){return this.setState({showAll:!this.state.showAll})}.bind(this),p}n.prototype.render=function(){var o=this.$VideoComposerDialogCrossPostSection1(),p=c("React").createElement(c("Link.react"),{href:"/help/678485232304895",target:"_blank"},j._("Help Center"));return c("React").createElement(c("VideoComposerDialogField.react"),{input:o,subtitle:j._("Allow other Pages to use your video in their posts. Learn more about crossposting in the {Link. =Help Center}.",[j.param("Link. =Help Center",p)]),title:j._("Crossposting")})};n.prototype.$VideoComposerDialogCrossPostSection2=function(){return c("XPagesManagerSettingsController").getURIBuilder().setString("page_token",this.props.pageID).setString("tab","video_crossposting").setString("ref",c("PageSettingsRef").VIDEO_COMPOSER).getURI()};n.prototype.$VideoComposerDialogCrossPostSection1=function(){__p&&__p();if(!Array.isArray(this.props.crosspostPages))return c("React").createElement("div",{className:"_2kkh"},c("React").createElement(c("XUISpinner.react"),{size:"large"}));if(this.props.crosspostPages.length===0){var o=!this.props.enableCrosspostRefresh?j._("When you have added Pages, click here to refresh the list"):null;return c("React").createElement(c("XUICard.react"),{className:"_19pp"},c("React").createElement(c("FlexLayout.react"),{direction:"vertical",justify:"all",align:"center",className:"_ka9"},c("React").createElement("div",{className:"_kaj"},c("React").createElement(c("Image.react"),{src:h("398197")})),c("React").createElement("div",{className:"_kak"},j._("Allow Other Pages to Crosspost Your Video")),c("React").createElement(c("FlexLayout.react"),null,c("React").createElement(c("XUIButton.react"),{size:"large",label:j._("Choose Pages"),target:"_blank",onClick:c("VideoComposerDialogDistributionActions").crosspostLinkClicked,href:this.$VideoComposerDialogCrossPostSection2(),imageRight:c("React").createElement(c("Image.react"),{src:h("401037")}),className:"_3-8_"}),c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({size:"large"},c("Tooltip").propsFor(o,"above"),{disabled:!this.props.enableCrosspostRefresh,label:j._("Refresh"),imageRight:c("React").createElement(c("Image.react"),{src:h("435672")}),onClick:c("VideoComposerDialogDistributionActions").refreshCrosspostPages})))))}var p=[],q=null;if(this.props.crosspostPages.length<=m)p=this.props.crosspostPages;else if(this.state.showAll){p=this.props.crosspostPages;q=j._("See Less")}else{p=this.props.crosspostPages.slice(0,m);q=j._({"*":"See all {pages count} Pages"},[j.param("pages count",this.props.crosspostPages&&this.props.crosspostPages.length,[0])])}var r=this.state.showAll?h("401025"):h("363522"),s=q===null?null:c("React").createElement(c("Link.react"),{className:"_2kma",onClick:this.$VideoComposerDialogCrossPostSection3},c("React").createElement(c("XUIGrayText.react"),null,q),c("React").createElement(c("Image.react"),{className:"_3-99",src:r}));return c("React").createElement("div",null,c("React").createElement(c("XUICard.react"),{className:"_19pp"},p.map(function(t){return c("React").createElement(c("VideoComposerDialogCheckboxItem.react"),{key:t.id,checked:t.allow,label:t.name,profilePicUri:t.profilePicURI,onToggle:function(){return this.props.onPageToggle(t.id)}.bind(this)})}.bind(this))),s)};f.exports=n}),null);
__d("VideoComposerDialogDistributionSection.react",["cx","fbt","React","VideoComposerDialogCheckboxItem.react","VideoComposerDialogField.react","XUICard.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=[{label:i._("News Feed"),checked:this.props.showInNewsFeed,onToggle:function(){return this.props.onToggleNewFeed()}.bind(this),tooltip:i._("Unselect if you don't want your video to appear in News Feed"),disabled:this.props.disableShowInNewsFeed,disabledTooltip:i._("Secret Video cannot appear in News Feed.")},{label:i._("Allow Embedding"),checked:this.props.allowEmbedding,onToggle:function(){return this.props.onToggleEmbedding()}.bind(this),tooltip:i._("Unselect if you don't want third parties to embed your video")},{label:i._("Add as Secret Video"),checked:this.props.addAsSecretVideo,onToggle:function(){return this.props.onToggleSecretVideo()}.bind(this),tooltip:i._("Secret videos are only available for embedding and for people who have the link")}],n=c("React").createElement(c("XUICard.react"),{className:"_19pp"},m.map(function(o,p){return c("React").createElement(c("VideoComposerDialogCheckboxItem.react"),babelHelpers["extends"]({key:p},o))}));return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogField.react"),{input:n,subtitle:i._("Choose where you would like your video to appear."),title:i._("Custom Distribution"),showTopBorder:false}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogModerationSection.react",["cx","fbt","React","VideoComposerDialogCheckboxItem.react","VideoComposerDialogField.react","XUICard.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=[{label:i._("Show Graphic Warning"),checked:this.props.showGraphicWarning,onToggle:function(){return this.props.onGraphicWarningToggle()}.bind(this),tooltip:i._("Viewers will see a warning that your video contains graphic content before it starts"),hidden:!this.props.allowGraphicWarningOption},{label:i._("Turn Off Reactions, Comments and Shares"),checked:this.props.blockSocial,onToggle:function(){return this.props.onBlockSocialToggle()}.bind(this),tooltip:i._("People will not be able to share, react to or comment on your post"),disabled:this.props.disableBlockSocial,disabledTooltip:i._("Only available if video is added as Secret Video")}],n=c("React").createElement(c("XUICard.react"),{className:"_2km8"},m.map(function(p,q){if(p.hidden)return null;return c("React").createElement(c("VideoComposerDialogCheckboxItem.react"),babelHelpers["extends"]({key:q},p))})),o=this.props.allowGraphicWarningOption?i._("Moderate your content by showing graphic warnings and turning off reactions, comments and shares."):i._("Moderate your content by turning off reactions, comments and shares.");return c("React").createElement(c("VideoComposerDialogField.react"),{input:n,subtitle:o,title:i._("Moderation")})};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogDistributionContainer.react",["cx","FluxContainer","React","VideoComposerDialogCrossPostSection.react","VideoComposerDialogModerationSection.react","VideoComposerDialogDispatcher","VideoComposerDialogDistributionActions","VideoComposerDialogDistributionSection.react","VideoComposerDialogDistributionStore","VideoComposerDialogMetadataStore"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("VideoComposerDialogDistributionStore"),c("VideoComposerDialogMetadataStore")]};k.calculateState=function(){var l=c("VideoComposerDialogDistributionStore").getState();return{pageID:c("VideoComposerDialogMetadataStore").getState().get("targetID"),showInNewsFeed:l.showInNewsFeed,allowEmbedding:l.allowEmbedding,addAsSecretVideo:l.addAsSecretVideo,disableShowInNewsFeed:l.disableShowInNewsFeed,crosspostPages:l.crosspostPages,allowGraphicWarningOption:l.allowGraphicWarningOption,showGraphicWarning:l.showGraphicWarning,blockSocial:l.blockSocial,disableBlockSocial:!l.addAsSecretVideo,enableCrosspostRefresh:l.enableCrosspostRefresh}};k.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(k.getStores())};k.prototype.render=function(){return c("React").createElement("div",{className:"_ogq"},c("React").createElement(c("VideoComposerDialogDistributionSection.react"),babelHelpers["extends"]({},this.state,{onToggleNewFeed:c("VideoComposerDialogDistributionActions").toggleNewsFeed,onToggleEmbedding:c("VideoComposerDialogDistributionActions").toggleEmbedding,onToggleSecretVideo:c("VideoComposerDialogDistributionActions").toggleSecretVideo})),c("React").createElement(c("VideoComposerDialogCrossPostSection.react"),{pageID:this.state.pageID,crosspostPages:this.state.crosspostPages,enableCrosspostRefresh:this.state.enableCrosspostRefresh,onPageToggle:c("VideoComposerDialogDistributionActions").toggleCrosspostPage}),c("React").createElement(c("VideoComposerDialogModerationSection.react"),babelHelpers["extends"]({},this.state,{onGraphicWarningToggle:c("VideoComposerDialogDistributionActions").toggleGraphicWarning,onBlockSocialToggle:c("VideoComposerDialogDistributionActions").toggleBlockSocial})))};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogDistributionTabContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogDistributionStore","VideoComposerDialogDistributionTabConfig","VideoComposerDialogTab","VideoComposerDialogTabItem.react","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab;return{isSelected:l===c("VideoComposerDialogTab").DISTRIBUTION}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogDistributionStore")])};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTabItem.react"),babelHelpers["extends"]({tabConfig:c("VideoComposerDialogDistributionTabConfig")},this.state))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogSaveAsDraftPrompt.react",["cx","fbt","React","VideoComposerDialogActions","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{isStrictlyControlled:true,onHide:c("VideoComposerDialogActions").saveAsDraftAbort,shown:this.props.shown,width:680},c("React").createElement(c("XUIDialogTitle.react"),null,i._("Save as Draft")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",{className:"_31yu"},i._("Save Video Post as Draft and Close")),c("React").createElement("div",{className:"_31yv"},i._("Save your video post as a draft, your video will finish processing and can be found in Publishing Tool > Video Library or your Page Timeline Tools."))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{size:"xlarge",onClick:c("VideoComposerDialogActions").saveAsDraftAbort,label:i._("Cancel")}),c("React").createElement(c("XUIButton.react"),{size:"xlarge",use:"confirm",onClick:c("VideoComposerDialogActions").saveAsDraftConfirm,label:i._("Save as Draft")})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogFooterSection.react",["cx","fbt","invariant","AutoScheduleUtils","DOM","FlexLayout.react","LeftRight.react","PopoverMenu.react","PostBackdateDialog.react","PostScheduleAndPostEndDialog.react","React","ReactComposerVideoCopyrightDialog.react","ReactDOM","ReactXUIMenu","Tooltip","VideoComposerDialogActions","VideoComposerDialogSaveAsDraftPrompt.react","XUIButton.react","XUIPopoverButton.react","XUISpinner.react","LiftTimeUtils"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("LiftTimeUtils").MS_IN_SEC,n=c("ReactXUIMenu").Item;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$VideoComposerDialogFooterSection2=function(){if(this.props.showRightsConfirmationDialog)c("VideoComposerDialogActions").cancelUpload()}.bind(this),this.$VideoComposerDialogFooterSection5=function(){var u=c("ReactDOM").render(c("React").createElement(c("PostBackdateDialog.react"),{maxTime:Date.now()/m,minTime:this.props.minBackdateTime,onSubmit:c("VideoComposerDialogActions").backdateConfirm}),c("DOM").create("div"));u instanceof c("PostBackdateDialog.react")||j(0);u.show()}.bind(this),q}o.prototype.$VideoComposerDialogFooterSection1=function(){var p=c("ReactDOM").render(c("React").createElement(c("PostScheduleAndPostEndDialog.react"),{timezoneStr:c("AutoScheduleUtils").getTimezoneString(),showExpire:true,onSubmit:c("VideoComposerDialogActions").scheduleConfirm}),c("DOM").create("div"));p instanceof c("PostScheduleAndPostEndDialog.react")||j(0);p.show()};o.prototype.$VideoComposerDialogFooterSection3=function(){c("VideoComposerDialogActions").confirmRights()};o.prototype.$VideoComposerDialogFooterSection4=function(){c("VideoComposerDialogActions").publishPost()};o.prototype.$VideoComposerDialogFooterSection6=function(){c("VideoComposerDialogActions").saveAsDraftAttempt()};o.prototype.render=function(){var p=c("React").createElement(c("ReactXUIMenu"),{className:"_1qnj"},c("React").createElement(n,{onclick:this.$VideoComposerDialogFooterSection4},i._("Publish Now")),c("React").createElement(n,{onclick:this.$VideoComposerDialogFooterSection1},i._("Schedule")),c("React").createElement(n,{onclick:this.$VideoComposerDialogFooterSection5},i._("Backdate"))),q=this.props.disablePublish||this.props.isMissingTitle||this.props.isSchedulingOrPosting||this.props.isSavingAsDraft||!this.props.bootloaded,r=this.props.isMissingTitle?i._("To publish your video, give it a title"):null,s=this.props.isMissingTitle?i._("To save as draft, give it a title"):null;return c("React").createElement("div",{className:"_4egq"},c("React").createElement(c("LeftRight.react"),{className:"_2pi5"},c("React").createElement("div",null),c("React").createElement(c("FlexLayout.react"),{direction:"horizontal"},c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({},c("Tooltip").propsFor(s,"above"),{className:"_2cpj",image:this.props.isSavingAsDraft?c("React").createElement(c("XUISpinner.react"),null):null,size:"xlarge",label:i._("Save as Draft"),labelIsHidden:this.props.isSavingAsDraft,onClick:this.$VideoComposerDialogFooterSection6,disabled:q})),c("React").createElement(c("PopoverMenu.react"),{className:"_3-93 _3-9a",alignh:"right",position:"above",alignv:"baseline",menu:p,disabled:q},c("React").createElement(c("XUIPopoverButton.react"),babelHelpers["extends"]({},c("Tooltip").propsFor(r,"above"),{className:"_2cqv",haschevron:!this.props.isSchedulingOrPosting,image:this.props.isSchedulingOrPosting?c("React").createElement(c("XUISpinner.react"),{background:"dark"}):null,use:"confirm",size:"xlarge",label:i._("Publish"),labelIsHidden:this.props.isSchedulingOrPosting,disabled:q}))))),c("React").createElement(c("VideoComposerDialogSaveAsDraftPrompt.react"),{shown:this.props.saveAsDraftDialogShown}),c("React").createElement(c("ReactComposerVideoCopyrightDialog.react"),{shown:this.props.showRightsConfirmationDialog&&this.props.isSchedulingOrPosting,onCancel:this.$VideoComposerDialogFooterSection2,onConfirm:this.$VideoComposerDialogFooterSection3}))};f.exports=o}),null);
__d("VideoComposerDialogFooterSectionContainer.react",["FluxContainer","React","VideoComposerDialogBasicStore","VideoComposerDialogFooterSection.react","VideoComposerDialogMetadataStore","VideoComposerDialogUIStore","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore"),c("VideoComposerDialogUploadStore"),c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogBasicStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=c("VideoComposerDialogMetadataStore").getState(),m=l.minBackdateTime,n=l.title,o=l.showRightsConfirmationDialog,p=c("VideoComposerDialogUploadStore").getState(),q=p.disablePublish,r=p.isPosting,s=p.isPostPending,t=p.isDraft,u=c("VideoComposerDialogBasicStore").getState(),v=u.bootloaded;return{bootloaded:v,disablePublish:q,isMissingTitle:n.trim()==="",isSavingAsDraft:(r||s)&&t,isSchedulingOrPosting:(r||s)&&!t,saveAsDraftDialogShown:k.saveAsDraftDialogShown,showRightsConfirmationDialog:o,minBackdateTime:m?m:0}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogFooterSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoCopyrightWhitelistSelector.react",["fbt","CurrentUser","React","SearchableEntry","WebAsyncSearchSource","XUITokenizer.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){"use strict";__p&&__p();j.constructor.call(this,l);this.$VideoCopyrightWhitelistSelector2=function(m){var n=this.props.entries;n.push({id:m.getUniqueID().toString(),name:m.getTitle()});this.props.onEntriesUpdated(n)}.bind(this);this.$VideoCopyrightWhitelistSelector3=function(m){var n=this.props.entries;n=n.filter(function(o){return o.id!=m.getUniqueID().toString()});this.props.onEntriesUpdated(n)}.bind(this);this.state={entries:[],searchSource:new(c("WebAsyncSearchSource"))({queryRequests:[{uri:"/ajax/typeahead/search.php",data:{filter:["user","page"],viewer:c("CurrentUser").getID()}}]})}}k.prototype.componentWillMount=function(){"use strict";this.$VideoCopyrightWhitelistSelector1(this.props.entries||[])};k.prototype.componentWillReceiveProps=function(l){"use strict";this.$VideoCopyrightWhitelistSelector1(l.entries||[])};k.prototype.$VideoCopyrightWhitelistSelector1=function(l){"use strict";var m=l.map(function(n,o){return new(c("SearchableEntry"))({order:o,title:n.name,uniqueID:n.id})});this.setState({entries:m})};k.prototype.render=function(){"use strict";return c("React").createElement(c("XUITokenizer.react"),{className:this.props.className,entries:this.state.entries,onAddEntryAttempt:this.$VideoCopyrightWhitelistSelector2,onRemoveEntryAttempt:this.$VideoCopyrightWhitelistSelector3,placeholder:this.props.disabled?null:h._("Add Page or Person"),searchSource:this.state.searchSource,xuiError:this.props.error,disabled:this.props.disabled})};f.exports=k}),null);
__d("VideoCopyrightWhitelistSection.react",["cx","fbt","React","VideoCopyrightWhitelistedIGUserList.react","VideoCopyrightWhitelistSelector.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";var m=c("React").createElement(c("VideoCopyrightWhitelistSelector.react"),{className:"_64ut",onEntriesUpdated:this.props.onFBWhitelistUpdated,placeholder:i._("Add Page or Person"),entries:this.props.whitelistedFBUsers,disabled:this.props.disabled});return this.props.canSeeIGMatches?c("React").createElement("div",null,c("React").createElement("div",{className:"_kmg"},i._("Facebook")),m,c("React").createElement("div",{className:"_kmg"},i._("Instagram")),c("React").createElement(c("VideoCopyrightWhitelistedIGUserList.react"),{disabled:this.props.disabled,whitelistedIGUserNames:this.props.whitelistedIGUserNames||[],onIGWhitelistUpdated:this.props.onIGWhitelistUpdated})):m};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogRightsSection.react",["cx","fbt","CopyrightReferenceCategorySelector.react","React","VideoComposerDialogField.react","VideoComposerDialogRadioButton.react","VideoComposerDialogRightsActions","VideoCopyrightAttributionSelector.react","VideoCopyrightGeoSelector.react","VideoCopyrightMatchRuleSelector.react","VideoCopyrightMonitoringSelector.react","VideoCopyrightRuleTemplateBlankSelectDialog","VideoCopyrightWhitelistSection.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$VideoComposerDialogRightsSection9=function(){c("VideoCopyrightRuleTemplateBlankSelectDialog").show(this.props.targetID,this.props.accessToken)}.bind(this),n}l.prototype.$VideoComposerDialogRightsSection1=function(m){c("VideoComposerDialogRightsActions").updateShouldDetectMatches(m)};l.prototype.$VideoComposerDialogRightsSection2=function(m){c("VideoComposerDialogRightsActions").updateMatchRule(m)};l.prototype.$VideoComposerDialogRightsSection3=function(m){c("VideoComposerDialogRightsActions").updateCategory(m)};l.prototype.$VideoComposerDialogRightsSection4=function(event){c("VideoComposerDialogRightsActions").updateMonitoringType(event.value)};l.prototype.$VideoComposerDialogRightsSection5=function(m,n){c("VideoComposerDialogRightsActions").updateOwnershipCountries(m.slice(),n)};l.prototype.$VideoComposerDialogRightsSection6=function(m){c("VideoComposerDialogRightsActions").updateAttribution(m)};l.prototype.$VideoComposerDialogRightsSection7=function(m){c("VideoComposerDialogRightsActions").updateFBWhitelistedUsers(m.slice())};l.prototype.$VideoComposerDialogRightsSection8=function(m){c("VideoComposerDialogRightsActions").updateIGWhitelistedUsers(m.slice())};l.prototype.render=function(){var m=void 0;if(this.props.showAttributionSelector)m=c("React").createElement(c("VideoComposerDialogField.react"),{title:i._("Apply Attribution"),tooltip:i._("Attribution is for matching videos connected to your Monitor match rules. Attribution is added to matching content on Facebook. Reference files can only be connected to one Attribution."),input:c("React").createElement(c("VideoCopyrightAttributionSelector.react"),{accessToken:this.props.accessToken,onChange:this.$VideoComposerDialogRightsSection6,pageID:this.props.targetID,selectedAttribution:this.props.attributionID})});return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogField.react"),{showTopBorder:false,title:i._("Monitor Rights"),subtitle:i._("Choose if you would like to monitor rights to this video"),input:c("React").createElement("div",{className:"_2j6t"},c("React").createElement(c("VideoComposerDialogRadioButton.react"),{checked:this.props.shouldDetectMatches,label:i._("Yes"),onSelect:function(){return this.$VideoComposerDialogRightsSection1(true)}.bind(this)}),c("React").createElement(c("VideoComposerDialogRadioButton.react"),{checked:!this.props.shouldDetectMatches,label:i._("No"),onSelect:function(){return this.$VideoComposerDialogRightsSection1(false)}.bind(this)}))}),c("React").createElement(c("VideoComposerDialogField.react"),{title:i._("Specify Ownership"),subtitle:i._("What parts of the video do you own and where"),tooltip:i._("Ownership establishes what element of the content belong to you in what parts of the world"),input:c("React").createElement("div",null,c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:this.$VideoComposerDialogRightsSection4,value:this.props.monitoringType}),c("React").createElement(c("VideoCopyrightGeoSelector.react"),{className:"_3-8y",onChange:this.$VideoComposerDialogRightsSection5,selectedCountries:this.props.ownershipCountries,areCountriesIncluded:this.props.areCountriesIncluded,shouldShowIncludeExcludeGeoOptions:true}))}),c("React").createElement(c("VideoComposerDialogField.react"),{title:i._("Select Media Category"),tooltip:i._("You must specify what type of format the content in your reference file appears in for tax purposes before you can receive any ad earnings. This selection can't be undone after you save it."),input:c("React").createElement(c("CopyrightReferenceCategorySelector.react"),{className:"_2j6u",hideTitleAndTooltip:true,onReferenceCategoryChange:this.$VideoComposerDialogRightsSection3,selectedCategory:this.props.category,showCategoryRequiredError:this.props.showCategoryRequiredError})}),c("React").createElement(c("VideoComposerDialogField.react"),{title:i._("Apply Match Rule"),tooltip:i._("Select which rule to apply to matching content"),input:c("React").createElement(c("VideoCopyrightMatchRuleSelector.react"),{accessToken:this.props.accessToken,onChange:this.$VideoComposerDialogRightsSection2,onCreateNewRule:this.$VideoComposerDialogRightsSection9,pageID:this.props.targetID,selectedRule:this.props.matchRuleID})}),m,c("React").createElement(c("VideoComposerDialogField.react"),{title:i._("Grant Permissions"),tooltip:i._("Grant permission to any Page or person on Facebook to upload videos that contain this one."),input:c("React").createElement(c("VideoCopyrightWhitelistSection.react"),{canSeeIGMatches:this.props.isIgRightsManagementEnabled,onFBWhitelistUpdated:this.$VideoComposerDialogRightsSection7,onIGWhitelistUpdated:this.$VideoComposerDialogRightsSection8,whitelistedIGUserNames:this.props.igWhitelistedUsers,whitelistedFBUsers:this.props.fbWhitelistedUsers})}))};f.exports=l}),null);
__d("VideoComposerDialogRightsContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogRightsSection.react","VideoComposerDialogRightsStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogRightsStore"),c("VideoComposerDialogMetadataStore")]};j.calculateState=function(){var k=c("VideoComposerDialogRightsStore").getState(),l=k.attributionID,m=k.category,n=k.fbWhitelistedUsers,o=k.igWhitelistedUsers,p=k.isIgRightsManagementEnabled,q=k.matchRuleID,r=k.monitoringType,s=k.ownershipCountries,t=k.areCountriesIncluded,u=k.shouldDetectMatches,v=k.showAttributionSelector,w=k.showCategoryRequiredError,x=c("VideoComposerDialogMetadataStore").getState(),y=x.accessToken,z=x.targetID;return{accessToken:y,areCountriesIncluded:t,attributionID:l,category:m,fbWhitelistedUsers:n,igWhitelistedUsers:o,isIgRightsManagementEnabled:p,matchRuleID:q,monitoringType:r,ownershipCountries:s,shouldDetectMatches:u,showAttributionSelector:v,showCategoryRequiredError:w,targetID:z?z:""}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(j.getStores())};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogRightsSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogRightsTabCustomDescription.react",["fbt","React","VideoCopyrightMonitoringType"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){if(!j.shouldDetectMatches)return h._("This video is not monitored for rights and matching uploads.");var k=void 0;if(j.ownershipCountries.length>0)if(j.areCountriesIncluded)return h._({"audio":{"*":"Monitoring for audio rights in {number} territories","_1":"Monitoring for audio rights in 1 territory"},"video":{"*":"Monitoring for video rights in {number} territories","_1":"Monitoring for video rights in 1 territory"},"video and audio":{"*":"Monitoring for video and audio rights in {number} territories","_1":"Monitoring for video and audio rights in 1 territory"}},[h["enum"](j.monitoringType===c("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value?"video and audio":j.monitoringType===c("VideoCopyrightMonitoringType").VIDEO_ONLY.value?"video":"audio",{audio:"audio",video:"video","video and audio":"video and audio"}),h.plural(j.ownershipCountries.length,"number")]);else return h._({"audio":{"*":"Monitoring for audio rights worldwide except in {number} territories","_1":"Monitoring for audio rights worldwide except in 1 territory"},"video":{"*":"Monitoring for video rights worldwide except in {number} territories","_1":"Monitoring for video rights worldwide except in 1 territory"},"video and audio":{"*":"Monitoring for video and audio rights worldwide except in {number} territories","_1":"Monitoring for video and audio rights worldwide except in 1 territory"}},[h["enum"](j.monitoringType===c("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value?"video and audio":j.monitoringType===c("VideoCopyrightMonitoringType").VIDEO_ONLY.value?"video":"audio",{audio:"audio",video:"video","video and audio":"video and audio"}),h.plural(j.ownershipCountries.length,"number")]);else return h._({"audio":"Monitoring for audio rights worldwide","video":"Monitoring for video rights worldwide","video and audio":"Monitoring for video and audio rights worldwide"},[h["enum"](j.monitoringType===c("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value?"video and audio":j.monitoringType===c("VideoCopyrightMonitoringType").VIDEO_ONLY.value?"video":"audio",{audio:"audio",video:"video","video and audio":"video and audio"})])}f.exports=i}),null);
__d("VideoComposerDialogRightsTabContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogRightsTabCustomDescription.react","VideoComposerDialogTab","VideoComposerDialogTabItem.react","VideoComposerDialogRightsStore","VideoComposerDialogRightsTabConfig","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore"),c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogRightsStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab,m=c("VideoComposerDialogMetadataStore").getState(),n=m.showRightsTab,o=c("VideoComposerDialogRightsStore").getState(),p=o.areCountriesIncluded,q=o.monitoringType,r=o.shouldDetectMatches,s=o.ownershipCountries;return{areCountriesIncluded:p,isSelected:l===c("VideoComposerDialogTab").RIGHTS,isVisible:n,monitoringType:q,shouldDetectMatches:r,ownershipCountries:s}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogRightsStore")])};j.prototype.render=function(){var k=this.state,l=k.isSelected,m=k.isVisible,n=babelHelpers.objectWithoutProperties(k,["isSelected","isVisible"]);if(!m)return null;return c("React").createElement(c("VideoComposerDialogTabItem.react"),{customDescription:c("React").createElement(c("VideoComposerDialogRightsTabCustomDescription.react"),n),isSelected:l,tabConfig:c("VideoComposerDialogRightsTabConfig")})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogRootContainer.react",["cx","EventListener","FluxContainer","PagesSettingsInstreamAdsBlockListContentStore","PagesSettingsInstreamAdsBlockListDispatcher","PagesSettingsInstreamAdsBlockListStore","React","ReactDOM","VideoComposerDialogActions","VideoComposerDialogAdBreakStore","VideoComposerDialogCaptionEditorStore","VideoComposerDialogCaptionsStore","VideoComposerDialogDispatcher","VideoComposerDialogRoot.react","VideoComposerDialogThumbnailsStore","VideoComposerDialogUIStore","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$VideoComposerDialogRootContainer1=null,m}k.getStores=function(){return[c("VideoComposerDialogUIStore"),c("VideoComposerDialogUploadStore")]};k.calculateState=function(){var l=c("VideoComposerDialogUIStore").getState(),m=l.dialogShown,n=l.showExitConfirmDialog,o=c("VideoComposerDialogUploadStore").getState(),p=o.videoFile;return{shown:m,showExitConfirmDialog:n,videoFile:p}};k.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([].concat(k.getStores(),[c("VideoComposerDialogAdBreakStore"),c("VideoComposerDialogCaptionEditorStore"),c("VideoComposerDialogCaptionsStore"),c("VideoComposerDialogThumbnailsStore")]));c("PagesSettingsInstreamAdsBlockListDispatcher").explicitlyRegisterStores([c("PagesSettingsInstreamAdsBlockListContentStore"),c("PagesSettingsInstreamAdsBlockListStore")])};k.prototype.componentDidMount=function(){if(this.state.videoFile)this.$VideoComposerDialogRootContainer2(this.state.videoFile)};k.prototype.componentWillUpdate=function(l,m){var n=m.videoFile;if(n&&this.state.videoFile!==n)this.$VideoComposerDialogRootContainer2(n)};k.prototype.$VideoComposerDialogRootContainer2=function(l){var m=b.URL.createObjectURL(l),n=void 0,o=c("React").createElement("video",{ref:function p(q){return n=q},className:"_3hni",src:m});c("ReactDOM").render(o,this.$VideoComposerDialogRootContainer1,function(){if(n)c("EventListener").listen(n,"loadedmetadata",function(){return n&&c("VideoComposerDialogActions").metadataLoadedFromHTMLPlayer(n)})})};k.prototype.$VideoComposerDialogRootContainer3=function(){c("VideoComposerDialogActions").exitDialogAttempt()};k.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement("div",{ref:function(l){return this.$VideoComposerDialogRootContainer1=l}.bind(this)}),c("React").createElement(c("VideoComposerDialogRoot.react"),babelHelpers["extends"]({onCloseButtonClick:this.$VideoComposerDialogRootContainer3},this.state)))};f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogTabSectionContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogTabSection.react","VideoComposerDialogUIStore","VideoComposerDialogVideoTypeConfig"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore"),c("VideoComposerDialogMetadataStore")]};j.calculateState=function(){c("VideoComposerDialogUIStore").getState();var k=c("VideoComposerDialogMetadataStore").getState(),l=k.videoType,m=k.showCaptionsTab,n=c("VideoComposerDialogVideoTypeConfig").typeConfig[l].displayedTabs;n=n.filter(function(o){return!(o==="captions"&&!m)});return{displayedTabs:n}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(j.getStores())};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTabSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogThumbnailImage.react",["ix","cx","BackgroundImage.react","Image.react","React","VideoComposerDialogConstants","asset","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:c("joinClasses")("_uy-",this.props.className)},c("React").createElement(c("BackgroundImage.react"),{className:"_uy_"+(this.props.isSelected?" _uz0":"")+(this.props.isSelectable?" _1pl9":"")+(this.props.isSelectable&&!this.props.isSelected?" _1plb":""),width:this.props.width?this.props.width:c("VideoComposerDialogConstants").THUMBNAIL_WIDTH,height:this.props.height?this.props.height:c("VideoComposerDialogConstants").THUMBNAIL_HEIGHT,backgroundSize:"contain",src:this.props.imageURL}),this.props.isSelected?c("React").createElement("div",{className:"_uz1"},c("React").createElement(c("Image.react"),{className:"_uz2",src:h("393776")})):c("React").createElement("div",null))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogThumbnailTitleComponent.react",["cx","Image.react","LeftRight.react","React","XUIGrayText.react","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("LeftRight.react"),null,c("React").createElement("div",{className:"_2onq"},c("React").createElement(c("Image.react"),{className:"_2ons _3-90",src:this.props.image}),c("React").createElement("div",{className:"_2ont"},this.props.isSelected?c("React").createElement(c("XUIText.react"),{className:"_3-94",display:"block",size:"meta1",weight:"bold"},this.props.title):c("React").createElement(c("XUIGrayText.react"),{className:"_3-94",display:"block",size:"meta1",weight:"bold"},this.props.title),c("React").createElement(c("XUIGrayText.react"),{size:"meta1"},this.props.subTitle))),this.props.rightComponent)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogCustomThumbnailSection.react",["ix","cx","fbt","FileInput.react","FileVideoThumbnail","React","VideoComposerDialogThumbnailImage.react","VideoComposerDialogThumbnailTitleComponent.react","XUIButton.react","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){var n=this.props.customThumbnail,o=j._("Change Image");return c("React").createElement("div",{className:"_1jiv _3-8y"+(this.props.isSelected?" _1jiw":"")+(!this.props.isSelected?" _1jix":"")},c("React").createElement(c("VideoComposerDialogThumbnailTitleComponent.react"),{title:j._("Custom Image"),subTitle:j._("Upload a high resolution image that best represents your video."),isSelected:this.props.isSelected,image:this.props.isSelected?h("416790"):h("416798"),rightComponent:c("React").createElement(c("FileInput.react"),{accept:"image/*",onChange:this.props.onCustomImageInput},c("React").createElement(c("XUIButton.react"),{className:"_654r"+(!this.props.isSelected?" _1jiz":""),href:"#",size:"large",label:n!==null?o:j._("Add Image")}))}),this.props.isSelected&&n?c("React").createElement(c("VideoComposerDialogThumbnailImage.react"),{className:"_3-8-",imageURL:n.getURL(),isSelected:true}):null)};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("VideoComposerDialogThumbnailSlider.react",["cx","React","ShimButton.react","VideoComposerDialogConstants","VideoComposerDialogThumbnailActions","VideoComposerDialogThumbnailImage.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=22,l=12,m=3,n=635;i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;o.prototype.$VideoComposerDialogThumbnailSlider1=function(){var p=l+c("VideoComposerDialogConstants").THUMBNAIL_WIDTH,q=p*m,r=(n-(l+q))/2,s=k+c("VideoComposerDialogConstants").THUMBNAIL_WIDTH-r,t=l+c("VideoComposerDialogConstants").THUMBNAIL_WIDTH,u=t-(c("VideoComposerDialogConstants").THUMBNAIL_WIDTH+k-r),v=0;if(this.props.sliderIndex>=1)v=s+t*(this.props.sliderIndex-1);if(this.props.sliderIndex===this.props.thumbnails.length-m)v-=u;return v};o.prototype.$VideoComposerDialogThumbnailSlider2=function(p){c("VideoComposerDialogThumbnailActions").toggleSelectedGeneratedThumbnail(p)};o.prototype.render=function(){var p=this.props.thumbnails.map(function(q,r){return c("React").createElement(c("ShimButton.react"),{key:r,onClick:function(){this.$VideoComposerDialogThumbnailSlider2(r)}.bind(this)},c("React").createElement(c("VideoComposerDialogThumbnailImage.react"),{className:"_3-90",imageURL:q.getURL(),isSelected:r===this.props.selectedIndex,isSelectable:true}))}.bind(this));return c("React").createElement("div",{style:{right:this.$VideoComposerDialogThumbnailSlider1()+"px"},className:"_3bre"},p)};function o(){i.apply(this,arguments)}f.exports=o}),null);
__d("VideoComposerDialogGeneratedThumbnailsSection.react",["ix","cx","fbt","Image.react","React","VideoComposerDialogConstants","VideoComposerDialogThumbnailSlider.react","VideoComposerDialogThumbnailTitleComponent.react","XUIButton.react","XUIButtonGroup.react","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=3;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={sliderIndex:0},this.$VideoComposerDialogGeneratedThumbnailsSection1=function(){if(this.state.sliderIndex>0)this.setState({sliderIndex:this.state.sliderIndex-1})}.bind(this),this.$VideoComposerDialogGeneratedThumbnailsSection2=function(){if(this.state.sliderIndex<this.props.generatedThumbnails.length-m)this.setState({sliderIndex:this.state.sliderIndex+1})}.bind(this),p}n.prototype.render=function(){return c("React").createElement("div",{className:"_1jiv _3-8-"+(this.props.isSelected?" _1jiw":"")+(!this.props.isSelected?" _1jix":"")},c("React").createElement(c("VideoComposerDialogThumbnailTitleComponent.react"),{title:j._("Auto-Generated Image"),subTitle:j._({"*":"Select one of these {thumbnails} images from your video."},[j.param("thumbnails",c("VideoComposerDialogConstants").GENERATED_THUMBNAILS,[0,c("VideoComposerDialogConstants").GENERATED_THUMBNAILS])]),isSelected:this.props.isSelected,image:this.props.isSelected?h("416777"):h("416781"),rightComponent:this.props.isSelected?c("React").createElement(c("XUIButtonGroup.react"),null,c("React").createElement(c("XUIButton.react"),{disabled:this.state.sliderIndex<=0,onClick:this.$VideoComposerDialogGeneratedThumbnailsSection1,size:"large",image:c("React").createElement(c("Image.react"),{src:h("406776")}),label:"Previous",labelIsHidden:true}),c("React").createElement(c("XUIButton.react"),{disabled:this.state.sliderIndex>=this.props.generatedThumbnails.length-m,onClick:this.$VideoComposerDialogGeneratedThumbnailsSection2,size:"large",image:c("React").createElement(c("Image.react"),{src:h("363528")}),label:"Next",labelIsHidden:true})):c("React").createElement(c("XUIButton.react"),{className:"_654r _1jiz",size:"large",label:j._("Choose Image")})}),this.props.isSelected&&this.props.generatedThumbnails.length>0?c("React").createElement(c("VideoComposerDialogThumbnailSlider.react"),{thumbnails:this.props.generatedThumbnails,selectedIndex:this.props.selectedIndex,sliderIndex:this.state.sliderIndex}):null)};f.exports=n}),null);
__d("VideoComposerDialogVideoFrameThumbnailSection.react",["ix","cx","fbt","ComposerVideoThumbnailScrubber.react","React","VideoComposerDialogThumbnailActions","VideoComposerDialogThumbnailImage.react","VideoComposerDialogThumbnailTitleComponent.react","XUIButton.react","asset","emptyFunction"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.state={showThumbnailScrubberDialog:false},o}m.prototype.componentWillReceiveProps=function(n){if(!this.props.isSelected&&n.isSelected&&n.thumbnail===null)this.setState({showThumbnailScrubberDialog:true})};m.prototype.$VideoComposerDialogVideoFrameThumbnailSection1=function(n){if(n)n.then(function(o){var p=o.thumbnails;if(p.length===1)c("VideoComposerDialogThumbnailActions").updateScrubbedThumbnail(p[0])}).done()};m.prototype.render=function(){var n=this.props.thumbnail;return c("React").createElement("div",{className:"_1jiv _3-8y"+(this.props.isSelected?" _1jiw":"")+(!this.props.isSelected?" _1jix":"")},c("React").createElement(c("VideoComposerDialogThumbnailTitleComponent.react"),{title:j._("Video Frame"),subTitle:j._("Choose any still frame from your video."),isSelected:this.props.isSelected,image:this.props.isSelected?h("416769"):h("416772"),rightComponent:c("React").createElement(c("XUIButton.react"),{className:"_654r"+(!this.props.isSelected?" _1jiz":""),onClick:function(){return this.setState({showThumbnailScrubberDialog:true})}.bind(this),size:"large",label:this.props.thumbnail===null?j._("Choose Frame"):j._("Change Frame")})}),this.props.isSelected&&n?c("React").createElement(c("VideoComposerDialogThumbnailImage.react"),{className:"_3-8-",imageURL:n.getURL(),isSelected:true}):null,c("React").createElement(c("ComposerVideoThumbnailScrubber.react"),{showThumbnailScrubberDialog:this.state.showThumbnailScrubberDialog,onScrubbedThumbnailSave:c("emptyFunction"),onSelectedThumbnailsFromScrubber:this.$VideoComposerDialogVideoFrameThumbnailSection1,videoURL:this.props.videoURL,pageID:this.props.actorID,scrubbedThumbnail:n?n.getTime():null,thumbnails:this.props.generatedThumbnails,closeDialog:function(){return this.setState({showThumbnailScrubberDialog:false})}.bind(this)}))};f.exports=m}),null);
__d("VideoComposerDialogThumbnailsSection.react",["cx","fbt","FileInput.react","FileVideoThumbnail","Link.react","React","ShimButton.react","VideoComposerDialogCustomThumbnailSection.react","VideoComposerDialogGeneratedThumbnailsSection.react","VideoComposerDialogThumbnailActions","VideoComposerDialogThumbnailTypes","VideoComposerDialogThumbnailUtils","VideoComposerDialogVideoFrameThumbnailSection.react","XUIGrayText.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$VideoComposerDialogThumbnailsSection1=function(){if(this.props.selectedSection!==c("VideoComposerDialogThumbnailTypes").ThumbnailSection.GENERATED)c("VideoComposerDialogThumbnailActions").selectThumbnailSection(c("VideoComposerDialogThumbnailTypes").ThumbnailSection.GENERATED)}.bind(this),this.$VideoComposerDialogThumbnailsSection2=function(){if(this.props.selectedSection!==c("VideoComposerDialogThumbnailTypes").ThumbnailSection.CUSTOM&&this.props.customThumbnail!==null)c("VideoComposerDialogThumbnailActions").selectThumbnailSection(c("VideoComposerDialogThumbnailTypes").ThumbnailSection.CUSTOM)}.bind(this),this.$VideoComposerDialogThumbnailsSection4=function(){if(this.props.selectedSection!==c("VideoComposerDialogThumbnailTypes").ThumbnailSection.VIDEO_FRAME)c("VideoComposerDialogThumbnailActions").selectThumbnailSection(c("VideoComposerDialogThumbnailTypes").ThumbnailSection.VIDEO_FRAME)}.bind(this),n}l.prototype.$VideoComposerDialogThumbnailsSection3=function(event){var m=event.currentTarget.files;if(!m||m.length!==1)return;else{var n=new(c("FileVideoThumbnail"))(m[0]);c("VideoComposerDialogThumbnailActions").selectThumbnailSection(c("VideoComposerDialogThumbnailTypes").ThumbnailSection.CUSTOM);c("VideoComposerDialogThumbnailActions").updateCustomThumbnail(n)}};l.prototype.render=function(){var m=c("VideoComposerDialogThumbnailUtils").shouldShowThumbnailScrubber()?i._("This image will display when your video isn't auto playing. You can select an auto-generated image, upload a custom image or choose a still frame from your video."):i._("This image will display when your video isn't auto playing. You can select an auto-generated image or upload a custom image.");return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{className:"_3-96",display:"block",weight:"bold"},i._("Choose a Thumbnail for Your Video")),c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},m),c("React").createElement(c("ShimButton.react"),{onClick:this.$VideoComposerDialogThumbnailsSection1},c("React").createElement(c("VideoComposerDialogGeneratedThumbnailsSection.react"),{generatedThumbnails:this.props.generatedThumbnails,isSelected:this.props.selectedSection===c("VideoComposerDialogThumbnailTypes").ThumbnailSection.GENERATED,selectedIndex:this.props.selectedGeneratedIndex})),c("React").createElement("div",{className:"_tfr"},c("React").createElement(c("ShimButton.react"),{onClick:this.$VideoComposerDialogThumbnailsSection2},c("React").createElement(c("VideoComposerDialogCustomThumbnailSection.react"),{customThumbnail:this.props.customThumbnail,isSelected:this.props.selectedSection===c("VideoComposerDialogThumbnailTypes").ThumbnailSection.CUSTOM,onCustomImageInput:this.$VideoComposerDialogThumbnailsSection3})),this.props.customThumbnail===null?c("React").createElement(c("FileInput.react"),{containerClassName:"_654s",accept:"image/*",onChange:this.$VideoComposerDialogThumbnailsSection3},c("React").createElement(c("Link.react"),{href:"#",label:i._("Image Upload")})):null),c("VideoComposerDialogThumbnailUtils").shouldShowThumbnailScrubber()?c("React").createElement(c("ShimButton.react"),{onClick:this.$VideoComposerDialogThumbnailsSection4},c("React").createElement(c("VideoComposerDialogVideoFrameThumbnailSection.react"),{actorID:this.props.actorID,generatedThumbnails:this.props.generatedThumbnails,isSelected:this.props.selectedSection===c("VideoComposerDialogThumbnailTypes").ThumbnailSection.VIDEO_FRAME,thumbnail:this.props.scrubbedThumbnail,videoURL:this.props.videoURL})):null)};f.exports=l}),null);
__d("VideoComposerDialogThumbnailsContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogThumbnailsSection.react","VideoComposerDialogThumbnailsStore","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogThumbnailsStore"),c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogUploadStore")]};j.calculateState=function(){var k=c("VideoComposerDialogThumbnailsStore").getState(),l=k.customThumbnail,m=k.generatedThumbnails,n=k.scrubbedThumbnail,o=k.selectedGeneratedIndex,p=k.selectedSection,q=c("VideoComposerDialogUploadStore").getState(),r=q.videoFile,s=c("VideoComposerDialogMetadataStore").getState(),t=s.actorID;return{actorID:t?t:"",customThumbnail:l,generatedThumbnails:m,scrubbedThumbnail:n,selectedGeneratedIndex:o,selectedSection:p,videoURL:r?b.URL.createObjectURL(r):""}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([])};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogThumbnailsSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogThumbnailsTabContainer.react",["cx","FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogTab","VideoComposerDialogTabItem.react","VideoComposerDialogThumbnailImage.react","VideoComposerDialogThumbnailsStore","VideoComposerDialogThumbnailsTabConfig","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=128,l=72;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;m.getStores=function(){return[c("VideoComposerDialogUIStore"),c("VideoComposerDialogThumbnailsStore")]};m.calculateState=function(){var n=c("VideoComposerDialogUIStore").getState(),o=n.selectedTab,p=c("VideoComposerDialogThumbnailsStore").getState(),q=p.selectedThumbnail;return{isSelected:o===c("VideoComposerDialogTab").THUMBNAILS,selectedThumbnail:q}};m.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(m.getStores())};m.prototype.render=function(){var n=this.state.selectedThumbnail;return c("React").createElement(c("VideoComposerDialogTabItem.react"),babelHelpers["extends"]({customDescription:n?c("React").createElement(c("VideoComposerDialogThumbnailImage.react"),{imageURL:n.getURL(),isSelected:false,width:k,height:l}):null,tabConfig:c("VideoComposerDialogThumbnailsTabConfig")},this.state))};function m(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(m)}),null);
__d("VideoComposerDialogUploadPopover.react",["ix","cx","fbt","DurationFormatter","FileInput.react","FlexLayout.react","Image.react","Link.react","React","VideoComposerDialogActions","XUIButton.react","asset","formatNumber"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=1e6;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.$VideoComposerDialogUploadPopover1=function(event,o){var p=event.currentTarget.files;if(!p||p.length!==1)return;c("VideoComposerDialogActions").fileAdded(p[0],o)};n.prototype.render=function(){var o=this.props.videoSize/m,p=this.props.uploadPercent/100*o;return c("React").createElement("div",null,c("React").createElement(c("FlexLayout.react"),{className:"_652a",justify:"all"},c("React").createElement(c("FlexLayout.react"),{className:"_13yt"},c("React").createElement(c("Image.react"),{className:"_3-8_",src:h("431724")}),c("React").createElement("div",{className:"_13yu"},this.props.fileName)),c("React").createElement(c("Link.react"),{href:"#",onClick:this.props.onCloseButtonClick},c("React").createElement(c("Image.react"),{src:h("368785")}))),c("React").createElement(c("FlexLayout.react"),{direction:"vertical",className:"_13yv"},this.props.errorMessage!==null?c("React").createElement("div",{className:"_l8_"},this.props.errorMessage):null,j._("{percentage}\u0025 Uploaded ({uploaded amount}MB\/{file size}MB)",[j.param("percentage",c("formatNumber")(this.props.uploadPercent)),j.param("uploaded amount",c("formatNumber")(p,1)),j.param("file size",c("formatNumber")(o,1))]),c("React").createElement("div",{className:"_3-8m"},j._("Duration: {duration}",[j.param("duration",c("DurationFormatter").formatShort(Math.round(this.props.videoDuration)))])),j._("Dimensions: {width}x{height}",[j.param("width",this.props.videoWidth),j.param("height",this.props.videoHeight)])),c("React").createElement(c("FlexLayout.react"),{className:"_13yy"},c("React").createElement(c("FileInput.react"),{onChange:this.$VideoComposerDialogUploadPopover1},c("React").createElement(c("XUIButton.react"),{href:"#",size:"large",label:j._("Upload New")}))))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d("VideoComposerDialogUploaderPill.react",["ix","cx","fbt","FlexLayout.react","Image.react","InlineBlock.react","LayerHideOnBlur","LayerHideOnEscape","React","ShimButton.react","VideoComposerDialogUploadPopover.react","XUIContextualDialog.react","asset","fbglyph","formatNumber"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=260;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={showPopover:false},this.$VideoComposerDialogUploaderPill1=function(){this.setState({showPopover:!this.state.showPopover})}.bind(this),p}n.prototype.componentWillReceiveProps=function(o){if(this.props.errorMessage===null&&o.errorMessage)this.setState({showPopover:true});else if(this.props.errorMessage!==null&&o.errorMessage===null)this.setState({showPopover:false})};n.prototype.renderLayers=function(o){if(!this.state.showPopover)return null;return c("React").createElement(c("XUIContextualDialog.react"),{behaviors:{LayerHideOnEscape:c("LayerHideOnEscape"),LayerHideOnBlur:c("LayerHideOnBlur")},contextRef:function(){return this.refs.uploaderPill}.bind(this),shown:this.state.showPopover,alignment:"right",position:"below",onToggle:this.$VideoComposerDialogUploaderPill1,label:j._("metadata"),width:m},c("React").createElement(c("VideoComposerDialogUploadPopover.react"),{errorMessage:this.props.errorMessage,fileName:this.props.fileName,onCloseButtonClick:this.$VideoComposerDialogUploaderPill1,uploadPercent:o,videoDuration:this.props.videoDuration,videoWidth:this.props.videoWidth,videoHeight:this.props.videoHeight,videoSize:this.props.videoSize}))};n.prototype.render=function(){var o=this.props.errorMessage!==null,p=this.props.uploadPercent===100&&this.props.uploadFinished,q=this.props.uploadPercent===100&&!p?99.9:this.props.uploadPercent,r=q===100?0:1,s=o?c("React").createElement(c("Image.react"),{src:h("118806")}):p?c("React").createElement(c("Image.react"),{src:h("407719")}):c("React").createElement(c("Image.react"),{src:h("360748")}),t=o?c("React").createElement(c("Image.react"),{src:h("412694")}):p?c("React").createElement(c("Image.react"),{src:h("364972")}):c("React").createElement(c("Image.react"),{src:h("379681")});return c("React").createElement(c("ShimButton.react"),{ref:"uploaderPill",onClick:this.$VideoComposerDialogUploaderPill1,className:"_4unx"},c("React").createElement("div",{style:{width:q+"%"},className:"_4un-"+(p?" _4jg0":"")+(o?" _6538":"")}),c("React").createElement("div",{className:"_4un_"+(o?" _6539":"")}),c("React").createElement(c("FlexLayout.react"),{justify:"all",align:"center",className:"_4uny"+(p?" _4jf_":"")+(o?" _1jua":"")},c("React").createElement(c("FlexLayout.react"),{align:"center"},s,c("React").createElement(c("InlineBlock.react"),{className:"_4unz"},j._("{percentage}",[j.param("percentage",c("formatNumber")(q,r)+"%")]))),t),this.renderLayers(q))};f.exports=n}),null);
__d("VideoComposerDialogTitleSection.react",["cx","fbt","AbstractTextInput.react","FlexLayout.react","Keys","React","VideoComposerDialogActions","VideoComposerDialogUploaderPill.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$VideoComposerDialogTitleSection3=function(event){if(event.keyCode===c("Keys").RETURN)this.$VideoComposerDialogTitleSection1&&this.$VideoComposerDialogTitleSection1.blurInput()}.bind(this),n}l.prototype.componentDidMount=function(){var m=this.$VideoComposerDialogTitleSection1;if(m&&m!==null)m.focusInput()};l.prototype.componentWillReceiveProps=function(m){var n=this.$VideoComposerDialogTitleSection1;if(n&&n!==null&&this.props.videoDuration!==m.videoDuration)n.focusInput()};l.prototype.$VideoComposerDialogTitleSection2=function(event){c("VideoComposerDialogActions").updateTitle(event.target.value)};l.prototype.render=function(){return c("React").createElement(c("FlexLayout.react"),{direction:"horizontal",justify:"all",className:"_62qs"},c("React").createElement(c("AbstractTextInput.react"),{className:"_63k1",ref:function(m){return this.$VideoComposerDialogTitleSection1=m}.bind(this),placeholder:i._("Give your video a title..."),onChange:this.$VideoComposerDialogTitleSection2,value:this.props.title,onKeyUp:this.$VideoComposerDialogTitleSection3}),this.props.showUploaderPill?c("React").createElement(c("VideoComposerDialogUploaderPill.react"),{errorMessage:this.props.errorMessage,fileName:this.props.fileName,uploadFinished:this.props.uploadFinished,uploadPercent:this.props.uploadProgress,videoDuration:this.props.videoDuration,videoWidth:this.props.videoWidth,videoHeight:this.props.videoHeight,videoSize:this.props.videoSize}):null)};f.exports=l}),null);
__d("VideoComposerDialogTitleSectionContainer.react",["FluxContainer","React","VideoComposerDialogMetadataStore","VideoComposerDialogMode","VideoComposerDialogTitleSection.react","VideoComposerDialogUIStore","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore"),c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogUploadStore")]};j.calculateState=function(){c("VideoComposerDialogUIStore").getState();var k=c("VideoComposerDialogUploadStore").getState(),l=k.errorMessage,m=k.videoFile,n=k.uploadFinished,o=k.uploadProgress,p=k.videoSize,q=c("VideoComposerDialogMetadataStore").getState(),r=q.title,s=q.dialogMode,t=q.videoDuration,u=q.videoWidth,v=q.videoHeight;return{dialogMode:s,errorMessage:l,fileName:m?m.name:"",showUploaderPill:s===c("VideoComposerDialogMode").VIDEO_UPLOAD,title:r,uploadFinished:n,uploadProgress:o,videoDuration:t?t:0,videoWidth:u?u:0,videoHeight:v?v:0,videoSize:p?p:0}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTitleSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogTrackingUtils",["WebAsyncSearchSource","XVideoCustomLabelsTypeaheadController"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){var j=c("XVideoCustomLabelsTypeaheadController").getURIBuilder().setFBID("profile_id",i).getURI();return new(c("WebAsyncSearchSource"))({bootstrapRequests:[{uri:j}],getAllForEmptyQuery:true})};f.exports={loadCustomLabelsSearchSource:h}}),null);
__d("VideoComposerDialogTrackingCustomLabels.react",["cx","fbt","React","SearchableEntry","VideoComposerDialogTrackingActions","VideoComposerDialogTrackingUtils","XUITokenizer.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={entries:this.props.customLabels.map(function(r){return new(c("SearchableEntry"))({uniqueID:r,title:r})}),queryString:"",searchSource:this.$VideoComposerDialogTrackingCustomLabels1.bind(this)()},n}l.prototype.$VideoComposerDialogTrackingCustomLabels2=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(!o)n.push(m);this.setState({entries:n,queryString:""});c("VideoComposerDialogTrackingActions").updateCustomLabels(n.map(function(p){return p.getUniqueID()}))};l.prototype.$VideoComposerDialogTrackingCustomLabels3=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(o)n.splice(n.indexOf(m),1);this.setState({entries:n,queryString:""});c("VideoComposerDialogTrackingActions").updateCustomLabels(n.map(function(p){return p.getUniqueID()}))};l.prototype.$VideoComposerDialogTrackingCustomLabels4=function(event){this.setState({queryString:event.target.value})};l.prototype.$VideoComposerDialogTrackingCustomLabels1=function(){return c("VideoComposerDialogTrackingUtils").loadCustomLabelsSearchSource(this.props.targetID)};l.prototype.render=function(){var m=[],n={},o=this.state.queryString.trim();if(o){m=[new(c("SearchableEntry"))({uniqueID:o,title:o})];n[o]=o}return c("React").createElement(c("XUITokenizer.react"),{className:"_1325",additionalEntries:m,entries:this.state.entries,excludedEntries:n,onQueryStringChange:this.$VideoComposerDialogTrackingCustomLabels4.bind(this),onAddEntryAttempt:this.$VideoComposerDialogTrackingCustomLabels2.bind(this),onRemoveEntryAttempt:this.$VideoComposerDialogTrackingCustomLabels3.bind(this),queryString:this.state.queryString,placeholder:i._("Category, Employee Name, Video Type"),searchSource:this.state.searchSource,showEntriesOnFocus:true})};f.exports=l}),null);
__d("VideoComposerDialogTrackingSection.react",["cx","fbt","React","VideoComposerDialogField.react","VideoComposerDialogTrackingActions","VideoComposerDialogTrackingCustomLabels.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.$VideoComposerDialogTrackingSection1=function(event){var m=event.target.value;c("VideoComposerDialogTrackingActions").updateUniversalID(m)};l.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogField.react"),{showTopBorder:false,title:i._("Internal Labels"),subtitle:i._("Add labels to help you search for your video. These labels are only visible to Page admins."),input:c("React").createElement(c("VideoComposerDialogTrackingCustomLabels.react"),this.props)}),c("React").createElement(c("VideoComposerDialogField.react"),{title:i._("Universal ID"),tooltip:i._("If your video has a unique code in another content management system, you can add it here. This won't affect your post."),input:c("React").createElement(c("XUITextInput.react"),{className:"_1325",height:"tall",onChange:this.$VideoComposerDialogTrackingSection1,placeholder:i._("Asset management code (Optional)"),value:this.props.universalID})}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogTrackingContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogTrackingSection.react","VideoComposerDialogTrackingStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogTrackingStore"),c("VideoComposerDialogMetadataStore")]};j.calculateState=function(){var k=c("VideoComposerDialogTrackingStore").getState(),l=k.customLabels,m=k.universalID,n=c("VideoComposerDialogMetadataStore").getState(),o=n.targetID;return{customLabels:l,targetID:o?o:"",universalID:m}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(j.getStores())};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTrackingSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogTrackingTabContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogTab","VideoComposerDialogTabItem.react","VideoComposerDialogTrackingStore","VideoComposerDialogTrackingTabConfig","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab;return{isSelected:l===c("VideoComposerDialogTab").TRACKING}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogTrackingStore")])};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTabItem.react"),babelHelpers["extends"]({tabConfig:c("VideoComposerDialogTrackingTabConfig")},this.state))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogVideoTypeSection.react",["ix","cx","fbt","FlexLayout.react","Image.react","React","VideoComposerDialogMode","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_1pbd _2pi4 _2pi9"},c("React").createElement(c("Image.react"),{src:h("391693")}),c("React").createElement("div",{className:"_3-9a"},this.props.dialogMode===c("VideoComposerDialogMode").VIDEO_EDIT?j._("Edit Video"):j._("Add Video")))};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("VideoComposerDialogVideoTypeSectionContainer.react",["FluxContainer","React","VideoComposerDialogMetadataStore","VideoComposerDialogVideoTypeSection.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogMetadataStore")]};j.calculateState=function(){var k=c("VideoComposerDialogMetadataStore").getState(),l=k.dialogMode;return{dialogMode:l}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogVideoTypeSection.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogWrapperContainer.react",["fbt","FluxContainer","React","Run","VideoComposerDialogActions","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogUIStore","VideoComposerDialogWrapper.react","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("VideoComposerDialogUIStore")]};k.calculateState=function(){var l=c("VideoComposerDialogUIStore").getState(),m=l.dialogShown,n=l.publishConfirmDialogShown,o=l.publishConfirmDialogData;return{dialogShown:m,publishConfirmDialogShown:n,publishConfirmDialogData:o}};k.prototype.componentWillMount=function(){c("Run").onBeforeUnload(function(){if(!this.state.dialogShown)return null;return h._("Changes you made may not be saved.")}.bind(this));c("Run").onLeave(function(){c("VideoComposerDialogActions").navigatedFromPage()});c("Run").onUnload(function(){c("VideoComposerDialogActions").navigatedFromPage()});c("VideoComposerDialogDispatcher").explicitlyRegisterStores(k.getStores().concat([c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogUploadStore")]))};k.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogWrapper.react"),babelHelpers["extends"]({className:this.props.className},this.state))};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("VideoComposerDialogCaptionEditorCaptionsListGenerator.react",["VideoComposerDialogCaptionEditorConstants","immutable","React","RelayCompat","VideoComposerDialogCaptionEditorActions","VideoComposerDialogCaptionEditorListSectionContainer.react","VideoComposerDialogDispatcher","VideoCaptionPlacements","VideoComposerDialogCaptionEditorCaptionsListGenerator_node.graphql"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("RelayCompat").createFragmentContainer,k=c("RelayCompat").graphql;h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;l.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(c("VideoComposerDialogCaptionEditorListSectionContainer.react").getStores());this.$VideoComposerDialogCaptionEditorCaptionsListGenerator1()};l.prototype.componentWillReceiveProps=function(m){if(this.props.id!==m.id||JSON.stringify(this.props.node)!==JSON.stringify(m.node))this.$VideoComposerDialogCaptionEditorCaptionsListGenerator1()};l.prototype.$VideoComposerDialogCaptionEditorCaptionsListGenerator1=function(){__p&&__p();var m=this.props.node.captions;if(m&&m.edges){var n=m.edges.map(function(o,p){if(o.node){var q={node:{id:o.node.id,text:o.node.text,start_time_in_ms:o.node.start_time_in_ms,duration_in_ms:o.node.duration_in_ms,confidence:o.node.confidence,left:(o.node.start_time_in_ms?o.node.start_time_in_ms:0)*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT,width:(o.node.duration_in_ms?o.node.duration_in_ms:0)*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT}};return q}return{}});c("VideoComposerDialogCaptionEditorActions").setCaptions(c("immutable").List(n),this.props.node.id,this.props.node.locale,this.props.node.video_id,null,c("VideoCaptionPlacements").PAGE_COMPOSER_EDIT)}};l.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogCaptionEditorListSectionContainer.react"),null)};function l(){h.apply(this,arguments)}f.exports=j(l,{node:{modern:function m(){return c("VideoComposerDialogCaptionEditorCaptionsListGenerator_node.graphql")},classic:function m(n){return{kind:"FragmentDefinition",argumentDefinitions:[],node:function(){return{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"locale",kind:"Field",metadata:{},type:"String"},{fieldName:"process_status",kind:"Field",metadata:{},type:"VideoSubtitleStatus"},{fieldName:"review_expire_time",kind:"Field",metadata:{},type:"Time"},{fieldName:"video_id",kind:"Field",metadata:{},type:"ID"},{calls:[{kind:"Call",metadata:{type:"[VideoSubtitleCaptionsOrdering]"},name:"orderby",value:[{kind:"CallValue",callValue:"chronological"}]},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:3e3}}],children:[{children:[{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"text",kind:"Field",metadata:{},type:"String"},{fieldName:"start_time_in_ms",kind:"Field",metadata:{},type:"Int"},{fieldName:"duration_in_ms",kind:"Field",metadata:{},type:"Int"},{fieldName:"confidence",kind:"Field",metadata:{},type:"Float"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:true},type:"VideoSubtitleCaption"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"VideoSubtitleCaptionsEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"captions",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:"VideoSubtitleCaptionsConnection"}],id:n.__id(),kind:"Fragment",metadata:{},name:"VideoComposerDialogCaptionEditorCaptionsListGenerator_node",type:"VideoSubtitle"}}()}}}})}),null);
__d("VideoComposerDialogCaptionEditorFooter.react",["ix","cx","fbt","FBConfirmDialog.react","LeftRight.react","React","VideoCaptionEditorStateEnums","XUIButton.react","fbglyph","Image.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("VideoCaptionEditorStateEnums").EditorStateEnum;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){var o=j._("Saved");if(this.props.editorState===m.SAVING)o=j._("Saving...");else if(this.props.editorState===m.UNSAVED)o=j._("Unsaved");return c("React").createElement("span",{className:"_647o"},c("React").createElement("span",{className:"_647p"},c("React").createElement("span",{className:"_647q"},c("React").createElement("span",{className:"_647r"},c("React").createElement(c("Image.react"),{src:h("126813")})),c("React").createElement("span",{className:"_647s"},o)),c("React").createElement("span",null,c("React").createElement(c("XUIButton.react"),{disabled:this.props.disableSection,href:"#",onClick:this.props.onCancel,label:j._("Cancel"),size:"xlarge",use:"default"}),c("React").createElement(c("XUIButton.react"),{disabled:this.props.editorState!==m.UNSAVED,href:"#",onClick:this.props.onSaveDraft,label:j._("Save Draft"),size:"xlarge",use:"confirm"})),c("React").createElement(c("FBConfirmDialog.react"),{className:"_2rjw",title:j._("Save"),content:j._("Save changes to your caption?"),confirmButtonText:j._("Save"),cancelButtonText:j._("Exit without saving"),onConfirm:function(){return this.props.onConfirm&&this.props.onConfirm()}.bind(this),onCancel:function(){return this.props.onDontSave&&this.props.onDontSave()}.bind(this),onToggle:function(p){return this.props.onToggle&&this.props.onToggle(p)}.bind(this),shown:this.props.shouldShowExitDialog})))};function n(){k.apply(this,arguments)}f.exports=n}),null);
__d("VideoComposerDialogCaptionEditorFooterContainer.react",["VideoCaptionEditorStateEnums","VideoComposerDialogCaptionEditorActions","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionsStore","VideoComposerDialogCaptionsTabActions","FluxContainer","React","VideoComposerDialogCaptionEditorFooter.react","VideoComposerDialogCaptionEditorStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("VideoCaptionEditorStateEnums").EditorStateEnum;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$VideoComposerDialogCaptionEditorFooterContainer2=function(){if(this.state.editorState===j.UNSAVED)c("VideoComposerDialogCaptionEditorActions").showExitDialog();else{c("VideoComposerDialogCaptionEditorActions").confirmCloseDialog();c("VideoComposerDialogCaptionEditorActions").resetCaptionEditor()}}.bind(this),m}k.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore"),c("VideoComposerDialogCaptionsStore")]};k.calculateState=function(){var l=c("VideoComposerDialogCaptionEditorStore").getState(),m=c("VideoComposerDialogCaptionsStore").getState(),n=l.language===c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED||l.language===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE||m.isCreating;return{disableSection:n,editorState:l.editorState,shouldShowExitDialog:l.get("shouldShowExitDialog")}};k.prototype.$VideoComposerDialogCaptionEditorFooterContainer1=function(){c("VideoComposerDialogCaptionEditorActions").startSaveCaptionChangeset()};k.prototype.$VideoComposerDialogCaptionEditorFooterContainer3=function(l){if(!l)c("VideoComposerDialogCaptionEditorActions").cancelCloseDialog()};k.prototype.$VideoComposerDialogCaptionEditorFooterContainer4=function(){c("VideoComposerDialogCaptionEditorActions").startSaveCaptionChangeset()};k.prototype.$VideoComposerDialogCaptionEditorFooterContainer5=function(){c("VideoComposerDialogCaptionEditorActions").confirmCloseDialog();c("VideoComposerDialogCaptionEditorActions").resetCaptionEditor()};k.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogCaptionEditorFooter.react"),{disableSection:this.state.disableSection,editorState:this.state.editorState,onSaveDraft:this.$VideoComposerDialogCaptionEditorFooterContainer1,onCancel:this.$VideoComposerDialogCaptionEditorFooterContainer2,shouldShowExitDialog:this.state.shouldShowExitDialog,onConfirm:this.$VideoComposerDialogCaptionEditorFooterContainer4,onDontSave:this.$VideoComposerDialogCaptionEditorFooterContainer5,onToggle:this.$VideoComposerDialogCaptionEditorFooterContainer3})};f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogLandingScreenLanguageSelector.react",["ix","cx","fbt","ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","Image.react","LanguageDialectInlineTypeahead.react","LanguageDialectRenderStyle","LayerAutoFocus","LayerHideOnBlur","LayerHideOnEscape","React","VideoComposerDialogCaptionEditorConstants","XUIPopoverButton.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m="xx_XX";k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(o){__p&&__p();l.constructor.call(this,o);this.$VideoComposerDialogLandingScreenLanguageSelector2=function(p){this.setState({selectedDialectName:p.getTitle(),isOpen:false});var q=this.props.onSetDialect;if(q)q(p.getUniqueID());this.props.onSetDialectName(p.getTitle())}.bind(this);this.$VideoComposerDialogLandingScreenLanguageSelector4=function(){this.setState({isOpen:!this.state.isOpen})}.bind(this);this.$VideoComposerDialogLandingScreenLanguageSelector5=function(p){this.setState({isOpen:p})}.bind(this);this.state={selectedDialectName:this.props.initialDialectName?this.props.initialDialectName:j._("Select Language"),isOpen:this.props.initiallyOpen}}n.prototype.$VideoComposerDialogLandingScreenLanguageSelector3=function(){return j._("Show available languages")};n.prototype.render=function(){var o=this.props.initialDialectName!==c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED&&this.props.initialDialectName!==c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE,p=(this.props.hasBorder===false?"_3y9v":"")+(!o?" _39d7":""),q=c("React").createElement("span",null,this.state.selectedDialectName),r=this.props.hasBorder===false?c("React").createElement("span",null,c("React").createElement("span",{className:(o?"_3y9w":"")+(!o?" _39d8":"")},j._("Caption Language:")),c("React").createElement("span",{className:"_3y9x"},q)):c("React").createElement("span",{className:(o?"_3y9x":"")+(!o?" _39eb":"")},q),s=this.props.hasBorder===false?300:200,t=c("React").createElement(c("XUIPopoverButton.react"),{className:p,hasChevron:true,label:r,image:c("React").createElement(c("Image.react"),{src:o?h("125257"):h("134869")}),maxwidth:s,onClick:this.$VideoComposerDialogLandingScreenLanguageSelector4,size:"xlarge",ref:function(u){return this.$VideoComposerDialogLandingScreenLanguageSelector1=u}.bind(this)});return c("React").createElement("span",{className:this.props.className},t,c("React").createElement(c("ContextualLayer.react"),{alignment:"left",autofocus:true,behaviors:{ContextualLayerAutoFlip:c("ContextualLayerAutoFlip"),ContextualLayerUpdateOnScroll:c("ContextualLayerUpdateOnScroll"),LayerAutoFocus:c("LayerAutoFocus"),LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape")},contextRef:function(){return this.$VideoComposerDialogLandingScreenLanguageSelector1}.bind(this),position:"below",onToggle:this.$VideoComposerDialogLandingScreenLanguageSelector5,shown:this.state.isOpen},c("React").createElement("div",{className:"_5ge1"},c("React").createElement(c("LanguageDialectInlineTypeahead.react"),{dialectType:this.props.dialectType,onSelect:this.$VideoComposerDialogLandingScreenLanguageSelector2,placeholder:this.props.placeholder,excludedDialects:this.props.excludedDialects,hasCategories:this.props.hasCategories,renderStyle:this.props.renderStyle}))))};n.defaultProps={initialDialect:m,hasCategories:false,renderStyle:c("LanguageDialectRenderStyle").DEFAULT,initiallyOpen:false};f.exports=n}),null);
__d("VideoComposerDialogCaptionEditorLanguageSearchContainer.react",["cx","LanguageDialectRenderStyle","LanguageDialectSetTypes","VideoComposerDialogCaptionEditorActions","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorStore","FluxContainer","React","VideoComposerDialogCaptionEditorUtils","VideoComposerDialogCaptionsStore","VideoComposerDialogLandingScreenLanguageSelector.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore"),c("VideoComposerDialogCaptionsStore")]};k.calculateState=function(){var l=c("VideoComposerDialogCaptionEditorStore").getLanguage(),m=c("VideoComposerDialogCaptionsStore").getState(),n=this.$VideoComposerDialogCaptionEditorLanguageSearchContainer1(m,l);return{language:l,excludedDialects:n}};k.prototype.$VideoComposerDialogCaptionEditorLanguageSearchContainer2=function(l){c("VideoComposerDialogCaptionEditorActions").selectLanguage(l)};k.prototype.$VideoComposerDialogCaptionEditorLanguageSearchContainer3=function(l){c("VideoComposerDialogCaptionEditorActions").selectLocale(l)};k.$VideoComposerDialogCaptionEditorLanguageSearchContainer1=function(l,m){var n=l.drafts,o=l.autoGeneratingLocale,p=[];if(o)p.push(c("VideoComposerDialogCaptionEditorUtils").getGenericLocale(o));n.map(function(q){if(q.language!==m)p.push(c("VideoComposerDialogCaptionEditorUtils").getGenericLocale(q.locale))});return p};k.prototype.render=function(){var l=this.state.language===c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED||this.state.language===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE,m="_1sfh"+(!l?" _2sq3":"");return c("React").createElement(c("VideoComposerDialogLandingScreenLanguageSelector.react"),{className:m,dialectType:c("LanguageDialectSetTypes").LANGUAGE_DETECTION,excludedDialects:this.state.excludedDialects,initialDialectName:this.state.language,initiallyOpen:l,hasBorder:false,placeholder:c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED,renderStyle:c("LanguageDialectRenderStyle").DEFAULT,onSetDialectName:function(n){return this.$VideoComposerDialogCaptionEditorLanguageSearchContainer2(n)}.bind(this),onSetDialect:function(n){return this.$VideoComposerDialogCaptionEditorLanguageSearchContainer3(n)}.bind(this)})};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogCaptionEditorEditItem.react",["ix","cx","fbt","DialogExpansion","Image.react","React","ReactDOM","Tooltip","VideoCaptionTimestamp.react","VideoComposerDialogCaptionEditorConstants","XUIDialog.react","XUIDialogTitle.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIError.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={text:this.props.captionData.node.text,lastTextEntryTimeinMS:null},this.$VideoComposerDialogCaptionEditorEditItem2=function(event){this.setState({text:event.target.value,lastTextEntryTimeinMS:Date.now()});this.props.onStartTyping();var t=setTimeout(function(){var u=Date.now();if(this.state.lastTextEntryTimeinMS&&u-this.state.lastTextEntryTimeinMS>=c("VideoComposerDialogCaptionEditorConstants").RESUME_PLAYBACK_AFTER){this.props.onStopTyping();clearTimeout(t)}}.bind(this),c("VideoComposerDialogCaptionEditorConstants").RESUME_PLAYBACK_AFTER)}.bind(this),this.$VideoComposerDialogCaptionEditorEditItem1=function(){this.state.text!==this.props.captionData.node.text&&this.props.onTextChange&&this.props.onTextChange(this.state.text)}.bind(this),this.$VideoComposerDialogCaptionEditorEditItem5=function(t){if(!t)this.props.onHandleDialogCancel()}.bind(this),p}n.prototype.componentDidMount=function(){if(this.props.isSelected){var o=c("ReactDOM").findDOMNode(this);this.props.onScrollIntoView&&this.props.onScrollIntoView(o)}};n.prototype.componentDidUpdate=function(o){__p&&__p();if(this.props.isSelected&&!o.isSelected){var p=c("ReactDOM").findDOMNode(this);this.props.onScrollIntoView&&this.props.onScrollIntoView(p)}if(!this.props.isSelected&&o.isSelected){this.refs.textInput&&this.refs.textInput.blur();this.refs.timestamp&&this.refs.timestamp.blur()}if(this.props.captionData!=o.captionData)this.setState({text:this.props.captionData.node.text})};n.prototype.render=function(){var o="_2sdr"+(this.props.isHovered&&!this.props.isSelected?" _2sds":"")+(!this.props.isSelected?" _2sdt":"")+(this.props.isSelected?" _2sdu":""),p=this.props.captionData.node,q=this.props.emptyTextWarning?j._("Empty text is not allowed"):null;return c("React").createElement("div",{className:o,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,role:"presentation"},c("React").createElement("span",{className:"_2sdv"},c("React").createElement("div",{className:"_4_9q"},c("React").createElement("span",{className:"_3o8u"},c("React").createElement(c("VideoCaptionTimestamp.react"),{durationTimeInMs:p.duration_in_ms,isSelected:this.props.isSelected,maxTime:this.props.maxTime,minTime:this.props.minTime,onTimeChange:this.props.onTimeChange,startTimeInMs:p.start_time_in_ms,ref:"timestamp"}))),c("React").createElement(c("XUIError.react"),{error:q},c("React").createElement("textarea",{className:"_2sdw",maxLength:c("VideoComposerDialogCaptionEditorConstants").SEGMENT_LENGTH,ref:"textInput",name:"caption-text",placeholder:"Type in or paste your text here...",value:this.state.text,onBlur:this.$VideoComposerDialogCaptionEditorEditItem1,onChange:this.$VideoComposerDialogCaptionEditorEditItem2}))),c("React").createElement("div",{className:"_2sdx"},this.$VideoComposerDialogCaptionEditorEditItem3(),this.$VideoComposerDialogCaptionEditorEditItem4()),this.renderLayers())};n.prototype.$VideoComposerDialogCaptionEditorEditItem3=function(){var o=c("React").createElement(c("Image.react"),{src:this.props.emptyTextWarning?h("117905"):h("125915")});return this.props.isHovered||this.props.isSelected?c("React").createElement("span",babelHelpers["extends"]({"data-tooltip-alignh":"center","data-tooltip-position":"left",onClick:this.props.onAttemptDelete},c("Tooltip").propsFor(j._("Delete")),{role:"button",tabIndex:"0"}),o):null};n.prototype.$VideoComposerDialogCaptionEditorEditItem4=function(){return(this.props.isHovered||this.props.isSelected)&&!this.props.hideInsertButton?c("React").createElement("span",babelHelpers["extends"]({"data-tooltip-alignh":"center","data-tooltip-position":"left",role:"button",tabIndex:"0",onClick:this.props.onInsert},c("Tooltip").propsFor(j._("Insert New"))),c("React").createElement(c("Image.react"),{src:h("126616")})):null};n.prototype.renderLayers=function(){return c("React").createElement(c("XUIDialog.react"),{behaviors:{DialogExpansion:c("DialogExpansion")},layerHideOnBlur:false,shown:this.props.showDeleteConfirmDialog,width:400,onToggle:this.$VideoComposerDialogCaptionEditorEditItem5,key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),null,j._("Delete Caption")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("XUIText.react"),{size:"body2",display:"block"},j._("This caption segment will be deleted from your video's captions. You can add or edit more caption segments later."))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{label:j._("Cancel"),use:"default",onClick:this.props.onHandleDialogCancel}),c("React").createElement(c("XUIDialogButton.react"),{label:j._("Delete Caption"),onClick:this.props.onHandleDialogConfirm,use:"confirm"})))};n.propTypes={captionData:m.object.isRequired,hideInsertButton:m.bool,isHovered:m.bool,isSelected:m.bool.isRequired,emptyTextWarning:m.bool,maxTime:m.number,minTime:m.number,quality:m.number,showDeleteConfirmDialog:m.bool.isRequired,onAttemptDelete:m.func.isRequired,onClick:m.func.isRequired,onEditingCaptionEntry:m.func.isRequired,onHandleDialogConfirm:m.func.isRequired,onHandleDialogCancel:m.func.isRequired,onInsert:m.func.isRequired,onMouseEnter:m.func,onMouseLeave:m.func,onScrollIntoView:m.func,onTextChange:m.func.isRequired,onTimeChange:m.func.isRequired,onStartTyping:m.func.isRequired,onStopTyping:m.func.isRequired};f.exports=n}),null);
__d("VideoComposerDialogCaptionEditorEditItemContainer.react",["React","VideoComposerDialogCaptionEditorActions","VideoCaptionEditorConfig","VideoComposerDialogCaptionEditorEditItem.react","VideoComposerDialogCaptionEditorConstants","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoCaptionEditorStateEnums"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("VideoCaptionEditorStateEnums").TimestampTypes,k=c("VideoCaptionEditorStateEnums").VideoCaptionQualityEnum;h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={isHovered:false,showDeleteConfirmDialog:false,emptyTextWarning:false},this.$VideoComposerDialogCaptionEditorEditItemContainer2=function(event){if(/^\s+$/.test(this.props.captionData.node.text))this.$VideoComposerDialogCaptionEditorEditItemContainer13();else this.setState({showDeleteConfirmDialog:true});event.stopPropagation()}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer3=function(event){this.props.onClick&&this.props.onClick()}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer6=function(){this.setState({showDeleteConfirmDialog:false})}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer5=function(){if(this.state.showDeleteConfirmDialog)this.$VideoComposerDialogCaptionEditorEditItemContainer13()}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer7=function(event){var r=this.props.captionData.node.start_time_in_ms+this.props.captionData.node.duration_in_ms,s=this.props.maxTime?this.props.maxTime-r:Number.MAX_VALUE;this.props.onInsert&&this.props.onInsert(r,s);event.stopPropagation()}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer8=function(){this.setState({isHovered:true})}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer9=function(){this.setState({isHovered:false})}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer4=function(r){if(r==="")this.setState({emptyTextWarning:true});else this.setState({emptyTextWarning:false});this.$VideoComposerDialogCaptionEditorEditItemContainer14({text:r})}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer10=function(r,s){if(s===j.START_TIME)this.$VideoComposerDialogCaptionEditorEditItemContainer16(r);else this.$VideoComposerDialogCaptionEditorEditItemContainer15(r)}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer11=function(){this.props.vpc&&this.props.vpc.pause()}.bind(this),this.$VideoComposerDialogCaptionEditorEditItemContainer12=function(){this.props.vpc&&this.props.vpc.getCurrentTimePosition()*1e3<(this.props.maxTime?this.props.maxTime:0)&&this.props.vpc.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").AUTOPLAY))}.bind(this),n}l.prototype.componentDidUpdate=function(m){if(this.props.isSelected===m.isSelected)return};l.prototype.render=function(){var m=this.$VideoComposerDialogCaptionEditorEditItemContainer1(),n=this.props.captionData.node.confidence||1,o=n<c("VideoCaptionEditorConfig").caption_quality_threhold_good?k.POOR:k.GOOD;return c("React").createElement(c("VideoComposerDialogCaptionEditorEditItem.react"),{captionData:this.props.captionData,hideInsertButton:m,isHovered:this.state.isHovered,isSelected:this.props.isSelected,emptyTextWarning:this.state.emptyTextWarning,maxTime:this.props.maxTime,minTime:this.props.minTime,quality:o,showDeleteConfirmDialog:this.state.showDeleteConfirmDialog,onAttemptDelete:this.$VideoComposerDialogCaptionEditorEditItemContainer2,onClick:this.$VideoComposerDialogCaptionEditorEditItemContainer3,onEditingCaptionEntry:this.$VideoComposerDialogCaptionEditorEditItemContainer4,onHandleDialogConfirm:this.$VideoComposerDialogCaptionEditorEditItemContainer5,onHandleDialogCancel:this.$VideoComposerDialogCaptionEditorEditItemContainer6,onInsert:this.$VideoComposerDialogCaptionEditorEditItemContainer7,onMouseEnter:this.$VideoComposerDialogCaptionEditorEditItemContainer8,onMouseLeave:this.$VideoComposerDialogCaptionEditorEditItemContainer9,onScrollIntoView:this.props.onScrollIntoView,onTextChange:this.$VideoComposerDialogCaptionEditorEditItemContainer4,onTimeChange:this.$VideoComposerDialogCaptionEditorEditItemContainer10,onStartTyping:this.$VideoComposerDialogCaptionEditorEditItemContainer11,onStopTyping:this.$VideoComposerDialogCaptionEditorEditItemContainer12})};l.prototype.$VideoComposerDialogCaptionEditorEditItemContainer14=function(m){var n={node:{id:this.props.captionData.node.id,confidence:this.props.captionData.node.confidence,text:this.props.captionData.node.text,duration_in_ms:this.props.captionData.node.duration_in_ms,start_time_in_ms:this.props.captionData.node.start_time_in_ms,left:(this.props.captionData.node.start_time_in_ms?this.props.captionData.node.start_time_in_ms:c("VideoComposerDialogCaptionEditorConstants").START_TIME_OFFSET_IN_MS)*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT,width:(this.props.captionData.node.duration_in_ms?this.props.captionData.node.duration_in_ms:c("VideoComposerDialogCaptionEditorConstants").DURATION_TIME_IN_MS)*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT}};for(var o in m)n.node[o]=m[o];n.node.confidence=1;c("VideoComposerDialogCaptionEditorActions").editingCaptionEntry(this.props.index,n)};l.prototype.$VideoComposerDialogCaptionEditorEditItemContainer15=function(m){this.$VideoComposerDialogCaptionEditorEditItemContainer14({duration_in_ms:m})};l.prototype.$VideoComposerDialogCaptionEditorEditItemContainer16=function(m){var n=this.props.captionData.node.start_time_in_ms,o=n+this.props.captionData.node.duration_in_ms;this.$VideoComposerDialogCaptionEditorEditItemContainer14({start_time_in_ms:m,duration_in_ms:o-m})};l.prototype.$VideoComposerDialogCaptionEditorEditItemContainer13=function(){c("VideoComposerDialogCaptionEditorActions").removeCaptionEntry(this.props.index);this.setState({showDeleteConfirmDialog:false,emptyTextWarning:false})};l.prototype.$VideoComposerDialogCaptionEditorEditItemContainer1=function(){if(!this.props.maxTime)return false;var m=this.props.captionData.node.start_time_in_ms+this.props.captionData.node.duration_in_ms,n=this.props.maxTime-m;return n<=c("VideoCaptionEditorConfig").min_duration_to_insert};f.exports=l}),null);
__d("VideoComposerDialogCaptionEditorInsertCaptionItem.react",["ix","cx","fbt","Image.react","React","Tooltip","VideoComposerDialogCaptionEditorConstants","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.state={text:""},this.$VideoComposerDialogCaptionEditorInsertCaptionItem1=function(event){this.setState({text:event.target.value})}.bind(this),o}m.prototype.$VideoComposerDialogCaptionEditorInsertCaptionItem2=function(){return this.props.maxDuration<=c("VideoComposerDialogCaptionEditorConstants").START_TIME_OFFSET_IN_MS};m.prototype.render=function(){return c("React").createElement("span",{className:"_39yu"+(this.$VideoComposerDialogCaptionEditorInsertCaptionItem2()?" _2sq3":"")},c("React").createElement("span",{className:"_39yv"},c("React").createElement("span",babelHelpers["extends"]({className:"_39yw","data-tooltip-alignh":"center","data-tooltip-position":"left",role:"button",tabIndex:"0",onClick:this.$VideoComposerDialogCaptionEditorInsertCaptionItem2()?undefined:function(){this.props.onInsert(0,this.props.maxDuration,this.state.text);this.setState(function(n,o){return{text:""}})}.bind(this)},c("Tooltip").propsFor(this.$VideoComposerDialogCaptionEditorInsertCaptionItem2()?j._("Too Short to Insert New"):j._("Insert New"))),c("React").createElement(c("Image.react"),{src:this.$VideoComposerDialogCaptionEditorInsertCaptionItem2()?h("118606"):h("126616")})),c("React").createElement("span",{className:"_39yx"},c("React").createElement("textarea",{className:"_39yy",ref:"newCaption",name:"caption-text",placeholder:"Type in or paste your text here...",value:this.state.text,onChange:this.$VideoComposerDialogCaptionEditorInsertCaptionItem1,rows:"1"}))))};f.exports=m}),null);
__d("VideoComposerDialogCaptionEditorListSectionContainer.react",["cx","ScrollableArea.react","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorInsertCaptionItem.react","VideoComposerDialogDispatcher","immutable","FluxContainer","React","VideoComposerDialogCaptionEditorEditItemContainer.react","VideoComposerDialogCaptionEditorStore","VideoComposerDialogCaptionEditorActions","VideoPlayerController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore")]};k.calculateState=function(){return{captions:c("VideoComposerDialogCaptionEditorStore").getCaptions(),vpc:c("VideoComposerDialogCaptionEditorStore").getVPC(),captionSelected:c("VideoComposerDialogCaptionEditorStore").getState().captionSelected,videoDuration:c("VideoComposerDialogCaptionEditorStore").getState().videoDuration}};k.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(k.getStores())};k.prototype.$VideoComposerDialogCaptionEditorListSectionContainer1=function(l){this.refs.ScrollableArea&&this.refs.ScrollableArea.getArea()&&this.refs.ScrollableArea.getArea().scrollIntoView(l)};k.prototype.$VideoComposerDialogCaptionEditorListSectionContainer2=function(l,m,n,o){if(n<c("VideoComposerDialogCaptionEditorConstants").START_TIME_OFFSET_IN_MS)return;var p={node:{id:"",text:o,start_time_in_ms:m+c("VideoComposerDialogCaptionEditorConstants").START_TIME_OFFSET_IN_MS,duration_in_ms:Math.min(n,c("VideoComposerDialogCaptionEditorConstants").DURATION_TIME_IN_MS)-c("VideoComposerDialogCaptionEditorConstants").START_TIME_OFFSET_IN_MS,confidence:1,left:(m+c("VideoComposerDialogCaptionEditorConstants").START_TIME_OFFSET_IN_MS)*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT,width:(Math.min(n,c("VideoComposerDialogCaptionEditorConstants").DURATION_TIME_IN_MS)-c("VideoComposerDialogCaptionEditorConstants").START_TIME_OFFSET_IN_MS)*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT}};c("VideoComposerDialogCaptionEditorActions").addCaptionEntry(l,p);c("VideoComposerDialogCaptionEditorActions").setPreviewEntry(l)};k.prototype.$VideoComposerDialogCaptionEditorListSectionContainer3=function(){var l=this.state.captions,m=l.size>0?l.map(function(n,o){return c("React").createElement(c("VideoComposerDialogCaptionEditorEditItemContainer.react"),{key:o,index:o,captionData:n,vpc:this.state.vpc,isSelected:o===this.state.captionSelected,maxTime:l.size>0&&o<l.size-1?l.get(o+1).node.start_time_in_ms:this.state.videoDuration,minTime:l.size>0&&o>0?l.get(o-1).node.start_time_in_ms+l.get(o-1).node.duration_in_ms:0,onClick:function p(){return c("VideoComposerDialogCaptionEditorActions").playPreviewEntry(o)},onScrollIntoView:function(p){return this.$VideoComposerDialogCaptionEditorListSectionContainer1(p)}.bind(this),onInsert:function(p,q){return this.$VideoComposerDialogCaptionEditorListSectionContainer2(o+1,p,q,c("VideoComposerDialogCaptionEditorConstants").EMPTY_CAPTION_TEXT)}.bind(this)})}.bind(this)):c("immutable").List();return m};k.prototype.render=function(){var l=this.state.captions,m=this.$VideoComposerDialogCaptionEditorListSectionContainer3(),n=c("React").createElement(c("VideoComposerDialogCaptionEditorInsertCaptionItem.react"),{key:"insert",maxDuration:l.size>0?l.get(0).node.start_time_in_ms:this.state.videoDuration,onInsert:function(o,p,q){return this.$VideoComposerDialogCaptionEditorListSectionContainer2(0,o,p,q)}.bind(this)});m=m.splice(0,0,n);return c("React").createElement(c("ScrollableArea.react"),{ref:"ScrollableArea",className:"_1j96"},m)};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogCaptionEditorMasterContainer.react",["FluxContainer","React","VideoComposerDialogCaptionsContainer.react","VideoComposerDialogMetadataStore","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogUploadStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUploadStore").getState(),l=c("VideoComposerDialogMetadataStore").getState(),m=k.videoUploader?k.videoUploader:null,n=m===null;return{accessToken:l.accessToken,video_id:l.videoID?l.videoID:"",videoFile:k.videoFile,composerID:null,pageID:l.targetID?l.targetID:"",isVideoUploaded:k.uploadFinished,videoDurationInSec:l.videoDuration,isEditFlow:n}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogCaptionsContainer.react"),this.state)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogCaptionEditorPlayerLoading.react",["cx","React","SUIAtlasTheme","SUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("span",{className:"_178i"},c("React").createElement("span",{className:"_178j"},c("React").createElement(c("SUISpinner.react"),{theme:c("SUIAtlasTheme")}),c("React").createElement("span",null,this.props.text)))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("VideoComposerDialogCaptionEditorPlayerSectionBodyContainer.react",["fbt","RelayModern","RelayFBEnvironment","React","VideoComposerDialogCaptionEditorPlayerLoading.react","VideoComposerDialogCaptionEditorVideoPlayerContainer.react","VideoComposerDialogCaptionEditorPlayerSectionBodyContainerRelayQuery.graphql"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l=c("RelayModern").QueryRenderer,m=c("RelayModern").graphql;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){return c("React").createElement("div",null," ",c("React").createElement(l,{cacheConfig:{force:true},environment:c("RelayFBEnvironment"),query:i||(i=function i(){return c("VideoComposerDialogCaptionEditorPlayerSectionBodyContainerRelayQuery.graphql")}),variables:{video_id:this.props.video_id},render:function o(p){var q=p.error,r=p.props;if(q)return c("React").createElement("div",null,q.message);else if(r)return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogCaptionEditorVideoPlayerContainer.react"),{isProcessing:false,video:r.node}));return c("React").createElement(c("VideoComposerDialogCaptionEditorPlayerLoading.react"),{text:h._("Loading Video")})}}))};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d("VideoComposerDialogCaptionEditorExit.react",["ix","cx","Image.react","React","SUILink.react","SUIText.react","SUIBusinessTheme","fbglyph"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){__p&&__p();var m=c("React").createElement(c("Image.react"),{src:h("124201")});switch(this.props.chevronSize){case"12":m=c("React").createElement(c("Image.react"),{src:h("124199")});break;case"16":m=c("React").createElement(c("Image.react"),{src:h("124200")});break;case"24":m=c("React").createElement(c("Image.react"),{src:h("124202")});break}var n=this.props.textSize?this.props.textSize:"medium",o=this.props.weight?this.props.weight:"normal";return c("React").createElement("div",{role:"link",tabIndex:0,style:{alignItems:"center",display:"flex"},onClick:this.props.onClick},c("React").createElement("span",{className:"_1l53"},m),c("React").createElement(c("SUILink.react"),{theme:c("SUIBusinessTheme"),showUnderline:"never"},c("React").createElement(c("SUIText.react"),{cursor:"none",display:"block",size:n,weight:o},this.props.label)))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogCaptionEditorPlayerSectionHeader.react",["cx","fbt","FBConfirmDialog.react","React","VideoComposerDialogCaptionEditorExit.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_2908"},c("React").createElement(c("VideoComposerDialogCaptionEditorExit.react"),{chevClassName:"_1l53",chevronSize:"20",textSize:"medium",weight:"bold",label:i._("Captions").toString(),onClick:this.props.onClick}),c("React").createElement(c("FBConfirmDialog.react"),{className:"_2rjw",title:i._("Save"),content:i._("Save changes to your caption?"),confirmButtonText:i._("Save"),cancelButtonText:i._("Exit without saving"),onConfirm:function(){return this.props.onConfirm&&this.props.onConfirm()}.bind(this),onCancel:function(){return this.props.onDontSave&&this.props.onDontSave()}.bind(this),onToggle:function(m){return this.props.onToggle&&this.props.onToggle(m)}.bind(this),shown:this.props.shouldShowExitDialog}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer.react",["VideoCaptionEditorStateEnums","React","FluxContainer","VideoComposerDialogCaptionEditorActions","VideoComposerDialogCaptionEditorPlayerSectionHeader.react","VideoComposerDialogCaptionEditorStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("VideoCaptionEditorStateEnums").EditorStateEnum;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer1=function(){if(this.state.editorState===j.UNSAVED)c("VideoComposerDialogCaptionEditorActions").showExitDialog();else{c("VideoComposerDialogCaptionEditorActions").confirmCloseDialog();c("VideoComposerDialogCaptionEditorActions").resetCaptionEditor()}}.bind(this),m}k.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore")]};k.calculateState=function(){var l=c("VideoComposerDialogCaptionEditorStore").getState();return{editorState:l.get("editorState"),shouldShowExitDialog:l.get("shouldShowExitDialog")}};k.prototype.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer2=function(l){if(!l)c("VideoComposerDialogCaptionEditorActions").cancelCloseDialog()};k.prototype.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer3=function(){c("VideoComposerDialogCaptionEditorActions").startSaveCaptionChangeset()};k.prototype.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer4=function(){c("VideoComposerDialogCaptionEditorActions").confirmCloseDialog();c("VideoComposerDialogCaptionEditorActions").resetCaptionEditor()};k.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogCaptionEditorPlayerSectionHeader.react"),{onClick:this.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer1,shouldShowExitDialog:this.state.shouldShowExitDialog,onConfirm:this.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer3,onDontSave:this.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer4,onToggle:this.$VideoComposerDialogCaptionEditorPlayerSectionHeaderContainer2})};f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogCaptionEditorPlayhead.react",["cx","React","ReactDOM","VideoComposerDialogCaptionEditorConstants"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.state={positionInMs:0,poller:null}}k.prototype.componentWillReceiveProps=function(l){__p&&__p();var m,n=this,o=c("ReactDOM").findDOMNode(this);o.scrollIntoView({block:"center",inline:"center"});if(l.isPlaying)(function(){var p=false,q=setInterval(function(){if(p)return;p=true;this.setState({positionInMs:this.props.vpc?this.props.vpc.getCurrentTimePosition()*1e3:0,poller:q});p=false}.bind(n),1)})();if(!l.isPlaying&&this.state.poller){clearInterval(this.state.poller);this.setState({positionInMs:this.props.vpc?this.props.vpc.getCurrentTimePosition()*1e3:0,poller:null});return}};k.prototype.componentDidUpdate=function(l,m){var n=c("ReactDOM").findDOMNode(this);n.scrollIntoView({block:"center",inline:"center"});if(m.poller!==this.state.poller&&m.poller!==null)clearInterval(m.poller)};k.prototype.render=function(){return c("React").createElement("span",null,c("React").createElement("span",{className:"_kzx",style:{left:this.state.positionInMs*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT-4}}),c("React").createElement("span",{className:"_kzw",style:{left:this.state.positionInMs*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT}}))};f.exports=k}),null);
__d("VideoComposerDialogCaptionEditorPlayheadContainer.react",["FluxContainer","React","VideoComposerDialogCaptionEditorStore","VideoComposerDialogCaptionEditorPlayhead.react","VideoPlayerController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore")]};j.calculateState=function(){var k=c("VideoComposerDialogCaptionEditorStore").getState();return{isPlaying:k.isPlaying,vpc:k.vpc}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogCaptionEditorPlayhead.react"),{isPlaying:this.state.isPlaying,vpc:this.state.vpc})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogCaptionEditorRightSectionContainer.react",["FluxContainer","React","VideoComposerDialogCaptionEditorRightSection.react","VideoComposerDialogCaptionEditorStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore")]};j.calculateState=function(){var k=c("VideoComposerDialogCaptionEditorStore").getState();return{language:k.language}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogCaptionEditorRightSection.react"),{caption:this.props.caption,language:this.state.language})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogCaptionEditorSubtitlesDragAreaContainer.react",["cx","FluxContainer","VideoComposerDialogCaptionEditorConstants","immutable","React","VideoComposerDialogCaptionEditorStore","VideoComposerDialogCaptionEditorSubtitlesDragArea.react","VideoComposerDialogDispatcher"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore")]};k.calculateState=function(){var l=c("VideoComposerDialogCaptionEditorStore").getState();return{list:l.captions,duration:l.videoDuration,captionSelected:l.captionSelected}};k.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogCaptionEditorStore")])};k.prototype.render=function(){return c("React").createElement("div",{className:"_647y"},c("React").createElement(c("VideoComposerDialogCaptionEditorSubtitlesDragArea.react"),{list:this.state.list,captionSelected:this.state.captionSelected,duration:this.state.duration+c("VideoComposerDialogCaptionEditorConstants").VIDEO_DURATION_PADDING}))};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k)}),null);
__d("VideoWithHiddenSubtitles",["SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$VideoWithHiddenSubtitles1=i;this.$VideoWithHiddenSubtitles2=new(c("SubscriptionsHandler"))();this.$VideoWithHiddenSubtitles2.addSubscriptions(this.$VideoWithHiddenSubtitles1.addListener("muteVideo",function(){if(this.$VideoWithHiddenSubtitles1.areSubtitlesActive())this.$VideoWithHiddenSubtitles1.toggleSubtitles()}.bind(this)))}h.prototype.release=function(){"use strict";this.$VideoWithHiddenSubtitles2.release()};f.exports=h}),null);
__d("VideoComponentHideSubtitles.react",["React","VideoComponent","VideoWithHiddenSubtitles"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k)}j.prototype.enable=function(k){this.vpc=k;this.$VideoComponentHideSubtitles1=new(c("VideoWithHiddenSubtitles"))(this.vpc)};j.prototype.disable=function(){this.$VideoComponentHideSubtitles1.release()};j.prototype.render=function(){return null};f.exports=c("VideoComponent").createContainer(j)}),null);
__d("VideoWithPlayPause",["SubscriptionsHandler","VideoPlayerReason"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l){"use strict";__p&&__p();this.$VideoWithPlayPause8=new(c("SubscriptionsHandler"))();this.$VideoWithPlayPause1=i;this.$VideoWithPlayPause9(j);this.onUpdateCurrentPlayPosition=k;this.onUpdatePlayerState=l;this.$VideoWithPlayPause5=false;this.$VideoWithPlayPause6=false;this.$VideoWithPlayPause8.addSubscriptions(this.$VideoWithPlayPause1.addListener("updateStatus",this.$VideoWithPlayPause10.bind(this)),this.$VideoWithPlayPause1.addListener("captionsList/preview",function(m){return this.$VideoWithPlayPause11(m.startTime,m.endTime)}.bind(this)),this.$VideoWithPlayPause1.addListener("pausePlayback",function(){this.$VideoWithPlayPause6=true;this.onUpdatePlayerState(false)}.bind(this)),this.$VideoWithPlayPause1.addListener("finishPlayback",function(){this.onUpdatePlayerState(false);this.$VideoWithPlayPause6=true}.bind(this)),this.$VideoWithPlayPause1.addListener("beginPlayback",function(){this.$VideoWithPlayPause6=false}.bind(this)))}h.prototype.$VideoWithPlayPause11=function(i,j){"use strict";this.$VideoWithPlayPause12(i);this.$VideoWithPlayPause13(j);this.$VideoWithPlayPause4=true;this.$VideoWithPlayPause5=false;this.$VideoWithPlayPause6=false;this.$VideoWithPlayPause1.seek(this.$VideoWithPlayPause2);this.$VideoWithPlayPause1.play(c("VideoPlayerReason").USER)};h.prototype.$VideoWithPlayPause12=function(i){"use strict";this.$VideoWithPlayPause2=i/1e3};h.prototype.$VideoWithPlayPause13=function(i){"use strict";this.$VideoWithPlayPause3=i/1e3};h.prototype.$VideoWithPlayPause9=function(i){"use strict";this.$VideoWithPlayPause7=i/1e3};h.prototype.$VideoWithPlayPause10=function(i){"use strict";__p&&__p();if(this.$VideoWithPlayPause5)this.onUpdateCurrentPlayPosition(i);if(!this.$VideoWithPlayPause6)this.onUpdatePlayerState(true);if(!this.$VideoWithPlayPause4)this.$VideoWithPlayPause5=true;if(i.position>this.$VideoWithPlayPause3){this.$VideoWithPlayPause1.pause(c("VideoPlayerReason").USER);this.$VideoWithPlayPause13(this.$VideoWithPlayPause7*1e3);this.$VideoWithPlayPause4=false}if(i.position<this.$VideoWithPlayPause2){this.$VideoWithPlayPause13(this.$VideoWithPlayPause7*1e3);this.$VideoWithPlayPause4=false}};h.prototype.release=function(){"use strict";this.$VideoWithPlayPause8.release()};f.exports=h}),null);
__d("VideoComponentWithPlayPause.react",["React","VideoComponent","VideoPlayerReason","VideoWithPlayPause","VideoComposerDialogCaptionEditorPlayerActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k)}j.prototype.enable=function(k){this.vpc=k;c("VideoComposerDialogCaptionEditorPlayerActions").setVPC(k);this.videoWithPlayPause=new(c("VideoWithPlayPause"))(this.vpc,this.props.videoDuration,this.props.onUpdateCurrentPlayPosition,this.props.onUpdatePlayerState)};j.prototype.disable=function(){this.videoWithPlayPause.release()};j.prototype.render=function(){return null};f.exports=c("VideoComponent").createContainer(j)}),null);
__d("VideoComposerDialogCaptionEditorPlayer.react",["cx","fbt","React","VideoComponentEmbeddedControls.react","VideoComponentHideSubtitles.react","VideoComponentPlayButton.react","VideoComponentScrubberPreview.react","VideoComponentWithLoopingPlayback.react","VideoComponentWithPlayPause.react","VideoComponentWithSpacePlayPause.react","VideoComposerDialogCaptionEditorPlayerLoading.react","VideoComposerDialogConstants","VideoDataContainer.react","VideoPlayer.react","VideoPlayerOrigins","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m)}l.prototype.shouldComponentUpdate=function(m){return JSON.stringify(this.props.videoData)!==JSON.stringify(m.videoData)||this.props.captionToDisplay!==m.captionToDisplay};l.prototype.$VideoComposerDialogCaptionEditorPlayer1=function(m){return c("React").createElement(c("VideoPlayer.react"),{ref:function(n){this.ceVideoPlayer=n}.bind(this),videoData:m,width:c("VideoComposerDialogConstants").PLAYER_WIDTH,height:c("VideoComposerDialogConstants").PLAYER_HEIGHT,playerOrigin:c("VideoPlayerOrigins").PAGES_VIDEO_TAB,subOrigin:"inline"},c("React").createElement(c("VideoComponentPlayButton.react"),null),c("React").createElement(c("VideoComponentEmbeddedControls.react"),{showSettingsButton:false,displayElapsedTime:true}),c("React").createElement(c("VideoComponentWithLoopingPlayback.react"),null),c("React").createElement(c("VideoComponentWithSpacePlayPause.react"),null),c("React").createElement(c("VideoComponentScrubberPreview.react"),null),c("React").createElement(c("VideoComponentWithPlayPause.react"),{videoDuration:this.props.playable_duration_in_ms,onUpdateCurrentPlayPosition:this.props.onUpdateCurrentPlayPosition,onUpdatePlayerState:this.props.onUpdatePlayerState}),c("React").createElement(c("VideoComponentHideSubtitles.react"),null))};l.prototype.render=function(){__p&&__p();var m=null;if(this.props.videoData)m=this.$VideoComposerDialogCaptionEditorPlayer1(this.props.videoData);else if(!this.props.videoID)m=c("React").createElement(c("VideoComposerDialogCaptionEditorPlayerLoading.react"),{text:i._("Loading Video Failed")});else m=c("React").createElement(c("VideoDataContainer.react"),{videoID:this.props.videoID},c("React").createElement(c("VideoPlayer.react"),{ref:function(o){this.ceVideoPlayer=o}.bind(this),videoData:c("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,width:c("VideoComposerDialogConstants").PLAYER_WIDTH,height:c("VideoComposerDialogConstants").PLAYER_HEIGHT,playerOrigin:c("VideoPlayerOrigins").PAGES_VIDEO_TAB,subOrigin:"inline"},c("React").createElement(c("VideoComponentPlayButton.react"),null),c("React").createElement(c("VideoComponentEmbeddedControls.react"),{showSettingsButton:false,displayElapsedTime:true}),c("React").createElement(c("VideoComponentWithLoopingPlayback.react"),null),c("React").createElement(c("VideoComponentWithSpacePlayPause.react"),null),c("React").createElement(c("VideoComponentScrubberPreview.react"),null),c("React").createElement(c("VideoComponentWithPlayPause.react"),{videoDuration:this.props.playable_duration_in_ms,onUpdateCurrentPlayPosition:this.props.onUpdateCurrentPlayPosition,onUpdatePlayerState:this.props.onUpdatePlayerState}),c("React").createElement(c("VideoComponentHideSubtitles.react"),null)));var n=null;if(this.props.captionToDisplay)n=c("React").createElement(c("XUIText.react"),{className:"_4cmw"},this.props.captionToDisplay);return c("React").createElement("div",null,m,c("React").createElement("div",{style:{width:c("VideoComposerDialogConstants").PLAYER_WIDTH},className:"_64dy"},c("React").createElement("div",{className:"_4cmx"},n)))};f.exports=l}),null);
__d("VideoComposerDialogCaptionEditorVideoPlayerContainer.react",["cx","FluxContainer","VideoComposerDialogCaptionEditorPlayer.react","VideoComposerDialogCaptionsStore","immutable","RelayModern","VideoComposerDialogCaptionEditorActions","VideoPlayer.react","React","VideoComposerDialogCaptionEditorPlayerActions","VideoComposerDialogCaptionEditorStore","VideoComposerDialogCaptionEditorVideoPlayerContainer_video.graphql"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("RelayModern").createFragmentContainer,l=c("RelayModern").graphql,m=-1;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$VideoComposerDialogCaptionEditorVideoPlayerContainer2=function(event){var u=event.position*1e3;c("VideoComposerDialogCaptionEditorPlayerActions").setCurrentPlayPosition(u);this.$VideoComposerDialogCaptionEditorVideoPlayerContainer3(u)}.bind(this),q}n.getStores=function(){return[c("VideoComposerDialogCaptionEditorStore"),c("VideoComposerDialogCaptionsStore")]};n.calculateState=function(p){var q=c("VideoComposerDialogCaptionEditorStore").getState(),r=c("VideoComposerDialogCaptionsStore").getState();return{captionEntries:q.captions,previewEntry:q.previewEntry,videoData:r.videoData,videoID:q.videoID,nextEntryIdx:q.nextEntryIdx,duration:r.videoDurationInSec*1e3}};n.prototype.componentWillMount=function(){c("VideoComposerDialogCaptionEditorPlayerActions").resetPlayer(this.props.video)};n.prototype.componentDidMount=function(){c("VideoComposerDialogCaptionEditorPlayerActions").resetPlayer(this.props.video);c("VideoComposerDialogCaptionEditorPlayerActions").setDuration(this.state.duration)};n.prototype.shouldComponentUpdate=function(p,q){return q.videoID!==this.state.videoID||q.previewEntry!==this.state.previewEntry||JSON.stringify(q.videoData)!==JSON.stringify(this.state.videoData)};n.prototype.render=function(){var p=this.state.previewEntry?this.state.previewEntry.node.text:null;return c("React").createElement("div",{className:"_1mbc"},c("React").createElement(c("VideoComposerDialogCaptionEditorPlayer.react"),{videoData:this.state.videoData,videoID:this.props.video.id,playable_duration_in_ms:this.state.duration,onUpdatePlayerState:this.$VideoComposerDialogCaptionEditorVideoPlayerContainer1,onUpdateCurrentPlayPosition:this.$VideoComposerDialogCaptionEditorVideoPlayerContainer2,captionToDisplay:p}))};n.prototype.$VideoComposerDialogCaptionEditorVideoPlayerContainer3=function(p){__p&&__p();if(this.state.captionEntries.size===0)return;var q=this.state.previewEntry?this.state.previewEntry.node.start_time_in_ms:0,r=this.state.previewEntry?this.state.previewEntry.node.duration_in_ms:0,s=q+r;if(p>=q&&p<=s)return;var t=this.state.captionEntries,u=t.get(this.state.nextEntryIdx),v=null;if(this.state.nextEntryIdx>0)v=t.get(this.state.nextEntryIdx-1);var w=u.node.start_time_in_ms+u.node.duration_in_ms,x=u.node.start_time_in_ms;if(p>=x&&p<=w){c("VideoComposerDialogCaptionEditorActions").setPreviewEntry(this.state.nextEntryIdx);return}var y=0;if(v)y=v.node.start_time_in_ms+v.node.duration_in_ms;if(p<=w&&v&&p>=y){c("VideoComposerDialogCaptionEditorActions").setPreviewEntry(m);return}var z=0;for(z=0;z<t.size;z++){var A=t.get(z).node.start_time_in_ms+t.get(z).node.duration_in_ms;if(p<=A){c("VideoComposerDialogCaptionEditorActions").setNextEntry(z);break}}if(z===t.size)c("VideoComposerDialogCaptionEditorActions").setPreviewEntry(m)};n.prototype.$VideoComposerDialogCaptionEditorVideoPlayerContainer1=function(p){c("VideoComposerDialogCaptionEditorPlayerActions").setPlayerState(p)};var o=k(c("FluxContainer").create(n),{video:function p(){return c("VideoComposerDialogCaptionEditorVideoPlayerContainer_video.graphql")}});o.moduleName="VideoComposerDialogCaptionEditorVideoPlayerContainer.react";f.exports=o}),null);
__d("VideoUploadUIError",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CAPTION_ERROR_WRONG_FORMAT:"caption_error_wrong_format",CAPTION_ERROR_DUPLICATE_LOCALE:"caption_error_duplicate_locale",CAPTION_ERROR_GENERATE_FAIL:"caption_error_generate_fail",CAPTION_ERROR_CREATE_FAIL:"caption_error_create_fail",CAPTION_ERROR_DELETE_FAIL:"caption_error_delete_fail",AUTOGENERATE_FAIL_RETRY:"auto_generate_fail_retry"})}),null);
__d("VideoUploadUILoggerEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({VIDEO_FILE_SELECTED:"video_file_selected",TAB_SWITCH:"tab_switch",CAPTION_UPLOAD_BUTTON_CLICKED:"caption_upload_button_clicked",CAPTION_SELECTED:"caption_selected",CAPTION_REMOVED:"caption_removed",CAPTION_DEFAULT_LOCALE_CHANGED:"caption_default_locale_changed",CAPTION_ERROR:"caption_error",CONTENT_TAGS_SELECTED:"content_tags_selected",CONTENT_TAGS_REMOVED:"content_tags_removed",PERMISSIONS_CHANGED:"permissions_changed",CAPTION_GENERATE_BUTTON_CLICKED:"caption_generate_button_clicked",CAPTION_GENERATE_COMPLETE:"caption_generate_complete",CAPTION_GENERATE_CANCEL:"caption_generate_cancel",CAPTION_CREATE_BUTTON_CLICKED:"caption_create_button_clicked",CAPTION_CREATE_COMPLETE:"caption_create_complete",CAPTION_UPLOAD_COMPLETE:"caption_upload_complete",VIDEO_LANGUAGE_SELECTED:"video_language_selected",CAPTION_DRAFT_EDITED:"caption_draft_edited",CAPTION_DRAFT_DELETED:"caption_draft_deleted",CAPTION_PUBLISHED_EDITED:"caption_published_edited",CAPTION_PUBLISHED_DELETED:"caption_published_deleted"})}),null);
__d("VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer.react",["React","VideoComposerDialogCaptionEditorConstants","immutable","VideoComposerDialogCaptionLandingAddSubtitleButtons.react","FluxContainer","VideoComposerDialogCaptionsStore","VideoComposerDialogCaptionsTabActions","VideoCaptionFile","VideoUploadUIError","VideoComposerDialogCaptionEditorUtils","VideoUploadUILoggerEvents"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;function j(){__p&&__p();var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer2=function(){this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer3(c("VideoUploadUILoggerEvents").CAPTION_CREATE_BUTTON_CLICKED);c("VideoComposerDialogCaptionsTabActions").create()}.bind(this),this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer4=function(p){__p&&__p();var q=this.state.captions,r=[],s=p.files,t=null,u=null;Array.from(s).forEach(function(x){var y=c("VideoCaptionFile").fromFile(x),z=this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer5(y,q);if(z){t=z;u=y}else r.push(y)}.bind(this));if(t){var v=c("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(t,u?u.getLocaleName():null),w=c("immutable").List([v]);c("VideoComposerDialogCaptionsTabActions").updateErrorState(w)}else c("VideoComposerDialogCaptionsTabActions").upload(r)}.bind(this),this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer6=function(){this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer3(c("VideoUploadUILoggerEvents").CAPTION_UPLOAD_BUTTON_CLICKED)}.bind(this),l}j.getStores=function(){return[c("VideoComposerDialogCaptionsStore")]};j.calculateState=function(){return{captions:c("VideoComposerDialogCaptionsStore").getAllCaptions(),spokenLanguage:c("VideoComposerDialogCaptionsStore").getSpokenLanguage(),spokenLocale:c("VideoComposerDialogCaptionsStore").getSpokenLocale(),autoGeneratingLocale:c("VideoComposerDialogCaptionsStore").getAutoGeneratingLocale(),enableFeatures:c("VideoComposerDialogCaptionsStore").getEnableAdvancedCaptionsFeatures()}};j.prototype.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer1=function(){c("VideoComposerDialogCaptionsTabActions").generate()};j.prototype.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer3=function(k,l){c("VideoComposerDialogCaptionsStore").getLogger().setEvent(k).setError(l).log()};j.prototype.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer5=function(k,l){var m=null;if(!k)m=c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT;else if(this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer7(k.getLocale(),l))m=c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE;return m};j.prototype.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer7=function(k,l){var m=l.some(function(p){return p.locale===k}),n=c("VideoComposerDialogCaptionEditorUtils").getHeadLocale(this.state.autoGeneratingLocale||""),o=n===k;return m||o};j.prototype.render=function(){var k=this.state.spokenLanguage===c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED&&this.state.captions.isEmpty()&&this.state.enableFeatures;return c("React").createElement(c("VideoComposerDialogCaptionLandingAddSubtitleButtons.react"),{enableFeatures:this.state.enableFeatures,disableSection:k,shouldShowGenerate:this.props.shouldShowGenerate,spokenLanguage:this.state.spokenLanguage,spokenLocale:this.state.spokenLocale,onGenerate:this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer1,onCreate:this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer2,onUpload:this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer4,onUploadClick:this.$VideoComposerDialogCaptionLandingAddSubtitleButtonsContainer6})};f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogCaptionLandingAddSubtitleDescription.react",["cx","fbt","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=i._("Add New Subtitles or Captions"),n=i._("Adding captions increases video engagement. We can try to auto-generate them for you, or you can write them yourself or upload an SRT file.");if(!this.props.enableFeatures)n=i._("Adding captions increases video engagement. You can include captions in multiple languages with your video by uploading a SubRip (.srt) file with it.");if(this.props.doSubtitlesExist){m=i._("Add More Captions");n=i._("You can add additional captions to your video in another language.")}return c("React").createElement("span",{className:"_1lt4"+(!this.props.enableSection?" _2sq3":"")},c("React").createElement("span",{className:"_1lt5"},m),c("React").createElement("span",{className:"_1lt6"},n))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogCaptionLandingAddSubtitleDescriptionContainer.react",["FluxContainer","React","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionLandingAddSubtitleDescription.react","VideoComposerDialogCaptionsStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogCaptionsStore")]};j.calculateState=function(){var k=c("VideoComposerDialogCaptionsStore").getState(),l=k.published&&k.published.size>0||k.drafts&&k.drafts.size>0,m=k.spokenLanguage!==c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED;return{doSubtitlesExist:l,isLanguageSelected:m,enableFeatures:k.enableAdvancedCaptionsFeatures}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogCaptionLandingAddSubtitleDescription.react"),{doSubtitlesExist:this.state.doSubtitlesExist,enableSection:this.state.isLanguageSelected||this.state.doSubtitlesExist||!this.state.enableFeatures,enableFeatures:this.state.enableFeatures})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogCaptionsContainer.react",["cx","fbt","FluxContainer","React","VideoComposerDialogCaptionEditorConstants","immutable","VideoComposerDialogCaptionEditorStore","VideoComposerDialogCaptionsStore","VideoComposerDialogDispatcher","VideoComposerDialogCaptionEditorDialog.react","VideoComposerDialogCaptionsTabActions","VideoComposerDialogCaptionLandingSection.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.getStores=function(){return[c("VideoComposerDialogCaptionsStore")]};l.$VideoComposerDialogCaptionsContainer1=function(m){__p&&__p();for(var n=m.drafts,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(r.creationMethod===c("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATED)return true}return false};l.$VideoComposerDialogCaptionsContainer2=function(m){for(var n=0;n<m.drafts.size;n++)if(m.drafts.get(n).locale!==c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE)return true;return false};l.calculateState=function(){var m=c("VideoComposerDialogCaptionsStore").getState(),n=this.$VideoComposerDialogCaptionsContainer1(m),o=this.$VideoComposerDialogCaptionsContainer2(m);return{caption:m.selectedCaption,show_caption_editor:m.show_caption_editor,shouldShowDrafts:o,isAutoGenerating:m.isAutoGenerating,hasAutoGenerated:n,errors:m.errors,enableFeatures:m.enableAdvancedCaptionsFeatures}};l.prototype.componentWillMount=function(){__p&&__p();c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogCaptionsStore"),c("VideoComposerDialogCaptionEditorStore")]);var m=c("VideoComposerDialogCaptionsStore").getState();if(m.video_id!==this.props.video_id||m.videoFile!==this.props.videoFile){c("VideoComposerDialogCaptionsTabActions").resetCaptionsLandingTab();c("VideoComposerDialogCaptionsTabActions").initialize(this.props.videoFile,this.props.video_id,this.props.accessToken,this.props.composerID,this.props.pageID,this.props.videoDurationInSec,this.props.isEditFlow,this.props.isOldComposer!==null?this.props.isOldComposer:false);if(this.props.isOldComposer!==true)c("VideoComposerDialogCaptionsTabActions").tryLogCaptionLandingScreenOpenEvent()}else{c("VideoComposerDialogCaptionsTabActions").tryResumeAutoGeneration();return}};l.prototype.componentWillReceiveProps=function(m){var n=m.video_id!==null&&m.video_id!=="",o=this.props.video_id!==m.video_id,p=this.props.videoFile!==m.videoFile;if(n&&(o||p)){c("VideoComposerDialogCaptionsTabActions").initialize(m.videoFile,m.video_id,this.props.accessToken,this.props.composerID,this.props.pageID,this.props.videoDurationInSec,this.props.isEditFlow,this.props.isOldComposer!==null?this.props.isOldComposer:false);if(this.props.isOldComposer!==true||c("VideoComposerDialogCaptionsStore").wasTabOpenedInOldComposer())c("VideoComposerDialogCaptionsTabActions").tryLogCaptionLandingScreenOpenEvent()}};l.prototype.$VideoComposerDialogCaptionsContainer3=function(){c("VideoComposerDialogCaptionsTabActions").showCaptionEditor()};l.prototype.$VideoComposerDialogCaptionsContainer4=function(){c("VideoComposerDialogCaptionsTabActions").hideCaptionEditor()};l.prototype.render=function(){var m=null;if(this.state.show_caption_editor)m=c("React").createElement(c("VideoComposerDialogCaptionEditorDialog.react"),babelHelpers["extends"]({video_id:this.props.video_id},this.state,{onCloseButtonClick:function(){return this.$VideoComposerDialogCaptionsContainer4()}.bind(this)}));return c("React").createElement("div",null,c("React").createElement(c("VideoComposerDialogCaptionLandingSection.react"),{hasAutoGenerated:this.state.hasAutoGenerated,isAutoGenerating:this.state.isAutoGenerating,shouldShowDrafts:this.state.shouldShowDrafts,errors:this.state.errors,isVideoUploaded:this.props.isVideoUploaded,enableFeatures:this.state.enableFeatures}),m)};function l(){j.apply(this,arguments)}f.exports=c("FluxContainer").create(l)}),null);
__d("VideoComposerDialogCaptionsTabContainer.react",["FluxContainer","React","VideoComposerDialogCaptionsTabConfig","VideoComposerDialogTabItem.react","VideoComposerDialogTab","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab;return{isSelected:l===c("VideoComposerDialogTab").CAPTIONS}};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTabItem.react"),babelHelpers["extends"]({tabConfig:c("VideoComposerDialogCaptionsTabConfig")},this.state))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoSubtitlePublishedStatusType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DRAFT:0,PUBLISHED:1,PUBLISH_PENDING:2})}),null);
__d("VideoComposerDialogCaptionEditorPublishStateEnum",["keyMirrorRecursive","VideoSubtitlePublishedStatusType"],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze(c("keyMirrorRecursive")(c("VideoSubtitlePublishedStatusType")));f.exports=h}),null);
__d("VideoComposerDialogLandingScreenItem.react",["ix","cx","VideoComposerDialogCaptionEditorConstants","React","SUIButton.react","SUIAtlasTheme","XUIText.react","asset","Image.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:(this.props.visibility?"_35ly":"")+(!this.props.visibility?" _4s3p":"")},c("React").createElement("span",{className:"_35lz"},c("React").createElement("span",{className:"_35m9",title:this.props.hoverText},c("React").createElement(c("SUIButton.react"),{borderedSides:[],hasHoverState:false,label:"ChangeState",labelIsHidden:true,icon:this.props.icon,height:"tall",theme:c("SUIAtlasTheme"),uniformOverride:c("VideoComposerDialogCaptionEditorConstants").BUTTON_UNIFORM,onClick:this.props.onChangeState,use:"default"})),c("React").createElement("span",{className:"_35ma"},c("React").createElement(c("XUIText.react"),{size:"meta1",weigh:"bold"},this.props.text))),c("React").createElement("span",{className:"_35mg"},c("React").createElement("span",{className:"_35mh"+(!this.props.enableFeatures?" _4qg8":"")},c("React").createElement(c("SUIButton.react"),{borderedSides:[],hasHoverState:false,label:"Edit",labelIsHidden:true,icon:c("React").createElement(c("Image.react"),{src:h("359076")}),style:{marginRight:19},theme:c("SUIAtlasTheme"),uniformOverride:c("VideoComposerDialogCaptionEditorConstants").BUTTON_UNIFORM,onClick:function(){return this.props.onEdit()}.bind(this),use:"default"})),c("React").createElement("span",{className:"_35mi"},c("React").createElement(c("SUIButton.react"),{borderedSides:[],hasHoverState:false,label:"Delete",labelIsHidden:true,icon:c("React").createElement(c("Image.react"),{src:h("393803")}),onClick:function(){return this.props.onDelete()}.bind(this),uniformOverride:c("VideoComposerDialogCaptionEditorConstants").BUTTON_UNIFORM,theme:c("SUIAtlasTheme"),use:"default"}))))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogLandingScreenDraftListContainer.react",["ix","fbt","FluxContainer","VideoComposerDialogCaptionEditorActions","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogLandingScreenGeneratePillContainer.react","VideoComposerDialogLandingScreenItem.react","fbglyph","Image.react","immutable","React","VideoComposerDialogCaptionsStore","VideoComposerDialogCaptionsTabActions","VideoComposerDialogCaptionEditorPublishStateEnum"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.getStores=function(){return[c("VideoComposerDialogCaptionsStore")]};l.calculateState=function(){var m=c("VideoComposerDialogCaptionsStore").getState();return{drafts:m.drafts,isAutoGenerating:m.isAutoGenerating,enableFeatures:m.enableAdvancedCaptionsFeatures}};l.prototype.$VideoComposerDialogLandingScreenDraftListContainer1=function(m){c("VideoComposerDialogCaptionsTabActions").editCaptionsDraft(m);c("VideoComposerDialogCaptionEditorActions").setLanguage()};l.prototype.$VideoComposerDialogLandingScreenDraftListContainer2=function(m){c("VideoComposerDialogCaptionsTabActions").deleteCaptionsDraft(m)};l.prototype.$VideoComposerDialogLandingScreenDraftListContainer3=function(m,n){__p&&__p();var o=null,p=null,q=null,r=true;if(m.creationMethod===c("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATED)o=i._("{language}:Auto-Generated",[i.param("language",m.language)]);else if(m.creationMethod===c("VideoComposerDialogCaptionEditorConstants").SPEECH_NON_SPEECH||m.creationMethod===c("VideoComposerDialogCaptionEditorConstants").MANUAL)o=i._("{language}:Written",[i.param("language",m.language)]);else o=i._("{language}:Uploaded",[i.param("language",m.language)]);if(m.publishedState===c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISHED){p=c("React").createElement(c("Image.react"),{src:h("119371")});q=i._("Published")}else if(m.publishedState===c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISH_PENDING){p=c("React").createElement(c("Image.react"),{src:h("132187")});q=i._("Publish Pending")}else{p=c("React").createElement(c("Image.react"),{src:h("125832")});q=i._("Draft")}if(m.locale===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE)r=false;return c("React").createElement(c("VideoComposerDialogLandingScreenItem.react"),{enableFeatures:this.state.enableFeatures,hoverText:q,icon:p,id:n,key:n,text:o,visibility:r,onChangeState:function s(){return c("VideoComposerDialogCaptionsTabActions").changePublishedState(n)},onEdit:function(){return this.$VideoComposerDialogLandingScreenDraftListContainer1(n)}.bind(this),onDelete:function(){return this.$VideoComposerDialogLandingScreenDraftListContainer2(n)}.bind(this)})};l.prototype.render=function(){var m=this.state.isAutoGenerating?{}:{display:"none"},n=this.state.drafts?this.state.drafts.map(function(o,p){return this.$VideoComposerDialogLandingScreenDraftListContainer3(o,p)}.bind(this)):null;return c("React").createElement("div",null,c("React").createElement("span",{style:m},c("React").createElement(c("VideoComposerDialogLandingScreenGeneratePillContainer.react"),null)),c("React").createElement("div",null,n))};function l(){j.apply(this,arguments)}f.exports=c("FluxContainer").create(l)}),null);
__d("VideoComposerDialogLandingScreenGeneratePill.react",["ix","cx","fbt","SUIAtlasTheme","SUIButton.react","VideoComposerDialogCaptionEditorConstants","Image.react","React","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){var n=c("React").createElement(c("Image.react"),{src:h("116818")}),o=c("React").createElement(c("SUIButton.react"),{borderedSides:[],hasHoverState:false,label:"Delete",labelIsHidden:true,icon:c("React").createElement(c("Image.react"),{src:h("116302")}),onClick:function(){return this.props.onCancel()}.bind(this),uniformOverride:c("VideoComposerDialogCaptionEditorConstants").BUTTON_UNIFORM,theme:c("SUIAtlasTheme"),use:"default"});return c("React").createElement("div",{className:"_3re4"},c("React").createElement("div",{style:{width:this.props.progress*c("VideoComposerDialogCaptionEditorConstants").GENERATION_PILL_WIDTH/100},className:"_3re6"}),c("React").createElement("span",{className:"_3re7"},c("React").createElement("span",{className:"_3re9"},c("React").createElement("span",{className:"_3reh"},n),c("React").createElement("span",{className:"_3req"},j._("{percentage}",[j.param("percentage",Math.round(this.props.progress)+"%")])),c("React").createElement("span",{className:"_3req"},this.props.text)),c("React").createElement("div",{className:"_3rer"},o)))};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("VideoComposerDialogLandingScreenGeneratePillContainer.react",["fbt","FluxContainer","React","VideoComposerDialogCaptionsStore","VideoComposerDialogCaptionsTabActions","VideoComposerDialogLandingScreenGeneratePill.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("VideoComposerDialogCaptionsStore")]};k.calculateState=function(){var l=c("VideoComposerDialogCaptionsStore").getState();return{text:h._("Generating Captions in {spokenLanguage}",[h.param("spokenLanguage",l.spokenLanguage)]),progress:l.progress}};k.prototype.$VideoComposerDialogLandingScreenGeneratePillContainer1=function(){c("VideoComposerDialogCaptionsTabActions").cancelGenerate()};k.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogLandingScreenGeneratePill.react"),{text:this.state.text,progress:this.state.progress,onCancel:function(){return this.$VideoComposerDialogLandingScreenGeneratePillContainer1()}.bind(this)})};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k)}),null);
__d("VideoComposerDialogLandingScreenSpokenLanguageSection.react",["cx","fbt","VideoComposerDialogCaptionEditorConstants","LanguageDialectRenderStyle","LanguageDialectSetTypes","React","VideoComposerDialogLandingScreenLanguageSelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=i._("Video Language"),n=i._("Choose the main language spoken in the video.");return c("React").createElement("div",{className:"_2a8-"},c("React").createElement("span",{className:"_1lt4"},c("React").createElement("div",{className:"_1lt5"},m),c("React").createElement("div",{className:"_1lt6"},n)),c("React").createElement("span",null,c("React").createElement(c("VideoComposerDialogLandingScreenLanguageSelector.react"),{dialectType:c("LanguageDialectSetTypes").LANGUAGE_DETECTION,initialDialectName:this.props.spokenLanguage,excludedDialects:this.props.excludedDialects,placeholder:c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED,renderStyle:c("LanguageDialectRenderStyle").DEFAULT,onSetDialectName:function(o){return this.props.onSelectLanguage(o)}.bind(this),onSetDialect:function(o){return this.props.onSelectLocale(o)}.bind(this)})))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("VideoComposerDialogLandingScreenSpokenLanguageContainer.react",["FluxContainer","React","VideoComposerDialogCaptionEditorUtils","VideoComposerDialogCaptionsStore","VideoComposerDialogCaptionsTabActions","VideoComposerDialogLandingScreenSpokenLanguageSection.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogCaptionsStore")]};j.calculateState=function(){var k=c("VideoComposerDialogCaptionsStore").getState(),l=k.drafts,m=[];l.map(function(n){m.push(c("VideoComposerDialogCaptionEditorUtils").getGenericLocale(n.locale))});return{spokenLanguage:k.spokenLanguage,excludedDialects:m}};j.prototype.$VideoComposerDialogLandingScreenSpokenLanguageContainer1=function(k){c("VideoComposerDialogCaptionsTabActions").selectSpokenLanguage(k)};j.prototype.$VideoComposerDialogLandingScreenSpokenLanguageContainer2=function(k){c("VideoComposerDialogCaptionsTabActions").selectSpokenLocale(k)};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogLandingScreenSpokenLanguageSection.react"),{excludedDialects:this.state.excludedDialects,spokenLanguage:this.state.spokenLanguage,onSelectLanguage:function(k){return this.$VideoComposerDialogLandingScreenSpokenLanguageContainer1(k)}.bind(this),onSelectLocale:function(k){return this.$VideoComposerDialogLandingScreenSpokenLanguageContainer2(k)}.bind(this)})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("ComposerVideoUploadSphericalConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({CROSSPOST_DIALOG_V1:"CROSSPOST_DIALOG_V1",EDIT_DIALOG_V1:"EDIT_DIALOG_V1",PAGE_COMPOSER_V1:"PAGE_COMPOSER_V1",PAGE_COMPOSER_V2:"PAGE_COMPOSER_V2",STANDALONE:"STANDALONE"});f.exports={COMPONENT_SOURCE:h}}),null);
__d("ComposerVideoUploadSphericalEnhancementsSection.react",["cx","fbt","ComposerVideoUploadTooltip.react","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","React","XUICard.react","XUICardSection.react","XUIText.react","XUICheckboxInput.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=i._("Make your video appear less shaky"),m=i._("360 audio is detected automatically");j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;n.prototype.render=function(){var o=this.props.showOmnistabSection?c("React").createElement("div",{className:"_3aaf"},c("React").createElement("div",{className:"_41vn"},c("React").createElement(c("XUIGrayText.react"),{size:"meta1",weight:"bold",shade:"medium"},i._("Stabilization")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{light:true,tooltip:l})),c("React").createElement("div",{className:"_41vo"},c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{disabled:!this.props.allowOmnistabToggle,checked:this.props.omnistabEnabled,onChange:this.props.onToggleEnableOmnistab}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Apply stabilization to the video when it's uploaded")))),c("React").createElement(c("XUIGrayText.react"),{size:"meta1",shade:"light"},i._("If you upload your video without stabilization, you won't be able to add it later.")))):null,p=c("React").createElement("div",{className:"_3aag"},c("React").createElement("div",{className:"_41vn"},c("React").createElement(c("XUIGrayText.react"),{size:"meta1",weight:"bold",shade:"medium"},i._("Audio")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{light:true,tooltip:m})),c("React").createElement("div",{className:"_41vo"},c("React").createElement(c("XUIText.react"),{size:"meta1",shade:"light"},i._("If your video has 360 audio, you'll be able to hear it after the video is posted."))));return c("React").createElement(c("XUICard.react"),{className:"_41vm"},c("React").createElement(c("XUICardSection.react"),null,o,p))};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d("ComposerVideoUploadSphericalMediaToolkitButton.react",["cx","React","Image.react","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){"use strict";return c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_h6s"),onClick:this.props.onClick},c("React").createElement(c("Image.react"),{className:"_2k7z",src:this.props.thumbnail}))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerVideoUploadSphericalPOICarouselItem.react",["ix","cx","fbt","Image.react","React","ShimButton.react","Tooltip.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=1e3,n=60,o=60,p=o*n*m,q=n*m,r=function r(t){t=Math.ceil(t/m)*m;var u=Math.floor(t/p),v=Math.floor(t/q)%o,w=Math.floor(t/m)%n,x=u>0?""+u:"",y=u>0?":"+(v<10?"0":"")+v:""+v,z=":"+(w<10?"0":"")+w;return x+y+z};k=babelHelpers.inherits(s,c("React").PureComponent);l=k&&k.prototype;s.prototype.render=function(){__p&&__p();var t=this.props,u=t.enableComposerRedesign,v=t.isSelected,w=t.thumbnailURI,x=t.timestamp,y=t.isEditingKeyframe,z=t.isSelectedForDeletion,A=void 0;if(x===0)A=u?null:c("React").createElement(c("Tooltip.react"),{tooltip:j._("Starting view can't be deleted"),position:"above",alignH:"center",className:"_3v87"+(u?" _2q6b":"")},c("React").createElement("div",{className:"_jgd"},c("React").createElement(c("Image.react"),{src:h("129545")})));else if(z)if(u)A=c("React").createElement("div",{className:"_3v89 _2q6b"});else A=c("React").createElement("div",{className:"_jge"},c("React").createElement("div",{className:"_jgd"},c("React").createElement(c("Image.react"),{onClick:this.props.onSelectForDeletion,src:h("133788")})));else if(u)A=c("React").createElement("div",{className:"_3v8a _2q6b"});else A=c("React").createElement(c("ShimButton.react"),{onClick:this.props.onSelectForDeletion,className:"_3v8a"});var B=u?76:61,C=u?76:97,D=w?c("React").createElement(c("Image.react"),{className:v&&y?"_8e9":"",width:C,height:B,src:w}):c("React").createElement("div",{className:"_64g7"+(u?" _2q6b":"")});return c("React").createElement(c("ShimButton.react"),{className:"_3ocy"+(v?" _3od0":"")+(u?" _2q6b":"")+(this.props.timestamp===0?" _64g8":""),onClick:function(E){return this.$ComposerVideoUploadSphericalPOICarouselItem1(E,u)}.bind(this)},D,c("React").createElement("div",{className:"_1hi_"+(u?" _2q6b":"")},r(x)),A)};s.prototype.$ComposerVideoUploadSphericalPOICarouselItem1=function(event,t){event.preventDefault();if(!t)this.props.onGuideKeyframeSelected();if(t&&this.props.timestamp!==0)this.props.onSelectForDeletion()};function s(){k.apply(this,arguments)}f.exports=s}),null);
__d("ComposerVideoUploadSphericalPOICarousel.react",["ix","cx","ComposerVideoUploadSphericalPOICarouselItem.react","Image.react","Locale","React","ShimButton.react","fbglyph"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={itemOffsetIndex:0,justifyRight:false},n}l.prototype.$ComposerVideoUploadSphericalPOICarousel1=function(m){return function(){this.setState({itemOffsetIndex:this.state.itemOffsetIndex+m,justifyRight:m>0})}.bind(this)};l.prototype.$ComposerVideoUploadSphericalPOICarousel2=function(m,n,o,p){if(m===p-n)this.setState({itemOffsetIndex:Math.max(m,0),justifyRight:true});else if(m<o)this.setState({itemOffsetIndex:Math.max(m,0),justifyRight:false});else if(m>o+n-1)this.setState({itemOffsetIndex:Math.min(m-n+1,p-1),justifyRight:true})};l.prototype.componentWillReceiveProps=function(m){__p&&__p();var n=this.state.itemOffsetIndex,o=m.enableComposerRedesign?8:7,p=m.items,q=this.props.items,r=p.size;if(r>=q.size){var s=q.findIndex(function(u){return u.isSelected}),t=p.findIndex(function(u){return u.isSelected});if(t>=0&&t!==s)this.$ComposerVideoUploadSphericalPOICarousel2(t,o,n,r)}else if(r<this.props.items.size)if(n>m.items.size-o)this.$ComposerVideoUploadSphericalPOICarousel2(r-o,o,n,r);else if(r<o)this.$ComposerVideoUploadSphericalPOICarousel2(0,o,n,r)};l.prototype.render=function(){__p&&__p();var m=this.props,n=m.items,o=m.enableComposerRedesign,p=this.state,q=p.itemOffsetIndex,r=p.justifyRight,s=o?8:7,t=o?80:99,u=15,v=o?32:29,w=16,x=n.map(function(H,I){var J=H.thumbnailURI,K=H.timestamp,L=H.isSelected,M=H.isSelectedForDeletion;return c("React").createElement(c("ComposerVideoUploadSphericalPOICarouselItem.react"),{enableComposerRedesign:o,isSelected:L,isSelectedForDeletion:M,thumbnailURI:J,timestamp:K,key:I,onGuideKeyframeSelected:function(){return this.props.onGuideKeyframeSelected(H)}.bind(this),onSelectForDeletion:function(){return this.props.onItemSelectedForDeletion(K)}.bind(this),isEditingKeyframe:this.props.isEditingKeyframe})}.bind(this)),y=x.size,z=y>s,A=void 0,B=void 0,C=void 0,D=void 0;C=h("124201");D=h("124211");if(c("Locale").isRTL()){var E=[D,C];C=E[0];D=E[1]}var F=0;if(z){if(q>0){F++;A=c("React").createElement(c("ShimButton.react"),{className:"_5h02"+(!o?" _3wmd":""),onClick:this.$ComposerVideoUploadSphericalPOICarousel1(-1)},c("React").createElement("div",{className:"_5h03"},c("React").createElement(c("Image.react"),{src:C})))}if(q<y-s){F++;B=c("React").createElement(c("ShimButton.react"),{className:"_5h02"+(!o?" _3wme":""),onClick:this.$ComposerVideoUploadSphericalPOICarousel1(1)},c("React").createElement("div",{className:"_5h03"},c("React").createElement(c("Image.react"),{src:D})))}}var G=q*t;if(F>0)G+=G>0?r?v:u:0;if(F>1)G+=r?w:0;G*=c("Locale").isRTL()?1:-1;return c("React").createElement("div",{className:"_1kds"+(o?" _2q6b":"")},A,c("React").createElement("div",{className:"_2ojc"+(F===1?" _2ojd":"")+(F===2?" _2oje":"")+(o?" _2q6b":"")},c("React").createElement("div",{className:"_1kdt"+(o?" _2q6b":""),style:{transform:"translateX("+G+"px)"}},x.toJS())),B)};f.exports=l}),null);
__d("ComposerVideoUploadSphericalGuideSection.react",["ix","cx","fbt","ComposerVideoUploadTooltip.react","ComposerVideoUploadSphericalMediaToolkitButton.react","ComposerVideoUploadSphericalPOICarousel.react","React","XUIButton.react","XUICardSection.react","XUIText.react","XUIGrayText.react","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=j._("Delete Points"),n=j._("Direct viewers' attention to specific points in your video");k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$ComposerVideoUploadSphericalGuideSection2=function(u){if(this.$ComposerVideoUploadSphericalGuideSection1()<1)return;u.preventDefault();this.props.onPointsOfInterestRemoved()}.bind(this),q}o.prototype.render=function(){var p=this.props,q=p.keyframes,r=p.enableComposerRedesign,s=q.size-1,t=j._({"*":"Points of interest added: {number of points}"},[j.param("number of points",s,[0])]),u=this.$ComposerVideoUploadSphericalGuideSection1(),v=j._({"*":{"*":"{number of points to be deleted} of {number of points} points selected"}},[j.param("number of points to be deleted",u,[0]),j.param("number of points",s,[0])]),w=m;if(u>0)w=j._({"*":"Delete Points ({number of points to be deleted})"},[j.param("number of points to be deleted",u,[0])]);return c("React").createElement("div",{className:"_4zkp"+(r?" _61-4":"")},!r&&c("React").createElement(c("XUICardSection.react"),{className:"_4zkq"},c("React").createElement("div",{className:"_4zkr"},c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{size:"meta1",weight:"bold",shade:"medium",display:"inline"},j._("Edit or Remove Points of Interest")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{light:true,tooltip:n})),c("React").createElement(c("XUIGrayText.react"),{size:"meta1",shade:"light"},j._("Choose a thumbnail to edit the point of interest. To delete, use the checkmarks then click Delete Points.")))),c("React").createElement(c("XUICardSection.react"),{className:"_4zkt"+(r?" _61-4":"")},c("React").createElement("div",{className:"_4zku"},c("React").createElement(c("ComposerVideoUploadSphericalPOICarousel.react"),{enableComposerRedesign:r,isEditingKeyframe:this.props.isEditingKeyframe,items:q,onGuideKeyframeSelected:this.props.onGuideKeyframeSelected,onItemSelectedForDeletion:this.props.onToggleGuideKeyframeForDeletion}),r&&c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_1yxe"+(u<1?" _1yxf":""),thumbnail:u<1?h("396629"):h("402967"),onClick:this.$ComposerVideoUploadSphericalGuideSection2}))),!r&&c("React").createElement("div",{className:"_2wyg"},c("React").createElement(c("XUIGrayText.react"),{size:"meta1",weight:"bold",shade:"medium",display:"block"},t),c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{className:"_2wyh",size:"meta1"},v),c("React").createElement(c("XUIButton.react"),{label:w,disabled:u<1,use:"default",tabIndex:0,onClick:this.$ComposerVideoUploadSphericalGuideSection2}))))};o.prototype.$ComposerVideoUploadSphericalGuideSection1=function(){return this.props.keyframes.reduce(function(p,q){return p+(q.isSelectedForDeletion?1:0)},0)};f.exports=o}),null);
__d("ComposerVideoUploadSphericalFOVSlider.react",["ix","cx","fbt","Event","FBNoSelect","Image.react","React","ShimButton.react","Tooltip.react","asset","forEachObject","getElementRect"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=.001,n=10,o=j._("Zoom in or out to adjust the field of view");k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.state={isDragging:false,top:0};this.$ComposerVideoUploadSphericalFOVSlider4=10;var r=q.value!==null?parseFloat(q.value.toFixed(q.decimalPlaces)):q.min;this.state={top:this.$ComposerVideoUploadSphericalFOVSlider5(r,q.min,q.max),isDragging:false}}p.prototype.$ComposerVideoUploadSphericalFOVSlider5=function(q,r,s){return Math.min(s,Math.max(r,q))};p.prototype.$ComposerVideoUploadSphericalFOVSlider6=function(q){var r=c("getElementRect")(this.refs.sliderBox),s=this.props.horizontal?r.right-q.pageX:q.pageY-r.top;if(q.type!=="mousemove"){var t=(this.props.horizontal?r.width:r.height)*this.$ComposerVideoUploadSphericalFOVSlider7(this.state.top);if(s>=t&&s<=t+this.$ComposerVideoUploadSphericalFOVSlider4)this.$ComposerVideoUploadSphericalFOVSlider1=s-t;else this.$ComposerVideoUploadSphericalFOVSlider1=this.$ComposerVideoUploadSphericalFOVSlider4/2}var u=(s-this.$ComposerVideoUploadSphericalFOVSlider1)/(this.props.horizontal?r.width:r.height);return this.$ComposerVideoUploadSphericalFOVSlider5(u,0,1)};p.prototype.$ComposerVideoUploadSphericalFOVSlider8=function(q){var r=this.props,s=r.min,t=r.max,u=t-s;return q*u+s};p.prototype.$ComposerVideoUploadSphericalFOVSlider7=function(q){var r=this.props,s=r.min,t=r.max;return this.$ComposerVideoUploadSphericalFOVSlider5((q-s)/(t-s),0,1)};p.prototype.$ComposerVideoUploadSphericalFOVSlider9=function(q){var r=parseFloat(q.toFixed(this.props.decimalPlaces));if(Math.abs(r-this.$ComposerVideoUploadSphericalFOVSlider3)>m){this.$ComposerVideoUploadSphericalFOVSlider3=r;this.props.onChange(r)}};p.prototype.$ComposerVideoUploadSphericalFOVSlider10=function(q){if(this.state.isDragging){this.setState({isDragging:false});c("forEachObject")(this.$ComposerVideoUploadSphericalFOVSlider2,function(r){return r.remove()});if(this.props.onMouseUp)this.props.onMouseUp(q)}};p.prototype.$ComposerVideoUploadSphericalFOVSlider11=function(q){if(this.state.isDragging){var r=this.$ComposerVideoUploadSphericalFOVSlider8(this.$ComposerVideoUploadSphericalFOVSlider6(q));this.setState({top:r});this.$ComposerVideoUploadSphericalFOVSlider9(r)}};p.prototype.$ComposerVideoUploadSphericalFOVSlider12=function(q){var r=this.$ComposerVideoUploadSphericalFOVSlider8(this.$ComposerVideoUploadSphericalFOVSlider6(q));this.setState({isDragging:true,top:r});this.$ComposerVideoUploadSphericalFOVSlider9(r);this.$ComposerVideoUploadSphericalFOVSlider2=c("Event").listen(document,{mousemove:this.$ComposerVideoUploadSphericalFOVSlider11.bind(this),mouseup:this.$ComposerVideoUploadSphericalFOVSlider10.bind(this)});if(this.props.onMouseDown)this.props.onMouseDown(q)};p.prototype.$ComposerVideoUploadSphericalFOVSlider13=function(q){var r=this.state.top,s=this.$ComposerVideoUploadSphericalFOVSlider5(r-q,this.props.min,this.props.max);return function(){this.setState({top:s});this.$ComposerVideoUploadSphericalFOVSlider9(s)}.bind(this)};p.prototype.componentWillReceiveProps=function(q){this.setState({top:q.value!==null?q.value:q.min})};p.prototype.componentDidMount=function(){c("FBNoSelect").addBlockClass("_223c");this.$ComposerVideoUploadSphericalFOVSlider3=0};p.prototype.componentWillUnmount=function(){c("FBNoSelect").removeBlockClass("_223c");this.$ComposerVideoUploadSphericalFOVSlider10({})};p.prototype.render=function(){var q=this.$ComposerVideoUploadSphericalFOVSlider7(this.state.top)*100,r={top:q+"%"},s=this.props.newStyling?"#4b4f56":"white",t={background:"linear-gradient(rgba(256,256,256,0.3) "+q+"%, "+s+" "+(1-q)+"%)"};return c("React").createElement("div",{className:"_223d"+(this.props.horizontal?" _wjr":"")+(this.props.newStyling?" _gcs":"")},c("React").createElement(c("ShimButton.react"),{className:"_223e _gct",onClick:this.$ComposerVideoUploadSphericalFOVSlider13(n)},this.props.newStyling?c("React").createElement(c("Image.react"),{className:"_4qb9",src:h("438988")}):c("React").createElement("div",{className:"_gcu"},"+")),c("React").createElement("div",{className:"_223f"},c("React").createElement("div",{className:"_223c",onMouseDown:this.$ComposerVideoUploadSphericalFOVSlider12.bind(this),tabIndex:0},c("React").createElement("div",{className:"_223w"},c("React").createElement("div",{style:t,className:"_223x"})),c("React").createElement("div",{ref:"sliderBox",className:"_223y"},c("React").createElement("div",{ref:"handle",className:"_223z",style:r}))),c("React").createElement(c("Tooltip.react"),{tooltip:o,position:"left"},c("React").createElement("div",{className:"_45dj"+(this.props.horizontal?" _wjr":"")}))),c("React").createElement(c("ShimButton.react"),{className:"_223e _gcv",onClick:this.$ComposerVideoUploadSphericalFOVSlider13(-1*n)},this.props.newStyling?c("React").createElement(c("Image.react"),{className:"_4qb9",src:h("394277")}):c("React").createElement("div",{className:"_gcw"},"-")))};f.exports=p}),null);
__d("ComposerVideoUploadSphericalAddAnnotationLayer.react",["ix","cx","ComposerVideoUploadSphericalMediaToolkitButton.react","React","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_2ysg _4wni",thumbnail:h("439005"),onClick:this.props.handleAddButtonClick})};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoUploadSphericalHotspotSaveNux.react",["fbt","React","XUIAmbientNUX.react","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){return c("React").createElement(c("XUIAmbientNUX.react"),{customwidth:150,contextRef:j.contextRef,position:"right",shown:j.showNux,width:"custom",onCloseButtonClick:j.handleNuxClosed},c("React").createElement(c("XUIText.react"),{size:"meta1",display:"block"},h._("Click outside the annotation to save")))}f.exports=i}),null);
__d("SphericalVideoMediaToolkitAlignments",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LEFT:"left",CENTER:"center",RIGHT:"right"})}),null);
__d("SphericalVideoMediaToolkitBackgrounds",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BLACK:"black",WHITE:"white",NONE:"none"})}),null);
__d("SphericalVideoMediaToolkitColors",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BLACK:"black",BLUE:"blue",GREEN:"green",PURPLE:"purple",ROSE:"rose",WHITE:"white",YELLOW:"yellow"})}),null);
__d("SphericalVideoMediaToolkitFontSizes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SMALL:"small",MEDIUM:"medium",LARGE:"large"})}),null);
__d("SphericalVideoMediaToolkitFontWeights",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIGHT:"light",BOLD:"bold"})}),null);
__d("SphericalVideoMediaToolkitTextStyles",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALIGNMENT:"alignment",BACKGROUND:"backgroundColor",COLOR:"color",FONT_SIZE:"fontSize",FONT_WEIGHT:"fontWeight"})}),null);
__d("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles",["SphericalVideoMediaToolkitAlignments","SphericalVideoMediaToolkitBackgrounds","SphericalVideoMediaToolkitColors","SphericalVideoMediaToolkitFontSizes","SphericalVideoMediaToolkitFontWeights","SphericalVideoMediaToolkitTextStyles","SphericalVideoHotspotTextAlignment"],(function a(b,c,d,e,f,g){"use strict";var h,i,j,k,l,m;f.exports=(m={},m[c("SphericalVideoMediaToolkitTextStyles").COLOR]=(h={},h[c("SphericalVideoMediaToolkitColors").BLACK]="#000000",h[c("SphericalVideoMediaToolkitColors").BLUE]="#1C4F8C",h[c("SphericalVideoMediaToolkitColors").GREEN]="#6BCEBB",h[c("SphericalVideoMediaToolkitColors").PURPLE]="#8C72CB",h[c("SphericalVideoMediaToolkitColors").ROSE]="#F2B8AD",h[c("SphericalVideoMediaToolkitColors").WHITE]="#FFFFFF",h[c("SphericalVideoMediaToolkitColors").YELLOW]="#FCD872",h),m[c("SphericalVideoMediaToolkitTextStyles").FONT_SIZE]=(i={},i[c("SphericalVideoMediaToolkitFontSizes").SMALL]=12,i[c("SphericalVideoMediaToolkitFontSizes").MEDIUM]=16,i[c("SphericalVideoMediaToolkitFontSizes").LARGE]=20,i),m[c("SphericalVideoMediaToolkitTextStyles").ALIGNMENT]=(j={},j[c("SphericalVideoMediaToolkitAlignments").LEFT]=c("SphericalVideoHotspotTextAlignment").LEFT,j[c("SphericalVideoMediaToolkitAlignments").CENTER]=c("SphericalVideoHotspotTextAlignment").CENTER,j[c("SphericalVideoMediaToolkitAlignments").RIGHT]=c("SphericalVideoHotspotTextAlignment").RIGHT,j),m[c("SphericalVideoMediaToolkitTextStyles").BACKGROUND]=(k={},k[c("SphericalVideoMediaToolkitBackgrounds").BLACK]="#000000",k[c("SphericalVideoMediaToolkitBackgrounds").NONE]="none",k[c("SphericalVideoMediaToolkitBackgrounds").WHITE]="#FFFFFF",k),m[c("SphericalVideoMediaToolkitTextStyles").FONT_WEIGHT]=(l={},l[c("SphericalVideoMediaToolkitFontWeights").LIGHT]="light",l[c("SphericalVideoMediaToolkitFontWeights").BOLD]="bold",l),m)}),null);
__d("SphericalVideoHotspotActionTrigger",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SINGLE_CLICK:"single_click"})}),null);
__d("ComposerVideoUploadSphericalMediaToolkitConstants",["fbt","SphericalVideoMediaToolkitAlignments","SphericalVideoMediaToolkitBackgrounds","SphericalVideoMediaToolkitColors","SphericalVideoMediaToolkitFontSizes","SphericalVideoMediaToolkitFontWeights","SphericalVideoMediaToolkitTextStyles","SphericalVideoHotspotActionTrigger","SphericalVideoHotspotAnimation","ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles"],(function a(b,c,d,e,f,g,h){var i=Object.freeze({NW:"NW",NE:"NE",SW:"SW",SE:"SE"});f.exports={BOX_SHADOW:"rgba(0, 0, 0, .1) 0 3px 5px",DEFAULT_ALIGNMENT:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[c("SphericalVideoMediaToolkitTextStyles").ALIGNMENT][c("SphericalVideoMediaToolkitAlignments").CENTER],DEFAULT_ANIMATION:c("SphericalVideoHotspotAnimation").NO_ANIM,DEFAULT_BACKGROUND_COLOR:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[c("SphericalVideoMediaToolkitTextStyles").BACKGROUND][c("SphericalVideoMediaToolkitBackgrounds").WHITE],DEFAULT_COLOR:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[c("SphericalVideoMediaToolkitTextStyles").COLOR][c("SphericalVideoMediaToolkitColors").BLUE],DEFAULT_DURATION_MS:5e3,DEFAULT_FONT_FAMILY:"Montserrat",DEFAULT_FONT_SIZE:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[c("SphericalVideoMediaToolkitTextStyles").FONT_SIZE][c("SphericalVideoMediaToolkitFontSizes").MEDIUM],DEFAULT_FONT_WEIGHT:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[c("SphericalVideoMediaToolkitTextStyles").FONT_WEIGHT][c("SphericalVideoMediaToolkitFontWeights").LIGHT],DEFAULT_HEIGHT_FOR_IMAGE:50,DEFAULT_HEIGHT_FOR_TEXT:34,DEFAULT_ID:-1,DEFAULT_IMAGE_DATA:"",DEFAULT_LINE_HEIGHT:1.3,DEFAULT_LINK_ACTION_URL:"",DEFAULT_LINK_ACTION_TRIGGER:c("SphericalVideoHotspotActionTrigger").SINGLE_CLICK,DEFAULT_PADDING:8,DEFAULT_PITCH:0,DEFAULT_START_TIME:0,DEFAULT_TEXT:"",DEFAULT_WIDTH_FOR_IMAGE:50,DEFAULT_WIDTH_FOR_TEXT:200,DEFAULT_YAW:0,EDITING_BACKGROUND_COLOR:{"#000000":"rgba(0, 0, 0, .5)","#FFFFFF":"rgba(255, 255, 255, .8)",none:"rgba(255, 255, 255, .4)"},HOTSPOT_ENTRY_NUX_ID:5555,HOTSPOT_SAVE_NUX_ID:5556,IMAGE_BAR_PREVIEW_HEIGHT_PX:46,IMAGE_BAR_PREVIEW_WIDTH_PX:46,IMAGE_HOTSPOT_DEFAULT_MAX_HEIGHT_PX:100,IMAGE_HOTSPOT_DEFAULT_MAX_WIDTH_PX:100,IMAGE_HOTSPOT_MAX_FILE_SIZE:2621440,IMAGE_HOTSPOT_MAX_HEIGHT_PX:150,IMAGE_HOTSPOT_MAX_WIDTH_PX:150,IMAGE_HOTSPOT_MIN_HEIGHT_PX:25,IMAGE_HOTSPOT_MIN_WIDTH_PX:25,IMAGE_RESIZE_HANDLE_CORNERS:i,SUPPORTED_CHARS_REGEX:/^[\u0020-\u007e\u00ax-\u00ff\u0100-\u017f\u0180-\u024f\u20ac\u2018\u2019\u201c\u201d\t\n\r]*$/,SUPPORTED_IMAGE_FILE_EXTENSIONS:["png","jpg","jpeg"],TEXT_BAR_DEFAULT_ALIGNMENT:c("SphericalVideoMediaToolkitAlignments").CENTER,TEXT_BAR_DEFAULT_BACKGROUND:c("SphericalVideoMediaToolkitBackgrounds").WHITE,TEXT_BAR_DEFAULT_COLOR:c("SphericalVideoMediaToolkitColors").BLUE,TEXT_BAR_DEFAULT_FONT_SIZE:c("SphericalVideoMediaToolkitFontSizes").MEDIUM,TEXT_BAR_DEFAULT_FONT_WEIGHT:c("SphericalVideoMediaToolkitFontWeights").LIGHT,TEXTAREA_MAX_CHARS:50,TEXTAREA_MIN_ROWS:1,TEXTAREA_PLACEHOLDER:h._("Type something")}}),null);
__d("ComposerVideoUploadSphericalMediaToolkitAnnotationEditLayerTextAreaAutoGrow.react",["cx","invariant","ComposerVideoUploadSphericalMediaToolkitConstants","React","ReactDOM","TextAreaControl"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.componentDidMount=function(){this.$ComposerVideoUploadSphericalMediaToolkitAnnotationEditLayerTextAreaAutoGrow1||i(0);this.props.setTextareaRef(this.$ComposerVideoUploadSphericalMediaToolkitAnnotationEditLayerTextAreaAutoGrow1);var m=new(c("TextAreaControl"))(c("ReactDOM").findDOMNode(this.$ComposerVideoUploadSphericalMediaToolkitAnnotationEditLayerTextAreaAutoGrow1)).setAutogrow(true);m.resetHeight();this.props.handleTextareaMounted()};l.prototype.render=function(){return c("React").createElement("textarea",{className:"_2cvs",defaultValue:this.props.defaultValue,value:this.props.value,maxLength:this.props.maxLength,placeholder:this.props.placeholder,ref:function(m){return this.$ComposerVideoUploadSphericalMediaToolkitAnnotationEditLayerTextAreaAutoGrow1=m}.bind(this),rows:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXTAREA_MIN_ROWS,onChange:this.props.onChange})};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoUploadSphericalMediaToolkitStyleBarImages",["ix","SphericalVideoMediaToolkitAlignments","SphericalVideoMediaToolkitBackgrounds","SphericalVideoMediaToolkitColors","SphericalVideoMediaToolkitFontSizes","SphericalVideoMediaToolkitFontWeights","SphericalVideoMediaToolkitTextStyles"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n;f.exports=(n={},n[c("SphericalVideoMediaToolkitTextStyles").COLOR]=(i={},i[c("SphericalVideoMediaToolkitColors").BLACK]=h("403017"),i[c("SphericalVideoMediaToolkitColors").BLUE]=h("403018"),i[c("SphericalVideoMediaToolkitColors").GREEN]=h("403019"),i[c("SphericalVideoMediaToolkitColors").PURPLE]=h("403020"),i[c("SphericalVideoMediaToolkitColors").ROSE]=h("403021"),i[c("SphericalVideoMediaToolkitColors").WHITE]=h("403022"),i[c("SphericalVideoMediaToolkitColors").YELLOW]=h("403023"),i),n[c("SphericalVideoMediaToolkitTextStyles").FONT_SIZE]=(j={},j[c("SphericalVideoMediaToolkitFontSizes").SMALL]=h("403024"),j[c("SphericalVideoMediaToolkitFontSizes").MEDIUM]=h("403024"),j[c("SphericalVideoMediaToolkitFontSizes").LARGE]=h("403024"),j),n[c("SphericalVideoMediaToolkitTextStyles").ALIGNMENT]=(k={},k[c("SphericalVideoMediaToolkitAlignments").LEFT]=h("403011"),k[c("SphericalVideoMediaToolkitAlignments").CENTER]=h("403010"),k[c("SphericalVideoMediaToolkitAlignments").RIGHT]=h("403012"),k),n[c("SphericalVideoMediaToolkitTextStyles").BACKGROUND]=(l={},l[c("SphericalVideoMediaToolkitBackgrounds").BLACK]=h("403013"),l[c("SphericalVideoMediaToolkitBackgrounds").NONE]=h("403014"),l[c("SphericalVideoMediaToolkitBackgrounds").WHITE]=h("403015"),l),n[c("SphericalVideoMediaToolkitTextStyles").FONT_WEIGHT]=(m={},m[c("SphericalVideoMediaToolkitFontWeights").LIGHT]=h("403027"),m[c("SphericalVideoMediaToolkitFontWeights").BOLD]=h("403016"),m),n)}),null);
__d("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBarButton.react",["cx","Image.react","React","ShimButton.react","ComposerVideoUploadSphericalMediaToolkitStyleBarImages"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("ShimButton.react"),{className:"_27mk",onClick:function(){return this.props.handleClick(this.props.textStyleType)}.bind(this)},c("React").createElement(c("Image.react"),{className:"_qon",src:c("ComposerVideoUploadSphericalMediaToolkitStyleBarImages")[this.props.textStyleType][this.props.textStyleValue]}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBar.react",["cx","ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBarButton.react","FlexLayout.react","React","SphericalVideoMediaToolkitTextStyles"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("FlexLayout.react"),{className:"_27mj",align:"center",justify:"all"},c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBarButton.react"),{textStyleType:c("SphericalVideoMediaToolkitTextStyles").COLOR,textStyleValue:this.props.textStyles[c("SphericalVideoMediaToolkitTextStyles").COLOR],handleClick:this.props.handleButtonClick}),c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBarButton.react"),{textStyleType:c("SphericalVideoMediaToolkitTextStyles").FONT_SIZE,textStyleValue:this.props.textStyles[c("SphericalVideoMediaToolkitTextStyles").FONT_SIZE],handleClick:this.props.handleButtonClick}),c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBarButton.react"),{textStyleType:c("SphericalVideoMediaToolkitTextStyles").ALIGNMENT,textStyleValue:this.props.textStyles[c("SphericalVideoMediaToolkitTextStyles").ALIGNMENT],handleClick:this.props.handleButtonClick}),c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBarButton.react"),{textStyleType:c("SphericalVideoMediaToolkitTextStyles").FONT_WEIGHT,textStyleValue:this.props.textStyles[c("SphericalVideoMediaToolkitTextStyles").FONT_WEIGHT],handleClick:this.props.handleButtonClick}),c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBarButton.react"),{textStyleType:c("SphericalVideoMediaToolkitTextStyles").BACKGROUND,textStyleValue:this.props.textStyles[c("SphericalVideoMediaToolkitTextStyles").BACKGROUND],handleClick:this.props.handleButtonClick}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerVideoUploadSphericalMediaToolkitUtils",["fbt","invariant","FBHotspot","ComposerVideoUploadSphericalMediaToolkitConstants","SphericalVideoMediaToolkitTextStyles","React","SimpleXUIDialog","SphericalProjectionUtils","SphericalVideoHotspotType","ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j={calculateHotspotStyle:function k(l,m,n,o,p,q,r){var s=c("SphericalProjectionUtils").convert3dTo2dScaledUnique(n?r:m.yaw,n?o:m.pitch,r,o,l,q,p),t=s.x,u=s.y,v="-"+m.content.height/2+"px 0 0 -"+m.content.width/2+"px";if(m.content.type===c("SphericalVideoHotspotType").TEXT)return{background:n?c("ComposerVideoUploadSphericalMediaToolkitConstants").EDITING_BACKGROUND_COLOR[m.content.backgroundColor]:m.content.backgroundColor,boxShadow:m.content.backgroundColor==="none"?"none":c("ComposerVideoUploadSphericalMediaToolkitConstants").BOX_SHADOW,color:m.content.color,fontFamily:m.content.fontFamily,fontSize:m.content.fontSize+"px",fontWeight:m.content.fontWeight==="light"?300:700,height:m.content.height+"px",left:t+"px",lineHeight:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_LINE_HEIGHT,margin:v,textAlign:m.content.alignment,top:u+"px",width:m.content.width+"px"};else if(m.content.type===c("SphericalVideoHotspotType").IMAGE)return{height:m.content.height+"px",left:t+"px",margin:v,top:u+"px",width:m.content.width+"px"};return null},calculateImageDimensionsByMousePosition:function k(l,m,n,o,p,q,r){__p&&__p();var s=q,t=r,u=(m-o)*2,v=(n-p)*2;switch(l){case c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.NW:s-=v;t-=u;break;case c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.NE:s-=v;t+=u;break;case c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.SW:s+=v;t-=u;break;case c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.SE:s+=v;t+=u;break}return{height:s,width:t}},calculateImageMaxScaledDimensions:function k(l,m,n,o){__p&&__p();var p=void 0,q=void 0;if(l===m){p=Math.min(n,o);q=Math.min(n,o)}else if(l>m){p=n;q=m/l*n}else{q=o;p=l/m*o}return{height:p,width:q}},calculateImageMinScaledDimensions:function k(l,m,n,o){__p&&__p();var p=void 0,q=void 0;if(l===m){p=Math.max(n,o);q=Math.max(n,o)}else if(l<m){p=n;q=m/l*n}else{q=o;p=l/m*o}return{height:p,width:q}},constrainImageDimensionsToAspectRatio:function k(l,m){var n=l.height,o=l.width,p=o/n;if(p>m)n=o/m;else o=m*n;return{height:n,width:o}},constrainImageDimensionsToMinAndMax:function k(l,m,n){return{height:Math.min(Math.max(l.height,n.height),m.height),width:Math.min(Math.max(l.width,n.width),m.width)}},calculatePreviewVisibility:function k(l,m,n,o,p,q,r){if(n.startTime>l||n.endTime<=l)return false;var s=c("SphericalProjectionUtils").convert3dTo2dScaledUnique(n.yaw,n.pitch,r,o,m,q,p),t=s.x,u=s.y;return t!==-1&&u!==-1},calculateResizableImageHotspotStyle:function k(l,m,n,o){var p="-"+l/2+"px 0 0 -"+m/2+"px";return{height:l+"px",left:o/2+"px",margin:p,top:n/2+"px",width:m+"px"}},getDefaultHotspot:function k(l,m){if(l===c("SphericalVideoHotspotType").TEXT)return new(c("FBHotspot"))({pitch:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_PITCH,yaw:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_YAW,startTime:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_START_TIME,endTime:Math.min(c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_START_TIME+c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_DURATION_MS,m),content:{alignment:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_ALIGNMENT,backgroundColor:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_BACKGROUND_COLOR,color:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_COLOR,fontFamily:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_FONT_FAMILY,fontSize:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_FONT_SIZE,fontWeight:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_FONT_WEIGHT,text:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_TEXT,type:c("SphericalVideoHotspotType").TEXT,animation:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_ANIMATION,height:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_HEIGHT_FOR_TEXT,id:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_ID,width:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_WIDTH_FOR_TEXT}});else return new(c("FBHotspot"))({pitch:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_PITCH,yaw:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_YAW,startTime:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_START_TIME,endTime:Math.min(c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_START_TIME+c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_DURATION_MS,m),content:{animation:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_ANIMATION,height:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_HEIGHT_FOR_IMAGE,id:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_ID,imageData:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_IMAGE_DATA,type:c("SphericalVideoHotspotType").IMAGE,width:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_WIDTH_FOR_IMAGE}})},getTextBarStyle:function k(l,m,n){return Object.keys(c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[n]).find(function(o){return m.content.type===c("SphericalVideoHotspotType").TEXT&&c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[n][o]===m.content[n]})||l[n]},getTextBarStyles:function k(l){var m={alignment:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXT_BAR_DEFAULT_ALIGNMENT,backgroundColor:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXT_BAR_DEFAULT_BACKGROUND,color:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXT_BAR_DEFAULT_COLOR,fontSize:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXT_BAR_DEFAULT_FONT_SIZE,fontWeight:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXT_BAR_DEFAULT_FONT_WEIGHT};if(!l)return m;return{alignment:this.getTextBarStyle(m,l,c("SphericalVideoMediaToolkitTextStyles").ALIGNMENT),backgroundColor:this.getTextBarStyle(m,l,c("SphericalVideoMediaToolkitTextStyles").BACKGROUND),color:this.getTextBarStyle(m,l,c("SphericalVideoMediaToolkitTextStyles").COLOR),fontSize:this.getTextBarStyle(m,l,c("SphericalVideoMediaToolkitTextStyles").FONT_SIZE),fontWeight:this.getTextBarStyle(m,l,c("SphericalVideoMediaToolkitTextStyles").FONT_WEIGHT)}},showFileExtensionDialog:function k(l,m,n){var o=h._("Unsupported file extension: {file extension}.",[h.param("file extension",l)]),p=h._("Supported file extensions are {list of supported file extensions}.",[h.param("list of supported file extensions",m)]);c("SimpleXUIDialog").show(c("React").createElement("div",null,c("React").createElement("div",null,o),c("React").createElement("div",null,p)),h._("File Extension Not Supported"),n);return},showFileUploadErrorDialog:function k(l,m){c("SimpleXUIDialog").show(h._("There was an error while uploading your file: {file name}. Please try again.",[h.param("file name",l)]),h._("Image Upload Error"),m);return},showImageTooLargeDialog:function k(l,m){c("SimpleXUIDialog").show(h._("We currently only support image uploads of {max size in mb} MB or less. Please try again with a smaller image file.",[h.param("max size in mb",l)]),h._("Image File Too Large"),m);return},showLastFrameDialog:function k(l){c("SimpleXUIDialog").show(h._("Text and image overlays cannot be added to the last frame of your video. Please add your text or image earlier in the video."),h._("End of Video"),l);return},showUnsupportedCharsDialog:function k(l){c("SimpleXUIDialog").show(h._("We currently support only Latin characters in text annotations. Unsupported characters will not be displayed."),h._("Unsupported Characters"),l);return},updateImageHotspotContent:function k(l,m){l.content.type===c("SphericalVideoHotspotType").IMAGE||i(0);var n=babelHelpers["extends"]({},l.content,m);return l.set("content",n)},updateTextHotspotContent:function k(l,m){l.content.type===c("SphericalVideoHotspotType").TEXT||i(0);var n=babelHelpers["extends"]({},l.content,m);return l.set("content",n)}};f.exports=j}),null);
__d("ComposerVideoUploadSphericalAnnotationEditLayer.react",["ix","cx","invariant","ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBar.react","ComposerVideoUploadSphericalMediaToolkitAnnotationEditLayerTextAreaAutoGrow.react","FBHotspot","ComposerVideoUploadSphericalHotspotSaveNux.react","ComposerVideoUploadSphericalMediaToolkitButton.react","ComposerVideoUploadSphericalMediaToolkitConstants","ComposerVideoUploadSphericalMediaToolkitUtils","React","SphericalVideoHotspotType","asset"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;m.prototype.componentDidMount=function(){"use strict";if(this.props.showNux)this.props.handleNuxView()};m.prototype.render=function(){"use strict";var n=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateHotspotStyle(this.props.fov,this.props.hotspot,true,this.props.pitch,this.props.viewportHeight,this.props.viewportWidth,this.props.yaw),o=this.props.textareaDefaultValue?this.props.textareaDefaultValue:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_TEXT;this.props.hotspot.content.type===c("SphericalVideoHotspotType").TEXT||j(0);var p=o+this.props.hotspot.content.fontSize+this.props.hotspot.content.fontWeight;return c("React").createElement("div",{className:"_js1"},c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitAnnotationStyleBar.react"),{textStyles:this.props.textStyles,handleButtonClick:this.props.handleTextStyleButtonClick}),c("React").createElement("div",{className:"_63-t",style:n},c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitAnnotationEditLayerTextAreaAutoGrow.react"),{ref:function(q){return this.$ComposerVideoUploadSphericalAnnotationEditLayer1=q}.bind(this),defaultValue:o,key:p,maxLength:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXTAREA_MAX_CHARS,placeholder:c("ComposerVideoUploadSphericalMediaToolkitConstants").TEXTAREA_PLACEHOLDER,value:this.props.textareaValue,onChange:this.props.handleTextareaValueChange,handleTextareaMounted:this.props.handleTextareaMounted,setTextareaRef:this.props.setTextareaRef}),c("React").createElement(c("ComposerVideoUploadSphericalHotspotSaveNux.react"),{contextRef:function(){return this.$ComposerVideoUploadSphericalAnnotationEditLayer1}.bind(this),showNux:this.props.showNux,handleNuxClosed:this.props.handleNuxClosed})),c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_2ysg",thumbnail:h("402967"),onClick:this.props.handleDeleteButtonClick}))};function m(){"use strict";k.apply(this,arguments)}f.exports=m}),null);
__d("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions",["SphericalVideoMediaToolkitAlignments","SphericalVideoMediaToolkitBackgrounds","SphericalVideoMediaToolkitColors","SphericalVideoMediaToolkitFontSizes","SphericalVideoMediaToolkitFontWeights","SphericalVideoMediaToolkitTextStyles"],(function a(b,c,d,e,f,g){"use strict";var h;f.exports=(h={},h[c("SphericalVideoMediaToolkitTextStyles").COLOR]=[c("SphericalVideoMediaToolkitColors").BLACK,c("SphericalVideoMediaToolkitColors").BLUE,c("SphericalVideoMediaToolkitColors").GREEN,c("SphericalVideoMediaToolkitColors").PURPLE,c("SphericalVideoMediaToolkitColors").ROSE,c("SphericalVideoMediaToolkitColors").WHITE,c("SphericalVideoMediaToolkitColors").YELLOW],h[c("SphericalVideoMediaToolkitTextStyles").FONT_SIZE]=[c("SphericalVideoMediaToolkitFontSizes").SMALL,c("SphericalVideoMediaToolkitFontSizes").MEDIUM,c("SphericalVideoMediaToolkitFontSizes").LARGE],h[c("SphericalVideoMediaToolkitTextStyles").ALIGNMENT]=[c("SphericalVideoMediaToolkitAlignments").LEFT,c("SphericalVideoMediaToolkitAlignments").CENTER,c("SphericalVideoMediaToolkitAlignments").RIGHT],h[c("SphericalVideoMediaToolkitTextStyles").BACKGROUND]=[c("SphericalVideoMediaToolkitBackgrounds").BLACK,c("SphericalVideoMediaToolkitBackgrounds").WHITE,c("SphericalVideoMediaToolkitBackgrounds").NONE],h[c("SphericalVideoMediaToolkitTextStyles").FONT_WEIGHT]=[c("SphericalVideoMediaToolkitFontWeights").LIGHT,c("SphericalVideoMediaToolkitFontWeights").BOLD],h)}),null);
__d("ComposerVideoUploadSphericalAnnotationEditLayerContainer.react",["invariant","ComposerVideoUploadSphericalAddAnnotationLayer.react","ComposerVideoUploadSphericalAnnotationEditLayer.react","ComposerVideoUploadSphericalEvents","FBHotspot","ComposerVideoUploadSphericalMediaToolkitConstants","ComposerVideoUploadSphericalMediaToolkitUtils","React","SphericalVideoHotspotType","ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles","ComposerVideoUploadSphericalMediaToolkitStyleBarOptions","SubscriptionsHandler","SphericalVideoGuideAnimationConfig"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("SphericalVideoGuideAnimationConfig").MS_PER_SECOND;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){"use strict";__p&&__p();j.constructor.call(this,m);this.state={hotspot:this.props.hotspot?this.props.hotspot:c("ComposerVideoUploadSphericalMediaToolkitUtils").getDefaultHotspot(c("SphericalVideoHotspotType").TEXT,this.props.controller.getPlaybackDuration()*k),textareaDefaultValue:this.props.hotspot&&this.props.hotspot.content.type===c("SphericalVideoHotspotType").TEXT?this.props.hotspot.content.text:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_TEXT,textStyles:c("ComposerVideoUploadSphericalMediaToolkitUtils").getTextBarStyles(this.props.hotspot)};this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer6=function(event){this.state.hotspot.content.type===c("SphericalVideoHotspotType").TEXT||h(0);var n=event.target.value;if(!c("ComposerVideoUploadSphericalMediaToolkitConstants").SUPPORTED_CHARS_REGEX.test(n)){this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer3.blur();c("ComposerVideoUploadSphericalMediaToolkitUtils").showUnsupportedCharsDialog();return}var o=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateTextHotspotContent(this.state.hotspot,{text:n,height:this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer3.scrollHeight});this.setState({hotspot:o})}.bind(this);this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer7=function(n){__p&&__p();var o=c("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions")[n].indexOf(this.state.textStyles[n]),p=(o+1)%c("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions")[n].length,q=babelHelpers["extends"]({},this.state.textStyles),r=void 0;switch(n){case"alignment":var s=c("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions")[n][p];q[n]=s;r={alignment:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[n][s]};break;case"backgroundColor":var t=c("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions")[n][p];q[n]=t;r={backgroundColor:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[n][t]};break;case"color":var u=c("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions")[n][p];q[n]=u;r={color:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[n][u]};break;case"fontSize":var v=c("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions")[n][p];q[n]=v;r={fontSize:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[n][v]};break;case"fontWeight":var w=c("ComposerVideoUploadSphericalMediaToolkitStyleBarOptions")[n][p];q[n]=w;r={fontWeight:c("ComposerVideoUploadSphericalMediaToolkitStyleBarCssStyles")[n][w]};break;default:n;throw new Error("unexpected text style type")}var x=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateTextHotspotContent(this.state.hotspot,r);x.content.type===c("SphericalVideoHotspotType").TEXT||h(0);this.setState({textStyles:q,hotspot:x,textareaDefaultValue:x.content.text})}.bind(this);this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer8=function(n){this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer3=n}.bind(this);this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer5=function(){var n=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateTextHotspotContent(this.state.hotspot,{height:this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer3.scrollHeight});this.setState({hotspot:n})}.bind(this);this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer1={hotspot:c("ComposerVideoUploadSphericalMediaToolkitUtils").getDefaultHotspot(c("SphericalVideoHotspotType").TEXT,this.props.controller.getPlaybackDuration()*k),textareaDefaultValue:c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_TEXT,textStyles:c("ComposerVideoUploadSphericalMediaToolkitUtils").getTextBarStyles(null)};this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer2=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer2.addSubscriptions(m.controller.addListener(c("ComposerVideoUploadSphericalEvents").MEDIA_TOOLKIT.SAVE_HOTSPOT,function(){return this.props.handleSaveHotspotEdits(this.state.hotspot)}.bind(this)));this.props.toggleEditingState(true)}l.prototype.componentWillReceiveProps=function(m){"use strict";if(!m.isEditing&&this.props.isEditing)this.setState(this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer1);if(m.hotspot&&(!this.props.hotspot||this.props.hotspot.content.id!==m.hotspot.content.id)){m.hotspot.content.type===c("SphericalVideoHotspotType").TEXT||h(0);this.setState({hotspot:m.hotspot,textareaDefaultValue:m.hotspot.content.text,textStyles:c("ComposerVideoUploadSphericalMediaToolkitUtils").getTextBarStyles(m.hotspot)})}};l.prototype.componentWillUnmount=function(){"use strict";this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer2.release()};l.prototype.render=function(){"use strict";if(!this.props.isEditing)return c("React").createElement(c("ComposerVideoUploadSphericalAddAnnotationLayer.react"),{handleAddButtonClick:function(){return this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer4(true)}.bind(this)});this.state.hotspot.content.type===c("SphericalVideoHotspotType").TEXT||h(0);var m=this.state.hotspot.content.text;return c("React").createElement(c("ComposerVideoUploadSphericalAnnotationEditLayer.react"),{fov:this.props.fov,hotspot:this.state.hotspot,pitch:this.props.pitch,showNux:this.props.showNux,textareaDefaultValue:this.state.textareaDefaultValue,textareaValue:m,textStyles:this.state.textStyles,viewportHeight:this.props.viewportHeight,viewportWidth:this.props.viewportWidth,yaw:this.props.yaw,handleDeleteButtonClick:function(){return this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer4(false)}.bind(this),handleNuxClosed:this.props.handleNuxClosed,handleNuxView:this.props.handleNuxView,handleTextareaMounted:this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer5,handleTextareaValueChange:this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer6,handleTextStyleButtonClick:this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer7,setTextareaRef:this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer8})};l.prototype.$ComposerVideoUploadSphericalAnnotationEditLayerContainer4=function(m){"use strict";if(!m)this.setState(this.$ComposerVideoUploadSphericalAnnotationEditLayerContainer1);this.props.toggleEditingState(m)};f.exports=l}),null);
__d("ComposerVideoUploadSphericalImageEditLayerResizableImageHandle.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:c("joinClasses")("_pxk"+(!this.props.shouldCapturePointerEvents?" _py2":""),this.props.className),onMouseDown:this.props.handleMouseDown})};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerVideoUploadSphericalImageEditLayerResizableImage.react",["cx","FBHotspot","ComposerVideoUploadSphericalMediaToolkitConstants","ComposerVideoUploadSphericalMediaToolkitUtils","React","ComposerVideoUploadSphericalImageEditLayerResizableImageHandle.react","ScaledImage.react","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={dragHandleCorner:null,hotspotHeight:this.props.hotspot.content.height,hotspotWidth:this.props.hotspot.content.width,isDragging:false,origClientX:0,origClientY:0},m}k.prototype.componentDidMount=function(){this.$ComposerVideoUploadSphericalImageEditLayerResizableImage1=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalImageEditLayerResizableImage1.addSubscriptions(this.props.controller.addListener("mouseMove",function(l){return this.$ComposerVideoUploadSphericalImageEditLayerResizableImage2(l)}.bind(this)),this.props.controller.addListener("mouseUp",function(l){return this.$ComposerVideoUploadSphericalImageEditLayerResizableImage3(l)}.bind(this)),this.props.controller.addListener("mouseLeave",function(l){return this.$ComposerVideoUploadSphericalImageEditLayerResizableImage3(l)}.bind(this)))};k.prototype.componentWillReceiveProps=function(l){if(l.hotspot.content.id!==this.props.hotspot.content.id||l.imageFileData.md5!==this.props.imageFileData.md5)this.setState({hotspotHeight:l.hotspot.content.height,hotspotWidth:l.hotspot.content.width})};k.prototype.componentWillUnmount=function(){this.$ComposerVideoUploadSphericalImageEditLayerResizableImage1.release()};k.prototype.render=function(){var l=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateResizableImageHotspotStyle(this.state.hotspotHeight,this.state.hotspotWidth,this.props.viewportHeight,this.props.viewportWidth);return c("React").createElement("div",{className:"_pwu",style:l},c("React").createElement(c("ScaledImage.react"),{className:"_pwv"+(this.state.isDragging?" _py2":""),draggable:"false",height:this.state.hotspotHeight,imageSize:{height:this.props.imageFileData.height,width:this.props.imageFileData.width},src:this.props.imageFileData.imageBinary,width:this.state.hotspotWidth}),c("React").createElement(c("ComposerVideoUploadSphericalImageEditLayerResizableImageHandle.react"),{className:"_pxl",shouldCapturePointerEvents:!this.state.isDragging,handleMouseDown:function(m){return this.$ComposerVideoUploadSphericalImageEditLayerResizableImage4(m,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.NW)}.bind(this)}),c("React").createElement(c("ComposerVideoUploadSphericalImageEditLayerResizableImageHandle.react"),{className:"_pxx",shouldCapturePointerEvents:!this.state.isDragging,handleMouseDown:function(m){return this.$ComposerVideoUploadSphericalImageEditLayerResizableImage4(m,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.NE)}.bind(this)}),c("React").createElement(c("ComposerVideoUploadSphericalImageEditLayerResizableImageHandle.react"),{className:"_pxm",shouldCapturePointerEvents:!this.state.isDragging,handleMouseDown:function(m){return this.$ComposerVideoUploadSphericalImageEditLayerResizableImage4(m,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.SW)}.bind(this)}),c("React").createElement(c("ComposerVideoUploadSphericalImageEditLayerResizableImageHandle.react"),{className:"_py1",shouldCapturePointerEvents:!this.state.isDragging,handleMouseDown:function(m){return this.$ComposerVideoUploadSphericalImageEditLayerResizableImage4(m,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_RESIZE_HANDLE_CORNERS.SE)}.bind(this)}))};k.prototype.$ComposerVideoUploadSphericalImageEditLayerResizableImage4=function(l,m){this.setState({origClientX:l.clientX,origClientY:l.clientY,isDragging:true,dragHandleCorner:m})};k.prototype.$ComposerVideoUploadSphericalImageEditLayerResizableImage2=function(l){if(!this.state.isDragging||!this.state.dragHandleCorner)return;var m=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateImageDimensionsByMousePosition(this.state.dragHandleCorner,l.clientX,l.clientY,this.state.origClientX,this.state.origClientY,this.props.hotspot.content.height,this.props.hotspot.content.width),n=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateImageMaxScaledDimensions(this.props.imageFileData.height,this.props.imageFileData.width,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MAX_HEIGHT_PX,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MAX_WIDTH_PX),o=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateImageMinScaledDimensions(this.props.imageFileData.height,this.props.imageFileData.width,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MIN_HEIGHT_PX,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MIN_WIDTH_PX);m=c("ComposerVideoUploadSphericalMediaToolkitUtils").constrainImageDimensionsToMinAndMax(m,n,o);m=c("ComposerVideoUploadSphericalMediaToolkitUtils").constrainImageDimensionsToAspectRatio(m,this.props.imageFileData.width/this.props.imageFileData.height);this.setState({hotspotHeight:m.height,hotspotWidth:m.width})};k.prototype.$ComposerVideoUploadSphericalImageEditLayerResizableImage3=function(l){if(!this.state.isDragging)return;this.props.updateHotspotDimensions(this.state.hotspotHeight,this.state.hotspotWidth);this.setState({isDragging:false})};f.exports=k}),null);
__d("ComposerVideoUploadSphericalImageEditLayer.react",["ix","cx","invariant","FBHotspot","ComposerVideoUploadSphericalHotspotSaveNux.react","ComposerVideoUploadSphericalImageEditLayerResizableImage.react","ComposerVideoUploadSphericalMediaToolkitButton.react","React","SphericalVideoHotspotType","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;m.prototype.componentDidMount=function(){if(this.props.showNux)this.props.handleNuxView()};m.prototype.render=function(){this.props.hotspot.content.type===c("SphericalVideoHotspotType").IMAGE||j(0);var n=this.props.hotspot.content.imageData,o=this.props.imageBinaryToMd5[n],p=this.props.uploadedImageFileData.find(function(q){return q.md5===o});if(!p)return null;return c("React").createElement("div",{className:"_4ym3"},c("React").createElement(c("ComposerVideoUploadSphericalImageEditLayerResizableImage.react"),{ref:function(q){return this.$ComposerVideoUploadSphericalImageEditLayer1=q}.bind(this),controller:this.props.controller,hotspot:this.props.hotspot,imageFileData:p,viewportHeight:this.props.viewportHeight,viewportWidth:this.props.viewportWidth,updateHotspotDimensions:this.props.updateHotspotDimensions}),c("React").createElement(c("ComposerVideoUploadSphericalHotspotSaveNux.react"),{contextRef:function(){return this.$ComposerVideoUploadSphericalImageEditLayer1}.bind(this),showNux:this.props.showNux,handleNuxClosed:this.props.handleNuxClosed}),c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_2ysg",thumbnail:h("402967"),onClick:this.props.handleDeleteButtonClick}))};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("ComposerVideoUploadSphericalImageUploadBar.react",["ix","cx","fbt","invariant","AbstractButton.react","FileInput.react","FlexLayout.react","Image.react","ComposerVideoUploadSphericalMediaToolkitConstants","ScaledImage.react","ShimButton.react","React","asset"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m;l=babelHelpers.inherits(n,c("React").PureComponent);m=l&&l.prototype;n.prototype.componentDidUpdate=function(){this.$ComposerVideoUploadSphericalImageUploadBar1||k(0);this.$ComposerVideoUploadSphericalImageUploadBar1.scrollLeft=this.$ComposerVideoUploadSphericalImageUploadBar1.scrollWidth};n.prototype.render=function(){var o=this.props.uploadedImageFileData.map(function(q){return c("React").createElement(c("ShimButton.react"),{className:"_63z0",key:q.imageBinary,onClick:function(r){r.preventDefault();this.props.handleUploadedImageClick(q)}.bind(this)},c("React").createElement(c("ScaledImage.react"),{imageSize:{height:q.height,width:q.width},className:"_63z1",height:c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_BAR_PREVIEW_HEIGHT_PX,src:q.imageBinary,width:c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_BAR_PREVIEW_WIDTH_PX}))}.bind(this)),p=c("ComposerVideoUploadSphericalMediaToolkitConstants").SUPPORTED_IMAGE_FILE_EXTENSIONS.map(function(q){return"."+q}).join(",");return c("React").createElement("div",{className:"_4ym4",ref:function(q){return this.$ComposerVideoUploadSphericalImageUploadBar1=q}.bind(this)},c("React").createElement(c("FlexLayout.react"),{className:"_63y_",align:"center",justify:"start"},o,c("React").createElement("div",{className:"_63z0",key:"uploadImageButton"},c("React").createElement(c("FileInput.react"),{accept:p,name:"uploadImageButton",onChange:function(q){return this.props.handleImageFileUpload(q.target.files[0])}.bind(this)},c("React").createElement(c("AbstractButton.react"),{className:"_4ym5",href:{url:"#"},image:c("React").createElement(c("Image.react"),{src:h("378289")}),label:j._("button for uploading image file"),labelIsHidden:true})))))};function n(){l.apply(this,arguments)}f.exports=n}),null);
__d("ComposerVideoUploadSphericalImageEditLayerContainer.react",["cx","invariant","ComposerVideoUploadSphericalEvents","FBHotspot","ComposerVideoUploadSphericalImageEditLayer.react","ComposerVideoUploadSphericalImageUploadBar.react","ComposerVideoUploadSphericalMediaToolkitConstants","ComposerVideoUploadSphericalMediaToolkitUtils","React","SphericalVideoHotspotType","SubscriptionsHandler","SphericalVideoGuideAnimationConfig"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("SphericalVideoGuideAnimationConfig").MS_PER_SECOND;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(n){__p&&__p();k.constructor.call(this,n);this.state={hotspot:this.props.hotspot||c("ComposerVideoUploadSphericalMediaToolkitUtils").getDefaultHotspot(c("SphericalVideoHotspotType").IMAGE,this.props.controller.getPlaybackDuration()*l)};this.$ComposerVideoUploadSphericalImageEditLayerContainer2=function(o){var p={height:o.height,width:o.width};if(o.height>c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_DEFAULT_MAX_HEIGHT_PX||o.width>c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_DEFAULT_MAX_WIDTH_PX)p=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateImageMaxScaledDimensions(o.height,o.width,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_DEFAULT_MAX_HEIGHT_PX,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_DEFAULT_MAX_WIDTH_PX);else if(o.height<c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MIN_HEIGHT_PX||o.width<c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MIN_WIDTH_PX)p=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateImageMinScaledDimensions(o.height,o.width,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MIN_HEIGHT_PX,c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MIN_WIDTH_PX);var q=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateImageHotspotContent(this.state.hotspot,{imageData:o.imageBinary,height:p.height,width:p.width});this.setState({hotspot:q});this.props.toggleEditingState(true)}.bind(this);this.$ComposerVideoUploadSphericalImageEditLayerContainer3=function(o,p){var q=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateImageHotspotContent(this.state.hotspot,{height:o});q=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateImageHotspotContent(q,{width:p});this.setState({hotspot:q})}.bind(this);this.$ComposerVideoUploadSphericalImageEditLayerContainer1=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalImageEditLayerContainer1.addSubscriptions(n.controller.addListener(c("ComposerVideoUploadSphericalEvents").MEDIA_TOOLKIT.SAVE_HOTSPOT,function(){return this.props.handleSaveHotspotEdits(this.state.hotspot)}.bind(this)))}m.prototype.componentWillReceiveProps=function(n){if(!n.isEditing&&this.props.isEditing)this.setState({hotspot:c("ComposerVideoUploadSphericalMediaToolkitUtils").getDefaultHotspot(c("SphericalVideoHotspotType").IMAGE,this.props.controller.getPlaybackDuration()*l)});if(n.hotspot&&(!this.props.hotspot||this.props.hotspot.content.id!==n.hotspot.content.id)){n.hotspot.content.type===c("SphericalVideoHotspotType").IMAGE||i(0);this.setState({hotspot:n.hotspot})}};m.prototype.componentWillUnmount=function(){this.$ComposerVideoUploadSphericalImageEditLayerContainer1.release()};m.prototype.render=function(){return c("React").createElement("div",{className:"_3quf"},c("React").createElement(c("ComposerVideoUploadSphericalImageUploadBar.react"),{uploadedImageFileData:this.props.uploadedImageFileData,handleImageFileUpload:this.props.handleImageFileUpload,handleUploadedImageClick:this.$ComposerVideoUploadSphericalImageEditLayerContainer2}),this.props.isEditing&&c("React").createElement(c("ComposerVideoUploadSphericalImageEditLayer.react"),{controller:this.props.controller,fov:this.props.fov,hotspot:this.state.hotspot,imageBinaryToMd5:this.props.imageBinaryToMd5,pitch:this.props.pitch,showNux:this.props.showNux,uploadedImageFileData:this.props.uploadedImageFileData,viewportHeight:this.props.viewportHeight,viewportWidth:this.props.viewportWidth,yaw:this.props.yaw,handleDeleteButtonClick:function(){return this.props.toggleEditingState(false)}.bind(this),handleNuxClosed:this.props.handleNuxClosed,handleNuxView:this.props.handleNuxView,updateHotspotDimensions:this.$ComposerVideoUploadSphericalImageEditLayerContainer3}))};f.exports=m}),null);
__d("ComposerVideoUploadSphericalMediaToolkitDropdownOption.react",["cx","FlexLayout.react","Image.react","React","ShimButton.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("ShimButton.react"),{className:"_46sw",onClick:this.props.onClick},c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_l-8",justify:"all"},c("React").createElement("div",{className:"_46su"},this.props.optionData.fbt),c("React").createElement(c("Image.react"),{className:"_46sv",src:this.props.optionData.thumbnail})))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerVideoUploadSphericalMediaToolkitDropdown.react",["ix","cx","FlexLayout.react","ComposerVideoUploadSphericalMediaToolkitButton.react","ComposerVideoUploadSphericalMediaToolkitDropdownOption.react","React","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={dropdownOpen:false},this.$ComposerVideoUploadSphericalMediaToolkitDropdown1=function(event){event.preventDefault();this.setState({dropdownOpen:!this.state.dropdownOpen})}.bind(this),n}l.prototype.render=function(){var m=this.props.options.find(function(q){return q.optionName===this.props.selectedOptionName}.bind(this)),n=this.props.options.length>1?c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_46st",thumbnail:h("388066"),onClick:this.$ComposerVideoUploadSphericalMediaToolkitDropdown1}):null,o=m&&c("React").createElement("div",{className:"_46so"},c("React").createElement(c("FlexLayout.react"),{className:"_k1-"},c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitDropdownOption.react"),{optionData:m,onClick:this.$ComposerVideoUploadSphericalMediaToolkitDropdown1}),n)),p=this.state.dropdownOpen?this.props.options.filter(function(q){return q.optionName!==this.props.selectedOptionName}.bind(this)).map(function(q){return c("React").createElement("button",{key:q.optionName,className:"_46sp",onClick:function(event){return this.$ComposerVideoUploadSphericalMediaToolkitDropdown2(event,q.optionName)}.bind(this)},c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitDropdownOption.react"),{optionData:q}))}.bind(this)):null;return c("React").createElement("div",{className:"_k1z"},c("React").createElement("div",{className:"_46ss"},o,p))};l.prototype.$ComposerVideoUploadSphericalMediaToolkitDropdown2=function(event,m){this.props.handleOptionSelect(m);this.setState({dropdownOpen:false})};f.exports=l}),null);
__d("ComposerVideoUploadSphericalMediaToolkitPanelLayer.react",["ix","cx","FlexLayout.react","ComposerVideoUploadSphericalMediaToolkitButton.react","ComposerVideoUploadSphericalMediaToolkitDropdown.react","React","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_k1y"},c("React").createElement(c("FlexLayout.react"),{align:"start",justify:"all"},c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitDropdown.react"),{options:this.props.dropdownOptions,selectedOptionName:this.props.selectedMediaOption,handleOptionSelect:this.props.handleMediaOptionSelect}),c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_k1_",thumbnail:h("394831"),onClick:function(){return this.props.toggleMediaToolkit(false)}.bind(this)})))};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoUploadSphericalHotspotPreviewElement.react",["cx","ComposerVideoUploadSphericalMediaToolkitUtils","React","ScaledImage.react","SphericalVideoHotspotType","SubscriptionsHandler","SphericalVideoGuideAnimationConfig"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("SphericalVideoGuideAnimationConfig").MS_PER_SECOND;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){"use strict";j.constructor.call(this,m);this.$ComposerVideoUploadSphericalHotspotPreviewElement2=function(){this.forceUpdate()}.bind(this);this.$ComposerVideoUploadSphericalHotspotPreviewElement1=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalHotspotPreviewElement1.addSubscriptions(m.controller.addListener("updateStatus",this.$ComposerVideoUploadSphericalHotspotPreviewElement2))}l.prototype.componentWillUnmount=function(){"use strict";this.$ComposerVideoUploadSphericalHotspotPreviewElement1.release()};l.prototype.render=function(){__p&&__p();var m,n=this;"use strict";var o=this.props.hotspot,p=Math.floor(this.props.controller.getCurrentTimePosition()*k),q=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculatePreviewVisibility(p,this.props.fov,o,this.props.pitch,this.props.viewportHeight,this.props.viewportWidth,this.props.yaw);if(!q)return null;var r=c("ComposerVideoUploadSphericalMediaToolkitUtils").calculateHotspotStyle(this.props.fov,o,false,this.props.pitch,this.props.viewportHeight,this.props.viewportWidth,this.props.yaw),s=null;if(o.content.type===c("SphericalVideoHotspotType").TEXT)s=c("React").createElement("div",{className:"_3h6h"},o.content.text);else if(o.content.type===c("SphericalVideoHotspotType").IMAGE)(function(){__p&&__p();var t=o.content.imageData,u=Object.prototype.hasOwnProperty.call(n.props.imageBinaryToMd5,t)?n.props.imageBinaryToMd5[t]:null,v=n.props.uploadedImageFileData.find(function(y){return y.md5===u}),w=void 0,x=void 0;if(u&&v){w=v.height;x=v.width}else{w=o.content.height;x=o.content.width}s=c("React").createElement(c("ScaledImage.react"),{className:"_2ysf",draggable:"false",height:o.content.height,imageSize:{height:w,width:x},src:t,width:o.content.width})})();return c("React").createElement("button",{className:"_1eeh",style:r,onClick:function(){return this.props.handlePreviewElementClick(o.content.id)}.bind(this)},s)};f.exports=l}),null);
__d("ComposerVideoUploadSphericalMetadataPreviewLayer.react",["cx","ComposerVideoUploadSphericalHotspotPreviewElement.react","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l=this.props.hotspots.hotspots.map(function(m){return c("React").createElement(c("ComposerVideoUploadSphericalHotspotPreviewElement.react"),{key:m.content.id,controller:this.props.controller,fov:this.props.fov,hotspot:m,imageBinaryToMd5:this.props.imageBinaryToMd5,pitch:this.props.pitch,uploadedImageFileData:this.props.uploadedImageFileData,viewportHeight:this.props.viewportHeight,viewportWidth:this.props.viewportWidth,yaw:this.props.yaw,handlePreviewElementClick:this.props.handlePreviewElementClick})}.bind(this));return c("React").createElement("div",{className:"_2eym"},l)};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerVideoUploadSphericalToolkitEntryPointLayer.react",["ix","cx","fbt","BasicFBNux","ComposerVideoUploadSphericalMediaToolkitButton.react","ComposerVideoUploadSphericalMediaToolkitConstants","React","SphericalVideoExperiments","XUIAmbientNUX.react","XUIText.react","asset"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.state={showNux:c("SphericalVideoExperiments").showHotspotEntryNux},o}m.prototype.componentDidMount=function(){"use strict";if(this.state.showNux)c("BasicFBNux").onView(c("ComposerVideoUploadSphericalMediaToolkitConstants").HOTSPOT_ENTRY_NUX_ID)};m.prototype.render=function(){"use strict";return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_341v",ref:function(n){return this.$ComposerVideoUploadSphericalToolkitEntryPointLayer1=n}.bind(this),thumbnail:h("416792"),onClick:function(){return this.props.toggleMediaToolkit(true)}.bind(this)}),c("React").createElement(c("XUIAmbientNUX.react"),{customwidth:250,contextRef:function(){return this.$ComposerVideoUploadSphericalToolkitEntryPointLayer1}.bind(this),position:"right",shown:this.state.showNux,width:"custom",onCloseButtonClick:function(){return this.$ComposerVideoUploadSphericalToolkitEntryPointLayer2()}.bind(this)},c("React").createElement(c("XUIText.react"),{size:"body3",display:"block",weight:"bold"},j._("Overlay Text and Images")),c("React").createElement(c("XUIText.react"),{size:"meta1",display:"block"},j._("Add more detail to each frame of your video with text and images."))))};m.prototype.$ComposerVideoUploadSphericalToolkitEntryPointLayer2=function(){"use strict";this.setState({showNux:false});c("BasicFBNux").onDismiss(c("ComposerVideoUploadSphericalMediaToolkitConstants").HOTSPOT_ENTRY_NUX_ID)};f.exports=m}),null);
__d("SphericalVideoMediaToolkitOptions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ANNOTATION:"annotation",IMAGE:"image",STICKER:"sticker"})}),null);
__d("ComposerVideoUploadSphericalMediaToolkit.react",["cx","fbt","ix","BasicFBNux","ComposerVideoUploadSphericalAnnotationEditLayerContainer.react","ComposerVideoUploadSphericalEvents","ComposerVideoUploadSphericalImageEditLayerContainer.react","ComposerVideoUploadSphericalMediaToolkitConstants","ComposerVideoUploadSphericalMediaToolkitPanelLayer.react","ComposerVideoUploadSphericalMediaToolkitUtils","ComposerVideoUploadSphericalMetadataPreviewLayer.react","React","SphericalVideoExperiments","SphericalVideoHotspotType","SphericalVideoMediaToolkitOptions","ComposerVideoUploadSphericalToolkitEntryPointLayer.react","md5","SphericalVideoGuideAnimationConfig"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m,n=c("SphericalVideoGuideAnimationConfig").MS_PER_SECOND,o=(m={},m[c("SphericalVideoMediaToolkitOptions").ANNOTATION]={fbt:i._("Text"),optionName:c("SphericalVideoMediaToolkitOptions").ANNOTATION,thumbnail:j("415898")},m[c("SphericalVideoMediaToolkitOptions").IMAGE]={fbt:i._("Images"),optionName:c("SphericalVideoMediaToolkitOptions").IMAGE,thumbnail:j("415897")},m);k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(q){"use strict";__p&&__p();l.constructor.call(this,q);this.state={currentEditHotspot:null,imageBinaryToMd5:{},isEditing:false,selectedMediaOption:this.props.enableTextHotspots?c("SphericalVideoMediaToolkitOptions").ANNOTATION:c("SphericalVideoMediaToolkitOptions").IMAGE,showHotspotSaveNux:c("SphericalVideoExperiments").showHotspotSaveNux,showMediaToolkitLayer:false,uploadedImageFileData:[],viewportHeight:0,viewportWidth:0};this.$ComposerVideoUploadSphericalMediaToolkit10=function(r){__p&&__p();var s=r.name.indexOf(".")!=-1?r.name.split(".").pop().toLowerCase():"";if(!c("ComposerVideoUploadSphericalMediaToolkitConstants").SUPPORTED_IMAGE_FILE_EXTENSIONS.includes(s)){c("ComposerVideoUploadSphericalMediaToolkitUtils").showFileExtensionDialog(s,c("ComposerVideoUploadSphericalMediaToolkitConstants").SUPPORTED_IMAGE_FILE_EXTENSIONS.join(", "));return}if(r.size>c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MAX_FILE_SIZE){c("ComposerVideoUploadSphericalMediaToolkitUtils").showImageTooLargeDialog(c("ComposerVideoUploadSphericalMediaToolkitConstants").IMAGE_HOTSPOT_MAX_FILE_SIZE/1048576);return}var t=new FileReader();t.onload=function(){__p&&__p();var u=new Image(),v=String(t.result);u.src=v;var w=c("md5")(v),x=this.state.uploadedImageFileData.findIndex(function(A){return A.md5===w});if(x>-1){var y=[].concat(this.state.uploadedImageFileData),z=y[x];y.splice(x,1);y.push(z);this.setState({uploadedImageFileData:y});return}u.onload=function(){var A,B={height:u.height,imageBinary:v,md5:w,width:u.width},C=[].concat(this.state.uploadedImageFileData,[B]),D=babelHelpers["extends"]({},this.state.imageBinaryToMd5,(A={},A[v]=w,A));this.setState({uploadedImageFileData:C,imageBinaryToMd5:D})}.bind(this)}.bind(this);t.onerror=function(){c("ComposerVideoUploadSphericalMediaToolkitUtils").showFileUploadErrorDialog(t.error.name)};t.readAsDataURL(r)}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit4=function(r){switch(r){case c("SphericalVideoMediaToolkitOptions").ANNOTATION:this.setState({selectedMediaOption:r});break;case c("SphericalVideoMediaToolkitOptions").IMAGE:this.setState({selectedMediaOption:r});break}this.$ComposerVideoUploadSphericalMediaToolkit9(false)}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit6=function(){this.setState({showHotspotSaveNux:false});c("BasicFBNux").onDismiss(c("ComposerVideoUploadSphericalMediaToolkitConstants").HOTSPOT_SAVE_NUX_ID)}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit7=function(){if(this.state.showHotspotSaveNux)c("BasicFBNux").onView(c("ComposerVideoUploadSphericalMediaToolkitConstants").HOTSPOT_SAVE_NUX_ID)}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit11=function(r){__p&&__p();var s=this.props.hotspots.hotspots,t=s.findIndex(function(w){return w.content.id===r}),u=t!==-1?s[t]:null;if(u){var v=void 0;switch(u.content.type){case c("SphericalVideoHotspotType").TEXT:v=c("SphericalVideoMediaToolkitOptions").ANNOTATION;break;case c("SphericalVideoHotspotType").IMAGE:v=c("SphericalVideoMediaToolkitOptions").IMAGE;break}this.setState({currentEditHotspot:u,selectedMediaOption:v});this.$ComposerVideoUploadSphericalMediaToolkit1.setSphericalOrientation(u.yaw,u.pitch);this.$ComposerVideoUploadSphericalMediaToolkit1.seek(u.startTime/n);this.$ComposerVideoUploadSphericalMediaToolkit1.emit(c("ComposerVideoUploadSphericalEvents").VIEWPORT_CONTROL.VIEWPORT_UPDATE);this.props.onViewportUpdate(u.yaw,u.pitch);this.$ComposerVideoUploadSphericalMediaToolkit5(true);this.$ComposerVideoUploadSphericalMediaToolkit9(true);this.props.onHotspotDeleted(r)}}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit8=function(r){__p&&__p();if(r.content.type===c("SphericalVideoHotspotType").TEXT&&r.content.text==="")return;if(this.$ComposerVideoUploadSphericalMediaToolkit1.getCurrentTimePosition()===this.$ComposerVideoUploadSphericalMediaToolkit1.getPlaybackDuration()){c("ComposerVideoUploadSphericalMediaToolkitUtils").showLastFrameDialog();return}var s=this.$ComposerVideoUploadSphericalMediaToolkit1.getOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentViewport"),t=Math.floor(this.$ComposerVideoUploadSphericalMediaToolkit1.getCurrentTimePosition()*n),u=this.$ComposerVideoUploadSphericalMediaToolkit1.getPlaybackDuration()*n,v=r.set("pitch",Math.round(s.pitch));v=v.set("yaw",Math.round(s.yaw));v=v.set("startTime",t);v=v.set("endTime",Math.min(t+c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_DURATION_MS,u));var w=false;if(v.content.id===c("ComposerVideoUploadSphericalMediaToolkitConstants").DEFAULT_ID){if(r.content.type===c("SphericalVideoHotspotType").TEXT)v=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateTextHotspotContent(v,{id:this.props.nextId});else if(r.content.type===c("SphericalVideoHotspotType").IMAGE)v=c("ComposerVideoUploadSphericalMediaToolkitUtils").updateImageHotspotContent(v,{id:this.props.nextId});w=true}this.props.onHotspotAdded(v,w);this.$ComposerVideoUploadSphericalMediaToolkit9(false)}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit9=function(r){if(r)this.$ComposerVideoUploadSphericalMediaToolkit1.pause();else this.setState({currentEditHotspot:null});this.$ComposerVideoUploadSphericalMediaToolkit1.setOption("ComposerVideoUploadSphericalMediaToolkit","isEditingHotspot",r);this.setState({isEditing:r})}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit5=function(r){if(!r)this.$ComposerVideoUploadSphericalMediaToolkit9(false);this.props.onGuideVisibilityUpdate(!r);this.setState({showMediaToolkitLayer:r})}.bind(this);this.$ComposerVideoUploadSphericalMediaToolkit3=false;this.$ComposerVideoUploadSphericalMediaToolkit1=q.controller;this.$ComposerVideoUploadSphericalMediaToolkit1.registerOption("ComposerVideoUploadSphericalMediaToolkit","isEditingHotspot",function(){return this.$ComposerVideoUploadSphericalMediaToolkit3}.bind(this),function(r){return this.$ComposerVideoUploadSphericalMediaToolkit3=r}.bind(this))}p.prototype.componentDidMount=function(){"use strict";if(!this.$ComposerVideoUploadSphericalMediaToolkit2)return;var q=this.$ComposerVideoUploadSphericalMediaToolkit2.offsetWidth,r=this.$ComposerVideoUploadSphericalMediaToolkit2.offsetHeight;this.setState({viewportWidth:q,viewportHeight:r})};p.prototype.componentWillUnmount=function(){"use strict";this.props.onGuideVisibilityUpdate(true)};p.prototype.render=function(){"use strict";var q=this.props,r=q.enableTextHotspots,s=q.enableImageHotspots,t=[];if(r)t.push(o[c("SphericalVideoMediaToolkitOptions").ANNOTATION]);if(s)t.push(o[c("SphericalVideoMediaToolkitOptions").IMAGE]);var u=this.state.showMediaToolkitLayer?c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitPanelLayer.react"),{dropdownOptions:t,selectedMediaOption:this.state.selectedMediaOption,handleMediaOptionSelect:this.$ComposerVideoUploadSphericalMediaToolkit4,toggleMediaToolkit:this.$ComposerVideoUploadSphericalMediaToolkit5}):null,v=r&&this.state.showMediaToolkitLayer&&this.state.selectedMediaOption===c("SphericalVideoMediaToolkitOptions").ANNOTATION?c("React").createElement(c("ComposerVideoUploadSphericalAnnotationEditLayerContainer.react"),{controller:this.$ComposerVideoUploadSphericalMediaToolkit1,fov:this.props.fov,hotspot:this.state.currentEditHotspot,isEditing:this.state.isEditing,pitch:this.props.pitch,showNux:this.state.showHotspotSaveNux,viewportHeight:this.state.viewportHeight,viewportWidth:this.state.viewportWidth,yaw:this.props.yaw,handleNuxClosed:this.$ComposerVideoUploadSphericalMediaToolkit6,handleNuxView:this.$ComposerVideoUploadSphericalMediaToolkit7,handleSaveHotspotEdits:this.$ComposerVideoUploadSphericalMediaToolkit8,toggleEditingState:this.$ComposerVideoUploadSphericalMediaToolkit9}):null,w=s&&this.state.showMediaToolkitLayer&&this.state.selectedMediaOption===c("SphericalVideoMediaToolkitOptions").IMAGE?c("React").createElement(c("ComposerVideoUploadSphericalImageEditLayerContainer.react"),{controller:this.$ComposerVideoUploadSphericalMediaToolkit1,fov:this.props.fov,hotspot:this.state.currentEditHotspot,imageBinaryToMd5:this.state.imageBinaryToMd5,isEditing:this.state.isEditing,pitch:this.props.pitch,showNux:this.state.showHotspotSaveNux,uploadedImageFileData:this.state.uploadedImageFileData,viewportHeight:this.state.viewportHeight,viewportWidth:this.state.viewportWidth,yaw:this.props.yaw,handleImageFileUpload:this.$ComposerVideoUploadSphericalMediaToolkit10,handleNuxClosed:this.$ComposerVideoUploadSphericalMediaToolkit6,handleNuxView:this.$ComposerVideoUploadSphericalMediaToolkit7,handleSaveHotspotEdits:this.$ComposerVideoUploadSphericalMediaToolkit8,toggleEditingState:this.$ComposerVideoUploadSphericalMediaToolkit9}):null,x=!this.state.showMediaToolkitLayer?c("React").createElement(c("ComposerVideoUploadSphericalToolkitEntryPointLayer.react"),{toggleMediaToolkit:this.$ComposerVideoUploadSphericalMediaToolkit5}):null,y=c("React").createElement(c("ComposerVideoUploadSphericalMetadataPreviewLayer.react"),{controller:this.$ComposerVideoUploadSphericalMediaToolkit1,fov:this.props.fov,hotspots:this.props.hotspots,imageBinaryToMd5:this.state.imageBinaryToMd5,pitch:this.props.pitch,uploadedImageFileData:this.state.uploadedImageFileData,viewportHeight:this.state.viewportHeight,viewportWidth:this.state.viewportWidth,yaw:this.props.yaw,handlePreviewElementClick:this.$ComposerVideoUploadSphericalMediaToolkit11});return c("React").createElement("div",{className:"_3kfp",ref:function(z){return this.$ComposerVideoUploadSphericalMediaToolkit2=z}.bind(this)},u,v,w,x,y)};f.exports=p}),null);
__d("ComposerVideoUploadSphericalVideoBottomControlBarSettingsInfoMenuItem.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){return c("React").createElement("div",{className:"_65ep"},c("React").createElement("div",{className:"_-hw"},j.label))}f.exports=i}),null);
__d("ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu.react",["cx","Image.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={hovered:false},this.$ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu1=function(){this.setState({hovered:true})}.bind(this),this.$ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu2=function(){this.setState({hovered:false})}.bind(this),m}k.prototype.render=function(){return c("React").createElement("div",{className:"_65en",onMouseEnter:this.$ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu1,onMouseLeave:this.$ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu2},c("React").createElement(c("Image.react"),{src:this.state.hovered?this.props.buttonIconOnHover:this.props.buttonIconDefault}),c("React").createElement("div",{className:"_62or"},c("React").createElement("div",{className:"_62os"},this.props.children)))};f.exports=k}),null);
__d("ComposerVideoUploadSphericalVideoBottomControlBarSettingsSelectableMenuItem.react",["ix","cx","Image.react","React","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";function j(k){return c("React").createElement("a",{href:"#",className:"_65eo",onClick:k.onSelect},c("React").createElement(c("Image.react"),{src:k.isSelected?h("384999"):h("385001")}),c("React").createElement("div",{className:"_-hv"},k.label),c("React").createElement(c("Image.react"),{className:"_62op",src:k.icon}))}f.exports=j}),null);
__d("ComposerVideoUploadSphericalVideoPreviewEmbeddedControls",["ComposerVideoUploadSphericalEvents","EmbeddedVideoControls","SubscriptionsHandler","VideoUploadSphericalLogger"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){__p&&__p();var k=arguments.length<=2||arguments[2]===undefined?false:arguments[2],l=arguments.length<=3||arguments[3]===undefined?false:arguments[3];"use strict";this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls4=function(m){this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls1.updateDisplayElapsedTime(m);this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls5()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls5=function(){this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls1.updatePointsOfInterestConfig(this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls2.getOption("ComposerVideoUploadSphericalVideoPreviewGuide","getPointsOfInterestConfig"))}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls2=j;this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls1=new(c("EmbeddedVideoControls"))(j,i,{hideSettings:true,hideOnEvents:{autoplay:false,finish:false,pause:false},showButtons:{},pointsOfInterestConfig:j.getOption("ComposerVideoUploadSphericalVideoPreviewGuide","getPointsOfInterestConfig"),displayElapsedTime:j.getOption("VideoWithSphericalGuide","enabled"),forceVisible:k,hideGradient:k,useDarkTheme:l});this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls3=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls3.addSubscriptions(this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls2.addListener("VideoWithSphericalGuide/stateToggle",this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls4),this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls2.addListener(c("ComposerVideoUploadSphericalEvents").GUIDE.KEYFRAMES_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls5),this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls2.addListener(c("ComposerVideoUploadSphericalEvents").GUIDE.CURRENT_POI_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls5),this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls2.addListener("updateStatus",function(m){c("VideoUploadSphericalLogger").setVideoPreviewPosition(Math.round(m.position))}))}h.prototype.destroy=function(){"use strict";this.$ComposerVideoUploadSphericalVideoPreviewEmbeddedControls3.release()};f.exports=h}),null);
__d("ComposerVideoUploadSphericalVideoBottomControlBar.react",["cx","fbt","ix","ComposerVideoUploadSphericalVideoBottomControlBarSettingsInfoMenuItem.react","ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu.react","ComposerVideoUploadSphericalVideoBottomControlBarSettingsSelectableMenuItem.react","ComposerVideoUploadSphericalConstants","ComposerVideoUploadSphericalVideoPreviewEmbeddedControls","React","VideoProjection","VideoStereoFormat","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;m.prototype.componentDidMount=function(){this.$ComposerVideoUploadSphericalVideoBottomControlBar1=new(c("ComposerVideoUploadSphericalVideoPreviewEmbeddedControls"))(this.refs.controls,this.props.controller,true,true)};m.prototype.componentWillUnmount=function(){this.$ComposerVideoUploadSphericalVideoBottomControlBar1.destroy()};m.prototype.render=function(){__p&&__p();var n=this.props.hasSpatialAudio?"on":"off",o="Unknown";if(this.props.projection===c("VideoProjection").EQUIRECTANGULAR)o="Equirect";else if(this.props.projection===c("VideoProjection").CUBEMAP)o="Cubemap";var p="Unknown";if(this.props.stereoMode===c("VideoStereoFormat").MONO)p="Mono";else if(this.props.stereoMode===c("VideoStereoFormat").LEFT_RIGHT)p="Side-by-Side";else if(this.props.stereoMode===c("VideoStereoFormat").TOP_BOTTOM)p="Top-Bottom";return c("React").createElement("div",{className:"_24a7"},c("React").createElement("div",{className:"_4uhh",ref:"controls"}),c("React").createElement("div",{className:"_4uhi"},c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu.react"),{buttonIconDefault:j("438982"),buttonIconOnHover:j("438981")},c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsInfoMenuItem.react"),{label:i._("Audio 360 is {=}",[i.param("=",c("React").createElement("span",{className:"_45ll"},i._({"off":"off","on":"on"},[i["enum"](n,{off:"off",on:"on"})])))])})),c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsMenu.react"),{buttonIconDefault:j("428197"),buttonIconOnHover:j("428193")},this.props.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.STANDALONE?c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsSelectableMenuItem.react"),{icon:j("378733"),isSelected:this.props.projection===c("VideoProjection").EQUIRECTANGULAR,label:i._("Equirect"),onSelect:function(){return this.props.onProjectionSelected(c("VideoProjection").EQUIRECTANGULAR)}.bind(this)}),c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsSelectableMenuItem.react"),{icon:j("378732"),isSelected:this.props.projection===c("VideoProjection").CUBEMAP,label:i._("Cubemap"),onSelect:function(){return this.props.onProjectionSelected(c("VideoProjection").CUBEMAP)}.bind(this)})):c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsInfoMenuItem.react"),{label:i._("{=} projection",[i.param("=",c("React").createElement("span",{className:"_45ll"},i._({"Equirect":"Equirect","Cubemap":"Cubemap","Unknown":"Unknown"},[i["enum"](o,{Equirect:"Equirect",Cubemap:"Cubemap",Unknown:"Unknown"})])))])}),c("React").createElement("div",{className:"_45lm"}),this.props.projection===c("VideoProjection").EQUIRECTANGULAR?c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsSelectableMenuItem.react"),{icon:j("378736"),isSelected:this.props.stereoMode===c("VideoStereoFormat").MONO,label:i._("Mono"),onSelect:function(){return this.props.onStereoModeSelected(c("VideoStereoFormat").MONO)}.bind(this)}),c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsSelectableMenuItem.react"),{icon:j("378738"),isSelected:this.props.stereoMode===c("VideoStereoFormat").LEFT_RIGHT,label:i._("Side-by-Side"),onSelect:function(){return this.props.onStereoModeSelected(c("VideoStereoFormat").LEFT_RIGHT)}.bind(this)}),c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsSelectableMenuItem.react"),{icon:j("378739"),isSelected:this.props.stereoMode===c("VideoStereoFormat").TOP_BOTTOM,label:i._("Top-Bottom"),onSelect:function(){return this.props.onStereoModeSelected(c("VideoStereoFormat").TOP_BOTTOM)}.bind(this)})):c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBarSettingsInfoMenuItem.react"),{label:i._("{=} mode",[i.param("=",c("React").createElement("span",{className:"_45ll"},i._({"Mono":"Mono","Side-by-Side":"Side-by-Side","Left-Right":"Left-Right"},[i["enum"](p,{Mono:"Mono","Side-by-Side":"Side-by-Side","Left-Right":"Left-Right"})])))])})))))};function m(){k.apply(this,arguments)}f.exports=m}),null);
__d("ComposerVideoUploadSphericalVideoIntroTextSection.react",["cx","fbt","React","ComposerVideoUploadSphericalConstants"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(k){var l=i._("Set guide points.");if(k.enableTextHotspots&&k.enableImageHotspots)l=i._("Set guide points and overlay text and images.");else if(k.enableTextHotspots)l=i._("Set guide points and overlay text.");else if(k.enableImageHotspots)l=i._("Set guide points and overlay images.");var m=" ",n=i._("Your final video will automatically pan to these parts."),o=k.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.PAGE_COMPOSER_V1||k.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.EDIT_DIALOG_V1||k.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.CROSSPOST_DIALOG_V1;return c("React").createElement("div",{className:"_16_7"},!o&&c("React").createElement("div",{className:"_2fb1"}),c("React").createElement("div",{className:"_16_8"},i._("Direct your audience to the parts you want them to see")),c("React").createElement("div",{className:"_16_9"},l,m,n),c("React").createElement("div",{className:"_2fb1"}))}f.exports=j}),null);
__d("ComposerVideoUploadSphericalVideoLoader",["cx","invariant","AsyncRequest","EventListener","SphericalVideoPlayer","VideoData","VideoPlayerController","VideoPlayerHTML5Api","VideoProjection","XVideoDataController"],(function a(b,c,d,e,f,g,h,i){__p&&__p();b.URL=b.URL||b.webkitURL;var j=function j(l){if(l&&b.URL&&b.URL.createObjectURL)return b.URL.createObjectURL(l);else return null};k.prototype.load=function(l,m,n){__p&&__p();var o=arguments.length<=3||arguments[3]===undefined?false:arguments[3];"use strict";l||m||i(0);if(m){var p=c("XVideoDataController").getURIBuilder().setString("video_id",m).setEnum("preferred_projection",c("VideoProjection").CUBEMAP).getURI();new(c("AsyncRequest"))().setMethod("GET").setURI(p).setReadOnly(true).setOption("suppressEvaluation",true).setAllowCrossPageTransition(true).setHandler(function(r){var s=new(c("VideoData"))(JSON.parse(r.payload.responseText)),t=s.hasHD()?s.getPlayableSrcHD():s.getPlayableSrcSD();if(!t){n.onError();return}this.$ComposerVideoUploadSphericalVideoLoader1(babelHelpers["extends"]({},n,{projection:s.getProjection()||c("VideoProjection").EQUIRECTANGULAR,videoID:m,videoUrl:t}),o)}.bind(this)).setErrorHandler(n.onError).send()}else if(l){var q=j(l);if(!q){n.onError();return}this.$ComposerVideoUploadSphericalVideoLoader1(babelHelpers["extends"]({videoID:m,videoUrl:q},n),o)}};k.prototype.$ComposerVideoUploadSphericalVideoLoader1=function(l,m){"use strict";var n=l.video;n.setAttribute("src",l.videoUrl);var o=c("EventListener").listen(n,"loadeddata",function(){o.remove();this.$ComposerVideoUploadSphericalVideoLoader2(l,m)}.bind(this))};k.prototype.$ComposerVideoUploadSphericalVideoLoader2=function(l,m){"use strict";var n={initialHeading:l.initialHeading,initialPitch:l.initialPitch,fieldOfView:l.fieldOfView,projectionType:l.projection,stereoFormat:l.stereoFormat,expansionCoef:1.01},o={viewportClassName:m?"_2z6k":"_4aa0",videoID:l.videoID||"",eagerPreload:true,preventScrollDefaultAction:true,useViewportDimension:true},p=new(c("VideoPlayerController"))({apiModule:c("VideoPlayerHTML5Api"),apiConfig:{disableNativeControls:null,VideoPlayerHTML5Shaka:null,subtitlesActive:null,videoData:[{hd_src:l.videoUrl,sd_src:l.videoUrl,stream_type:"progressive"}]},disableLogging:true,should_autoplay:l.autoplay,components:[new(c("SphericalVideoPlayer"))(n,o)]},{root_element:l.root,container_element:l.root,video_element:l.video});if(p.getOption("SphericalVideoPlayer","isReady"))l.onSuccess(p);else if(p.getOption("SphericalVideoPlayer","isUnavailable"))l.onError()};function k(){"use strict"}f.exports=new k()}),null);
__d("ComposerVideoUploadSphericalVideoPreviewGuide",["fbt","ComposerVideoUploadSphericalGuideUtils","SimpleXUIDialog","VideoUploadSphericalControlsAction","SubscriptionsHandler","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","VideoUploadSphericalLogger","VideoWithSphericalGuide","ComposerVideoUploadSphericalEvents","emptyFunction","SphericalVideoGuideAnimationConfig","findGreatestLowerBoundGuideKeyframeIndex"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("SphericalVideoGuideAnimationConfig").MS_PER_SECOND,j=c("SphericalVideoGuideAnimationConfig").MIN_INTERVAL_MS,k=2e3,l=1e3;function m(n,o,p,q,r,s,t,u,v){__p&&__p();var w=arguments.length<=9||arguments[9]===undefined?c("emptyFunction"):arguments[9],x=arguments.length<=10||arguments[10]===undefined?c("emptyFunction"):arguments[10],y=arguments.length<=11||arguments[11]===undefined?c("emptyFunction"):arguments[11],z=arguments.length<=12||arguments[12]===undefined?c("emptyFunction"):arguments[12],A=arguments.length<=13||arguments[13]===undefined?false:arguments[13];"use strict";this.$ComposerVideoUploadSphericalVideoPreviewGuide21=function(C){this.$ComposerVideoUploadSphericalVideoPreviewGuide3.setInitialViewport(C.yaw,C.pitch)}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide22=function(C){this.$ComposerVideoUploadSphericalVideoPreviewGuide7=C;this.$ComposerVideoUploadSphericalVideoPreviewGuide3.setKeyframes(C);this.$ComposerVideoUploadSphericalVideoPreviewGuide2.emit(c("ComposerVideoUploadSphericalEvents").GUIDE.KEYFRAMES_UPDATE);this.$ComposerVideoUploadSphericalVideoPreviewGuide19()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide23=function(C){this.$ComposerVideoUploadSphericalVideoPreviewGuide5=C;this.$ComposerVideoUploadSphericalVideoPreviewGuide3.setEnabled(C);this.$ComposerVideoUploadSphericalVideoPreviewGuide19()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide18=function(){return{onPointOfInterestSelect:this.$ComposerVideoUploadSphericalVideoPreviewGuide31,currentPointOfInterest:this.$ComposerVideoUploadSphericalVideoPreviewGuide32(),pointsOfInterest:this.$ComposerVideoUploadSphericalVideoPreviewGuide33(),showPointOfInterestTimestamps:!this.$ComposerVideoUploadSphericalVideoPreviewGuide6}}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide20=function(){if(this.$ComposerVideoUploadSphericalVideoPreviewGuide8)this.$ComposerVideoUploadSphericalVideoPreviewGuide34()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide24=function(){__p&&__p();this.$ComposerVideoUploadSphericalVideoPreviewGuide2.pause();var C=Math.floor(this.$ComposerVideoUploadSphericalVideoPreviewGuide2.getCurrentTimePosition()*i),D=this.$ComposerVideoUploadSphericalVideoPreviewGuide2.isState(c("VideoPlayerStates").PLAYING),E=D?function(){return this.$ComposerVideoUploadSphericalVideoPreviewGuide2.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").USER))}.bind(this):null;if(C<j){if(this.$ComposerVideoUploadSphericalVideoPreviewGuide6&&C===0)return;if(D)this.$ComposerVideoUploadSphericalVideoPreviewGuide2.pause();c("ComposerVideoUploadSphericalGuideUtils").showAddPointDialog(E,this.$ComposerVideoUploadSphericalVideoPreviewGuide6);return}var F=c("findGreatestLowerBoundGuideKeyframeIndex")(this.$ComposerVideoUploadSphericalVideoPreviewGuide7,C),G=this.$ComposerVideoUploadSphericalVideoPreviewGuide7;if(G[F]&&C-G[F][0]<j||G[F+1]&&G[F+1][0]-C<j){if(this.$ComposerVideoUploadSphericalVideoPreviewGuide6&&G[F]&&G[F][0]===C)return;if(D)this.$ComposerVideoUploadSphericalVideoPreviewGuide2.pause();c("ComposerVideoUploadSphericalGuideUtils").showAddPointDialog(E,this.$ComposerVideoUploadSphericalVideoPreviewGuide6);return}var H=this.$ComposerVideoUploadSphericalVideoPreviewGuide2.getOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentViewport");this.$ComposerVideoUploadSphericalVideoPreviewGuide9(C,H.pitch,H.yaw,function(){return this.$ComposerVideoUploadSphericalVideoPreviewGuide2.getOption("SphericalVideoPlayer","getScreenshotDataURL")}.bind(this));c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").ADD_POINT_OF_INTEREST).log()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide25=function(){this.$ComposerVideoUploadSphericalVideoPreviewGuide17=true;this.$ComposerVideoUploadSphericalVideoPreviewGuide34()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide26=function(){this.$ComposerVideoUploadSphericalVideoPreviewGuide13(true);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").EDIT_POINT_OF_INTEREST).log()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide27=function(){if(!this.$ComposerVideoUploadSphericalVideoPreviewGuide4)return;this.$ComposerVideoUploadSphericalVideoPreviewGuide11(this.$ComposerVideoUploadSphericalVideoPreviewGuide4[0]);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").REMOVE_POINT_OF_INTEREST).log()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide28=function(event){c("SimpleXUIDialog").showConfirm(h._("All existing points of interest will be removed. Are you sure?"),h._("Warning"),function(C){if(C){c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").CLEAR_POINTS_OF_INTEREST).log();this.$ComposerVideoUploadSphericalVideoPreviewGuide12()}}.bind(this))}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide30=function(C){__p&&__p();if(this.$ComposerVideoUploadSphericalVideoPreviewGuide8&&!C){this.$ComposerVideoUploadSphericalVideoPreviewGuide8=C;this.$ComposerVideoUploadSphericalVideoPreviewGuide3.setAutoEnabled(true);if(this.$ComposerVideoUploadSphericalVideoPreviewGuide17){this.$ComposerVideoUploadSphericalVideoPreviewGuide17=false;this.$ComposerVideoUploadSphericalVideoPreviewGuide2.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").USER))}}else{this.$ComposerVideoUploadSphericalVideoPreviewGuide8=C;this.$ComposerVideoUploadSphericalVideoPreviewGuide2.emit("SphericalHeadingIndicator/click")}}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide31=function(C){var D=this.$ComposerVideoUploadSphericalVideoPreviewGuide7.find(function(G){return G[0]===C*i});if(!D)return;var E=D[1],F=D[2];this.$ComposerVideoUploadSphericalVideoPreviewGuide2.seek(C);this.$ComposerVideoUploadSphericalVideoPreviewGuide2.setSphericalOrientation(F,E);this.$ComposerVideoUploadSphericalVideoPreviewGuide2.pause();c("VideoUploadSphericalLogger").setPitchDegrees(E).setYawDegrees(F).setUserAction(c("VideoUploadSphericalControlsAction").SEARCH_POINT_OF_INTEREST).log()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide29=function(){this.$ComposerVideoUploadSphericalVideoPreviewGuide15(function(){return this.$ComposerVideoUploadSphericalVideoPreviewGuide2.getOption("SphericalVideoPlayer","getScreenshotDataURL")}.bind(this))}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide19=function(){__p&&__p();var C=this.$ComposerVideoUploadSphericalVideoPreviewGuide4;if(this.$ComposerVideoUploadSphericalVideoPreviewGuide5){var D=Math.floor(this.$ComposerVideoUploadSphericalVideoPreviewGuide2.getCurrentTimePosition()*i),E=this.$ComposerVideoUploadSphericalVideoPreviewGuide7,F=c("findGreatestLowerBoundGuideKeyframeIndex")(E,D);if(this.$ComposerVideoUploadSphericalVideoPreviewGuide16)if(D===E[F][0])this.$ComposerVideoUploadSphericalVideoPreviewGuide4=E[F];else this.$ComposerVideoUploadSphericalVideoPreviewGuide4=null;else{var G=F+1;if(E[G]&&E[G][0]-D<=k)this.$ComposerVideoUploadSphericalVideoPreviewGuide4=E[G];else if(E[F]&&D-E[F][0]<=l)this.$ComposerVideoUploadSphericalVideoPreviewGuide4=E[F];else this.$ComposerVideoUploadSphericalVideoPreviewGuide4=null}}else this.$ComposerVideoUploadSphericalVideoPreviewGuide4=null;if(C!==this.$ComposerVideoUploadSphericalVideoPreviewGuide4){this.$ComposerVideoUploadSphericalVideoPreviewGuide2.emit(c("ComposerVideoUploadSphericalEvents").GUIDE.CURRENT_POI_UPDATE);this.$ComposerVideoUploadSphericalVideoPreviewGuide14(this.$ComposerVideoUploadSphericalVideoPreviewGuide4?this.$ComposerVideoUploadSphericalVideoPreviewGuide4[0]:null)}}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewGuide2=n;this.$ComposerVideoUploadSphericalVideoPreviewGuide5=q;this.$ComposerVideoUploadSphericalVideoPreviewGuide6=r;this.$ComposerVideoUploadSphericalVideoPreviewGuide7=s;this.$ComposerVideoUploadSphericalVideoPreviewGuide9=t;this.$ComposerVideoUploadSphericalVideoPreviewGuide11=u;this.$ComposerVideoUploadSphericalVideoPreviewGuide12=v;this.$ComposerVideoUploadSphericalVideoPreviewGuide13=w;this.$ComposerVideoUploadSphericalVideoPreviewGuide10=x;this.$ComposerVideoUploadSphericalVideoPreviewGuide14=y;this.$ComposerVideoUploadSphericalVideoPreviewGuide15=z;this.$ComposerVideoUploadSphericalVideoPreviewGuide16=A;this.$ComposerVideoUploadSphericalVideoPreviewGuide17=false;this.$ComposerVideoUploadSphericalVideoPreviewGuide1=new(c("SubscriptionsHandler"))();var B={initialHeading:o,initialPitch:p,guideEnabled:q,guideKeyframes:s};this.$ComposerVideoUploadSphericalVideoPreviewGuide3=new(c("VideoWithSphericalGuide"))(this.$ComposerVideoUploadSphericalVideoPreviewGuide2,B);this.$ComposerVideoUploadSphericalVideoPreviewGuide4=null;this.$ComposerVideoUploadSphericalVideoPreviewGuide8=false;this.$ComposerVideoUploadSphericalVideoPreviewGuide2.registerOption("ComposerVideoUploadSphericalVideoPreviewGuide","getPointsOfInterestConfig",this.$ComposerVideoUploadSphericalVideoPreviewGuide18);this.$ComposerVideoUploadSphericalVideoPreviewGuide2.registerOption("ComposerVideoUploadSphericalVideoPreviewGuide","getCurrentPointOfInterest",function(){return this.$ComposerVideoUploadSphericalVideoPreviewGuide4}.bind(this));this.$ComposerVideoUploadSphericalVideoPreviewGuide2.emit(c("ComposerVideoUploadSphericalEvents").GUIDE.KEYFRAMES_UPDATE);this.$ComposerVideoUploadSphericalVideoPreviewGuide2.emit(c("ComposerVideoUploadSphericalEvents").GUIDE.CURRENT_POI_UPDATE);this.$ComposerVideoUploadSphericalVideoPreviewGuide1.addSubscriptions(this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener("updateStatus",this.$ComposerVideoUploadSphericalVideoPreviewGuide19),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener("seekRequested",this.$ComposerVideoUploadSphericalVideoPreviewGuide20),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener("playRequested",this.$ComposerVideoUploadSphericalVideoPreviewGuide20),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.INITAL_VIEWPORT_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewGuide21),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_KEYFRAMES_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewGuide22),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_STATE_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewGuide23),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.ADD_POI,this.$ComposerVideoUploadSphericalVideoPreviewGuide24),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.SAVE_POI,this.$ComposerVideoUploadSphericalVideoPreviewGuide25),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.EDIT_POI,this.$ComposerVideoUploadSphericalVideoPreviewGuide26),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.REMOVE_POI,this.$ComposerVideoUploadSphericalVideoPreviewGuide27),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.CLEAR_POI,this.$ComposerVideoUploadSphericalVideoPreviewGuide28),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.CREATE_THUMBNAIL,this.$ComposerVideoUploadSphericalVideoPreviewGuide29),this.$ComposerVideoUploadSphericalVideoPreviewGuide2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.KEYFRAME_EDITING_STATE_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewGuide30))}m.prototype.$ComposerVideoUploadSphericalVideoPreviewGuide33=function(){"use strict";return this.$ComposerVideoUploadSphericalVideoPreviewGuide5?this.$ComposerVideoUploadSphericalVideoPreviewGuide7.map(function(n){return n[0]/i}):[]};m.prototype.$ComposerVideoUploadSphericalVideoPreviewGuide32=function(){"use strict";return this.$ComposerVideoUploadSphericalVideoPreviewGuide5&&this.$ComposerVideoUploadSphericalVideoPreviewGuide4?this.$ComposerVideoUploadSphericalVideoPreviewGuide4[0]/i:null};m.prototype.$ComposerVideoUploadSphericalVideoPreviewGuide34=function(){"use strict";if(!this.$ComposerVideoUploadSphericalVideoPreviewGuide4)return;var n=this.$ComposerVideoUploadSphericalVideoPreviewGuide4[0],o=this.$ComposerVideoUploadSphericalVideoPreviewGuide2.getOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentViewport");this.$ComposerVideoUploadSphericalVideoPreviewGuide10(n,o.pitch,o.yaw,function(){return this.$ComposerVideoUploadSphericalVideoPreviewGuide2.getOption("SphericalVideoPlayer","getScreenshotDataURL")}.bind(this));c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").SAVE_EDITS).setPitchDegrees(o.pitch).setYawDegrees(o.yaw).log()};m.prototype.destroy=function(){"use strict";this.$ComposerVideoUploadSphericalVideoPreviewGuide1.release()};f.exports=m}),null);
__d("ComposerVideoUploadSphericalVideoPreviewOverlayButtons",["cx","fbt","ix","regeneratorRuntime","BasicFBNux","ComposerVideoPostUtils","ComposerVideoUploadSphericalEvents","FlexLayout.react","Image.react","ComposerVideoUploadSphericalMediaToolkitButton.react","React","ReactDOM","ShimButton.react","SubscriptionsHandler","XUIAmbientNUX.react","XUIText.react","asset","destroyOnUnload","fbglyph","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m,n,o=4593,p=i._("Direct viewers' attention to a specific time and place.");k=babelHelpers.inherits(q,c("React").Component);l=k&&k.prototype;function q(t){"use strict";l.constructor.call(this,t)}q.prototype.render=function(){"use strict";var t=void 0;if(this.props.thumbnail)t=c("React").createElement(c("Image.react"),{className:"_4a9p",src:this.props.thumbnail});return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_3qv6")},c("React").createElement(c("ShimButton.react"),{className:"_3qvi",onClick:this.props.callback},t,c("React").createElement("span",{className:"_3qvj"},this.props.text)))};m=babelHelpers.inherits(r,c("React").Component);n=m&&m.prototype;function r(t){"use strict";__p&&__p();n.constructor.call(this,t);this.state={guideEnabled:this.props.guideEnabled,guideVisible:true,guideKeyframes:this.props.guideKeyframes,currentKeyframe:this.props.controller.getOption("ComposerVideoUploadSphericalVideoPreviewGuide","getCurrentPointOfInterest"),isEditingKeyframe:this.props.isEditingKeyframe,isMobilePreview:this.props.isMobilePreview,isViewportOnKeyframe:true,showNux:false};this.$OverlayButtonsLayer3=function(){this.setState({currentKeyframe:this.$OverlayButtonsLayer2.getOption("ComposerVideoUploadSphericalVideoPreviewGuide","getCurrentPointOfInterest")})}.bind(this);this.$OverlayButtonsLayer4=function(u){this.setState({guideEnabled:u})}.bind(this);this.$OverlayButtonsLayer5=function(u){this.setState({guideVisible:u})}.bind(this);this.$OverlayButtonsLayer6=function(u){this.setState({guideKeyframes:u})}.bind(this);this.$OverlayButtonsLayer7=function(u){this.setState({isEditingKeyframe:u})}.bind(this);this.$OverlayButtonsLayer9=function(u){this.setState({isMobilePreview:u})}.bind(this);this.$OverlayButtonsLayer10=function(){this.props.controller.emit(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.ADD_POI)}.bind(this);this.$OverlayButtonsLayer11=function(){this.props.controller.emit(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.REMOVE_POI)}.bind(this);this.$OverlayButtonsLayer12=function(){this.props.controller.emit(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.CLEAR_POI)}.bind(this);this.$OverlayButtonsLayer13=function(){this.props.controller.emit("SphericalHeadingIndicator/click")}.bind(this);this.$OverlayButtonsLayer14=function(){this.props.controller.emit(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.SAVE_POI)}.bind(this);this.$OverlayButtonsLayer15=function(){this.props.controller.emit(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.EDIT_POI)}.bind(this);this.$OverlayButtonsLayer8=function(){if(!(this.props.isRedesign&&this.state.currentKeyframe&&this.state.isEditingKeyframe)){if(this.state.isViewportOnKeyframe)this.setState({isViewportOnKeyframe:false});return}var u=this.state.currentKeyframe,v=this.$OverlayButtonsLayer2.getOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentViewport"),w=Math.abs(v.pitch-u[1]),x=Math.abs(v.yaw-u[2]),y=w<1&&(x<1||x>359);if(y!==this.state.isViewportOnKeyframe)this.setState({isViewportOnKeyframe:y})}.bind(this);this.$OverlayButtonsLayer2=t.controller;this.$OverlayButtonsLayer1=new(c("SubscriptionsHandler"))();this.$OverlayButtonsLayer1.addSubscriptions(this.$OverlayButtonsLayer2.addListener(c("ComposerVideoUploadSphericalEvents").GUIDE.CURRENT_POI_UPDATE,this.$OverlayButtonsLayer3),this.$OverlayButtonsLayer2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_STATE_UPDATE,this.$OverlayButtonsLayer4),this.$OverlayButtonsLayer2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_VISIBILITY_UPDATE,this.$OverlayButtonsLayer5),this.$OverlayButtonsLayer2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_KEYFRAMES_UPDATE,this.$OverlayButtonsLayer6),this.$OverlayButtonsLayer2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.KEYFRAME_EDITING_STATE_UPDATE,this.$OverlayButtonsLayer7),this.$OverlayButtonsLayer2.addListener(c("ComposerVideoUploadSphericalEvents").VIEWPORT_CONTROL.VIEWPORT_UPDATE,this.$OverlayButtonsLayer8),this.$OverlayButtonsLayer2.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.MOBILE_PREVIEW_UPDATE,this.$OverlayButtonsLayer9))}r.prototype.componentWillUnmount=function(){"use strict";this.$OverlayButtonsLayer1.release()};r.prototype.componentDidMount=function(){"use strict";__p&&__p();(function t(){__p&&__p();var u;return c("regeneratorRuntime").async(function v(w){while(1)switch(w.prev=w.next){case 0:w.next=2;return c("regeneratorRuntime").awrap(c("ComposerVideoPostUtils").shouldShowNux(o));case 2:u=w.sent;if(this.state.showNux!==u)this.setState({showNux:u});case 4:case"end":return w.stop()}},null,this)}).bind(this)().done()};r.prototype.componentDidUpdate=function(){"use strict";this.$OverlayButtonsLayer8()};r.prototype.$OverlayButtonsLayer16=function(){"use strict";this.props.controller.emit(c("ComposerVideoUploadSphericalEvents").OVERLAY_BUTTONS.CREATE_THUMBNAIL)};r.prototype.render=function(){"use strict";__p&&__p();var t=this.props.enableComposerRedesign,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0;if(this.props.isRedesign)if(this.state.currentKeyframe)if(this.state.isEditingKeyframe){if(this.state.currentKeyframe[0]===0)v=i._("Drag to adjust the starting view point");else v=i._("Drag to adjust the view");x=this.$OverlayButtonsLayer14;z=i._("Done");if(!this.state.isViewportOnKeyframe){w=this.$OverlayButtonsLayer13;y=i._("Reset")}}else{v=i._("Click to remove or adjust this interest point");x=this.$OverlayButtonsLayer15;z=i._("Edit Point");B=j("140971")}else{v=i._("Click to add a point of interest at this time");x=this.$OverlayButtonsLayer10;z=i._("+ Add Point");u=true}else if(this.state.guideEnabled){if(this.state.guideKeyframes.length){x=this.$OverlayButtonsLayer12;z=i._("- Delete All")}if(this.state.currentKeyframe){w=this.$OverlayButtonsLayer11;y=i._("- Delete Point")}else{w=this.$OverlayButtonsLayer10;y=i._("+ Add Point")}}else{v=i._("Drag and scroll to set camera orientation");x=this.$OverlayButtonsLayer13;z=i._("Reset")}var C=v?c("React").createElement(c("XUIText.react"),{className:"_2w21",size:"meta1",weight:"bold"},v):null,D=!t?c("React").createElement("div",{className:"_2w20"},c("React").createElement("div",{className:"_4n8x"}),C):null,E=!t&&z?c("React").createElement(q,{className:"_3qvk",callback:x,text:z,thumbnail:B,ref:"topRightButton"}):null,F=!t&&y?c("React").createElement(q,{className:"_3qvl",callback:w,text:y,thumbnail:A}):null,G=null;if(t&&u&&E){if(this.state.showNux)c("BasicFBNux").onView(o);G=c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.topRightButton}.bind(this),shown:this.state.showNux,position:"below",alignment:"center",onCloseButtonClick:function(){c("BasicFBNux").onDismiss(o);this.setState({showNux:false})}.bind(this)},c("React").createElement(c("XUIText.react"),{size:"meta1",display:"block"},p))}var H=this.props.isRedesign&&!this.state.currentKeyframe,I=this.props.isRedesign&&this.state.currentKeyframe&&!this.state.isEditingKeyframe,J=this.props.isRedesign&&this.state.currentKeyframe&&this.state.isEditingKeyframe,K=i._("Set guide point"),L=i._("Replace guide point"),M=t&&(H||I)?c("React").createElement(c("ShimButton.react"),{className:"_1sne",onClick:H?this.$OverlayButtonsLayer10:this.$OverlayButtonsLayer15},c("React").createElement(c("FlexLayout.react"),{className:"_1snf",align:"center",justify:"all"},c("React").createElement("div",{className:"_1sng"},H?K:L),c("React").createElement(c("Image.react"),{className:"_1sni",src:j("415891")}))):null,N=this.state.isMobilePreview?j("425575"):j("425576"),O=t&&J?c("React").createElement(c("Image.react"),{className:"_1snj"+(this.state.isMobilePreview?" _19y8":""),src:N}):null,P=t&&J?c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkitButton.react"),{className:"_1snk",thumbnail:j("393776"),onClick:this.$OverlayButtonsLayer14}):null;return c("React").createElement("div",{className:"_64a8"+(!this.state.guideVisible?" _4em9":"")},G,D,E,F,M,O,P)};function s(t,u,v,w){var x=arguments.length<=4||arguments[4]===undefined?false:arguments[4],y=arguments.length<=5||arguments[5]===undefined?false:arguments[5],z=arguments.length<=6||arguments[6]===undefined?false:arguments[6],A=arguments.length<=7||arguments[7]===undefined?false:arguments[7];"use strict";c("ReactDOM").render(c("React").createElement(r,{controller:t,guideEnabled:v,guideKeyframes:w,isEditingKeyframe:x,isMobilePreview:y,isRedesign:z,enableComposerRedesign:A}),u);c("destroyOnUnload")(function(){return c("ReactDOM").unmountComponentAtNode(u)})}f.exports=s}),null);
__d("ComposerVideoUploadSphericalVideoPreviewPOIIndicator",["cx","ComposerVideoUploadSphericalEvents","CSS","DOM","DOMDimensions","SubscriptionsHandler","SphericalProjectionUtils"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(k,l){__p&&__p();var m=arguments.length<=2||arguments[2]===undefined?false:arguments[2],n=arguments.length<=3||arguments[3]===undefined?false:arguments[3],o=arguments.length<=4||arguments[4]===undefined?true:arguments[4];"use strict";j.call(this);this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1=k;this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator2=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator3=this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.getOption("ComposerVideoUploadSphericalVideoPreviewGuide","getCurrentPointOfInterest");this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator6=n;this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator8=o;this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator2.addSubscriptions(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.addListener(c("ComposerVideoUploadSphericalEvents").GUIDE.CURRENT_POI_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator9),this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.addListener(c("ComposerVideoUploadSphericalEvents").VIEWPORT_CONTROL.VIEWPORT_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator10),this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.addListener(c("ComposerVideoUploadSphericalEvents").VIEWPORT_CONTROL.FIELD_OF_VIEW_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator10),this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.KEYFRAME_EDITING_STATE_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator11),this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_VISIBILITY_UPDATE,this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator12));this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4=c("DOM").create("div",{className:"_13ds"+(m?" _3c8f":"")+(n?" _3c8g":""),onclick:this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator13});c("DOM").appendContent(l,this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4);this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator5=c("DOMDimensions").getElementDimensions(l);this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator14()}i.prototype.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator14=function(){"use strict";if(!this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator3||!this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator8)c("CSS").hide(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4);else c("CSS").show(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4)};i.prototype.destroy=function(){"use strict";this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator2.release()};var j=function j(){__p&&__p();this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator11=function(k){__p&&__p();if(!this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator6&&k){this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.once("SphericalVideoRecenterControl/animationEnd",function(){return this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator6=k}.bind(this));this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator7=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator7.addSubscriptions(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.addListener("updateViewportBegin",function(){return c("CSS").addClass(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4,"_3c8g")}.bind(this)),this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.addListener("updateViewportEnd",function(){return c("CSS").removeClass(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4,"_3c8g")}.bind(this)))}else{this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator6=k;if(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator7){this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator7.release();this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator7=null}}}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator9=function(){this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator3=this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.getOption("ComposerVideoUploadSphericalVideoPreviewGuide","getCurrentPointOfInterest");this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator14();this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator10()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator10=function(){__p&&__p();if(!this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator3)return;var k=this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator3,l=this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator5,m=l.width,n=l.height;if(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator6){this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4.style.left=m/2+"px";this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4.style.top=n/2+"px";return}var o=this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.getOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentViewport"),p=k[2],q=k[1],r=o.yaw,s=o.pitch,t=this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.getOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentFieldOfView"),u=c("SphericalProjectionUtils").convert3dTo2dOnScreen(p,q,r,s,t,m,n),v=u.x,w=u.y;this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4.style.left=v+"px";this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4.style.top=w+"px"}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator13=function(){if(!this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator3)return;this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.emit("SphericalHeadingIndicator/click");this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator1.pause()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator12=function(k){this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator8=k;if(!k)c("CSS").hide(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4);else c("CSS").show(this.$ComposerVideoUploadSphericalVideoPreviewPOIIndicator4)}.bind(this)};f.exports=i}),null);
__d("ComposerVideoUploadSphericalVideoPreviewSpinner",["cx","React","ReactDOM","VideoSpinner","XUISpinner.react","destroyOnUnload"],(function a(b,c,d,e,f,g,h){function i(j,k){"use strict";c("ReactDOM").render(c("React").createElement(c("XUISpinner.react"),{size:"large",className:"_hes"}),k);this.$ComposerVideoUploadSphericalVideoPreviewSpinner1=new(c("VideoSpinner"))(j,k);c("destroyOnUnload")(function(){return c("ReactDOM").unmountComponentAtNode(k)})}f.exports=i}),null);
__d("normalizeYaw",[],(function a(b,c,d,e,f,g){function h(i){var j=arguments.length<=1||arguments[1]===undefined?false:arguments[1],k=j?Math.PI:180,l=k*2;return i>=0?(i+k)%l-k:(i-k)%l+k}f.exports=h}),null);
__d("ComposerVideoUploadSphericalVideoPreviewViewportControl",["ComposerVideoUploadSphericalEvents","SphericalVideoPlayerEvents","SubscriptionsHandler","VideoPlayerStates","VideoPlayerReasonTransitionHelper","VideoPlayerReason","normalizeYaw"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l,m,n){"use strict";__p&&__p();this.$ComposerVideoUploadSphericalVideoPreviewViewportControl13=function(){if(this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.getOption("ComposerVideoUploadSphericalMediaToolkit","isEditingHotspot")){this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.emit(c("ComposerVideoUploadSphericalEvents").MEDIA_TOOLKIT.SAVE_HOTSPOT);return}if(this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.isState(c("VideoPlayerStates").PLAYING))this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.pause();else this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").USER))}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewViewportControl8=function(o,p){this.$ComposerVideoUploadSphericalVideoPreviewViewportControl3.yaw=c("normalizeYaw")(o);this.$ComposerVideoUploadSphericalVideoPreviewViewportControl3.pitch=p;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.emit(c("ComposerVideoUploadSphericalEvents").VIEWPORT_CONTROL.VIEWPORT_UPDATE);this.$ComposerVideoUploadSphericalVideoPreviewViewportControl11()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewViewportControl9=function(o){this.$ComposerVideoUploadSphericalVideoPreviewViewportControl4=o;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.emit(c("ComposerVideoUploadSphericalEvents").VIEWPORT_CONTROL.FIELD_OF_VIEW_UPDATE)}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewViewportControl10=function(o){if(!o.deltaY)return;var p=Math.log(Math.max(Math.E,Math.abs(o.deltaY))),q=o.deltaY>0?p:-p,r=Math.max(40,Math.min(90,Math.round(this.$ComposerVideoUploadSphericalVideoPreviewViewportControl4+q)));this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.setSphericalFieldOfView(r);this.$ComposerVideoUploadSphericalVideoPreviewViewportControl12()}.bind(this);this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1=i;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl3={yaw:j,pitch:k};this.$ComposerVideoUploadSphericalVideoPreviewViewportControl4=l;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl5=0;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl6=m;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl7=n;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.registerOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentViewport",function(){return this.$ComposerVideoUploadSphericalVideoPreviewViewportControl3}.bind(this));this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.registerOption("ComposerVideoUploadSphericalVideoPreviewViewportControl","getCurrentFieldOfView",function(){return this.$ComposerVideoUploadSphericalVideoPreviewViewportControl4}.bind(this));this.$ComposerVideoUploadSphericalVideoPreviewViewportControl2=new(c("SubscriptionsHandler"))();this.$ComposerVideoUploadSphericalVideoPreviewViewportControl2.addSubscriptions(this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("viewportChange",this.$ComposerVideoUploadSphericalVideoPreviewViewportControl8),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener(c("SphericalVideoPlayerEvents").SET_FIELD_OF_VIEW,this.$ComposerVideoUploadSphericalVideoPreviewViewportControl9),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("wheelScroll",this.$ComposerVideoUploadSphericalVideoPreviewViewportControl10),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("updateViewportBegin",function(){return this.$ComposerVideoUploadSphericalVideoPreviewViewportControl5++}.bind(this)),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("updateViewportEnd",function(){this.$ComposerVideoUploadSphericalVideoPreviewViewportControl5--;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl11()}.bind(this)),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("SphericalVideoRecenterControl/animationStart",function(){return this.$ComposerVideoUploadSphericalVideoPreviewViewportControl5++}.bind(this)),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("SphericalVideoRecenterControl/animationEnd",function(){this.$ComposerVideoUploadSphericalVideoPreviewViewportControl5--;this.$ComposerVideoUploadSphericalVideoPreviewViewportControl11()}.bind(this)),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("VideoWithSphericalGuide/stateToggle",function(o){this.$ComposerVideoUploadSphericalVideoPreviewViewportControl11();this.$ComposerVideoUploadSphericalVideoPreviewViewportControl12()}.bind(this)),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.FIELD_OF_VIEW_UPDATE,function(o){return this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.setSphericalFieldOfView(o)}.bind(this)),this.$ComposerVideoUploadSphericalVideoPreviewViewportControl1.addListener("clickVideo",this.$ComposerVideoUploadSphericalVideoPreviewViewportControl13))}h.prototype.$ComposerVideoUploadSphericalVideoPreviewViewportControl11=function(){"use strict";this.$ComposerVideoUploadSphericalVideoPreviewViewportControl6(this.$ComposerVideoUploadSphericalVideoPreviewViewportControl3.yaw,this.$ComposerVideoUploadSphericalVideoPreviewViewportControl3.pitch,!!this.$ComposerVideoUploadSphericalVideoPreviewViewportControl5)};h.prototype.$ComposerVideoUploadSphericalVideoPreviewViewportControl12=function(){"use strict";this.$ComposerVideoUploadSphericalVideoPreviewViewportControl7(this.$ComposerVideoUploadSphericalVideoPreviewViewportControl4)};h.prototype.destroy=function(){"use strict";this.$ComposerVideoUploadSphericalVideoPreviewViewportControl2.release()};f.exports=h}),null);
__d("ComposerVideoUploadSphericalVideoTopControlBar.react",["ix","cx","fbt","ComposerVideoUploadSphericalFOVSlider.react","FlexLayout.react","Image.react","React","VideoComposerDialogRadioButton.react","XUIButton.react","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=40,n=90;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;o.prototype.render=function(){var p=this.props.showOmnistabSection?c("React").createElement("div",{className:"_39qi"},c("React").createElement("div",{className:"_39qj"},c("React").createElement(c("VideoComposerDialogRadioButton.react"),{checked:this.props.omnistabEnabled,className:"_39qk",label:c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_2l_h",justify:"all"},j._("Stabilize"),c("React").createElement(c("Image.react"),{className:"_2l_q",src:h("438994")})),onSelect:function(event){if(this.props.allowOmnistabToggle)this.props.onToggleEnableOmnistab(event);event.preventDefault()}.bind(this)}))):null,q=c("React").createElement("div",{className:"_39qi"},c("React").createElement("div",{className:"_39qm"},c("React").createElement(c("XUIButton.react"),{className:"_39qq _3k95"+(this.props.isMobilePreview?" _39qr":""),onClick:function(s){return this.$ComposerVideoUploadSphericalVideoTopControlBar1(s,true)}.bind(this),image:c("React").createElement(c("Image.react"),{src:this.props.isMobilePreview?h("438996"):h("407248")}),label:""}),c("React").createElement(c("XUIButton.react"),{className:"_39qq _3k96"+(!this.props.isMobilePreview?" _39qr":""),onClick:function(s){return this.$ComposerVideoUploadSphericalVideoTopControlBar1(s,false)}.bind(this),image:c("React").createElement(c("Image.react"),{src:this.props.isMobilePreview?h("438985"):h("438986")}),label:""}))),r=c("React").createElement(c("ComposerVideoUploadSphericalFOVSlider.react"),{decimalPlaces:0,min:m,max:n,value:this.props.fov,onChange:function(s){return this.props.onFOVUpdate(s)}.bind(this),horizontal:true,newStyling:true});return c("React").createElement("div",{className:"_39qs"},p,q,r)};o.prototype.$ComposerVideoUploadSphericalVideoTopControlBar1=function(event,p){event.preventDefault();this.props.onToggleIsMobilePreview(p)};function o(){k.apply(this,arguments)}f.exports=o}),null);
__d("ComposerVideoUploadSphericalVideo.react",["cx","fbt","ix","ComposerVideoUploadSphericalVideoBottomControlBar.react","ComposerVideoUploadSphericalVideoLoader","ComposerVideoUploadSphericalVideoTopControlBar.react","ComposerVideoUploadSphericalEvents","DOM","ComposerVideoUploadSphericalVideoPreviewEmbeddedControls","ComposerVideoUploadSphericalFOVSlider.react","ComposerVideoUploadSphericalVideoPreviewGuide","Image.react","ComposerVideoUploadSphericalVideoIntroTextSection.react","ComposerVideoUploadSphericalMediaToolkit.react","ComposerVideoUploadSphericalVideoPreviewOverlayButtons","ComposerVideoUploadSphericalVideoPreviewPOIIndicator","React","SphericalVideoPlayerEvents","SphericalVideoRecenterControl","ComposerVideoUploadSphericalVideoPreviewSpinner","VideoPlayerStates","VideoSphericalHeadingIndicator","ComposerVideoUploadSphericalVideoPreviewViewportControl","emptyFunction"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=40,n=90;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(p){"use strict";__p&&__p();l.constructor.call(this,p);this.state={controller:null,isMobilePreview:false};this.$ComposerVideoUploadSphericalVideo11=function(q){__p&&__p();var r=this.props.yaw,s=this.props.pitch,t=this.props.fov,u=this.props.guideEnabled,v=this.props.keyframes.map(function(x){return x.getLegacyParams()}).toJS();if(!this.props.enableComposerRedesign)this.$ComposerVideoUploadSphericalVideo12(function(x){this.$ComposerVideoUploadSphericalVideo3=new(c("ComposerVideoUploadSphericalVideoPreviewEmbeddedControls"))(x,q,this.props.enableComposerRedesign)}.bind(this),function(x){this.$ComposerVideoUploadSphericalVideo5=new(c("ComposerVideoUploadSphericalVideoPreviewPOIIndicator"))(q,x,true,this.props.isEditingKeyframe,this.props.guideVisible)}.bind(this));this.$ComposerVideoUploadSphericalVideo12(function(x){this.$ComposerVideoUploadSphericalVideo2=new(c("VideoSphericalHeadingIndicator"))(q,x,0,0,t,true)}.bind(this),function(x){this.$ComposerVideoUploadSphericalVideo4=new(c("ComposerVideoUploadSphericalVideoPreviewSpinner"))(q,x)}.bind(this),function(x){this.$ComposerVideoUploadSphericalVideo6=new(c("ComposerVideoUploadSphericalVideoPreviewOverlayButtons"))(q,x,u,v,this.props.isEditingKeyframe,this.state.isMobilePreview,true,this.props.enableComposerRedesign)}.bind(this));this.$ComposerVideoUploadSphericalVideo7=new(c("SphericalVideoRecenterControl"))(q,r,s);this.$ComposerVideoUploadSphericalVideo8=new(c("ComposerVideoUploadSphericalVideoPreviewViewportControl"))(q,r,s,t,this.props.onViewportUpdate,this.props.onFOVUpdate);this.$ComposerVideoUploadSphericalVideo9=new(c("ComposerVideoUploadSphericalVideoPreviewGuide"))(q,r,s,u,this.props.enableComposerRedesign,v,this.props.onPointOfInterestAdded,this.props.onPointOfInterestRemoved,this.props.onPointOfInterestsCleared,this.props.togglePointOfInterestEdit,this.props.onPointOfInterestSaved,this.props.updateActiveGuideKeyframe,this.props.onCreateThumbnail,true);this.props.onLoadVideoSuccess(q);this.setState({controller:q});var w=q.addListener("stateChange",function(){if(q.isState(c("VideoPlayerStates").DESTROYED)){w.remove();this.componentWillUnmount();this.setState({controller:null})}}.bind(this))}.bind(this);this.$ComposerVideoUploadSphericalVideo14=function(q){this.setState({isMobilePreview:q});if(this.state.controller)this.state.controller.emit(c("ComposerVideoUploadSphericalEvents").PREVIEW.MOBILE_PREVIEW_UPDATE,q)}.bind(this);this.$ComposerVideoUploadSphericalVideo10=function(){if(this.props.shouldLoadVideo){c("ComposerVideoUploadSphericalVideoLoader").load(this.props.videoFile,this.props.videoID,{initialHeading:this.props.yaw,initialPitch:this.props.pitch,fieldOfView:this.props.fov,stereoFormat:this.props.stereoMode,projection:this.props.projection,root:this.refs.container,video:this.refs.video,onSuccess:this.$ComposerVideoUploadSphericalVideo11,onError:this.props.onLoadVideoError,autoplay:true},this.props.enableComposerRedesign);this.$ComposerVideoUploadSphericalVideo10=c("emptyFunction")}}.bind(this)}o.prototype.componentWillUnmount=function(){"use strict";this.$ComposerVideoUploadSphericalVideo3&&this.$ComposerVideoUploadSphericalVideo3.destroy();this.$ComposerVideoUploadSphericalVideo7&&this.$ComposerVideoUploadSphericalVideo7.destroy();this.$ComposerVideoUploadSphericalVideo8&&this.$ComposerVideoUploadSphericalVideo8.destroy();this.$ComposerVideoUploadSphericalVideo5&&this.$ComposerVideoUploadSphericalVideo5.destroy();this.$ComposerVideoUploadSphericalVideo9&&this.$ComposerVideoUploadSphericalVideo9.destroy()};o.prototype.componentDidMount=function(){"use strict";this.$ComposerVideoUploadSphericalVideo10()};o.prototype.componentDidUpdate=function(p){"use strict";__p&&__p();var q=this.state.controller;if(!q){this.$ComposerVideoUploadSphericalVideo10();return}if(this.props.guideEnabled!==p.guideEnabled)q.emit(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_STATE_UPDATE,this.props.guideEnabled);if(this.props.guideVisible!==p.guideVisible)q.emit(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_VISIBILITY_UPDATE,this.props.guideVisible);if(this.props.fov!==p.fov)q.emit(c("ComposerVideoUploadSphericalEvents").PREVIEW.FIELD_OF_VIEW_UPDATE,this.props.fov);if(!this.props.keyframes.equals(p.keyframes))q.emit(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_KEYFRAMES_UPDATE,this.props.keyframes.map(function(r){return r.getLegacyParams()}).toJS());if(this.props.isEditingKeyframe!==p.isEditingKeyframe)q.emit(c("ComposerVideoUploadSphericalEvents").PREVIEW.KEYFRAME_EDITING_STATE_UPDATE,this.props.isEditingKeyframe);if(this.props.projection!==p.projection)q.emit(c("SphericalVideoPlayerEvents").SET_VIDEO_PROJECTION,this.props.projection);if(this.props.stereoMode!==p.stereoMode)q.emit(c("SphericalVideoPlayerEvents").SET_STEREO_MODE,this.props.stereoMode)};o.prototype.$ComposerVideoUploadSphericalVideo12=function(){"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];q.forEach(function(s){var t=c("DOM").create("div",{className:"_4jd4"+(this.props.enableComposerRedesign?" _251a":"")});c("DOM").insertAfter(this.refs.video,t);s(t)}.bind(this))};o.prototype.$ComposerVideoUploadSphericalVideo13=function(p){"use strict";return n-p+m};o.prototype.render=function(){"use strict";__p&&__p();var p=this.props,q=p.enableComposerRedesign,r=p.enableTextHotspots,s=p.enableImageHotspots,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0;if(this.props.videoLoading)t=c("React").createElement("div",{className:"_3u_t"},c("React").createElement("div",{className:"_3u_u"},i._("Loading Video Preview...")));else if(this.props.videoUnavailable)t=c("React").createElement("div",{className:"_3u_t"},c("React").createElement("div",{className:"_3u_u"},i._("Video Preview Unavailable")));else{if(q){if(this.state.isMobilePreview)t=[c("React").createElement(c("Image.react"),{key:"phone-image",className:"_4ncu"+(!this.state.isMobilePreview?" _4nfs":""),src:j("415900")}),c("React").createElement("div",{key:"left",className:"_4nft _4nfu"+(!this.state.isMobilePreview?" _4nfs":"")}),c("React").createElement("div",{key:"right",className:"_4nft _4ngc"+(!this.state.isMobilePreview?" _4nfs":"")})]}else t=[c("React").createElement("div",{key:"left",className:"_29zb _29zc"}),c("React").createElement("div",{key:"right",className:"_29zb _29zd"})];if(q&&this.state.controller){u=c("React").createElement(c("ComposerVideoUploadSphericalVideoTopControlBar.react"),{allowOmnistabToggle:this.props.allowOmnistabToggle,omnistabEnabled:this.props.omnistabEnabled,showOmnistabSection:this.props.showOmnistabSection,onToggleEnableOmnistab:this.props.onToggleEnableOmnistab,onToggleIsMobilePreview:this.$ComposerVideoUploadSphericalVideo14,isMobilePreview:this.state.isMobilePreview,fov:this.props.fov,onFOVUpdate:this.props.onFOVUpdate});v=c("React").createElement(c("ComposerVideoUploadSphericalVideoBottomControlBar.react"),{controller:this.state.controller,projection:this.props.projection,stereoMode:this.props.stereoMode,hasSpatialAudio:this.props.hasSpatialAudio,onProjectionSelected:this.props.onProjectionSelected,onStereoModeSelected:this.props.onStereoModeSelected,onToggleSpatialAudio:this.props.onToggleSpatialAudio,isEditing:this.props.isEditing,componentSource:this.props.componentSource});if(r||s)x=c("React").createElement(c("ComposerVideoUploadSphericalMediaToolkit.react"),{controller:this.state.controller,enableImageHotspots:this.props.enableImageHotspots,enableTextHotspots:this.props.enableTextHotspots,fov:this.props.fov,hotspots:this.props.hotspots,nextId:this.props.nextHotspotId,pitch:this.props.pitch,yaw:this.props.yaw,onGuideVisibilityUpdate:this.props.onGuideVisibilityUpdate,onHotspotAdded:this.props.onHotspotAdded,onHotspotDeleted:this.props.onHotspotDeleted,onViewportUpdate:this.props.onViewportUpdate});y=c("React").createElement(c("ComposerVideoUploadSphericalVideoIntroTextSection.react"),{componentSource:this.props.componentSource,enableImageHotspots:this.props.enableImageHotspots,enableTextHotspots:this.props.enableTextHotspots})}else w=c("React").createElement(c("ComposerVideoUploadSphericalFOVSlider.react"),{decimalPlaces:0,min:m,max:n,value:this.props.fov,onChange:function(z){return this.props.onFOVUpdate(z)}.bind(this)})}return c("React").createElement("div",{ref:"root",className:"_4jd5"+(q&&this.state.controller?" _251a":"")},y,u,c("React").createElement("div",{className:"_251b"+(q?" _251a":"")},w,c("React").createElement("div",{ref:"container",className:"_4jd6"+(this.state.isMobilePreview?" _251f":"")},c("React").createElement("video",{ref:"video",crossOrigin:"anonymous",className:"_4jd7"}),t,x)),v)};f.exports=o}),null);
__d("ComposerVideoUploadSphericalControlsTab.react",["cx","ComposerVideoUploadSphericalConstants","ComposerVideoUploadSphericalVideo.react","ComposerVideoUploadSphericalEnhancementsSection.react","ComposerVideoUploadSphericalGuideSection.react","React","SimpleXUIDialog"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.componentDidUpdate=function(){if(this.props.errorMessageText){var l=this.props.errorMessageConfirmOnly?c("SimpleXUIDialog").show.bind(c("SimpleXUIDialog")):c("SimpleXUIDialog").showConfirm.bind(c("SimpleXUIDialog"));l(this.props.errorMessageText,this.props.errorMessageTitle,this.props.onAcceptErrorMessage);this.props.onClearErrorMessage()}};k.prototype.render=function(){var l=this.props.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.PAGE_COMPOSER_V1||this.props.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.EDIT_DIALOG_V1||this.props.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.CROSSPOST_DIALOG_V1;return c("React").createElement("div",{className:"_9_2"+(!this.props.shown?" _2oq6":"")+(l?" _l_-":"")},c("React").createElement("div",{className:"_4zj0"+(l?" _l_-":"")+(this.props.enableComposerRedesign?" _61-4":"")},c("React").createElement(c("ComposerVideoUploadSphericalVideo.react"),{fov:this.props.fov,guideEnabled:this.props.guideEnabled,guideVisible:this.props.guideVisible,isEditingKeyframe:this.props.isEditingKeyframe,keyframes:this.props.keyframes,hotspots:this.props.hotspots,nextHotspotId:this.props.nextHotspotId,onCreateThumbnail:this.props.onCreateThumbnail,onFOVUpdate:this.props.onFOVUpdate,onGuideVisibilityUpdate:this.props.onGuideVisibilityUpdate,onHotspotAdded:this.props.onHotspotAdded,onHotspotDeleted:this.props.onHotspotDeleted,onLoadVideoError:this.props.onLoadVideoError,onLoadVideoSuccess:this.props.onLoadVideoSuccess,onPointOfInterestAdded:this.props.onPointOfInterestAdded,onPointOfInterestSaved:this.props.onPointOfInterestSaved,onPointOfInterestsCleared:this.props.onPointOfInterestsCleared,onPointOfInterestRemoved:this.props.onPointOfInterestRemoved,onPointsOfInterestRemoved:this.props.onPointsOfInterestRemoved,onViewportUpdate:this.props.onViewportUpdate,onProjectionSelected:this.props.onProjectionSelected,onStereoModeSelected:this.props.onStereoModeSelected,onToggleSpatialAudio:this.props.onToggleSpatialAudio,pitch:this.props.pitch,shouldLoadVideo:this.props.shouldLoadVideo,togglePointOfInterestEdit:this.props.togglePointOfInterestEdit,updateActiveGuideKeyframe:this.props.updateActiveGuideKeyframe,videoFile:this.props.videoFile,videoID:this.props.videoID,videoLoading:this.props.videoLoading,videoUnavailable:this.props.videoUnavailable,yaw:this.props.yaw,allowOmnistabToggle:this.props.allowOmnistabToggle,omnistabEnabled:this.props.omnistabEnabled,showOmnistabSection:this.props.showOmnistabSection,onToggleEnableOmnistab:this.props.onToggleEnableOmnistab,projection:this.props.projection,stereoMode:this.props.stereoMode,hasSpatialAudio:this.props.hasSpatialAudio,isEditing:this.props.isEditing,componentSource:this.props.componentSource,enableComposerRedesign:this.props.enableComposerRedesign,enableTextHotspots:this.props.enableTextHotspots,enableImageHotspots:this.props.enableImageHotspots}),c("React").createElement(c("ComposerVideoUploadSphericalGuideSection.react"),{enableComposerRedesign:this.props.enableComposerRedesign,fov:this.props.fov,isEditingKeyframe:this.props.isEditingKeyframe,keyframes:this.props.keyframes,onFOVUpdate:this.props.onFOVUpdate,onGuideKeyframeSelected:this.props.onGuideKeyframeSelected,onPitchUpdate:this.props.onPitchUpdate,onPointOfInterestAdded:this.props.onPointOfInterestAdded,onPointsOfInterestRemoved:this.props.onPointsOfInterestRemoved,onPointOfInterestRemoved:this.props.onPointOfInterestRemoved,onSelectThumbnail:this.props.onSelectThumbnail,onToggleGuideKeyframeForDeletion:this.props.onToggleGuideKeyframeForDeletion,onYawUpdate:this.props.onYawUpdate,pitch:this.props.pitch,yaw:this.props.yaw}),!this.props.enableComposerRedesign&&c("React").createElement(c("ComposerVideoUploadSphericalEnhancementsSection.react"),{allowOmnistabToggle:this.props.allowOmnistabToggle,omnistabEnabled:this.props.omnistabEnabled,onToggleEnableOmnistab:this.props.onToggleEnableOmnistab,showOmnistabSection:this.props.showOmnistabSection})))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("ComposerVideoUploadSphericalVideoGuideThumbnailsLoader",["ComposerVideoUploadSphericalVideoLoader","DOM","immutable","SphericalVideoPlayerEvents"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").List,i=1e3,j=100;function k(m,n,o){__p&&__p();var p=arguments.length<=3||arguments[3]===undefined?false:arguments[3],q=arguments[4],r=arguments[5];l.call(this);this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader1=m;this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader2=n;this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader3=q;this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader4=o;this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader5=p;this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader6=r;this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader8=null;this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7=null}k.prototype.setKeyframes=function(m){this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader3=m;return this};k.prototype.setProjection=function(m){if(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7)this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7.emit(c("SphericalVideoPlayerEvents").SET_VIDEO_PROJECTION,m);else this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader4.projection=m;return this};k.prototype.setStereoMode=function(m){if(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7)this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7.emit(c("SphericalVideoPlayerEvents").SET_STEREO_MODE,m);else this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader4.stereoFormat=m;return this};k.prototype.reloadThumbnails=function(){if(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader8)clearTimeout(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader8);this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader8=setTimeout(function(){if(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7)this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader9(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7);else{var m=c("DOM").create("div"),n=c("DOM").create("video",{crossOrigin:"anonymous"});c("DOM").appendContent(m,n);c("ComposerVideoUploadSphericalVideoLoader").load(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader1,this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader2,babelHelpers["extends"]({},this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader4,{root:m,video:n,onSuccess:this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader9,onError:function o(){},autoplay:false}),this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader5)}}.bind(this))};k.prototype.destroy=function(){if(this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7)this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7.destroy()};var l=function l(){__p&&__p();this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader9=function(m){__p&&__p();var n=false;if(!this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7){this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader7=m;n=true}var o=this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader3;if(o.size===0){this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader8=null;return}var p=this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader5?1:2;m.setDimensions(j*p,j);var q=0,r=m.addListener("seekEnd",function(){__p&&__p();var s=o.get(q);m.setSphericalOrientation(s.yaw,s.pitch);var t=m.getOption("SphericalVideoPlayer","getScreenshotDataURL");if(m.getCurrentTimePosition()===0){m.seek(1/i);return}o=o.update(q,function(u){return u.set("thumbnailURI",t)});this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader6(o);q++;if(q<o.size)m.seek(o.get(q).timestamp/i);else{r.remove();this.$ComposerVideoUploadSphericalVideoGuideThumbnailsLoader8=null}}.bind(this));if(n)m.once("updateMetadata",function(){m.seek(o.first().timestamp/i)});else m.seek(o.first().timestamp/i)}.bind(this)};f.exports=k}),null);
__d("DataURLVideoThumbnail",["VideoThumbnail","dataURLToBlob"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("VideoThumbnail"));i=h&&h.prototype;function j(k,l){var m=arguments.length<=2||arguments[2]===undefined?0:arguments[2];"use strict";i.constructor.call(this,null);this.$CanvasSphericalVideoThumbnail1=l;this.$CanvasSphericalVideoThumbnail2=m;this.$CanvasSphericalVideoThumbnail3=k}j.prototype.getTime=function(){"use strict";return this.$CanvasSphericalVideoThumbnail2};j.prototype.getURL=function(){"use strict";return this.$CanvasSphericalVideoThumbnail3};j.prototype.getData=function(){"use strict";return c("dataURLToBlob")(this.$CanvasSphericalVideoThumbnail3,this.$CanvasSphericalVideoThumbnail1)};f.exports=j}),null);
__d("cropDataURLToDimension",["DOM"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l=c("DOM").create("canvas",{width:k.width,height:k.height}),m=l.getContext("2d");m.drawImage(i,j.x,j.y,k.width,k.height,0,0,k.width,k.height);return l.toDataURL()}f.exports=h}),null);
__d("ComposerVideoUploadSphericalControlsTabContainer.react",["fbt","ComposerVideoUploadSphericalAction","ComposerVideoUploadActions","ComposerVideoUploadSphericalConstants","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadSphericalControlsTab.react","ComposerVideoUploadSphericalVideoGuideThumbnailsLoader","DataURLVideoThumbnail","DOM","ComposerVideoUploadSphericalGuideKeyframeData","immutable","React","ReactComposerContextTypes","ComposerVideoUploadSphericalStore","VideoUploadSphericalControlsAction","SphericalVideoExperiments","VideoStereoFormat","VideoUploadSphericalLogger","cropDataURLToDimension"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("immutable").List,j=c("React").PropTypes,k=[c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.CROSSPOST_DIALOG_V1,c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.EDIT_DIALOG_V1,c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.PAGE_COMPOSER_V1,c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.PAGE_COMPOSER_V2,c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.STANDALONE],l=1e3,m=h._("All the points you've selected will be deleted. To edit your points instead, choose Edit Point when viewing a thumbnail."),n=h._("Delete Points of Interest?"),o="image/jpeg",p=c("React").createClass({displayName:"ComposerVideoUploadSphericalControlsTabContainer",_loggedImpression:false,_guideThumbnailsLoader:null,_enableComposerRedesign:false,_enableTextHotspots:false,_enableImageHotspots:false,_thumbnailAspectRatio:2,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadSphericalStore"))],statics:{calculateState:function q(r,s){var t=c("ComposerVideoUploadSphericalStore").getCurrentViewport(r),u=t.pitch,v=t.yaw,w=c("ComposerVideoUploadSphericalStore").getFOV(r),x=c("ComposerVideoUploadSphericalStore").getVideoUnavailable(r),y=!c("ComposerVideoUploadSphericalStore").getVideoPlayerController(r)&&!x,z=c("ComposerVideoUploadSphericalStore").getEnableOmnistab(r),A=c("ComposerVideoUploadSphericalStore").getExpandedSections(r),B=c("ComposerVideoUploadSphericalStore").getGuideVisibility(r),C=c("ComposerVideoUploadSphericalStore").getGuideKeyframes(r),D=c("ComposerVideoUploadSphericalStore").getSphericalHotspots(r),E=c("ComposerVideoUploadSphericalStore").getNextHotspotId(r),F=c("ComposerVideoUploadSphericalStore").getErrorMessageInfo(r)||{},G=c("ComposerVideoUploadSphericalStore").getIsEditingPointOfInterest(r),H=c("ComposerVideoUploadSphericalStore").getTabVisibility(r)&&y,I=c("ComposerVideoUploadSphericalStore").getOriginalSphericalMetadata(r),J=c("ComposerVideoUploadSphericalStore").getProjection(r),K=c("ComposerVideoUploadSphericalStore").getStereoMode(r),L=c("ComposerVideoUploadSphericalStore").getHasSpatialAudio(r);return{pitch:u,yaw:v,fov:w,projection:J,stereoMode:K,hasSpatialAudio:L,videoLoading:y,videoUnavailable:x,enableOmnistab:z,expandedSections:A,guideVisible:B,keyframes:C,hotspots:D,nextHotspotId:E,errorMessageText:F.text,errorMessageTitle:F.title,errorMessageConfirmOnly:F.confirmOnly,errorMessageCallback:F.callback,isEditingKeyframe:G,shouldLoadVideo:H,sphericalMetadata:I}}},propTypes:{shown:j.bool.isRequired,showOmnistabSection:j.bool,hasOmnistabEncoding:j.bool,isEditing:j.bool,videoFile:j.object,videoID:j.string,targetID:j.string,startVisible:j.bool,componentSource:j.oneOf(k).isRequired},componentWillMount:function q(){__p&&__p();var r=this.context.composerID;c("ComposerVideoUploadSphericalAction").resetVideoPlayerController(r);if(!this.props.showOmnistabSection)c("ComposerVideoUploadSphericalAction").updateEnableOmnistab(r,false);if(this.props.startVisible)c("ComposerVideoUploadSphericalAction").updateTabVisibility(this.context.composerID,this.props.shown);var s=c("ComposerVideoUploadSphericalStore").getCurrentViewport(r);c("VideoUploadSphericalLogger").setIsRedesign(true).setIsNuxTest(c("SphericalVideoExperiments").enableComposerNuxExperiment).setTargetID(this.props.targetID?Number(this.props.targetID):null).setVideoID(this.props.videoID?Number(this.props.videoID):null).setYawDegrees(s.yaw).setPitchDegrees(s.pitch).setFieldOfView(c("ComposerVideoUploadSphericalStore").getFOV(r)).setVideoPreviewPosition(0);var t=this.props.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.CROSSPOST_DIALOG_V1||this.props.componentSource===c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.EDIT_DIALOG_V1;this._enableComposerRedesign=c("SphericalVideoExperiments").enableComposerRedesign;this._enableTextHotspots=c("SphericalVideoExperiments").enableTextHotspots&&this._enableComposerRedesign&&!t;this._enableImageHotspots=c("SphericalVideoExperiments").enableImageHotspots&&this._enableComposerRedesign&&!t;this._thumbnailAspectRatio=this._enableComposerRedesign?1:2},componentDidMount:function q(){this._createGuideThumbnailsLoader()},componentDidUpdate:function q(r,s){__p&&__p();if(r.shown!==this.props.shown)c("ComposerVideoUploadSphericalAction").updateTabVisibility(this.context.composerID,this.props.shown);if(this.props.shown&&!this._loggedImpression){var t=c("VideoUploadSphericalControlsAction").TAB_IMPRESSION;c("VideoUploadSphericalLogger").setUserAction(t).log();this._loggedImpression=true}if(Object.keys(s.sphericalMetadata).length===0&&Object.keys(this.state.sphericalMetadata).length>0)this._createGuideThumbnailsLoader();if(this.state.projection!==s.projection||this.state.stereoMode!==s.stereoMode)this.reloadGuideThumbnails()},componentWillUnmount:function q(){var r=c("ComposerVideoUploadSphericalStore").getVideoPlayerController(this.context.composerID);if(r)r.destroy();if(this._guideThumbnailsLoader)this._guideThumbnailsLoader.destroy()},render:function q(){return c("React").createElement(c("ComposerVideoUploadSphericalControlsTab.react"),{errorMessageConfirmOnly:this.state.errorMessageConfirmOnly,errorMessageText:this.state.errorMessageText,errorMessageTitle:this.state.errorMessageTitle,expandedSections:this.state.expandedSections,fov:this.state.fov,guideEnabled:true,guideVisible:this.state.guideVisible,isEditingKeyframe:this.state.isEditingKeyframe,keyframes:this.state.keyframes,hotspots:this.state.hotspots,nextHotspotId:this.state.nextHotspotId,onAcceptErrorMessage:this.state.errorMessageCallback,onClearErrorMessage:this._onClearErrorMessage,onCollapsableHeaderClick:this._onCollapsableHeaderClick,onCreateThumbnail:this._onCreateThumbnail,onFOVUpdate:this._onFOVUpdate,onGuideKeyframeSelected:this._onGuideKeyframeSelected,onGuideVisibilityUpdate:this._onGuideVisibilityUpdate,onHotspotAdded:this._onHotspotAdded,onHotspotDeleted:this._onHotspotDeleted,onLoadVideoError:this._onLoadVideoError,onLoadVideoSuccess:this._onLoadVideoSuccess,onPitchUpdate:this._onPitchUpdate,onPointOfInterestAdded:this._onPointOfInterestAddedOrSaved,onPointOfInterestSaved:this._onPointOfInterestAddedOrSaved,onPointOfInterestsCleared:this._onPointOfInterestsCleared,onPointsOfInterestRemoved:this._onPointsOfInterestRemoved,onPointOfInterestRemoved:this._onPointOfInterestRemoved,onSelectThumbnail:this._onSelectThumbnail,onToggleEnableOmnistab:this._onToggleEnableOmnistab,onToggleGuideKeyframeForDeletion:this._updateToggleGuideKeyframeForDeletion,onViewportUpdate:this._onViewportUpdate,onYawUpdate:this._onYawUpdate,onProjectionSelected:this._onProjectionSelected,onStereoModeSelected:this._onStereoModeSelected,onToggleSpatialAudio:this._onToggleSpatialAudio,pitch:this.state.pitch,shouldLoadVideo:this.state.shouldLoadVideo,shown:this.props.shown,showOmnistabSection:!!this.props.showOmnistabSection,omnistabEnabled:this.state.enableOmnistab,allowOmnistabToggle:this._allowOmnistabToggle(),togglePointOfInterestEdit:this._togglePointOfInterestEdit,updateActiveGuideKeyframe:this._updateActiveGuideKeyframe,videoFile:this.props.videoFile,videoID:this.props.videoID,videoLoading:this.state.videoLoading,videoUnavailable:this.state.videoUnavailable,yaw:this.state.yaw,projection:this.state.projection,stereoMode:this.state.stereoMode,hasSpatialAudio:this.state.hasSpatialAudio,isEditing:!!this.props.isEditing,componentSource:this.props.componentSource,enableComposerRedesign:this._enableComposerRedesign,enableTextHotspots:this._enableTextHotspots,enableImageHotspots:this._enableImageHotspots})},_createGuideThumbnailsLoader:function q(){if(!this._guideThumbnailsLoader)this._guideThumbnailsLoader=new(c("ComposerVideoUploadSphericalVideoGuideThumbnailsLoader"))(this.props.videoFile,this.props.videoID,{initialHeading:this.state.yaw,initialPitch:this.state.pitch,fieldOfView:this.state.fov,stereoFormat:this.state.stereoMode,projection:this.state.projection},this._enableComposerRedesign,this.state.keyframes,function(r){return c("ComposerVideoUploadSphericalAction").updateGuideKeyframes(this.context.composerID,r)}.bind(this));this._guideThumbnailsLoader.setKeyframes(this.state.keyframes).reloadThumbnails()},reloadGuideThumbnails:function q(){if(this._guideThumbnailsLoader)this._guideThumbnailsLoader.setProjection(this.state.projection).setStereoMode(this.state.stereoMode).setKeyframes(this.state.keyframes).reloadThumbnails()},_allowOmnistabToggle:function q(){return(!this.state.stereoMode||this.state.stereoMode===c("VideoStereoFormat").MONO)&&(!this.props.isEditing||!!this.props.hasOmnistabEncoding)},_onClearErrorMessage:function q(){c("ComposerVideoUploadSphericalAction").updateErrorMessage(this.context.composerID,null)},_onSelectThumbnail:function q(r){var s=new(c("DataURLVideoThumbnail"))(r.thumbnailURI,o,r.timestamp);c("ComposerVideoUploadActions").updateThumbnailFromSphericalPreview(this.context.composerID,s)},_onCreateThumbnail:function q(r){var s=r(),t=c("DOM").create("img",{src:s,onload:function(){var u=t.width,v=t.height,w=(u-this._thumbnailAspectRatio*v)/2;s=c("cropDataURLToDimension")(t,{x:w,y:0},{width:v*this._thumbnailAspectRatio,height:v});var x=new(c("DataURLVideoThumbnail"))(s,o);c("ComposerVideoUploadActions").updateThumbnailFromSphericalPreview(this.context.composerID,x);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").CREATE_THUMBNAIL).log()}.bind(this)})},_onLoadVideoSuccess:function q(r){c("ComposerVideoUploadSphericalStore").addChangeListener(function(s){var t=s.composerID;if(t!=this.context.composerID)return;if(!c("ComposerVideoUploadSphericalStore").getTabVisibility(t))r.pause()}.bind(this));c("ComposerVideoUploadSphericalAction").setVideoPlayerController(this.context.composerID,r)},_onLoadVideoError:function q(){c("ComposerVideoUploadSphericalAction").setVideoUnavailable(this.context.composerID,true)},_onPitchUpdate:function q(r){this._onViewportUpdate(this.state.yaw,r)},_onYawUpdate:function q(r){this._onViewportUpdate(r,this.state.pitch)},_onViewportUpdate:function q(r,s){r=Math.round(r);s=Math.round(s);c("ComposerVideoUploadSphericalAction").updateCurrentViewport(this.context.composerID,s,r);c("VideoUploadSphericalLogger").setPitchDegrees(s).setYawDegrees(r).setUserAction(c("VideoUploadSphericalControlsAction").DRAG_VIDEO_PREVIEW).log()},_onFOVUpdate:function q(r){c("ComposerVideoUploadSphericalAction").updateFOV(this.context.composerID,r);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").SCROLL_VIDEO_PREVIEW).setFieldOfView(r).log()},_onProjectionSelected:function q(r){c("ComposerVideoUploadSphericalAction").updateProjection(this.context.composerID,r)},_onStereoModeSelected:function q(r){c("ComposerVideoUploadSphericalAction").updateStereoMode(this.context.composerID,r)},_onToggleSpatialAudio:function q(){c("ComposerVideoUploadSphericalAction").updateHasSpatialAudio(this.context.composerID,!this.state.hasSpatialAudio)},_updateActiveGuideKeyframe:function q(r){c("ComposerVideoUploadSphericalAction").updateActiveGuideKeyframe(this.context.composerID,r)},_updateToggleGuideKeyframeForDeletion:function q(r){c("ComposerVideoUploadSphericalAction").updateToggleGuideKeyframeForDeletion(this.context.composerID,r)},_onGuideKeyframeSelected:function q(r){var s=c("ComposerVideoUploadSphericalStore").getVideoPlayerController(this.context.composerID);if(!s)return;s.seek(r.timestamp/l);s.setSphericalOrientation(r.yaw,r.pitch);s.pause();c("VideoUploadSphericalLogger").setPitchDegrees(r.pitch).setYawDegrees(r.yaw).setUserAction(c("VideoUploadSphericalControlsAction").SEARCH_POINT_OF_INTEREST).log()},_addOrSavePointOfInterest:function q(r,s,t,u){var v=this.context.composerID,w=new(c("ComposerVideoUploadSphericalGuideKeyframeData"))({timestamp:r,yaw:Math.round(t),pitch:Math.round(s),thumbnailURI:u,isSelected:true});if(this.state.isEditingKeyframe)c("ComposerVideoUploadSphericalAction").updateSaveGuideKeyframe(v,w);else c("ComposerVideoUploadSphericalAction").updateAddGuideKeyframe(v,w,this._enableComposerRedesign)},_onPointOfInterestAddedOrSaved:function q(r,s,t,u){var v,w=this,x=u();if(x)(function(){var y=c("DOM").create("img",{src:x,onload:function(){var z=y.width,A=y.height,B=(z-this._thumbnailAspectRatio*A)/2;x=c("cropDataURLToDimension")(y,{x:B,y:0},{width:A*this._thumbnailAspectRatio,height:A});this._addOrSavePointOfInterest(r,s,t,x)}.bind(w)})})();else this._addOrSavePointOfInterest(r,s,t)},_onPointsOfInterestRemoved:function q(){__p&&__p();var r=this.context.composerID;if(this._enableComposerRedesign){c("ComposerVideoUploadSphericalAction").updateDeleteSelectedGuideKeyframes(r);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").REMOVE_POINT_OF_INTEREST).log()}else c("ComposerVideoUploadSphericalAction").updateErrorMessage(r,{text:m,title:n,callback:function s(t){if(t){c("ComposerVideoUploadSphericalAction").updateDeleteSelectedGuideKeyframes(r);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").REMOVE_POINT_OF_INTEREST).log()}},confirmOnly:false})},_onPointOfInterestRemoved:function q(r){__p&&__p();var s=this.context.composerID;if(this._enableComposerRedesign){c("ComposerVideoUploadSphericalAction").updateRemoveGuideKeyframe(s,r);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").REMOVE_POINT_OF_INTEREST).log()}else c("ComposerVideoUploadSphericalAction").updateErrorMessage(s,{text:m,title:n,callback:function t(u){if(u){c("ComposerVideoUploadSphericalAction").updateRemoveGuideKeyframe(s,r);c("VideoUploadSphericalLogger").setUserAction(c("VideoUploadSphericalControlsAction").REMOVE_POINT_OF_INTEREST).log()}},confirmOnly:false})},_onPointOfInterestsCleared:function q(){var r=this.context.composerID;c("ComposerVideoUploadSphericalAction").updateClearGuideKeyframes(r)},_togglePointOfInterestEdit:function q(r){var s=this.context.composerID;c("ComposerVideoUploadSphericalAction").updateIsEditingPointOfInterest(s,r)},_onGuideStateUpdate:function q(r){c("ComposerVideoUploadSphericalAction").updateGuideEnabled(this.context.composerID,r)},_onGuideVisibilityUpdate:function q(r){c("ComposerVideoUploadSphericalAction").updateGuideVisibility(this.context.composerID,r)},_onCollapsableHeaderClick:function q(r){c("ComposerVideoUploadSphericalAction").updateSectionStatus(this.context.composerID,r)},_onToggleEnableOmnistab:function q(event){c("ComposerVideoUploadSphericalAction").updateEnableOmnistab(this.context.composerID,!this.state.enableOmnistab)},_onHotspotAdded:function q(r,s){var t=this.context.composerID;c("ComposerVideoUploadSphericalAction").updateAddHotspot(t,r,s)},_onHotspotDeleted:function q(r){var s=this.context.composerID;c("ComposerVideoUploadSphericalAction").updateDeleteHotspot(s,r)}});f.exports=p}),null);
__d("VideoComposerDialogSphericalDirectorInfo.react",["cx","fbt","React","SphericalVideoExperiments"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={title:i._("Set Guide points"),subText:i._("Direct your audience's attention to the parts you want them to see")},k={title:i._("Overlay text and images"),subText:i._("Add more detail to each frame of your video")},l={title:i._("Overlay text"),subText:i._("Add more detail to each frame of your video")},m={title:i._("Overlay images"),subText:i._("Add more detail to each frame of your video")},n={title:i._("Preview your video"),subText:i._("Your final 360 video with pan to the guide points that you've set")};function o(q){return c("React").createElement("div",{className:"_1wfj"},c("React").createElement("div",{className:"_1wfn"},q.num,". ",q.titleText),c("React").createElement("div",{className:"_1wfo"},q.subText))}function p(){__p&&__p();var q=[];q.push(j);if(c("SphericalVideoExperiments").enableTextHotspots&&c("SphericalVideoExperiments").enableImageHotspots)q.push(k);else if(c("SphericalVideoExperiments").enableTextHotspots)q.push(l);else if(c("SphericalVideoExperiments").enableImageHotspots)q.push(m);q.push(n);var r=q.map(function(s,t){return c("React").createElement(o,{key:t,num:t+1,titleText:s.title,subText:s.subText})});return c("React").createElement("div",{className:"_1mtr"},c("React").createElement("div",{className:"_2fb1"}),c("React").createElement("div",{className:"_1mts"},c("React").createElement("div",{className:"_1wfp"},i._("Get Started")),r))}f.exports=p}),null);
__d("VideoComposerDialogSphericalDirectorSection.react",["cx","fbt","ComposerVideoUploadSphericalConstants","ComposerVideoUploadSphericalControlsTabContainer.react","FlexLayout.react","React","ReactComposerContextProviderMixin","VideoComposerDialogRadioButton.react","VideoComposerDialogSphericalDirectorInfo.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").createClass({displayName:"SphericalControlsContainerWrapper",mixins:[c("ReactComposerContextProviderMixin")],render:function n(){return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSphericalControlsTabContainer.react"),{componentSource:c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.PAGE_COMPOSER_V2,shown:true,showOmnistabSection:this.props.showOmnistabSection,startVisible:true,targetID:this.props.contextConfig.targetID,videoFile:this.props.videoFile}))}});j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=i._("360\u00b0 Mode");return c("React").createElement("div",null,c("React").createElement("div",{className:"_1xl9"}),c("React").createElement(c("FlexLayout.react"),{className:"_30d3",align:"start",justify:"all"},c("React").createElement("div",{className:"_21bg"},c("React").createElement("div",{className:"_30d5"},i._("360 Director Tools")),!this.props.spherical&&c("React").createElement("div",{className:"_21bh"},i._("During playback the viewer has control of the viewing direction like a panorama."))),c("React").createElement(c("VideoComposerDialogRadioButton.react"),{checked:this.props.spherical,className:"_30d6",label:n,onSelect:function(){return this.props.ontoggleSpherical(!this.props.spherical)}.bind(this)})),this.props.bootloaded&&this.props.composerConfig&&this.props.spherical&&this.props.videoFile?c("React").createElement(l,{contextConfig:this.props.composerConfig.contextConfig,showOmnistabSection:this.props.showOmnistabSection,videoFile:this.props.videoFile}):c("React").createElement(c("VideoComposerDialogSphericalDirectorInfo.react"),null))};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("VideoComposerDialogSphericalDirectorContainer.react",["FluxContainer","React","VideoComposerDialogBasicStore","VideoComposerDialogDispatcher","VideoComposerDialogSphericalDirectorActions","VideoComposerDialogSphericalDirectorSection.react","VideoComposerDialogSphericalDirectorStore","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogBasicStore"),c("VideoComposerDialogSphericalDirectorStore"),c("VideoComposerDialogUploadStore")]};j.calculateState=function(){var k=c("VideoComposerDialogBasicStore").getState(),l=k.bootloaded,m=k.composerConfig,n=c("VideoComposerDialogSphericalDirectorStore").getState(),o=n.showOmnistabSection,p=n.spherical,q=c("VideoComposerDialogUploadStore").getState(),r=q.videoFile;return{bootloaded:l,composerConfig:m,spherical:p,showOmnistabSection:o,videoFile:r}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores(j.getStores())};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogSphericalDirectorSection.react"),{bootloaded:this.state.bootloaded,composerConfig:this.state.composerConfig,ontoggleSpherical:this.$VideoComposerDialogSphericalDirectorContainer1,showOmnistabSection:this.state.showOmnistabSection,spherical:this.state.spherical,videoFile:this.state.videoFile})};j.prototype.$VideoComposerDialogSphericalDirectorContainer1=function(k){c("VideoComposerDialogSphericalDirectorActions").toggleSpherical(k)};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("VideoComposerDialogSphericalDirectorTabContainer.react",["FluxContainer","React","VideoComposerDialogDispatcher","VideoComposerDialogSphericalDirectorStore","VideoComposerDialogSphericalDirectorTabConfig","VideoComposerDialogTabItem.react","VideoComposerDialogTab","VideoComposerDialogUIStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("VideoComposerDialogUIStore")]};j.calculateState=function(){var k=c("VideoComposerDialogUIStore").getState(),l=k.selectedTab;return{isSelected:l===c("VideoComposerDialogTab").SPHERICAL_DIRECTOR}};j.prototype.componentWillMount=function(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogSphericalDirectorStore")])};j.prototype.render=function(){return c("React").createElement(c("VideoComposerDialogTabItem.react"),babelHelpers["extends"]({tabConfig:c("VideoComposerDialogSphericalDirectorTabConfig")},this.state))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("XVideoComposerDialogFetchCrosspostPagesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/crosspost_pages/",{page_id:{type:"FBID",required:true}})}),null);
__d("VideoComposerDialogDistributionStore",["Promise","ActorURI","AsyncRequest","VideoComposerDialogActionTypes","VideoComposerDialogDispatcher","FluxReduceStore","VideoComposerDialogDistributionActions","VideoComposerDialogMetadataStore","VideoComposerDialogTab","immutable","XVideoComposerDialogFetchCrosspostPagesController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={showInNewsFeed:true,allowEmbedding:true,addAsSecretVideo:false,disableShowInNewsFeed:false,crosspostPages:null,enableCrosspostRefresh:false,allowGraphicWarningOption:false,showGraphicWarning:false,blockSocial:false};h=babelHelpers.inherits(m,c("immutable").Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m()};n.prototype.reduce=function(o,p){__p&&__p();switch(p.type){case c("VideoComposerDialogActionTypes").BOOTLOAD_DISTRIBUTION_TAB:return o.set("allowGraphicWarningOption",p.data.allowGraphicWarningOption);case c("VideoComposerDialogActionTypes").TOGGLE_NEWS_FEED:return o.set("showInNewsFeed",!o.get("showInNewsFeed"));case c("VideoComposerDialogActionTypes").TOGGLE_EMBEDDING:return o.set("allowEmbedding",!o.get("allowEmbedding"));case c("VideoComposerDialogActionTypes").TOGGLE_SECRET_VIDEO:var q=!o.get("addAsSecretVideo");o=o.set("addAsSecretVideo",q);if(q){o=o.set("showInNewsFeed",false);o=o.set("disableShowInNewsFeed",true);o=o.set("blockSocial",true)}else{o=o.set("disableShowInNewsFeed",false);o=o.set("blockSocial",false)}return o;case c("VideoComposerDialogActionTypes").SELECT_TAB:if(p.tab===c("VideoComposerDialogTab").DISTRIBUTION&&!Array.isArray(o.crosspostPages)){var r=c("VideoComposerDialogMetadataStore").getState();if(r.targetID)this.$VideoComposerDialogDistributionStore1(r.targetID)}return o;case c("VideoComposerDialogActionTypes").CROSSPOST_PAGES_FETCHED:return o.set("crosspostPages",p.pages);case c("VideoComposerDialogActionTypes").CROSSPOST_LINK_CLICKED:return o.set("enableCrosspostRefresh",true);case c("VideoComposerDialogActionTypes").REFRESH_CROSSPOST_PAGES:var s=c("VideoComposerDialogMetadataStore").getState();if(s.targetID){this.$VideoComposerDialogDistributionStore1(s.targetID);o=o.set("crosspostPages",null)}return o;case c("VideoComposerDialogActionTypes").TOGGLE_CROSSPOST_PAGE:var t=p.pageID;o=o.set("crosspostPages",o.get("crosspostPages").map(function(u){if(u.id===t)u.allow=!u.allow;return u}));return o;case c("VideoComposerDialogActionTypes").TOGGLE_GRAPHIC_WARNING:return o.set("showGraphicWarning",!o.get("showGraphicWarning"));case c("VideoComposerDialogActionTypes").TOGGLE_BLOCK_SOCIAL:return o.set("blockSocial",!o.get("blockSocial"));case c("VideoComposerDialogActionTypes").RESET_COMPOSER:return this.getInitialState();default:return o}};n.prototype.$VideoComposerDialogDistributionStore1=function(o){var p=c("XVideoComposerDialogFetchCrosspostPagesController").getURIBuilder().setFBID("page_id",o).getURI();p=c("ActorURI").create(p,o);new(c("AsyncRequest"))().setURI(p).setHandler(function(q){c("VideoComposerDialogDistributionActions").crosspostPagesFetched(q.getPayload())}).send()};n.prototype.getPostData=function(){var o=this.getState();return c("Promise").resolve({hide_from_newsfeed:!o.showInNewsFeed,embeddable:o.allowEmbedding,secret:o.addAsSecretVideo,crossposting_config:o.crosspostPages||[],disturbing:o.showGraphicWarning,social_actions:!o.blockSocial})};function n(){j.apply(this,arguments)}f.exports=new n(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogLoggingStore",["FluxReduceStore","immutable","VideoComposerDialogActionTypes","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogMode","VideoComposerDialogTab","VideoComposerDialogUIEvent","VideoComposerDialogUIStore","VideoComposerDialogUITypedLogger","VideoComposerDialogUploadStore","VideoComposerDialogVersion","uuid"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={actorID:"",composerEntryPointRef:null,dialogMode:null,hasBeenReset:false,selectedTab:c("VideoComposerDialogTab").BASIC,sessionID:"",videoID:""};h=babelHelpers.inherits(m,c("immutable").Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m()};n.prototype.reduce=function(o,p){__p&&__p();switch(p.type){case c("VideoComposerDialogActionTypes").INITIALIZE_COMPOSER:o=o.set("actorID",p.actorID);o=o.set("composerEntryPointRef",p.composerEntryPointRef);o=o.set("sessionID",c("uuid")());o=o.set("dialogMode",c("VideoComposerDialogMode").VIDEO_UPLOAD);this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").DIALOG_OPENED);return o;case c("VideoComposerDialogActionTypes").INITIALIZE_EDIT_COMPOSER:o=o.set("actorID",p.editParams.actorID);o=o.set("videoID",p.editParams.videoID);o=o.set("dialogMode",c("VideoComposerDialogMode").VIDEO_EDIT);this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").DIALOG_OPENED);return o;case c("VideoComposerDialogActionTypes").SELECT_TAB:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").TAB_SWITCHED,null,p.tab);o=o.set("selectedTab",p.tab);return o;case c("VideoComposerDialogActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER:if(p.data)this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").METADATA_LOAD_SUCCESS);else this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").METADATA_LOAD_FAILED);return o;case c("VideoComposerDialogActionTypes").UPLOAD_FAILED:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").UPLOAD_FAILURE,p.errorData.error_description);return o;case c("VideoComposerDialogActionTypes").UPLOAD_FINISHED:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").UPLOAD_FINISHED);return o;case c("VideoComposerDialogActionTypes").POST_FAILED:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").POST_FAILURE,p.errorData.error_description);return o;case c("VideoComposerDialogActionTypes").FILE_ADDED:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").FILE_REPLACED);return o;case c("VideoComposerDialogActionTypes").BACKDATE_CONFIRM:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").POST_BACKDATE_ATTEMPT);return o;case c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_CONFIRM:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").POST_DRAFT_ATTEMPT);return o;case c("VideoComposerDialogActionTypes").NAVIGATED_FROM_PAGE:var q=c("VideoComposerDialogUIStore").getState(),r=q.dialogShown;if(r)this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").NAVIGATED_FROM_PAGE);return o;case c("VideoComposerDialogActionTypes").PUBLISH_POST:var s=c("VideoComposerDialogMetadataStore").getState(),t=s.showRightsConfirmationDialog,u=c("VideoComposerDialogUploadStore").getState(),v=u.isDraft;if(!(t&&!v))this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").POST_PUBLISH_ATTEMPT);else this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").RIGHTS_DIALOG_SHOWN);return o;case c("VideoComposerDialogActionTypes").SCHEDULE_CONFIRM:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").POST_SCHEDULE_ATTEMPT);return o;case c("VideoComposerDialogActionTypes").POST_FINISHED:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").POST_SUCCESS);return o;case c("VideoComposerDialogActionTypes").CONFIRM_RIGHTS:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").RIGHTS_DIALOG_CONFIRM);return o;case c("VideoComposerDialogActionTypes").CLOSE_PUBLISH_CONFIRM_DIALOG:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").CONFIRMATION_DIALOG_CLOSE);return o;case c("VideoComposerDialogActionTypes").EXIT_DIALOG_ATTEMPT:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").EXIT_COMPOSER_ATTEMPT);return o;case c("VideoComposerDialogActionTypes").CLOSE_CONFIRM_DIALOG:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").EXIT_COMPOSER_CANCEL);return o;case c("VideoComposerDialogActionTypes").EXIT_DIALOG:this.$VideoComposerDialogLoggingStore1(o,c("VideoComposerDialogUIEvent").EXIT_COMPOSER_CONFIRM);return o;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:var w=this.getState();o=this.getInitialState();o=o.set("actorID",w.actorID);o=o.set("hasBeenReset",true);return o;default:return o}};n.prototype.$VideoComposerDialogLoggingStore1=function(o,event,p,q){new(c("VideoComposerDialogUITypedLogger"))().setEvent(event).setActorID(o.actorID).setSessionID(o.sessionID).setComposerDialogVersion(c("VideoComposerDialogVersion").V2).setComposerEntryPoint(o.composerEntryPointRef).setCurrentTab(o.selectedTab).setNextTab(q).setErrorMessage(p).setHasBeenReset(o.hasBeenReset).log()};function n(){j.apply(this,arguments)}f.exports=new n(c("VideoComposerDialogDispatcher"))}),null);
__d("XVideoComposerDialogBootloadDistributionTabController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/bootload_distribution_tab/",{})}),null);
__d("VideoComposerDialogDistributionUtils",["ActorURI","AsyncRequest","VideoComposerDialogDistributionActions","XVideoComposerDialogBootloadDistributionTabController"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){var j=c("XVideoComposerDialogBootloadDistributionTabController").getURIBuilder().getURI(),k=c("ActorURI").create(j,i);new(c("AsyncRequest"))(k).setHandler(function(l){c("VideoComposerDialogDistributionActions").bootloadTab(l.payload)}).send()};f.exports={beginBootloadingDistributionTab:h}}),null);
__d("XVideoComposerDialogBootloadRightsTabController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/bootload_rights/",{target_id:{type:"FBID",required:true}})}),null);
__d("VideoComposerDialogRightsUtils",["ActorURI","AsyncRequest","AsyncResponse","VideoComposerDialogRightsActions","XVideoComposerDialogBootloadRightsTabController"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){var j=c("XVideoComposerDialogBootloadRightsTabController").getURIBuilder().setFBID("target_id",i).getURI(),k=c("ActorURI").create(j,i);new(c("AsyncRequest"))(k).setHandler(function(l){c("VideoComposerDialogRightsActions").bootloadParameters(l.payload)}).send()};f.exports={beginBootloadingRightsTab:h}}),null);
__d("XVideoComposerDialogBootloadSphericalDirectorTabController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/bootload_spherical_director/",{target_id:{type:"FBID",required:true}})}),null);
__d("VideoComposerDialogSphericalDirectorUtils",["ActorURI","AsyncRequest","VideoComposerDialogSphericalDirectorActions","XVideoComposerDialogBootloadSphericalDirectorTabController"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){var j=c("XVideoComposerDialogBootloadSphericalDirectorTabController").getURIBuilder().setFBID("target_id",i).getURI(),k=c("ActorURI").create(j,i);new(c("AsyncRequest"))(k).send()};f.exports={beginBootloadingSphericalDirectorTab:h,bootloadSphericalDirectorTab:function i(j){c("VideoComposerDialogSphericalDirectorActions").bootloadParameters(j)}}}),null);
__d("VideoComposerDialogVideoType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BASIC_VIDEO:"basic_video"})}),null);
__d("VideoComposerDialogMetadataStore",["Promise","FluxReduceStore","immutable","VideoComposerDialogActions","VideoComposerDialogActionTypes","VideoComposerDialogAdBreakUtils","VideoComposerDialogBasicUtils","VideoComposerDialogCaptionEditorUtils","VideoComposerDialogDispatcher","VideoComposerDialogDistributionUtils","VideoComposerDialogMode","VideoComposerDialogRightsUtils","VideoComposerDialogSphericalDirectorUtils","VideoComposerDialogTabUtils","VideoComposerDialogUploadStore","VideoComposerDialogUtils","VideoComposerDialogVideoType","VideoPlayerMetaData"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={accessToken:"",actorID:null,composerEntryPointRef:null,dialogMode:null,profileDisplayName:"",profilePictureURI:"",showCaptionsTab:false,showRightsConfirmationDialog:false,showRightsTab:false,targetID:null,title:"",videoDataForID:null,videoDuration:null,videoHeight:null,videoWidth:null,videoID:null,videoType:c("VideoComposerDialogVideoType").BASIC_VIDEO,minBackdateTime:null};h=babelHelpers.inherits(m,c("immutable").Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m()};n.prototype.reduce=function(o,p){__p&&__p();switch(p.type){case c("VideoComposerDialogActionTypes").INITIALIZE_COMPOSER:o=o.set("actorID",p.actorID);o=o.set("targetID",p.targetID);o=o.set("composerEntryPointRef",p.composerEntryPointRef);o=o.set("videoType",c("VideoComposerDialogVideoType").BASIC_VIDEO);o=o.set("dialogMode",c("VideoComposerDialogMode").VIDEO_UPLOAD);c("VideoComposerDialogUtils").beginBootloading(p.actorID);c("VideoComposerDialogBasicUtils").beginBootloadingDefaultTab(p.actorID);c("VideoComposerDialogDistributionUtils").beginBootloadingDistributionTab(p.actorID);c("VideoComposerDialogAdBreakUtils").beginBootloadingAdBreaksTab(p.actorID);c("VideoComposerDialogSphericalDirectorUtils").beginBootloadingSphericalDirectorTab(p.actorID);c("VideoComposerDialogCaptionEditorUtils").beginBootloadingCaptionsTab(p.actorID);c("VideoComposerDialogRightsUtils").beginBootloadingRightsTab(p.actorID);return o;case c("VideoComposerDialogActionTypes").INITIALIZE_EDIT_COMPOSER:o=o.set("actorID",p.editParams.actorID);o=o.set("targetID",p.editParams.actorID);o=o.set("videoID",p.editParams.videoID);o=o.set("accessToken",p.editParams.accessToken);o=o.set("profileDisplayName",p.editParams.profileDisplayName);o=o.set("profilePictureURI",p.editParams.profilePictureURI);o=o.set("videoType",c("VideoComposerDialogVideoType").BASIC_VIDEO);o=o.set("dialogMode",c("VideoComposerDialogMode").VIDEO_EDIT);c("VideoPlayerMetaData").genVideoData(o.videoID).then(function(w){return c("VideoComposerDialogActions").loadVideoDataForID(w)}).done();c("VideoComposerDialogTabUtils").fetchEditPostParameters(o.videoType);return o;case c("VideoComposerDialogActionTypes").LOAD_VIDEO_DATA_FOR_ID:o=o.set("videoDataForID",p.videoData);return o;case c("VideoComposerDialogActionTypes").METADATA_LOADED_FROM_HTML_PLAYER:var q=p.videoPlayer;o=o.set("videoDuration",q.duration?q.duration:null);o=o.set("videoHeight",q.videoHeight?q.videoHeight:null);o=o.set("videoWidth",q.videoWidth?q.videoWidth:null);return o;case c("VideoComposerDialogActionTypes").BOOTLOAD_PARAMETERS:o=o.set("accessToken",p.data.accessToken);o=o.set("profileDisplayName",p.data.profileDisplayName);o=o.set("profilePictureURI",p.data.profilePictureURI);o=o.set("showCaptionsTab",p.data.showCaptionsTab);o=o.set("showRightsTab",p.data.showRightsTab);o=o.set("showRightsConfirmationDialog",p.data.showRightsConfirmationDialog);o=o.set("minBackdateTime",p.data.minBackdateTime);return o;case c("VideoComposerDialogActionTypes").UPDATE_TITLE:o=o.set("title",p.title);return o;case c("VideoComposerDialogActionTypes").UPLOAD_PROGRESSED:var r=c("VideoComposerDialogUploadStore").getState(),s=r.videoUploader;if(s&&this.getState().get("videoID")===null){var t=s.getUploadSession();if(t){var u=t.getVideoID();o=o.set("videoID",u)}}return o;case c("VideoComposerDialogActionTypes").VIDEO_TYPE_CHANGED:o=o.set("videoType",p.videoType);return o;case c("VideoComposerDialogActionTypes").CONFIRM_RIGHTS:o=o.set("showRightsConfirmationDialog",false);setTimeout(function(){return c("VideoComposerDialogActions").publishPost()},1);return o;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:var v=this.getState();o=this.getInitialState();o=o.set("actorID",v.actorID);o=o.set("targetID",v.targetID);o=o.set("composerEntryPointRef",v.composerEntryPointRef);return o;default:return o}};n.prototype.getPostData=function(){var o=this.getState();return c("Promise").resolve({video_title:o.title})};function n(){j.apply(this,arguments)}f.exports=new n(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogRightsStore",["fbt","Promise","VideoComposerDialogDispatcher","FluxReduceStore","immutable","VideoComposerDialogActions","VideoComposerDialogRightsActions","VideoComposerDialogTab","VideoCopyrightAPI","VideoCopyrightMonitoringType","VideoComposerDialogActionTypes","VideoComposerDialogMetadataStore","VideoCopyrightUploadSettings"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m={areCountriesIncluded:true,attributionID:null,category:null,fbWhitelistedUsers:[],igWhitelistedUsers:[],isIgRightsManagementEnabled:false,matchRuleID:null,monitoringType:c("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value,ownershipCountries:[],shouldDetectMatches:false,showAttributionSelector:false,showCategoryRequiredError:false};i=babelHelpers.inherits(n,c("immutable").Record(m));j=i&&i.prototype;function n(){i.apply(this,arguments)}k=babelHelpers.inherits(o,c("FluxReduceStore"));l=k&&k.prototype;o.prototype.getInitialState=function(){return new n()};o.prototype.reduce=function(p,q){__p&&__p();switch(q.type){case c("VideoComposerDialogActionTypes").BOOTLOAD_RIGHTS_PARAMETERS:p=p.set("isIgRightsManagementEnabled",q.data.isIgRightsManagementEnabled).set("showAttributionSelector",q.data.showAttributionSelector);var r=q.data.defaultSettings;if(r&&r[c("VideoCopyrightUploadSettings").USE_CUSTOM])p=p.set("monitoringType",r[c("VideoCopyrightUploadSettings").MONITORING_TYPE]).set("matchRuleID",r[c("VideoCopyrightUploadSettings").MATCH_RULE]).set("ownershipCountries",r[c("VideoCopyrightUploadSettings").OWNERSHIP_COUNTRIES]).set("areCountriesIncluded",r[c("VideoCopyrightUploadSettings").ARE_COUNTRIES_INCLUDED]);return p;case c("VideoComposerDialogActionTypes").UPDATE_MONITORING_TYPE:p=p.set("monitoringType",q.monitoringType);return p;case c("VideoComposerDialogActionTypes").UPDATE_CATEGORY:p=p.set("category",q.category).set("showCategoryRequiredError",false);return p;case c("VideoComposerDialogActionTypes").UPDATE_CATEGORY_REQUIRED_ERROR:p=p.set("showCategoryRequiredError",true);return p;case c("VideoComposerDialogActionTypes").UPDATE_OWNERSHIP_COUNTRIES:p=p.set("ownershipCountries",q.ownershipCountries).set("areCountriesIncluded",q.areCountriesIncluded);return p;case c("VideoComposerDialogActionTypes").UPDATE_SHOULD_DETECT_MATCHES:p=p.set("shouldDetectMatches",q.shouldDetectMatches);return p;case c("VideoComposerDialogActionTypes").UPDATE_MATCH_RULE:p=p.set("matchRuleID",q.matchRuleID);return p;case c("VideoComposerDialogActionTypes").UPDATE_ATTRIBUTION:p=p.set("attributionID",q.attributionID);return p;case c("VideoComposerDialogActionTypes").UPDATE_FB_WHITELISTED_USERS:p=p.set("fbWhitelistedUsers",q.fbWhitelistedUsers);return p;case c("VideoComposerDialogActionTypes").UPDATE_IG_WHITELISTED_USERS:p=p.set("igWhitelistedUsers",q.igWhitelistedUsers);return p;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:p=this.getInitialState();return p;default:return p}};o.prototype.getPostData=function(){__p&&__p();var p=this.getState(),q=p.attributionID,r=p.category,s=p.monitoringType,t=p.ownershipCountries,u=p.areCountriesIncluded,v=p.shouldDetectMatches,w=p.matchRuleID,x=p.fbWhitelistedUsers,y=p.igWhitelistedUsers;if(!v)return c("Promise").resolve({});if(r===null){setTimeout(function(){c("VideoComposerDialogRightsActions").updateShowCategoryRequiredError();c("VideoComposerDialogActions").selectTab(c("VideoComposerDialogTab").RIGHTS)},1);return c("Promise").reject(h._("Media category is required for copyrighted content"))}var z=c("VideoComposerDialogMetadataStore").getState(),A=z.accessToken,B=z.targetID,C=z.videoID;if(!B||!C)return c("Promise").reject(h._("Monitoring matches failed"));return c("VideoCopyrightAPI").copyrightVideo(A,B,C,{areCopyrightCountriesIncluded:u,copyrightAttributionID:q,copyrightRuleID:w,copyrightMonitoringType:s,copyrightOwnershipCountries:t,copyrightWhitelistedIGUserNames:y,copyrightWhitelistedPartners:x,selectedCategory:r},"video_upload_composer").then(function(D){return{}},function(D){return c("Promise").reject(D.error_user_title)})};function o(){k.apply(this,arguments)}f.exports=new o(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogUIStore",["ComposerXVideoUploadDialogController","DOM","FluxReduceStore","immutable","React","ReactDOM","VideoComposerDialogActions","VideoComposerDialogActionTypes","VideoComposerDialogDispatcher","VideoComposerDialogTab","VideoComposerDialogWrapperContainer.react","VideoComposerDialogUploadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={dialogShown:false,initialized:false,selectedTab:c("VideoComposerDialogTab").BASIC,showExitConfirmDialog:false,publishConfirmDialogShown:false,publishConfirmDialogData:null,saveAsDraftDialogShown:false};h=babelHelpers.inherits(m,c("immutable").Record(l));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;n.prototype.getInitialState=function(){return new m()};n.prototype.reduce=function(o,p){__p&&__p();switch(p.type){case c("VideoComposerDialogActionTypes").INITIALIZE_COMPOSER:case c("VideoComposerDialogActionTypes").INITIALIZE_EDIT_COMPOSER:if(!o.initialized){setTimeout(function(){var y=c("DOM").create("div");c("ReactDOM").render(c("React").createElement(c("VideoComposerDialogWrapperContainer.react"),null),y)},0);o=o.set("initialized",true)}o=o.set("dialogShown",true);return o;case c("VideoComposerDialogActionTypes").CLOSE_CONFIRM_DIALOG:o=o.set("showExitConfirmDialog",false);return o;case c("VideoComposerDialogActionTypes").POST_FINISHED:o=o.set("publishConfirmDialogShown",true);var q=c("VideoComposerDialogUploadStore").getState(),r=q.isDraft,s=q.scheduleDate,t=q.expireDate,u=q.postEndDate;o=o.set("publishConfirmDialogData",{isDraft:r,scheduleDate:s,expireDate:t,postEndDate:u});o=o.set("showExitConfirmDialog",false);o=o.set("dialogShown",false);this.$VideoComposerDialogUIStore1();return o;case c("VideoComposerDialogActionTypes").EXIT_DIALOG:o=o.set("showExitConfirmDialog",false);o=o.set("dialogShown",false);this.$VideoComposerDialogUIStore1();return o;case c("VideoComposerDialogActionTypes").EXIT_DIALOG_ATTEMPT:o=o.set("showExitConfirmDialog",true);return o;case c("VideoComposerDialogActionTypes").CLOSE_PUBLISH_CONFIRM_DIALOG:o=o.set("publishConfirmDialogShown",false);return o;case c("VideoComposerDialogActionTypes").SELECT_TAB:o=o.set("selectedTab",p.tab);return o;case c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_ATTEMPT:o=o.set("saveAsDraftDialogShown",true);return o;case c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_ABORT:case c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_CONFIRM:o=o.set("saveAsDraftDialogShown",false);return o;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:var v=o,w=v.publishConfirmDialogShown,x=v.publishConfirmDialogData;c("ComposerXVideoUploadDialogController").clearInstances();o=this.getInitialState();o=o.set("publishConfirmDialogShown",w);o=o.set("publishConfirmDialogData",x);o=o.set("initialized",true);return o;default:return o}};n.prototype.$VideoComposerDialogUIStore1=function(){setTimeout(c("VideoComposerDialogActions").resetComposer,1)};function n(){j.apply(this,arguments)}f.exports=new n(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogUploadStore",["Promise","Arbiter","FluxReduceStore","immutable","SubscriptionsHandler","VideoComposerDialogActions","VideoComposerDialogActionTypes","VideoComposerDialogDispatcher","VideoComposerDialogMetadataStore","VideoComposerDialogUploadUtils","VideoComposerDialogUtils","VideoComposerDialogVideoTypeConfig","VideoUploadFile","LiftTimeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("LiftTimeUtils").MS_IN_SEC,m={backdateYear:null,backdateMonth:null,backdateDay:null,composerID:"",disablePublish:false,errorMessage:null,hideFromNewsFeed:false,fileInput:null,isPosting:false,isPostPending:false,subscriptionsHandler:new(c("SubscriptionsHandler"))(),videoData:null,videoFile:null,videoSize:null,videoUploader:null,uploadFinished:false,uploadProgress:0,isDraft:false,scheduleDate:null,expireDate:null,expireType:null,postEndDate:null};h=babelHelpers.inherits(n,c("immutable").Record(m));i=h&&h.prototype;function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,c("FluxReduceStore"));k=j&&j.prototype;o.prototype.getInitialState=function(){return new n()};o.prototype.reduce=function(p,q){__p&&__p();var r=c("VideoComposerDialogMetadataStore").getState(),s=r.actorID,t=r.targetID,u=r.composerEntryPointRef;switch(q.type){case c("VideoComposerDialogActionTypes").INITIALIZE_COMPOSER:p=p.set("composerID",q.composerID);p=p.set("fileInput",q.fileInput);p=p.set("videoFile",q.file);var v=c("VideoUploadFile").fromFile(q.file);p=p.set("videoSize",v.getSize());return p;case c("VideoComposerDialogActionTypes").BOOTLOAD_PARAMETERS:if(s&&t)c("VideoComposerDialogUploadUtils").loadVideoUploader(s,t,u);return p;case c("VideoComposerDialogActionTypes").FILE_ADDED:if(p.videoUploader)p.videoUploader.cancel();this.$VideoComposerDialogUploadStore1(p);if(s&&t)c("VideoComposerDialogUploadUtils").loadVideoUploader(s,t,u);p=p.set("disablePublish",false);p=p.set("errorMessage",null);p=p.set("uploadProgress",0);p=p.set("fileInput",q.fileInput);p=p.set("videoFile",q.file);var w=c("VideoUploadFile").fromFile(q.file);p=p.set("videoSize",w.getSize());return p;case c("VideoComposerDialogActionTypes").BACKDATE_CONFIRM:p=p.set("backdateYear",q.year);p=p.set("backdateMonth",q.month);p=p.set("backdateDay",q.day);p=p.set("hideFromNewsFeed",q.hideFromNewsFeed);setTimeout(function(){return c("VideoComposerDialogActions").publishPost()},1);return p;case c("VideoComposerDialogActionTypes").INIT_VIDEO_UPLOADER:p=p.set("videoUploader",q.videoUploader);p=p.set("subscriptionsHandler",new(c("SubscriptionsHandler"))());c("VideoComposerDialogUploadUtils").addUploadSubscriptions(p.subscriptionsHandler,q.videoUploader);c("VideoComposerDialogUploadUtils").beginUpload(p.videoFile,q.videoUploader);p=p.set("videoData",c("VideoComposerDialogUploadUtils").createVideoData(p.videoFile));return p;case c("VideoComposerDialogActionTypes").NAVIGATED_FROM_PAGE:if(p.videoUploader)p.videoUploader.abandon();return p;case c("VideoComposerDialogActionTypes").POST_FAILED:p=this.$VideoComposerDialogUploadStore2(p);p=p.set("errorMessage",q.errorData.error_summary+": "+q.errorData.error_description);p=p.set("isPosting",false);p=p.set("isPostPending",false);return p;case c("VideoComposerDialogActionTypes").PUBLISH_POST:var x=c("VideoComposerDialogMetadataStore").getState(),y=x.showRightsConfirmationDialog;if(p.videoUploader&&!(y&&!p.isDraft))p.videoUploader.postUserRequest();if(p.uploadFinished){p=p.set("isPosting",true);this.$VideoComposerDialogUploadStore3()}else p=p.set("isPostPending",true);p=p.set("errorMessage",null);return p;case c("VideoComposerDialogActionTypes").UPLOAD_FAILED:p=this.$VideoComposerDialogUploadStore2(p);p=p.set("errorMessage",q.errorData.error_summary+": "+q.errorData.error_description);p=p.set("disablePublish",true);p=p.set("isPostPending",false);return p;case c("VideoComposerDialogActionTypes").UPLOAD_FINISHED:p=p.set("uploadFinished",true);if(p.isPostPending){p=p.set("isPostPending",false);p=p.set("isPosting",true);this.$VideoComposerDialogUploadStore3()}return p;case c("VideoComposerDialogActionTypes").UPLOAD_PROGRESSED:p=p.set("uploadProgress",q.progress);return p;case c("VideoComposerDialogActionTypes").SCHEDULE_CONFIRM:if(q.scheduleDate)p=p.set("scheduleDate",q.scheduleDate);if(q.expireDate){p=p.set("expireDate",q.expireDate);p=p.set("expireType",q.expirationType)}if(q.postEndDate)p=p.set("postEndDate",q.postEndDate);setTimeout(function(){return c("VideoComposerDialogActions").publishPost()},1);return p;case c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_ATTEMPT:p=p.set("isDraft",true);return p;case c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_ABORT:p=p.set("isDraft",false);return p;case c("VideoComposerDialogActionTypes").SAVE_AS_DRAFT_CONFIRM:setTimeout(function(){return c("VideoComposerDialogActions").publishPost()},1);return p;case c("VideoComposerDialogActionTypes").POST_FINISHED:c("VideoComposerDialogUploadUtils").postFinished(q.data,p.composerID);return p;case c("VideoComposerDialogActionTypes").CANCEL_UPLOAD:p=this.$VideoComposerDialogUploadStore2(p);p=p.set("isPostPending",false).set("isPosting",false);return p;case c("VideoComposerDialogActionTypes").EXIT_DIALOG:c("Arbiter").inform("videoUpload/cancel",{composerID:p.composerID});if(p.videoUploader)p.videoUploader.cancel();return p;case c("VideoComposerDialogActionTypes").RESET_COMPOSER:this.$VideoComposerDialogUploadStore1(p);p=this.getInitialState();return p;default:return p}};o.prototype.$VideoComposerDialogUploadStore1=function(p){if(p.fileInput&&p.fileInput.input)p.fileInput.clear();if(p.videoUploader)p.videoUploader.abandon();p.subscriptionsHandler.release()};o.prototype.$VideoComposerDialogUploadStore2=function(p){__p&&__p();p=p.set("backdateYear",null);p=p.set("backdateMonth",null);p=p.set("backdateDay",null);p=p.set("hideFromNewsFeed",false);p=p.set("isDraft",false);p=p.set("scheduleDate",null);p=p.set("expireDate",null);p=p.set("expireType",null);p=p.set("postEndDate",null);return p};o.prototype.getPostData=function(){__p&&__p();var p=this.getState(),q={draft:p.isDraft};if(p.scheduleDate){var r=c("VideoComposerDialogUtils").formatDateAndTime(p.scheduleDate),s=r.dateStr,t=r.timeSec;q.scheduled=true;q.future_date=s;q.future_time=t}if(p.expireDate){q.expiring=true;q.expire_type=p.expireType;q.expire_time=p.expireDate&&p.expireDate.getTime()/l}if(p.postEndDate){var u=c("VideoComposerDialogUtils").formatDateAndTime(p.postEndDate),v=u.dateStr,w=u.timeSec;q["feed_targeted_data[relevant-until-date]"]=v;q["feed_targeted_data[relevant-until-time]"]=w}if(p.backdateYear){q["backdated_date[year]"]=p.backdateYear;q["backdated_date[month]"]=p.backdateMonth;q["backdated_date[day]"]=p.backdateDay;q.hide_from_newsfeed=p.hideFromNewsFeed}return c("Promise").resolve(q)};o.prototype.$VideoComposerDialogUploadStore3=function(){var p=c("VideoComposerDialogMetadataStore").getState(),q=p.showRightsConfirmationDialog,r=p.videoType,s=this.getState(),t=s.isDraft,u=s.videoUploader;if(q&&!t)return;c("VideoComposerDialogUploadUtils").doPost(u,c("VideoComposerDialogVideoTypeConfig").typeConfig[r].displayedTabs)};function o(){j.apply(this,arguments)}f.exports=new o(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoCaptionsLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CAPTION_UPLOAD_BUTTON_CLICKED:"caption_upload_button_clicked",CAPTION_SELECTED:"caption_selected",CAPTION_REMOVED:"caption_removed",CAPTION_DEFAULT_LOCALE_CHANGED:"caption_default_locale_changed",CAPTION_ERROR:"caption_error",CONTENT_TAGS_SELECTED:"content_tags_selected",CONTENT_TAGS_REMOVED:"content_tags_removed",PERMISSIONS_CHANGED:"permissions_changed",CAPTION_GENERATE_BUTTON_CLICKED:"caption_generate_button_clicked",CAPTION_GENERATE_COMPLETE:"caption_generate_complete",CAPTION_GENERATE_CANCEL:"caption_generate_cancel",CAPTION_CREATE_BUTTON_CLICKED:"caption_create_button_clicked",CAPTION_CREATE_COMPLETE:"caption_create_complete",CAPTION_UPLOAD_COMPLETE:"caption_upload_complete",VIDEO_LANGUAGE_SELECTED:"video_language_selected",CAPTION_DRAFT_EDITED:"caption_draft_edited",CAPTION_DRAFT_DELETED:"caption_draft_deleted",CAPTION_PUBLISHED_EDITED:"caption_published_edited",CAPTION_PUBLISHED_DELETED:"caption_published_deleted",CAPTION_GENERATE_RETRY:"caption_generate_retry",CHANGE_PUBLISHED_STATE:"change_published_state",CAPTION_EDITOR_SAVE:"caption_editor_save",CAPTION_EDITOR_CLOSE:"caption_editor_close",CAPTION_EDITOR_SET_LANGUAGE:"caption_editor_set_language",CAPTION_TAB_OPENED:"caption_tab_opened",COMPOSER_SAVE:"composer_save"})}),null);
__d("VideoComposerDialogCaptionEditorStore",["VideoComposerDialogActionTypes","VideoComposerDialogCaptionsStore","VideoComposerDialogDispatcher","FluxReduceStore","immutable","ImmutableObject","VideoCaptionEditorLanguages","VideoPlayerController","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorUtils","VideoCaptionEditorLogger","WebApiApplication","VideoCaptionsLoggerEvents","VideoCaptionEditorStateEnums"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("VideoCaptionEditorStateEnums").EditorStateEnum,m=1e3,n=-1,o={captions:c("immutable").List(),language:c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED,locale:"",availableLanguages:c("immutable").List(c("VideoCaptionEditorLanguages").languagesInEnglish),captionsChangeSet:c("immutable").List(),captionID:"",captionLocale:"",editorState:l.INIT,editSectionState:{selected:-1},previewEntry:null,captionSelected:n,nextEntryIdx:0,videoID:"",vpc:null,videoDuration:0,currentPlayPositionInMs:0,shouldShowExitDialog:false,captionFile:null,isPlaying:false};h=babelHelpers.inherits(p,c("immutable").Record(o));i=h&&h.prototype;function p(){h.apply(this,arguments)}j=babelHelpers.inherits(q,c("FluxReduceStore"));k=j&&j.prototype;function q(r){k.constructor.call(this,r);this.$VideoComposerDialogCaptionEditorStore1=new(c("VideoCaptionEditorLogger"))()}q.prototype.getInitialState=function(){return new p()};q.prototype.reduce=function(r,s){__p&&__p();var t=null;switch(s.type){case c("VideoComposerDialogActionTypes").RESET_CAPTION_EDITOR:return this.getInitialState();case c("VideoComposerDialogActionTypes").SET_CAPTIONS:r=this.$VideoComposerDialogCaptionEditorStore4(r,s);break;case c("VideoComposerDialogActionTypes").EDIT_CAPTION_ENTRY:r=this.$VideoComposerDialogCaptionEditorStore5(r,s);break;case c("VideoComposerDialogActionTypes").REMOVE_CAPTION_ENTRY:r=this.$VideoComposerDialogCaptionEditorStore6(r,s);break;case c("VideoComposerDialogActionTypes").ADD_CAPTION_ENTRY:r=this.$VideoComposerDialogCaptionEditorStore7(r,s);break;case c("VideoComposerDialogActionTypes").RESET_PLAYER:r=r.set("previewEntry",null).set("captionSelected",n).set("nextEntryIdx",0).set("videoDuration",null).set("currentPlayPositionInMs",0);break;case c("VideoComposerDialogActionTypes").SET_DURATION:r=r.set("videoDuration",s.duration);break;case c("VideoComposerDialogActionTypes").SET_PLAYER_STATE:r=r.set("isPlaying",s.isPlaying);break;case c("VideoComposerDialogActionTypes").SET_PREVIEW_ENTRY:r=r.set("captionSelected",s.idx);if(s.idx===n)r=r.set("previewEntry",null);else r=r.set("previewEntry",new(c("ImmutableObject"))(this.getCaptions().get(s.idx)));r=r.set("nextEntryIdx",(s.idx+1)%r.captions.size);break;case c("VideoComposerDialogActionTypes").SET_EDITOR_LANGUAGE:if(r.get("captionID"))r=r.set("editorState",l.UNSAVED);r=r.set("language",s.language);this.$VideoComposerDialogCaptionEditorStore8(c("VideoCaptionsLoggerEvents").CAPTION_EDITOR_SET_LANGUAGE);break;case c("VideoComposerDialogActionTypes").SET_EDITOR_LOCALE:if(r.get("captionID"))r=r.set("editorState",l.UNSAVED);r=r.set("locale",s.locale);break;case c("VideoComposerDialogActionTypes").INITIALIZE_EDITOR_LANGUAGE:t=c("VideoComposerDialogCaptionsStore").getState().get("selectedCaption");r=r.set("language",t.language).set("locale",t.locale);break;case c("VideoComposerDialogActionTypes").PLAY_PREVIEW_ENTRY:r=this.$VideoComposerDialogCaptionEditorStore9(r,s);break;case c("VideoComposerDialogActionTypes").SET_NEXT_ENTRY:r=r.set("nextEntryIdx",s.idx);break;case c("VideoComposerDialogActionTypes").SET_VPC:r=r.set("vpc",s.vpc);break;case c("VideoComposerDialogActionTypes").SET_CURRENT_PLAY_POSITION:r=r.set("currentPlayPositionInMs",s.position);break;case c("VideoComposerDialogActionTypes").CONFIRM_CLOSE_DIALOG:r=r.set("editorState",l.EXIT);r=r.set("shouldShowExitDialog",false);this.$VideoComposerDialogCaptionEditorStore8(c("VideoCaptionsLoggerEvents").CAPTION_EDITOR_CLOSE);break;case c("VideoComposerDialogActionTypes").CANCEL_CLOSE_DIALOG:r=r.set("shouldShowExitDialog",false);break;case c("VideoComposerDialogActionTypes").SHOW_EXIT_DIALOG:r=r.set("shouldShowExitDialog",true);break;case c("VideoComposerDialogActionTypes").START_SAVE_CAPTION_CHANGESET:r=r.set("editorState",l.SAVING);c("VideoComposerDialogCaptionEditorUtils").saveCaptionChangeset(r.get("captionID"),r.get("captions"),r.get("captionsChangeSet"),r.get("locale"),c("VideoComposerDialogCaptionsStore").getState().get("pageID"));this.$VideoComposerDialogCaptionEditorStore8(c("VideoCaptionsLoggerEvents").CAPTION_EDITOR_SAVE);break;case c("VideoComposerDialogActionTypes").FINISH_SAVE_CAPTION_CHANGESET:r=this.$VideoComposerDialogCaptionEditorStore10(r);break}return r};q.prototype.$VideoComposerDialogCaptionEditorStore8=function(r,s,t){c("VideoComposerDialogCaptionsStore").getLogger().setEvent(r).setError(t).setSubtitleID(this.getState().get("captionID")).setIsCaptionEditor(true).updateExtraData({language:this.getLanguage()}).log()};q.prototype.$VideoComposerDialogCaptionEditorStore4=function(r,s){__p&&__p();var t=s.captions;if(t.size===0)t=c("immutable").List([{node:{text:" ",start_time_in_ms:0,duration_in_ms:m,confidence:1,left:0,width:m*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT}}]);r=r.set("captions",t).set("captionsChangeSet",c("immutable").List(new Array(t.size)));var u=!c("VideoComposerDialogCaptionEditorUtils").areHeadLocalesEqual(r.get("locale"),s.captionLocale);if(u)r=r.set("editorState",l.UNSAVED);this.$VideoComposerDialogCaptionEditorStore2=s.appID||c("WebApiApplication").getClientID();this.$VideoComposerDialogCaptionEditorStore3=s.placement;return r.merge({captionID:s.captionID,captionLocale:s.captionLocale,videoID:s.videoID})};q.prototype.$VideoComposerDialogCaptionEditorStore10=function(r){r=r.set("editorState",l.SAVED).set("captionLocale",r.get("locale"));var s=r.get("locale"),t=s!==c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE&&s!==c("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE;if(!t)return r;var u=c("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(r.get("captions"),c("VideoComposerDialogCaptionEditorUtils").getHeadLocale(s),r.get("language"));return r.set("captionFile",u)};q.prototype.$VideoComposerDialogCaptionEditorStore5=function(r,s){var t=r.get("captions");t=t.splice(s.idx,1,s.caption);var u=r.get("captionsChangeSet").splice(s.idx,1,s.caption);r=r.set("captions",t).set("captionsChangeSet",u);return r.set("editorState",l.UNSAVED)};q.prototype.$VideoComposerDialogCaptionEditorStore6=function(r,s){__p&&__p();var t=r.get("captions"),u=t.get(s.idx);t=t["delete"](s.idx);var v=r.get("captionsChangeSet")["delete"](s.idx);if(u&&u.node)v=v.push({node:{id:u.node.id}});r=r.set("captions",t).set("captionsChangeSet",v);var w=r.get("previewEntry");if(w&&r.get("captionSelected")===s.idx)r=r.set("previewEntry",null);return r.set("editorState",l.UNSAVED)};q.prototype.$VideoComposerDialogCaptionEditorStore7=function(r,s){var t=r.get("captions").splice(s.idx,0,s.caption),u=r.get("captionsChangeSet").splice(s.idx,0,s.caption);r=r.set("captions",t).set("captionsChangeSet",u);return r.set("editorState",l.UNSAVED)};q.prototype.$VideoComposerDialogCaptionEditorStore9=function(r,s){__p&&__p();r=r.set("captionSelected",s.idx);if(s.idx===n)r=r.set("previewEntry",null);else{r=r.set("previewEntry",new(c("ImmutableObject"))(this.getCaptions().get(s.idx)));r=r.set("nextEntryIdx",(s.idx+1)%r.captions.size)}var t=r.get("vpc");if(t){var u=r.get("previewEntry");t.emit("captionsList/preview",{startTime:u?u.node.start_time_in_ms:0,endTime:u?u.node.start_time_in_ms+u.node.duration_in_ms:r.videoDuration})}r=r.set("isPlaying",true);return r};q.prototype.getLanguage=function(){return this.getState().get("language")};q.prototype.getCaptions=function(){return this.getState().get("captions")};q.prototype.getLanguages=function(){return this.getState().get("availableLanguages")};q.prototype.getVPC=function(){return this.getState().get("vpc")};f.exports=new q(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoCaptionDeletionCache",["immutable"],(function a(b,c,d,e,f,g){__p&&__p();function h(){"use strict";this.cache=c("immutable").Map()}h.prototype.add=function(i){"use strict";this.cache=this.cache.set(i.id,i)};h.prototype.remove=function(i){"use strict";this.cache=this.cache["delete"](i)};h.prototype.has=function(i){"use strict";return this.cache.get(i)!==undefined};f.exports=h}),null);
__d("VideoComposerDialogCaptionEditorActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({ADD_CAPTION_ENTRY:"",REMOVE_CAPTION_ENTRY:"",EDIT_CAPTION_ENTRY:"",SET_PREVIEW_ENTRY:"",SET_EDITOR_LANGUAGE:"",SET_EDITOR_LOCALE:"",SET_CAPTIONS:"",SET_NEXT_ENTRY:"",PLAY_PREVIEW_ENTRY:"",CONFIRM_CLOSE_DIALOG:"",CANCEL_CLOSE_DIALOG:"",SHOW_EXIT_DIALOG:"",START_SAVE_CAPTION_CHANGESET:"",FINISH_SAVE_CAPTION_CHANGESET:"",INITIALIZE_EDITOR_LANGUAGE:"",RESET_CAPTION_EDITOR:""});f.exports=h}),null);
__d("VideoComposerDialogCaptionsTabActionTypes",["keyMirror","immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({SHOW_CAPTION_EDITOR:"",HIDE_CAPTION_EDITOR:"",INITIALIZE_CAPTION_LANDING_SCREEN:"",GENERATE:"",CANCEL_GENERATE:"",CREATE:"",EDIT_CAPTIONS_DRAFT:"",DELETE_CAPTIONS_DRAFT:"",START_SRT_UPLOAD:"",FINISH_SRT_UPLOAD:"",GENERATE_COMPLETE:"",CREATE_COMPLETE:"",SELECT_SPOKEN_LANGUAGE:"",SELECT_SPOKEN_LOCALE:"",FINISHED_FETCH_DRAFTS:"",GENERATE_PROGRESS_UPDATE:"",UPDATE_CAPTION_FILES:"",UPDATE_ERROR_STATE:"",SET_AUTO_GENERATED_CAPTIONS:"",RESET_CAPTIONS_LANDING_TAB:"",RETRY_AUTO_GENERATION:"",RESUME_AUTO_GENERATION:"",RESET_AUTO_GENERATING_LOCALE:"",TRY_RESUME_AUTO_GENERATION:"",INITIALIZE_ALL_CAPTION_FILES:"",BOOTLOAD_PARAMETERS_CAPTIONS_TAB:"",CHANGE_PUBLISHED_STATE:"",PENDING_TO_PUBLISHED:"",CAPTION_LANDING_SCREEN_OPEN_EVENT:"",OLD_COMPOSER_CAPTION_TAB_OPEN_EVENT:"",RESET_OPEN_LANDING_SCREEN_STATE:""});f.exports=h}),null);
__d("XVideoCaptionSpeechDetectionAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/captioneditor/speechnonspeech/getresults/",{video_id:{type:"Int",required:true},locale:{type:"String",defaultValue:""}})}),null);
__d("XVideoCaptionUploadAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/captioneditor/captionupload/",{video_id:{type:"Int",required:true}})}),null);
__d("VideoComposerDialogCaptionsStore",["Promise","ActorURI","AsyncRequest","ComposerVideoUploadActions","VideoComposerDialogActionTypes","VideoComposerDialogCaptionEditorConstants","VideoCaptionFile","VideoComposerDialogCaptionEditorStore","VideoComposerDialogCaptionEditorActionTypes","VideoComposerDialogCaptionEditorUtils","VideoComposerDialogCaptionsTabActions","VideoComposerDialogDispatcher","FluxReduceStore","VideoComposerDialogUploadUtils","immutable","VideoComposerDialogCaptionsTabActionTypes","XVideoCaptionGenerateAsyncController","XVideoCaptionSpeechDetectionAsyncController","RTISubscriptionManager","XVideoCaptionUploadAsyncController","VideoUploadUIError","VideoCaptionsPublishTypedLogger","VideoCaptionsLoggerEvents","VideoCaptionDeletionCache","InsightsLocaleNamesSwitch"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("InsightsLocaleNamesSwitch").module,m={accessToken:null,drafts:c("immutable").List(),publishedStateChangeset:c("immutable").Map(),deletionCache:new(c("VideoCaptionDeletionCache"))(),selectedCaption:null,show_caption_editor:false,videoFile:null,video_id:null,videoData:null,isAutoGenerating:false,isCreating:false,spokenLanguage:c("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED,autoGeneratingLocale:null,autoGeneratingLanguage:null,spokenLocale:c("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE,progress:0,autoGenProcessRate:c("VideoComposerDialogCaptionEditorConstants").DEFAULT_PROCESSING_SPEED,generateStarted:0,composerID:"",pageID:"",captionFiles:c("immutable").Map(),isSRTUploading:false,videoDurationInSec:0,errors:c("immutable").List(),numAutoGenerationRetries:0,enableAdvancedCaptionsFeatures:true,isEditFlow:false,isOldComposer:false,wasOldComposerCaptionTabClicked:false,timeFirstInitialized:null},n=5*1e3,o=50,p=1e3,q=15*1e3;h=babelHelpers.inherits(r,c("immutable").Record(m));i=h&&h.prototype;function r(){h.apply(this,arguments)}j=babelHelpers.inherits(s,c("FluxReduceStore"));k=j&&j.prototype;s.prototype.getInitialState=function(){return new r()};s.prototype.getAllCaptions=function(){return new(c("immutable").List)(this.getState().get("drafts"))};s.prototype.getSpokenLanguage=function(){return this.getState().get("spokenLanguage")};s.prototype.getSpokenLocale=function(){return this.getState().get("spokenLocale")};s.prototype.getAutoGeneratingLocale=function(){return this.getState().get("autoGeneratingLocale")};s.prototype.getLogger=function(){var t=this.getState(),u=t.get("isEditFlow")===true?"post-publish":"pre-publish";return new(c("VideoCaptionsPublishTypedLogger"))().setVideoID(t.get("video_id")).setVideoLanguage(t.get("spokenLanguage")).setVideoLocale(t.get("spokenLocale")).setPublishPhase(u)};s.prototype.getEnableAdvancedCaptionsFeatures=function(){return this.getState().get("enableAdvancedCaptionsFeatures")};s.prototype.getpublishedStateChangeset=function(){return this.getState().get("publishedStateChangeset")};s.prototype.wasTabOpenedInOldComposer=function(){var t=this.getState();return t.get("isOldComposer")&&t.get("wasOldComposerCaptionTabClicked")};s.prototype.logComposerSaveEvent=function(){var t=this.getState();if(t.get("timeFirstInitialized")===null||t.get("video_id")===null||t.get("video_id")==="")return;var u=t.get("drafts"),v=c("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(t.get("captionFiles"),u||c("immutable").List());this.$VideoComposerDialogCaptionsStore1(v)};s.prototype.$VideoComposerDialogCaptionsStore1=function(t){var u=this.getState(),v=u.get("drafts");this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").COMPOSER_SAVE,{session_id:u.get("timeFirstInitialized"),num_captions:String(v.size),num_published_captions:String(t.size)});setTimeout(function(){return c("VideoComposerDialogCaptionsTabActions").resetOpenLandingScreenState()},0)};s.prototype.$VideoComposerDialogCaptionsStore3=function(t,u){__p&&__p();var v,w,x=true;switch(t.type){case c("VideoComposerDialogCaptionsTabActionTypes").SHOW_CAPTION_EDITOR:case c("VideoComposerDialogCaptionsTabActionTypes").CREATE:case c("VideoComposerDialogCaptionsTabActionTypes").EDIT_CAPTIONS_DRAFT:case c("VideoComposerDialogCaptionsTabActionTypes").SELECT_SPOKEN_LANGUAGE:case c("VideoComposerDialogCaptionsTabActionTypes").SELECT_SPOKEN_LOCALE:case c("VideoComposerDialogCaptionsTabActionTypes").DELETE_CAPTIONS_DRAFT:case c("VideoComposerDialogCaptionsTabActionTypes").FINISH_SRT_UPLOAD:return true;case c("VideoComposerDialogCaptionsTabActionTypes").GENERATE:x=true;if(u.size>0)(function(){var y=c("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(c("VideoUploadUIError").AUTOGENERATE_FAIL_RETRY);u.forEach(function(z){if(z.toString().localeCompare(y.toString())===0){x=false;return}})})();return x;case c("VideoComposerDialogCaptionsTabActionTypes").GENERATE_COMPLETE:x=false;if(u.size>0)(function(){var y=c("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(c("VideoUploadUIError").AUTOGENERATE_FAIL_RETRY);u.forEach(function(z){if(z.toString().localeCompare(y.toString())===0){x=true;return}})})();return x}return false};s.prototype.reduce=function(t,u){__p&&__p();var v=null,w=null,x=null,y=true,z=null;if(this.$VideoComposerDialogCaptionsStore3(u,t.get("errors"))&&t.get("errors").size>0)t=t.set("errors",c("immutable").List());switch(u.type){case c("VideoComposerDialogActionTypes").RESET_COMPOSER:t=this.getInitialState();return t;case c("VideoComposerDialogCaptionsTabActionTypes").RESET_CAPTIONS_LANDING_TAB:y=t.get("enableAdvancedCaptionsFeatures");t=this.getInitialState().set("enableAdvancedCaptionsFeatures",y);return t;case c("VideoComposerDialogCaptionsTabActionTypes").SHOW_CAPTION_EDITOR:t=t.set("show_caption_editor",true);return t;case c("VideoComposerDialogCaptionEditorActionTypes").CONFIRM_CLOSE_DIALOG:t=t.set("show_caption_editor",false);t=this.$VideoComposerDialogCaptionsStore4(t);return t;case c("VideoComposerDialogCaptionEditorActionTypes").FINISH_SAVE_CAPTION_CHANGESET:return this.$VideoComposerDialogCaptionsStore5(t);case c("VideoComposerDialogCaptionsTabActionTypes").OLD_COMPOSER_CAPTION_TAB_OPEN_EVENT:return t.set("wasOldComposerCaptionTabClicked",true);case c("VideoComposerDialogCaptionsTabActionTypes").CAPTION_LANDING_SCREEN_OPEN_EVENT:var A=t.get("video_id"),B=t.get("timeFirstInitialized")===null&&A!==null&&A!=="";if(!B)return t;var C=String(Date.now());this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_TAB_OPENED,{session_id:C});return t.set("timeFirstInitialized",C);case c("VideoComposerDialogCaptionsTabActionTypes").RESET_OPEN_LANDING_SCREEN_STATE:return t.set("isOldComposer",false).set("wasOldComposerCaptionTabClicked",false).set("timeFirstInitialized",null);case c("VideoComposerDialogCaptionsTabActionTypes").INITIALIZE_CAPTION_LANDING_SCREEN:var D=u.isOldComposer?u.isOldComposer:false;t=this.$VideoComposerDialogCaptionsStore6(t,u.videoFile,u.video_id,u.accessToken,u.composerID,u.pageID,u.videoDurationInSec,u.isEditFlow===true,D);this.$VideoComposerDialogCaptionsStore7(t.get("video_id"));this.$VideoComposerDialogCaptionsStore8(t.get("video_id"),true);return t;case c("VideoComposerDialogCaptionsTabActionTypes").TRY_RESUME_AUTO_GENERATION:var E=t.get("autoGeneratingLocale")!==null?c("VideoComposerDialogCaptionEditorUtils").getHeadLocale(t.get("autoGeneratingLocale")):null;this.$VideoComposerDialogCaptionsStore9(t.get("video_id"),E);return t;case c("VideoComposerDialogCaptionsTabActionTypes").FINISHED_FETCH_DRAFTS:z=c("VideoComposerDialogCaptionEditorUtils").updateToChangesetValues(u.drafts,t.get("publishedStateChangeset"));z=c("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(z,t.get("deletionCache"));return t.set("drafts",z);case c("VideoComposerDialogCaptionsTabActionTypes").RESET_AUTO_GENERATING_LOCALE:return t.set("autoGeneratingLocale",null).set("autoGeneratingLanguage",null);case c("VideoComposerDialogCaptionsTabActionTypes").GENERATE:t=t.set("isAutoGenerating",true).set("progress",0).set("generateStarted",Date.now()).set("autoGeneratingLocale",t.get("spokenLocale")).set("autoGeneratingLanguage",t.get("spokenLanguage"));w=this.$VideoComposerDialogCaptionsStore10(t.get("video_id"),t.get("spokenLanguage"),t.get("spokenLocale"));if(!w)t=t.set("isAutoGenerating",false).set("autoGeneratingLocale",null).set("autoGeneratingLanguage",null);return t;case c("VideoComposerDialogCaptionsTabActionTypes").CREATE:t=t.set("isCreating",true);t=t.set("selectedCaption",null).set("show_caption_editor",true);this.$VideoComposerDialogCaptionsStore11(t.get("video_id"));return t;case c("VideoComposerDialogCaptionsTabActionTypes").GENERATE_COMPLETE:var F=t.get("spokenLanguage");x=c("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(u.captions,u.locale,F);var G=x!==null&&F!==""&&u.subtitlesID!==null;if(G){t=this.$VideoComposerDialogCaptionsStore12(t,String(u.subtitlesID));t=this.$VideoComposerDialogCaptionsStore13(t,x,u.locale);t=t.set("numAutoGenerationRetries",0)}t=t.set("isAutoGenerating",false).set("autoGenProcessRate",c("VideoComposerDialogCaptionEditorConstants").DEFAULT_PROCESSING_SPEED).set("progress",0).set("autoGeneratingLocale",null).set("autoGeneratingLanguage",null);return t;case c("VideoComposerDialogCaptionsTabActionTypes").CREATE_COMPLETE:t=t.set("isCreating",false);return t;case c("VideoComposerDialogCaptionsTabActionTypes").GENERATE_PROGRESS_UPDATE:t=this.$VideoComposerDialogCaptionsStore14(t,u.progress);return t;case c("VideoComposerDialogCaptionsTabActionTypes").EDIT_CAPTIONS_DRAFT:t=t.set("show_caption_editor",true);v=t.get("drafts").get(u.id);t=t.set("selectedCaption",v);this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_DRAFT_EDITED,{},null,v.id);return t;case c("VideoComposerDialogCaptionsTabActionTypes").DELETE_CAPTIONS_DRAFT:z=t.get("drafts");v=t.get("drafts").get(u.id);z=c("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(z["delete"](u.id),t.get("deletionCache"));var H=t.get("captionFiles");H=H["delete"](v.locale);var I=t.get("composerID");if(I){var J=c("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(H,z);c("ComposerVideoUploadActions").updateCaptions(I,Array.from(J.values()))}c("VideoComposerDialogCaptionEditorUtils").deleteSubtitles(t.get("video_id"),v,t.get("pageID"),t.get("deletionCache"),this.$VideoComposerDialogCaptionsStore15.bind(this));this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_DRAFT_DELETED,{},null,v.id);return t.set("drafts",z).set("captionFiles",H).set("publishedStateChangeset",t.get("publishedStateChangeset")["delete"](v.id));case c("VideoComposerDialogCaptionsTabActionTypes").SELECT_SPOKEN_LANGUAGE:this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").VIDEO_LANGUAGE_SELECTED);t=t.set("spokenLanguage",u.language);return t;case c("VideoComposerDialogCaptionsTabActionTypes").SELECT_SPOKEN_LOCALE:t=t.set("spokenLocale",u.locale);return t;case c("VideoComposerDialogCaptionsTabActionTypes").CANCEL_GENERATE:t=t.set("isAutoGenerating",false);this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_GENERATE_CANCEL);return t;case c("VideoComposerDialogCaptionsTabActionTypes").START_SRT_UPLOAD:t=t.set("isSRTUploading",true);this.$VideoComposerDialogCaptionsStore16(t.get("video_id"),u.captions,t.get("accessToken"));return t;case c("VideoComposerDialogCaptionsTabActionTypes").FINISH_SRT_UPLOAD:t=t.set("isSRTUploading",false);this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_UPLOAD_COMPLETE,{},u.error);if(!u.success||u.error){var K=t.get("errors");K.append(u.error);t=t.set("errors",K);return t}var L=u.uploadedVideoSubtitles.size>0;if(!L)return t;u.uploadedVideoSubtitles.forEach(function(T,U){t=this.$VideoComposerDialogCaptionsStore12(t,T.subtitlesID);x=c("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(c("immutable").List(T.captions),U,l[U]);t=this.$VideoComposerDialogCaptionsStore13(t,x,U)}.bind(this));return t;case c("VideoComposerDialogCaptionsTabActionTypes").UPDATE_CAPTION_FILES:x=c("VideoComposerDialogCaptionEditorStore").getState().get("captionFile");var M=c("VideoComposerDialogCaptionEditorStore").getState().get("locale"),N=M!==c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE&&M!==c("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE;if(N)t=this.$VideoComposerDialogCaptionsStore12(t,c("VideoComposerDialogCaptionEditorStore").getState().get("captionID"));var O=x!==null;if(O&&N)return this.$VideoComposerDialogCaptionsStore13(t,x,M);if(N)return this.$VideoComposerDialogCaptionsStore17(t,M);return t;case c("VideoComposerDialogCaptionsTabActionTypes").UPDATE_ERROR_STATE:t=t.set("errors",u.errors).set("show_caption_editor",false);return t;case c("VideoComposerDialogCaptionsTabActionTypes").RETRY_AUTO_GENERATION:var P=c("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(c("VideoUploadUIError").AUTOGENERATE_FAIL_RETRY);t=t.set("isAutoGenerating",false).set("autoGenProcessRate",c("VideoComposerDialogCaptionEditorConstants").DEFAULT_PROCESSING_SPEED).set("progress",0).set("numAutoGenerationRetries",t.get("numAutoGenerationRetries")+1).set("errors",c("immutable").List([P]));this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_GENERATE_RETRY,{},P.toString());setTimeout(c("VideoComposerDialogCaptionsTabActions").generate,c("VideoComposerDialogCaptionEditorConstants").POLL_FAKE_FREQUENCY_GENERATE_MS);return t;case c("VideoComposerDialogCaptionsTabActionTypes").RESUME_AUTO_GENERATION:if(t.get("autoGeneratingLanguage")!==null){this.$VideoComposerDialogCaptionsStore18(t.get("video_id"));this.$VideoComposerDialogCaptionsStore19(t.get("video_id"),t.get("autoGeneratingLanguage"));this.$VideoComposerDialogCaptionsStore20()}return t;case c("VideoComposerDialogCaptionsTabActionTypes").INITIALIZE_ALL_CAPTION_FILES:u.subtitles.forEach(function(T,U){if(T.locale===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE)return;x=c("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(c("immutable").List(T),U,l[U]);if(x===null)return;t=this.$VideoComposerDialogCaptionsStore13(t,x,U)}.bind(this));return t;case c("VideoComposerDialogCaptionsTabActionTypes").BOOTLOAD_PARAMETERS_CAPTIONS_TAB:t=t.set("enableAdvancedCaptionsFeatures",!u.data.disableAdvancedCaptionsFeatures);return t;case c("VideoComposerDialogCaptionsTabActionTypes").CHANGE_PUBLISHED_STATE:z=t.get("drafts");v=t.get("drafts").get(u.id);var Q=v.publishedState;v.publishedState=c("VideoComposerDialogCaptionEditorUtils").getUpdatedPublishState(v.publishedState);z=c("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(z.splice(u.id,1,v),t.get("deletionCache"));var R=t.get("publishedStateChangeset").set(v.id,v.publishedState);if(t.get("composerID")){var S=c("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(t.get("captionFiles"),t.get("drafts")||c("immutable").List());c("ComposerVideoUploadActions").updateCaptions(t.get("composerID"),Array.from(S.values()))}this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CHANGE_PUBLISHED_STATE,{previous_state:Q,new_state:v.publishedState},null,v.id);return t.set("drafts",z).set("publishedStateChangeset",R);case c("VideoComposerDialogCaptionsTabActionTypes").PENDING_TO_PUBLISHED:return t.set("drafts",c("VideoComposerDialogCaptionEditorUtils").changeAllPendingToPublished(t.get("drafts"))).set("publishedStateChangeset",c("immutable").Map());default:return t}};s.prototype.getPostData=function(){var t=this.getState();c("VideoComposerDialogCaptionEditorUtils").updatePublishedStatesOnServer(t.get("video_id"),t.get("pageID"),this.getpublishedStateChangeset());var u=t.get("drafts"),v=c("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(t.get("captionFiles"),u||c("immutable").List());this.logComposerSaveEvent();return c("Promise").resolve({captions:Array.from(v.values())})};s.prototype.$VideoComposerDialogCaptionsStore6=function(t,u,v,w,x,y,z,A,B){t=t.set("videoFile",u);if(u)t=t.set("videoData",c("VideoComposerDialogUploadUtils").createVideoData(u));return t.set("video_id",v).set("accessToken",w).set("composerID",x).set("pageID",y).set("videoDurationInSec",z?z:0).set("isEditFlow",A).set("isOldComposer",B)};s.prototype.$VideoComposerDialogCaptionsStore21=function(t,u){if(!t)return;this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_TAB_OPENED,{session_id:u})};s.prototype.$VideoComposerDialogCaptionsStore5=function(t){__p&&__p();var u=c("VideoComposerDialogCaptionEditorStore").getState().get("locale"),v=c("VideoComposerDialogCaptionEditorStore").getState().get("language"),w=c("VideoComposerDialogCaptionEditorStore").getState().get("captionID"),x=t.get("drafts"),y=x.toArray();for(var z=0;z<x.size;z++){var A=x.get(z);if(A.id===w){A.locale=u;A.language=v;y[z]=A;break}}var B=c("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(c("immutable").List(y),t.get("deletionCache"));return t.set("drafts",B)};s.prototype.$VideoComposerDialogCaptionsStore4=function(t){var u=t.get("drafts"),v=c("immutable").List();for(var w=0;w<u.size;w++){var x=u.get(w);if(x.locale===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE)c("VideoComposerDialogCaptionEditorUtils").silentlyDeleteSubtitle(t.get("video_id"),x,t.get("pageID"));else v=v.push(x)}return t.set("drafts",v)};s.prototype.$VideoComposerDialogCaptionsStore12=function(t,u){var v=c("VideoComposerDialogCaptionEditorUtils").addLocaleAsPublishPending(t.get("publishedStateChangeset"),u),w=c("VideoComposerDialogCaptionEditorUtils").updateToChangesetValues(t.get("drafts"),v);return t.set("publishedStateChangeset",v).set("drafts",w)};s.prototype.$VideoComposerDialogCaptionsStore22=function(){return{sessionID:this.getState().get("timeFirstInitialized")}};s.prototype.$VideoComposerDialogCaptionsStore2=function(t,u,v,w){var x=this.getLogger().setEvent(t).setError(v).setSubtitleID(w);if(u!==null)for(var y in u){if(y===null||u[y]===null)return;x.addToExtraData(y,u[y])}x.log()};s.prototype.$VideoComposerDialogCaptionsStore14=function(t,u){var v=t.get("videoDurationInSec");if(v===0)return t;var w=100*u/v;w=Math.min(w,99);if(w>t.get("progress"))t=t.set("progress",w);var x=(Date.now()-t.get("generateStarted"))/1e3;return t.set("autoGenProcessRate",u/x)};s.prototype.$VideoComposerDialogCaptionsStore13=function(t,u,v){var w=c("VideoComposerDialogCaptionEditorUtils").getHeadLocale(v),x=t.get("captionFiles").set(w,u),y=t.get("composerID");if(y){var z=t.get("drafts"),A=c("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(x,z||c("immutable").List());c("ComposerVideoUploadActions").updateCaptions(y,Array.from(A.values()))}return t.set("captionFiles",x)};s.prototype.$VideoComposerDialogCaptionsStore17=function(t,u){var v=c("VideoComposerDialogCaptionEditorUtils").getHeadLocale(u),w=t.get("captionFiles")["delete"](v),x=t.get("composerID");if(x){var y=t.get("drafts"),z=c("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(w,y||c("immutable").List());c("ComposerVideoUploadActions").updateCaptions(x,Array.from(z.values()))}return t.set("captionFiles",w)};s.prototype.$VideoComposerDialogCaptionsStore7=function(t){__p&&__p();c("VideoComposerDialogCaptionEditorUtils").fetchCaptions(t,function(u){c("VideoComposerDialogCaptionEditorUtils").convertFetchToObject(t,false,u,function(v){var w=c("VideoComposerDialogCaptionEditorUtils").makeAllSRTCaptionPromises(v);c("Promise").all(w).then(function(x){var y=c("immutable").Map();x.forEach(function(z){if(!z)return;y=y.set(z.locale,z.captions)});c("VideoComposerDialogCaptionsTabActions").initializeAllCaptionFiles(y)}).done()})})};s.prototype.$VideoComposerDialogCaptionsStore15=function(t){var u=t.payload,v=u&&u.success;if(!v)this.$VideoComposerDialogCaptionsStore23()};s.prototype.$VideoComposerDialogCaptionsStore24=function(t,u,v){var w=c("XVideoCaptionGenerateAsyncController").getURIBuilder().setInt("video_id",t).setBool("regenerate",true).setBool("is_new_editor",true);if(u!==c("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE)w=w.setString("locale_override",u).setString("locale",u);var x=w.getURI(),y=c("ActorURI").create(x,this.getState().get("pageID"));new(c("AsyncRequest"))(y).setMethod("POST").setHandler(v).send()};s.prototype.$VideoComposerDialogCaptionsStore10=function(t,u,v){__p&&__p();if(!c("VideoComposerDialogCaptionEditorUtils").isAutoGenerateable(v))return false;this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_GENERATE_BUTTON_CLICKED);this.$VideoComposerDialogCaptionsStore24(t,v,function(w){var x=w.payload,y=x&&x.status!==0;if(y){this.$VideoComposerDialogCaptionsStore18(t);this.$VideoComposerDialogCaptionsStore19(t,u);this.$VideoComposerDialogCaptionsStore20()}else this.$VideoComposerDialogCaptionsStore25(u)}.bind(this));return true};s.prototype.$VideoComposerDialogCaptionsStore18=function(t){if(t)c("RTISubscriptionManager").subscribe("shortwave/captions/"+t,this.$VideoComposerDialogCaptionsStore26.bind(this))};s.prototype.$VideoComposerDialogCaptionsStore26=function(t){var u=t&&t.payload;if(!u)return;var v=JSON.parse(t.payload);if(!v.progress_ms)return;c("VideoComposerDialogCaptionsTabActions").updateGenerateProgress(v.progress_ms/1e3)};s.prototype.$VideoComposerDialogCaptionsStore27=function(){var t=(new Date()-this.getState().get("generateStarted"))/1e3;return c("VideoComposerDialogCaptionEditorUtils").shouldRetryAutoGeneration(this.getState().get("videoDurationInSec"),t)};s.prototype.$VideoComposerDialogCaptionsStore28=function(){return this.getState().get("numAutoGenerationRetries")>0};s.prototype.$VideoComposerDialogCaptionsStore29=function(t){if(this.$VideoComposerDialogCaptionsStore28()){this.$VideoComposerDialogCaptionsStore25(t);c("VideoComposerDialogCaptionsTabActions").generateComplete(c("immutable").List(),this.getState().get("spokenLocale"),null);return}c("VideoComposerDialogCaptionsTabActions").retryAutoGeneration()};s.prototype.$VideoComposerDialogCaptionsStore19=function(t,u){__p&&__p();var v=false,w=0,x=setInterval(function(){__p&&__p();w++;if(v)return;v=true;if(this.$VideoComposerDialogCaptionsStore27()){clearInterval(x);this.$VideoComposerDialogCaptionsStore29(u);return}c("VideoComposerDialogCaptionEditorUtils").fetchCaptions(t,function(y){__p&&__p();var z=y&&y.video&&y.video.video_subtitles;if(z){var A=y.video.video_subtitles,B=A.map(function(D,E){return{id:D.id,language:D.display_language,locale:D.locale,creationMethod:D.subtitle_creation_method}}),C=c("VideoComposerDialogCaptionEditorUtils").findAutoGeneratedCaption(B,u);if(C){clearInterval(x);this.$VideoComposerDialogCaptionsStore8(t,false);this.$VideoComposerDialogCaptionsStore30(C.id,C.locale);return}if(w===p){this.$VideoComposerDialogCaptionsStore25(u);c("VideoComposerDialogCaptionsTabActions").generateComplete(c("immutable").List(),this.getState().get("spokenLocale"),null);clearInterval(x);return}v=false}}.bind(this))}.bind(this),q)};s.prototype.$VideoComposerDialogCaptionsStore20=function(){var t=0,u=this.getState().get("videoDurationInSec"),v=setInterval(function(){t++;var w=!this.getState().get("isAutoGenerating")||t>=c("VideoComposerDialogCaptionEditorConstants").MAX_FAKE_POLL_ITERATIONS;if(w){clearInterval(v);return}var x=this.getState().get("progress"),y=x*u/100,z=this.getState().get("autoGenProcessRate"),A=y+z*c("VideoComposerDialogCaptionEditorConstants").POLL_FAKE_FREQUENCY_GENERATE_MS*c("VideoComposerDialogCaptionEditorConstants").AUTO_GEN_PROGRESS_RATE_FACTOR/1e3;c("VideoComposerDialogCaptionsTabActions").updateGenerateProgress(A)}.bind(this),c("VideoComposerDialogCaptionEditorConstants").POLL_FAKE_FREQUENCY_GENERATE_MS)};s.prototype.$VideoComposerDialogCaptionsStore11=function(t){this.$VideoComposerDialogCaptionsStore24(t,c("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE,function(u){var v=u.payload,w=v&&v.status!==0;if(w)this.$VideoComposerDialogCaptionsStore31(t);else this.$VideoComposerDialogCaptionsStore32()}.bind(this))};s.prototype.$VideoComposerDialogCaptionsStore31=function(t){__p&&__p();var u=false,v=0,w=setInterval(function(){__p&&__p();v++;if(u)return;var x=c("XVideoCaptionSpeechDetectionAsyncController").getURIBuilder().setInt("video_id",t);u=true;var y=x.getURI(),z=c("ActorURI").create(y,this.getState().get("pageID"));new(c("AsyncRequest"))(z).setMethod("POST").setHandler(function(A){__p&&__p();var B=A.payload,C=B&&B.status===2;if(C){clearInterval(w);this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_CREATE_COMPLETE);c("VideoComposerDialogCaptionEditorUtils").fetchCaptionedLocales(t,false,function(E){__p&&__p();c("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch(E);c("VideoComposerDialogCaptionsTabActions").createComplete();if(this.getState().show_caption_editor){var F=E.findIndex(function(G){return G.language===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE});c("VideoComposerDialogCaptionsTabActions").editCaptionsDraft(F)}else E.forEach(function(G,F){if(G.language===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE)c("VideoComposerDialogCaptionsTabActions").deleteCaptionsDraft(F)})}.bind(this));return}var D=B===null||B&&B.status===0;if(D){this.$VideoComposerDialogCaptionsStore32();clearInterval(w);return}if(v===o){this.$VideoComposerDialogCaptionsStore32();clearInterval(w);return}u=false}.bind(this)).send()}.bind(this),n)};s.prototype.$VideoComposerDialogCaptionsStore8=function(t,u){c("VideoComposerDialogCaptionEditorUtils").fetchCaptionedLocales(t,u,c("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch)};s.prototype.$VideoComposerDialogCaptionsStore9=function(t,u){c("VideoComposerDialogCaptionEditorUtils").fetchCaptionedLocales(t,false,function(v){var w=u!==null;if(w)this.$VideoComposerDialogCaptionsStore33(v,u);c("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch(v)}.bind(this))};s.prototype.$VideoComposerDialogCaptionsStore33=function(t,u){var v=t.some(function(w){w.locale===u});if(v)c("VideoComposerDialogCaptionsTabActions").resetAutoGeneratingLocale();else c("VideoComposerDialogCaptionsTabActions").resumeAutoGeneration()};s.prototype.$VideoComposerDialogCaptionsStore16=function(t,u,v){var w=c("XVideoCaptionUploadAsyncController").getURIBuilder().setInt("video_id",t),x=new FormData();u.forEach(function(A,B){var C=A.getIsDefault()?"captions_default":"captions_file"+B;x.append(C,A.getFile())});var y=w.getURI(),z=c("ActorURI").create(y,this.getState().get("pageID"));new(c("AsyncRequest"))(z).setMethod("POST").setHandler(function(A){this.$VideoComposerDialogCaptionsStore34(A,t,u)}.bind(this)).setRawData(x).send()};s.prototype.$VideoComposerDialogCaptionsStore34=function(t,u,v){__p&&__p();var w=t.payload,x=w&&w.success==="true"&&w.error==="";if(!x){var y=w?w.error:c("VideoComposerDialogCaptionEditorConstants").NO_PAYLOAD;c("VideoComposerDialogCaptionsTabActions").finishSRTUpload(x,y,c("immutable").Map());return}c("VideoComposerDialogCaptionEditorUtils").fetchCaptions(u,function(z){__p&&__p();c("VideoComposerDialogCaptionEditorUtils").convertFetchToObject(u,false,z,function(A){c("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch(A);var B=c("VideoComposerDialogCaptionEditorUtils").makeSRTCaptionPromises(v,A);c("Promise").all(B).then(function(C){var D=c("immutable").Map();C.forEach(function(E){if(!E)return;D=D.set(E.locale,{subtitlesID:E.subtitlesID,captions:E.captions})});c("VideoComposerDialogCaptionsTabActions").finishSRTUpload(x,w.error,D)}).done()})})};s.prototype.$VideoComposerDialogCaptionsStore25=function(t){var u=c("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(c("VideoUploadUIError").CAPTION_ERROR_GENERATE_FAIL,t);this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_GENERATE_COMPLETE,{},u.toString());this.$VideoComposerDialogCaptionsStore35(u)};s.prototype.$VideoComposerDialogCaptionsStore32=function(){var t=c("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(c("VideoUploadUIError").CAPTION_ERROR_CREATE_FAIL);this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_CREATE_COMPLETE,{},t.toString());this.$VideoComposerDialogCaptionsStore35(t)};s.prototype.$VideoComposerDialogCaptionsStore23=function(){var t=c("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(c("VideoUploadUIError").CAPTION_ERROR_DELETE_FAIL);this.$VideoComposerDialogCaptionsStore35(t)};s.prototype.$VideoComposerDialogCaptionsStore35=function(t){var u=c("immutable").List([t]),v={type:c("VideoComposerDialogCaptionsTabActionTypes").UPDATE_ERROR_STATE,errors:u};c("VideoComposerDialogDispatcher").dispatch(v)};s.prototype.$VideoComposerDialogCaptionsStore30=function(t,u){this.$VideoComposerDialogCaptionsStore2(c("VideoCaptionsLoggerEvents").CAPTION_GENERATE_COMPLETE);c("VideoComposerDialogCaptionEditorUtils").fetchCaptionByID(t,function(v){var w=v&&v.video_subtitle&&v.video_subtitle.captions&&v.video_subtitle.captions.edges;if(w){var x=v.video_subtitle.captions.edges;c("VideoComposerDialogCaptionsTabActions").generateComplete(c("immutable").List(x),u,t)}})};function s(){j.apply(this,arguments)}f.exports=new s(c("VideoComposerDialogDispatcher"))}),null);
__d("VideoComposerDialogTabUtils",["Promise","React","VideoComposerDialogTabs","VideoComposerDialogVideoTypeConfig"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(j){__p&&__p();var k=c("VideoComposerDialogVideoTypeConfig").typeConfig[j].displayedTabs,l=[];for(var m=k,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;l.push(c("VideoComposerDialogTabs").get(q).fetchEditPostData())}c("Promise").all(l).done()},i=function i(j){return j.map(function(k){var l=c("VideoComposerDialogTabs").get(k).tabContainer;return c("React").createElement(l,{key:k})})};f.exports={fetchEditPostParameters:h,getTabContainers:i}}),null);
__d("XVideoComposerDialogInitUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/init_upload/",{target_id:{type:"FBID",required:true},composer_entry_point_ref:{type:"Enum",required:true,enumType:1}})}),null);
__d("VideoComposerDialogUploadUtils",["Promise","ActorURI","Arbiter","AsyncRequest","VideoComposerDialogActions","VideoComposerDialogConstants","VideoComposerDialogMetadataStore","VideoComposerDialogSphericalDirectorActions","VideoComposerDialogTabs","VideoComposerDialogUploadStore","VideoData","VideoUploader","VideoUploadFile","XVideoComposerDialogInitUploadController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(n,o){n.addSubscriptions(o.subscribe("upload-finished",c("VideoComposerDialogActions").uploadFinished),o.subscribe("upload-failed",function(event,p){setTimeout(function(){return c("VideoComposerDialogActions").uploadFailed(event,p)},0)}),o.subscribe("upload-progressed",c("VideoComposerDialogActions").uploadProgressed),o.subscribe("post-failed",c("VideoComposerDialogActions").postFailed),o.subscribe("post-finished",c("VideoComposerDialogActions").postFinished),o.subscribe("metadata-parsed",function(event,p){setTimeout(function(){return c("VideoComposerDialogActions").metadataLoadedFromVideoUploader(p)},0)}))},i=function i(n,o){var p=c("VideoUploadFile").fromFile(n);o.upload(p)},j=function j(n,o){__p&&__p();var p={},q=[];for(var r=o,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u;q.push(c("VideoComposerDialogTabs").get(v).getPostData().then(function(w){Object.assign(p,w)}))}[c("VideoComposerDialogMetadataStore").getPostData(),c("VideoComposerDialogUploadStore").getPostData()].forEach(function(w){return q.push(w.then(function(x){Object.assign(p,x)}))});c("Promise").all(q).done(function(){n.post(p)},function(w){setTimeout(function(){return c("VideoComposerDialogActions").cancelUpload()},1)})},k=function k(n,o,p){var q=c("XVideoComposerDialogInitUploadController").getURIBuilder().setFBID("target_id",o).setEnum("composer_entry_point_ref",p).getURI(),r=c("ActorURI").create(q,n);new(c("AsyncRequest"))(r).setHandler(function(s){c("VideoComposerDialogActions").initVideoUploader(new(c("VideoUploader"))(s.payload.videoUploader[0]))}).send()},l=function l(n){var o=b.URL.createObjectURL(n);return new(c("VideoData"))({aspect_ratio:c("VideoComposerDialogConstants").SIXTEEN_NINE,original_height:c("VideoComposerDialogConstants").PLAYER_HEIGHT,original_width:c("VideoComposerDialogConstants").PLAYER_WIDTH,player_version_overwrite:"pleasantville",sd_src:o,stream_type:"progressive",video_id:""})},m=function m(n,o){var p=c("VideoComposerDialogMetadataStore").getState(),q=p.actorID,r=p.profileDisplayName,s=p.profilePictureURI;c("Arbiter").inform("videoUpload/complete",{videoID:n.video_id,containerType:n.video_container,copyrighted:n.copyrighted,videoAssetID:n.video_asset_id,videoTitle:n.video_title,videoDescription:n.xhpc_message_text,videoThumbnailBlob:n.thumb,isScheduledPost:!!n.scheduled,isHiddenFromTimeline:n.no_story,isSecret:n.secret,isDraft:n.draft=="true",isPageToPage:true,originalComposerID:o,pageID:q,isEpisode:n.episode_data_json!==null&&n.episode_data_json!==undefined&&JSON.parse(n.episode_data_json).isEpisode,userDisplayName:r,userProfilePictureURI:s});c("Arbiter").inform("videoUpload/"+o+"/done");c("Arbiter").inform("Pages/composeFinished",{composerID:o})};f.exports={addUploadSubscriptions:h,beginUpload:i,createVideoData:l,doPost:j,loadVideoUploader:k,postFinished:m}}),null);
__d("XVideoComposerDialogBootloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/bootload_params/",{})}),null);
__d("VideoComposerDialogUtils",["ActorURI","AsyncRequest","ComposerEntryPointRef","ComposerXVideoUploadDialogController","PagesSettingsInstreamAdsBlockListContentStore","PagesSettingsInstreamAdsBlockListDispatcher","PagesSettingsInstreamAdsBlockListStore","VideoComposerDialogActions","VideoComposerDialogAdBreakStore","VideoComposerDialogCaptionsStore","VideoComposerDialogDispatcher","VideoComposerDialogDistributionStore","VideoComposerDialogLoggingStore","VideoComposerDialogMetadataStore","VideoComposerDialogUIStore","VideoComposerDialogUploadStore","VideoUploadFile","XVideoComposerDialogBootloadController","formatDate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(m){var n=c("XVideoComposerDialogBootloadController").getURIBuilder().getURI(),o=c("ActorURI").create(n,m);new(c("AsyncRequest"))(o).setHandler(function(p){c("VideoComposerDialogActions").bootloadParameters(p.payload)}).send()},i=function i(m){var n=c("formatDate")(m,"m/d/Y",{skipPatternLocalization:true}),o=60*(m.getHours()*60+m.getMinutes());return{dateStr:n,timeSec:o}},j=function j(m){l();c("VideoComposerDialogActions").initializeEditComposer(m)},k=function k(m){var n=m.composerEntryPointRef?c("ComposerEntryPointRef")[m.composerEntryPointRef.toUpperCase()]:null;if(n===null)return;var o=c("ComposerXVideoUploadDialogController").getComposerInstance(m.composerID).getFileInput(),p=c("VideoUploadFile").fromFileInput(o.getInput());if(!p)return;l();c("VideoComposerDialogActions").initializeComposer(m.actorID,m.targetID,n,m.composerID,o,p.getFile())},l=function l(){c("VideoComposerDialogDispatcher").explicitlyRegisterStores([c("VideoComposerDialogLoggingStore"),c("VideoComposerDialogMetadataStore"),c("VideoComposerDialogUploadStore"),c("VideoComposerDialogUIStore"),c("VideoComposerDialogCaptionsStore"),c("VideoComposerDialogAdBreakStore"),c("VideoComposerDialogDistributionStore")]);c("PagesSettingsInstreamAdsBlockListDispatcher").explicitlyRegisterStores([c("PagesSettingsInstreamAdsBlockListContentStore"),c("PagesSettingsInstreamAdsBlockListStore")])};f.exports={beginBootloading:h,formatDateAndTime:i,openEditDialog:function m(n){j(n)},openUploadDialog:function m(n){k(n)}}}),null);
__d("VideoSubtitlesCaptionsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1777738082239090"};j.getQueryID=function(){"use strict";return"409750526110742"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("VideoSubtitlesDetailQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1464334463602332"};j.getQueryID=function(){"use strict";return"1972054256453533"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("XVideoCaptionDeleteAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/captioneditor/delete/",{video_id:{type:"Int",required:true},subtitle_id:{type:"Int",required:true}})}),null);
__d("XVideoCaptionPublishedStateUpdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/captioneditor/publishedstate/update/",{video_id:{type:"Int",required:true},subtitles_id:{type:"Int",required:true},new_published_state:{type:"Enum",required:true,enumType:0}})}),null);
__d("XVideoComposerDialogCaptionsTabBootloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/composer/captions_tab/bootload_params/",{})}),null);
__d("VideoComposerDialogCaptionEditorUtils",["fbt","Promise","ActorURI","AsyncRequest","VideoCaptionFile","VideoCaptionUtil","VideoComposerDialogCaptionEditorActions","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorPublishStateEnum","VideoComposerDialogCaptionsStore","VideoSubtitlePublishedStatusType","VideoComposerDialogCaptionsTabActions","XVideoCaptionDeleteAsyncController","immutable","XVideoCaptionSaveAsyncController","moment.instagram","WebGraphQL","VideoSubtitlesCaptionsQueryWebGraphQLQuery","VideoCaptionDeletionCache","VideoUploadUIError","XVideoComposerDialogCaptionsTabBootloadController","XVideoCaptionPublishedStateUpdateController","VideoSubtitlesDetailQueryWebGraphQLQuery"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();i.prototype.saveCaptionChangeset=function(j,k,l,m,n){if(!this.$VideoComposerDialogCaptionEditorUtils1(k))return;var o=c("XVideoCaptionSaveAsyncController").getURIBuilder().setInt("caption_id",j).setString("locale",m).getURI(),p=c("ActorURI").create(o,n);new(c("AsyncRequest"))(p).setMethod("POST").setData({caption:JSON.stringify(k.toArray()),caption_changeset:JSON.stringify(l.toArray())}).setHandler(function(q){c("VideoComposerDialogCaptionEditorActions").finishSaveCaptionChangeset(q);c("VideoComposerDialogCaptionEditorActions").confirmCloseDialog();c("VideoComposerDialogCaptionsTabActions").updateCaptionFiles();c("VideoComposerDialogCaptionEditorActions").resetCaptionEditor()}).send()};i.prototype.$VideoComposerDialogCaptionEditorUtils1=function(j){return j.size>0};i.prototype.getTimeStamp=function(j){var k=Math.floor(j/1e3),l=k>=3599?"hh:mm:ss:SSS":"mm:ss:SS";return c("moment.instagram").utc(j).format(l)};i.prototype.getWidth=function(j,k){return j*c("VideoComposerDialogCaptionEditorConstants").SMALLEST_UNIT*k};i.prototype.fetchCaptions=function(j,k){c("WebGraphQL").exec(new(c("VideoSubtitlesCaptionsQueryWebGraphQLQuery"))({video_id:j})).done(k)};i.prototype.makeNewCaptionFile=function(j,k,l){if(j.size===0)return null;var m=j.filter(function(o){return o.node.text!==c("VideoComposerDialogCaptionEditorConstants").EMPTY_CAPTION_TEXT});if(m.size===0)return null;var n=c("VideoCaptionUtil").saveToFile(j.toArray(),k);return new(c("VideoCaptionFile"))(n,k,l)};i.prototype.finishCaptionsFetch=function(j){c("VideoComposerDialogCaptionsTabActions").finishedFetchDrafts(c("immutable").List(j))};i.prototype.fetchCaptionedLocales=function(j,k,l){if(!j)return;this.fetchCaptions(j,function(m){this.convertFetchToObject(j,k,m,l)}.bind(this))};i.prototype.convertFetchToObject=function(j,k,l,m){__p&&__p();var n,o=this,p=l&&l.video&&l.video.video_subtitles;if(p)(function(){var q=c("VideoComposerDialogCaptionsStore").getState(),r=l.video.video_subtitles,s=[];r.forEach(function(t,u){var v={id:t.id,locale:t.locale,language:t.display_language,creationMethod:t.subtitle_creation_method,publishedState:t.published_state};if(k&&v.locale===c("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE)this.silentlyDeleteSubtitle(j,v,q.get("pageID"));else s.push(v)}.bind(o));m(s)})()};i.prototype.fetchCaptionByID=function(j,k){if(!j)return;c("WebGraphQL").exec(new(c("VideoSubtitlesDetailQueryWebGraphQLQuery"))({subtitles_id:j})).done(k)};i.prototype.findAutoGeneratedCaption=function(j,k){return j.find(function(l){return l.language===k&&l.creationMethod===c("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATED})};i.prototype.findSRTUploadCaption=function(j,k){return j.find(function(l){return l.locale===k&&l.creationMethod===c("VideoComposerDialogCaptionEditorConstants").SRT_UPLOAD})};i.prototype.getCaptionErrorMessage=function(j,k){__p&&__p();switch(j){case c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT:return h._("You uploaded a .SRT file with an incorrect file name. Please use this format: filename{suffix}",[h.param("suffix",".en_US.srt")]);case c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE:return h._("You have already added a caption file for {language}. Please remove the older caption file before adding a new one.",[h.param("language",k)]);case c("VideoUploadUIError").CAPTION_ERROR_GENERATE_FAIL:if(k==null)return h._("The caption generation has failed.");return h._("We're unable to auto-generate captions for {language}. You can still write them yourself or upload a file.",[h.param("language",k)]);case c("VideoUploadUIError").CAPTION_ERROR_CREATE_FAIL:return h._("The caption creation has failed.");case c("VideoUploadUIError").CAPTION_ERROR_DELETE_FAIL:return h._("The caption deletion has failed.");case c("VideoUploadUIError").AUTOGENERATE_FAIL_RETRY:return h._("The caption generation has failed. Retrying to generate.");default:return h._("There was an error uploading your caption file.")}};i.prototype.isAutoGenerateable=function(j){var k=this.getHeadLocale(j);return c("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATABLE_HEAD_LOCALES.has(k)};i.prototype.getHeadLocale=function(j){if(j.slice(3,5)!=="XX")return j;var k=c("VideoComposerDialogCaptionEditorConstants").GENERAL_LOCALES_TO_HEAD.get(j);if(k)return k;return""};i.prototype.areHeadLocalesEqual=function(j,k){return this.getHeadLocale(j)===this.getHeadLocale(k)};i.prototype.getGenericLocale=function(j){var k=c("VideoComposerDialogCaptionEditorConstants").HEAD_TO_GENERAL_LOCALES.get(j);if(k)return k;return j};i.prototype.makeSRTCaptionPromises=function(j,k){__p&&__p();var l=[];j.forEach(function(m,n){l.push(new(c("Promise"))(function(o,p){var q=this.findSRTUploadCaption(k,m.getLocale()),r=q!==-1;if(!r){o();return}this.srtSubtitleIDToSubtitles(q.id,q.locale,q.publishedState,o)}.bind(this)))}.bind(this));return l};i.prototype.makeAllSRTCaptionPromises=function(j){var k=[];j.forEach(function(l){k.push(new(c("Promise"))(function(m,n){this.srtSubtitleIDToSubtitles(l.id,l.locale,l.publishedState,m)}.bind(this)))}.bind(this));return k};i.prototype.srtSubtitleIDToSubtitles=function(j,k,l,m){this.fetchCaptionByID(j,function(n){var o=n&&n.video_subtitle&&n.video_subtitle.captions&&n.video_subtitle.captions.edges;if(o){var p=n.video_subtitle.captions.edges;m({captions:p,locale:k,publishedState:l,subtitlesID:j})}else m()})};i.prototype.shouldRetryAutoGeneration=function(j,k){var l=j*c("VideoComposerDialogCaptionEditorConstants").GENERATION_RETRY_THRESHOLD.PCT/100,m=c("VideoComposerDialogCaptionEditorConstants").GENERATION_RETRY_THRESHOLD.TIME_S;return k>Math.max(l,m)};i.prototype.deleteSubtitles=function(j,k,l,m,n){m.add(k);var o=c("XVideoCaptionDeleteAsyncController").getURIBuilder().setInt("video_id",j).setInt("subtitle_id",k.id).getURI(),p=c("ActorURI").create(o,l);new(c("AsyncRequest"))(p).setMethod("POST").setHandler(function(q){m.remove(k.id);n(q)}).send()};i.prototype.silentlyDeleteSubtitle=function(j,k,l){var m=c("XVideoCaptionDeleteAsyncController").getURIBuilder().setInt("video_id",j).setInt("subtitle_id",k.id).getURI(),n=c("ActorURI").create(m,l);new(c("AsyncRequest"))(n).setMethod("POST").send()};i.prototype.beginBootloadingCaptionsTab=function(j){var k=c("XVideoComposerDialogCaptionsTabBootloadController").getURIBuilder().getURI(),l=c("ActorURI").create(k,j);new(c("AsyncRequest"))(l).setHandler(function(m){c("VideoComposerDialogCaptionsTabActions").bootloadParametersCaptionsTab(m.payload)}).send()};i.prototype.getUpdatedPublishState=function(j){if(j===c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISHED||j===c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISH_PENDING)return c("VideoComposerDialogCaptionEditorPublishStateEnum").DRAFT;else return c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISH_PENDING};i.prototype.updateToChangesetValues=function(j,k){var l=j.toArray();for(var m=0;m<j.size;m++){var n=j.get(m),o=k.get(n.id);if(o!==undefined){n.publishedState=o;l[m]=n}}return c("immutable").List(l)};i.prototype.getPublishedStateForServer=function(j){switch(j){case c("VideoComposerDialogCaptionEditorPublishStateEnum").DRAFT:return c("VideoSubtitlePublishedStatusType")[j];default:return c("VideoSubtitlePublishedStatusType")[c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISHED]}};i.prototype.updatePublishedStatesOnServer=function(j,k,l){__p&&__p();var m=false;l.forEach(function(n,o){__p&&__p();var p=c("VideoSubtitlePublishedStatusType")[n]!==undefined;if(!p)return;var q=c("XVideoCaptionPublishedStateUpdateController").getURIBuilder().setInt("video_id",j).setInt("subtitles_id",o).setEnum("new_published_state",this.getPublishedStateForServer(n)),r=q.getURI(),s=c("ActorURI").create(r,String(k));new(c("AsyncRequest"))(s).setMethod("POST").setHandler(function(t){var u=t.payload&&t.payload.success;if(u&&!m){c("VideoComposerDialogCaptionsTabActions").changePublishedStatePendingToPublished();m=true}}).send()}.bind(this))};i.prototype.changeAllPendingToPublished=function(j){var k=j.toArray();for(var l=0;l<j.size;l++)k[l]=this.changeOnePendingToPublished(j.get(l));return c("immutable").List(k)};i.prototype.changeOnePendingToPublished=function(j){var k=j.publishedState===c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISH_PENDING;if(k)j.publishedState=c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISHED;return j};i.prototype.subtitlesListToMap=function(j){var k={};j.forEach(function(l){var m=this.getHeadLocale(l.locale);k[m]=l}.bind(this));return c("immutable").Map(k)};i.prototype.getPublishedCaptionFiles=function(j,k){var l=this.subtitlesListToMap(k);return j.filter(function(m,n){var o=l.get(n);return o&&o.publishedState!==c("VideoComposerDialogCaptionEditorPublishStateEnum").DRAFT})};i.prototype.addLocaleAsPublishPending=function(j,k){return j.set(k,c("VideoComposerDialogCaptionEditorPublishStateEnum").PUBLISH_PENDING)};i.prototype.filterOutDeletions=function(j,k){var l=c("immutable").List();j.forEach(function(m){if(!k.has(m.id))l=l.push(m)});return l};function i(){}f.exports=new i()}),null);
__d("VideoComposerDialogAdBreakDemonetizationNotice.react",["fbt","Link.react","MonetizationEligibilityStandardsGuideLines","React","VideoComposerDialogAdBreakNUX.react"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){if(!j.isDemonetized)return null;return c("React").createElement(c("VideoComposerDialogAdBreakNUX.react"),{description:c("React").createElement("div",null,h._("Ads have been reduced or stopped for this video because it contains content that does not meet Facebook's content guidelines for monetization.")," ",c("React").createElement(c("Link.react"),{href:c("MonetizationEligibilityStandardsGuideLines").contentGuideLines,target:"_blank"},h._("Learn more")),"."),dismissible:false,style:"notice",title:h._("Video Doesn't Meet Guidelines")})}f.exports=i}),null);
__d("VideoCopyrightMatchDetectionSwitch.react",["React","BUISwitch.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.state={isDetectingMatches:this.props.isDetectingMatches}}j.prototype.render=function(){return c("React").createElement(c("BUISwitch.react"),{value:this.state.isDetectingMatches,showLabel:true,onToggle:function(k){this.setState({isDetectingMatches:k});this.props.onChange(k)}.bind(this)})};j.defaultProps={isDetectingMatches:true};f.exports=j}),null);
__d("VideoCopyrightReferenceFileExcludeSegmentRow.react",["cx","fbt","ClockFormatConverter","LeftRight.react","Keys","React","XUICloseButton.react","XUITextInput.react","Grid.react","VideoCopyrightMonitoringSelector.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("Grid.react").GridItem;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={startTime:this.props.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(this.props.startTimeInSec):"",endTime:this.props.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((this.props.startTimeInSec||0)+this.props.durationInSec):"",editingStartTime:false,editingEndTime:false},o}m.prototype.componentWillReceiveProps=function(n){"use strict";if(this.getErrorMessageOnStartTimeField()!=null||this.getErrorMessageOnEndTimeField()!=null)return;if(this.props.startTimeInSec===n.startTimeInSec&&this.props.durationInSec===n.durationInSec&&this.props.mediaType===this.props.mediaType)return;this.setState({startTime:n.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(n.startTimeInSec):"",endTime:n.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((n.startTimeInSec||0)+n.durationInSec):""})};m.prototype.getErrorMessageOnStartTimeField=function(){"use strict";if(c("ClockFormatConverter").validate(this.state.startTime)){var n=c("ClockFormatConverter").timestampToSeconds(this.state.startTime);if(n>this.props.totalVideoDurationInSec)return i._("Your video ends before this time code")}return null};m.prototype.getErrorMessageOnEndTimeField=function(){"use strict";__p&&__p();if(this.state.endTime=="")return null;if(c("ClockFormatConverter").validate(this.state.endTime)){var n=c("ClockFormatConverter").timestampToSeconds(this.state.endTime);if(n>this.props.totalVideoDurationInSec)return i._("Your video ends before this time code");if(this.state.startTime!=""&&c("ClockFormatConverter").validate(this.state.startTime)){var o=c("ClockFormatConverter").timestampToSeconds(this.state.startTime);if(n<o)return i._("This is before the start time of the segment you're trying to exclude");if(n==o)return i._("The start time and end time of your segment can't be the same")}}return null};m.prototype.getIncrementedOrDecrementedTime=function(n,o){"use strict";var p=c("ClockFormatConverter").timestampToSeconds(o);if(n===c("Keys").UP&&p<this.props.totalVideoDurationInSec)return c("ClockFormatConverter").secondsToTimestamp(p+1);else if(n===c("Keys").DOWN&&p>0)return c("ClockFormatConverter").secondsToTimestamp(p-1);return null};m.prototype.render=function(){"use strict";__p&&__p();return c("React").createElement(c("LeftRight.react"),{key:this.props.index,className:"_2xss"},c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:function(n){return this.props.onExcludedSegmentMonitoringTypeChange(this.props.index,n.value)}.bind(this),value:this.props.mediaType,disabled:false}),c("React").createElement(c("Grid.react"),{className:"_2xsu",cols:3},c("React").createElement(l,null,c("React").createElement(c("XUITextInput.react"),{className:"_2xst"+(this.state.editingStartTime?" _fgf":""),value:this.state.startTime,xuiError:this.getErrorMessageOnStartTimeField(),onBlur:function(){if(!c("ClockFormatConverter").validate(this.state.startTime))this.setState({startTime:this.props.startTimeInSec!=null?c("ClockFormatConverter").secondsToTimestamp(this.props.startTimeInSec):""});this.setState({editingStartTime:false})}.bind(this),onChange:function(n){__p&&__p();var o=n.target.value;if(o===this.state.startTime)return;this.setState({startTime:o},function(){if(c("ClockFormatConverter").validate(this.state.startTime)){var p=c("ClockFormatConverter").normalizeMinutesTimestamp(this.state.startTime);this.props.onExcludedSegmentStartTimeChange(this.props.index,p);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.startTime)}}.bind(this))}.bind(this),onFocus:function(n){var o=n.target.value;if(c("ClockFormatConverter").validate(o)&&!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(o);this.setState({editingStartTime:true})}.bind(this),onKeyDown:function(n){var o=this.getIncrementedOrDecrementedTime(n.keyCode,this.state.startTime);if(o===null)return;this.setState({startTime:o},function(){this.props.onExcludedSegmentStartTimeChange(this.props.index,o);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.startTime)}.bind(this))}.bind(this),placeholder:i._("hh{Time separator}mm{Time separator}ss",[i.param("Time separator",c("ClockFormatConverter").TIME_SEPARATOR)])})),c("React").createElement(l,null,c("React").createElement(c("XUITextInput.react"),{className:"_2xst"+(this.state.editingEndTime?" _fgf":""),value:this.state.endTime,xuiError:this.getErrorMessageOnEndTimeField(),onBlur:function(){if(!c("ClockFormatConverter").validate(this.state.endTime))this.setState({endTime:this.props.durationInSec!=null?c("ClockFormatConverter").secondsToTimestamp((this.props.startTimeInSec||0)+this.props.durationInSec):""});this.setState({editingEndTime:false})}.bind(this),onChange:function(n){__p&&__p();var o=n.target.value;if(o===this.state.endTime)return;this.setState({endTime:o},function(){if(c("ClockFormatConverter").validate(this.state.endTime)){var p=c("ClockFormatConverter").normalizeMinutesTimestamp(this.state.endTime);this.props.onExcludedSegmentEndTimeChange(this.props.index,p);if(!this.getErrorMessageOnStartTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.endTime)}}.bind(this))}.bind(this),onFocus:function(n){var o=n.target.value;if(c("ClockFormatConverter").validate(o)&&!this.getErrorMessageOnEndTimeField())this.props.onUpdateSeekPlayerPositionInMS(o);this.setState({editingEndTime:true})}.bind(this),onKeyDown:function(n){var o=this.getIncrementedOrDecrementedTime(n.keyCode,this.state.endTime);if(o===null)return;this.setState({endTime:o},function(){this.props.onExcludedSegmentEndTimeChange(this.props.index,o);if(!this.getErrorMessageOnEndTimeField())this.props.onUpdateSeekPlayerPositionInMS(this.state.endTime)}.bind(this))}.bind(this),placeholder:i._("hh{Time separator}mm{Time separator}ss",[i.param("Time separator",c("ClockFormatConverter").TIME_SEPARATOR)])})),c("React").createElement(l,null,c("React").createElement(c("XUICloseButton.react"),{className:"_2xsi",onClick:function(n){n.preventDefault();n.stopPropagation();this.props.onDeleteSegment(this.props.index)}.bind(this),size:"small"}))))};f.exports=m}),null);
__d("VideoReferenceMatchSegmentBar.react",["ix","cssVar","cx","FBMultiSegmentBar.react","Grid.react","Image.react","React","VideoUtils","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){"use strict";l.constructor.call(this,n);this.state=this.$VideoReferenceMatchSegmentBar1(n)}m.prototype.componentWillReceiveProps=function(n){"use strict";this.setState(this.$VideoReferenceMatchSegmentBar1(n))};m.prototype.$VideoReferenceMatchSegmentBar1=function(n){"use strict";var o=[],p=0;n.segments.forEach(function(q,r){var s=q.durationInSec,t=q.matchedStartTimeInSec,u=t+s,v=c("VideoUtils").formatTime(t)+" - "+c("VideoUtils").formatTime(u);p+=s;var w={startPercentage:t/this.props.totalTime*100,endPercentage:(t+s)/this.props.totalTime*100,tooltip:v};o.push(w)}.bind(this));return{segments:o,segmentsTotalTime:Math.min(this.props.totalTime,p)}};m.prototype.$VideoReferenceMatchSegmentBar2=function(n){"use strict";if(this.props.totalTime<=0)return"--%";n=Math.min(n,this.props.totalTime);var o=Math.round(n*100/this.props.totalTime);return o+"%"};m.prototype.$VideoReferenceMatchSegmentBar3=function(n){"use strict";return c("VideoUtils").formatTime(n)};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_35lq"},c("React").createElement(c("Grid.react"),{cols:4},c("React").createElement(c("Image.react"),{className:"_35lr",src:this.props.isAudio?h("142978"):h("141747")}),c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_35ls"},this.$VideoReferenceMatchSegmentBar3(this.state.segmentsTotalTime)),c("React").createElement(c("FBMultiSegmentBar.react"),{className:"_35lt _2xsl",segments:this.state.segments,segmentsColor:"#ffffff",highlightedSegmentsColor:"#ffffff"}),c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_35ls _35lu"},this.$VideoReferenceMatchSegmentBar2(this.state.segmentsTotalTime))))};f.exports=m}),null);
__d("VideoUploadUILogger",["BanzaiLogger"],(function a(b,c,d,e,f,g){__p&&__p();var h="VideoUploadUILoggerConfig";function i(j){"use strict";this.$VideoUploadUILogger1=j.waterfall_id;this.$VideoUploadUILogger5=j.actor_id;this.$VideoUploadUILogger2=j.target_id;this.$VideoUploadUILogger3=j.target_type;this.$VideoUploadUILogger4=j.composer_entry_point_ref}i.prototype.logEvent=function(event,j,k){"use strict";c("BanzaiLogger").log(h,{event:event,tab:j,error:k,waterfall_id:this.$VideoUploadUILogger1,actor_id:this.$VideoUploadUILogger5,target_id:this.$VideoUploadUILogger2,target_type:this.$VideoUploadUILogger3,composer_entry_point_ref:this.$VideoUploadUILogger4})};f.exports=i}),null);
__d("ComposerVideoShowsPreviewState",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({VIDEO_PLAYER:"VIDEO_PLAYER",SIXTEEN_NINE:"SIXTEEN_NINE",SQUARE_CROPPER:"SQUARE_CROPPER"});f.exports=h}),null);
__d("ShowsUploadDialogNuxTour.react",["fbt","AdsBlueTipTour.react","AsyncRequest","React","XBasicFBNuxViewController","XUIText.react","ge"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=4918,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.$ShowsUploadDialogNuxTour1=function(){var n=c("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",k).getURI();new(c("AsyncRequest"))().setURI(n).send()};m.prototype.$ShowsUploadDialogNuxTour2=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Write a Video Title")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Titles will be displayed prominently on Facebook. They're an important way for viewers to discover your video.")))};m.prototype.$ShowsUploadDialogNuxTour3=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Select a Video Type")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Episode are the signature, recurring content of your show. Videos can be extras such as interviews, behind-the-scenes tours or bonus footage.")))};m.prototype.$ShowsUploadDialogNuxTour4=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Add Video Tags")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Listing topics related to your video is an important way for viewers to find your content. Tags also help make ads more relevant for your audience if you place ad breaks in your video.")))};m.prototype.$ShowsUploadDialogNuxTour5=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Create Seasons and Playlists")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("You can organize your videos into seasons or playlists around a theme. Seasons can only include episodes. Playlists can include episodes and any of your other videos.")))};m.prototype.$ShowsUploadDialogNuxTour6=function(){return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},h._("Add a Thumbnail")),c("React").createElement(c("XUIText.react"),{display:"block",weight:"normal"},h._("Your video's thumbnail will represent your video across Facebook. Thumbnails must also be able to fit into a square format. Tip: Avoid text on your thumbnail.")))};m.prototype.render=function(){var n=m.componentsLoaded();if(!n)return null;return c("React").createElement(c("AdsBlueTipTour.react"),{steps:this.renderSteps(),onComplete:this.$ShowsUploadDialogNuxTour1,onXOut:this.$ShowsUploadDialogNuxTour1})};m.prototype.renderSteps=function(){var n=[{content:this.$ShowsUploadDialogNuxTour3(),context:c("ge")("selectVideoTypeStep"),position:"right",offsetX:-120,offsetY:-14},{content:this.$ShowsUploadDialogNuxTour2(),context:c("ge")("writeVideoTitle"),position:"right",offsetX:-170,offsetY:-12},{content:this.$ShowsUploadDialogNuxTour4(),context:c("ge")("addVideoTags"),position:"right",offsetX:-210,offsetY:-15},{content:this.$ShowsUploadDialogNuxTour5(),context:c("ge")("addToSeasonAndPlaylist"),position:"right",offsetX:-120,offsetY:2},{content:this.$ShowsUploadDialogNuxTour6(),context:c("ge")("customizeThumbnail"),position:"above",offsetX:280,offsetY:325}];return n};m.componentsLoaded=function(){return c("ge")("selectVideoTypeStep")!==null&&c("ge")("writeVideoTitle")!==null&&c("ge")("addVideoTags")!==null&&c("ge")("addToSeasonAndPlaylist")!==null&&c("ge")("customizeThumbnail")!==null};function m(){i.apply(this,arguments)}f.exports=m}),null);
__d("ShowVideoListDialogEntryPoint",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PAGE_CONTENT_TAB:"page_content_tab",VIDEO_LIST_SELECTOR:"video_list_selector"})}),null);
__d("VideoUploadVideoListSectionContainer.react",["ix","cx","fbt","ComposerVideoShowsActions","ComposerVideoShowsDispatcher","ComposerVideoShowsStore","FluxContainer","React","SUIBusinessThemeContainer.react","SUIButton.react","SUIGlyphIcon.react","SUISelector.react","SUISelectorOption.react","SUIAtlasTheme","SUITooltip.react","XShowPagesCreatePlaylistDialogController","XShowPagesCreateSeasonDialogController","AsyncRequest","AsyncDialog","ShowVideoListDialogEntryPoint","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=35,n="new";k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(p){l.constructor.call(this,p);c("ComposerVideoShowsDispatcher").explicitlyRegisterStore(c("ComposerVideoShowsStore"));c("ComposerVideoShowsActions").requestVideoListOptions(p.pageID)}o.getStores=function(){return[c("ComposerVideoShowsStore")]};o.calculateState=function(){var p=c("ComposerVideoShowsStore").getState().toObject(),q=p.isEpisode,r=p.shouldShowPlaylistSelector,s=p.playlistIDs,t=p.seasonID,u=p.playlistOptions,v=p.seasonOptions;return{isEpisode:q,shouldShowPlaylistSelector:r,playlistIDs:s,seasonID:t,playlistOptions:u,seasonOptions:v}};o.prototype.componentWillReceiveProps=function(p){if(p.pageID&&p.pageID!==this.props.pageID)c("ComposerVideoShowsActions").requestVideoListOptions(p.pageID)};o.prototype.render=function(){return c("React").createElement(c("SUIBusinessThemeContainer.react"),null,c("React").createElement("div",{className:"_3-8y"},this.$VideoUploadEpisodeSectionContainer1(),this.$VideoUploadEpisodeSectionContainer2()))};o.prototype.$VideoUploadEpisodeSectionContainer2=function(){return this.state.shouldShowPlaylistSelector?c("React").createElement(c("SUISelector.react"),{canSelectMultiple:true,button:c("React").createElement(c("SUIButton.react"),{icon:c("React").createElement(c("SUIGlyphIcon.react"),{srcDefault:h("123408"),srcDisabled:h("126612")}),label:c("React").createElement(c("SUITooltip.react"),{position:"right",offset:12,theme:c("SUIAtlasTheme"),tooltip:j._("You can add videos and episodes to playlists")},this.$VideoUploadEpisodeSectionContainer3())}),onChange:function(p){if(p.length>0&&p[p.length-1]===n){var q=c("XShowPagesCreatePlaylistDialogController").getURIBuilder().setFBID("page_id",this.props.pageID).setEnum("entry_point",c("ShowVideoListDialogEntryPoint").VIDEO_LIST_SELECTOR).getURI(),r=new(c("AsyncRequest"))().setURI(q);c("AsyncDialog").send(r)}else c("ComposerVideoShowsActions").setPlaylists(p)}.bind(this),value:this.state.playlistIDs,className_DEPRECATED:"_4gt6"},Object.keys(this.state.playlistOptions).map(function(p){return c("React").createElement(c("SUISelectorOption.react"),{value:p,key:p},this.state.playlistOptions[p])}.bind(this)),c("React").createElement(c("SUISelectorOption.react"),{value:n,key:n},j._("+ Create New Playlist"))):c("React").createElement("div",null)};o.prototype.$VideoUploadEpisodeSectionContainer3=function(){__p&&__p();if(this.state.playlistIDs.length===0||Object.keys(this.state.playlistOptions).length===0)return j._("Add to Playlist");var p=this.state.playlistIDs,q=this.state.playlistOptions[p[0]],r=1;while(q.length<m&&r<p.length){q+=", "+this.state.playlistOptions[p[r]];r+=1}if(q.length>=m)return c("React").createElement("span",null,q.slice(0,m-10),j._("... {number of hidden selected playlists} more",[j.param("number of hidden selected playlists",p.length-r+1)]));else return c("React").createElement("span",null,q)};o.prototype.$VideoUploadEpisodeSectionContainer4=function(){var p=this.state.seasonOptions;if(this.state.seasonID)return this.$VideoUploadEpisodeSectionContainer5(p[this.state.seasonID]);else return j._("Add to Season")};o.prototype.$VideoUploadEpisodeSectionContainer1=function(){var p=this.state.seasonOptions;return c("React").createElement(c("SUISelector.react"),{button:c("React").createElement(c("SUIButton.react"),{icon:c("React").createElement(c("SUIGlyphIcon.react"),{srcDefault:h("123652"),srcDisabled:h("126856")}),label:c("React").createElement(c("SUITooltip.react"),{position:"right",offset:12,theme:c("SUIAtlasTheme"),tooltip:j._("Only episodes can be added to seasons")},this.$VideoUploadEpisodeSectionContainer4()),disabled:!this.state.isEpisode}),onChange:function(q){if(q===n){var r=c("XShowPagesCreateSeasonDialogController").getURIBuilder().setFBID("page_id",this.props.pageID).setEnum("entry_point",c("ShowVideoListDialogEntryPoint").VIDEO_LIST_SELECTOR).getURI(),s=new(c("AsyncRequest"))().setURI(r);c("AsyncDialog").send(s)}else c("ComposerVideoShowsActions").setSeason(q)}.bind(this),value:this.state.seasonID,className_DEPRECATED:"_4gt6",disabled:!this.state.isEpisode},c("React").createElement(c("SUISelectorOption.react"),{value:null,key:0},j._("Not in any season")),Object.keys(this.state.seasonOptions).map(function(q){return c("React").createElement(c("SUISelectorOption.react"),{value:q,key:q},this.$VideoUploadEpisodeSectionContainer5(p[q]))}.bind(this)),c("React").createElement(c("SUISelectorOption.react"),{value:n,key:n},j._("+ Create New Season")))};o.prototype.$VideoUploadEpisodeSectionContainer5=function(p){return j._("Season {seasonNumber}",[j.param("seasonNumber",p)])};f.exports=c("FluxContainer").create(o)}),null);
__d("VideoUploadVideoTypeSectionContainer.react",["cx","fbt","ComposerVideoShowsActions","ComposerVideoShowsDispatcher","ComposerVideoShowsStore","ComposerVideoUploadSection.react","FluxContainer","React","SUIBusinessThemeContainer.react","SUIRadioList.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("SUIRadioList.react").Item;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);c("ComposerVideoShowsDispatcher").explicitlyRegisterStore(c("ComposerVideoShowsStore"))}m.getStores=function(){return[c("ComposerVideoShowsStore")]};m.calculateState=function(){var n=c("ComposerVideoShowsStore").getState().toObject(),o=n.isEpisode;return{isEpisode:o}};m.prototype.componentWillReceiveProps=function(n){if(this.state.isEpisode&&n.duration&&this.props.minEpisodeDuration&&n.duration<this.props.minEpisodeDuration)c("ComposerVideoShowsActions").setIsEpisode(false)};m.prototype.$VideoUploadVideoTypeSectionContainer1=function(){var n=this.props.duration,o=this.props.minEpisodeDuration;if(n&&o&&n<o)return i._({"*":"Episodes must be longer than {seconds} seconds."},[i.param("seconds",o,[0,o])]);return""};m.prototype.render=function(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-98",title:i._("Video Type"),subtitle:i._("(required)"),tooltip:i._("Your followers will get notified whenever you publish a new episode. Both episodes and videos will appear in News Feed and on your Show Page.")},c("React").createElement(c("SUIBusinessThemeContainer.react"),null,c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{size:"meta1",shade:"light"},i._("Episodes are the core content of your show. Other videos, like bonus footage, should be added as a Video.")),this.$VideoUploadVideoTypeSectionContainer2())))};m.prototype.$VideoUploadVideoTypeSectionContainer2=function(){var n=false;if(this.props.duration&&this.props.minEpisodeDuration)n=this.props.duration<this.props.minEpisodeDuration;return c("React").createElement(c("SUIRadioList.react"),{value:this.state.isEpisode,onChange:function o(p){c("ComposerVideoShowsActions").setIsEpisode(p)},className:"_3x8a"},c("React").createElement(l,{disabled:n,tooltip:this.$VideoUploadVideoTypeSectionContainer1(),value:true,className:"_35rm"},i._("Episode")),c("React").createElement(l,{value:false,className:"_35rm"},i._("Video")))};f.exports=c("FluxContainer").create(m)}),null);
__d("VideoContentTagSelectorToken.react",["cx","fbt","AnyTokenSearchSource","AudienceInterestsSearchSource","ComposerVideoTabsIdentifiers","CompositeSearchSource","DOMQuery","React","ReactLayeredComponentMixin_DEPRECATED","SearchableEntry","VideoUploadUILoggerEvents","WebAsyncSearchSource","XInterestTaxonomyTypeaheadDataSourceController","XUIAmbientNUX.react","XUIText.react","XUITokenizer.react","InterestTaxonomyTypeaheadAppType"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=8,l=255,m=c("React").createClass({displayName:"VideoContentTagSelectorToken",mixins:[c("ReactLayeredComponentMixin_DEPRECATED")],_compositeSearchSource:c("CompositeSearchSource"),propTypes:{accessToken:j.string,improvedContentTags:j.bool,logger:j.object,onChange:j.func,showTagSelectorNux:j.bool,value:j.array},getInitialState:function n(){return{allowFreeForm:true,currentEntries:[],disabled:false,entries:[],queryString:"",showTagSelectorNux:this.props.showTagSelectorNux}},componentWillMount:function n(){var o=c("XInterestTaxonomyTypeaheadDataSourceController").getURIBuilder().setEnum("app",c("InterestTaxonomyTypeaheadAppType").VIDEO_CREATION).getURI();this._compositeSearchSource=new(c("CompositeSearchSource"))([new(c("WebAsyncSearchSource"))({queryRequests:[{uri:o}]}),new(c("AnyTokenSearchSource"))(function(p){var q=i._("Add a new tag \"{free form tag}\"",[i.param("free form tag",p)]);return new(c("SearchableEntry"))({uniqueID:p,title:q,auxiliaryData:{isFreeForm:true}})})])},componentDidMount:function n(){if(this.props.value&&this.props.value.length>0)this._onEntriesChange(this.props.value)},_isExceedingMaxTagCount:function n(){return this.state.entries.length>=k},_onEntriesChange:function n(o){this.props.onChange&&this.props.onChange(o);this.setState({entries:o})},_hasEntry:function n(o){var p=o.getUniqueID(),q=o.getAuxiliaryData().isFreeForm,r=o.getTitle(),s=this.state.entries,t=s.some(function(o){if(o.getUniqueID()===p)return true;else if(q&&p===o.getTitle()||o.getAuxiliaryData().isFreeForm&&o.getUniqueID()===r)return true;return false});return t},_onAddEntryAttempt:function n(o){__p&&__p();this._logEvent(c("VideoUploadUILoggerEvents").CONTENT_TAGS_SELECTED);if(this._hasEntry(o))return;var p=this.state.entries;if(this._isExceedingMaxTagCount(p))return;var q=o;if(o.getAuxiliaryData().isFreeForm)q=new(c("SearchableEntry"))({uniqueID:o.getUniqueID(),title:o.getUniqueID(),auxiliaryData:{isFreeForm:true}});p.push(q);this._onEntriesChange(p)},_onRemoveEntryAttempt:function n(o){this._logEvent(c("VideoUploadUILoggerEvents").CONTENT_TAGS_REMOVED);var p=this.state.entries;if(this._hasEntry(o))p.splice(p.indexOf(o),1);this._onEntriesChange(p)},_hasFreeFormEntry:function n(o,p){var q=p.some(function(r){return o===r.getTitle()});return q},_onInputChange:function n(event){var o=event.target.value,p=this._hasFreeFormEntry(o,this.state.entries.concat(this.state.currentEntries));this.setState({allowFreeForm:!p,queryString:o})},_onEntriesFound:function n(o){var p=this._hasFreeFormEntry(this.state.queryString,o.concat(this.state.currentEntries));this.setState({allowFreeForm:this.state.allowFreeForm&&!p,currentEntries:o})},_logEvent:function n(o,p){if(this.props.logger)this.props.logger.logEvent(o,c("ComposerVideoTabsIdentifiers").BASIC,p)},renderLayers:function n(){var o=null;if(this.state.showTagSelectorNux)o=c("React").createElement(c("XUIAmbientNUX.react"),{context:c("DOMQuery").find(document.body,".videoContentTagSelectorToken"),onCloseButtonClick:this._onNuxClose,position:"below",shown:true,width:"custom",customwidth:l},c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Add Video Tags"))),c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Tag topics and themes in this video to help reach audiences that may enjoy your content."))));return{tagNux:o}},renderNotice:function n(){if(!this._isExceedingMaxTagCount())return null;return c("React").createElement("div",{className:"_5f81"},c("React").createElement(c("XUIText.react"),{size:"meta1",display:"block"},i._("You've added the maximum number of tags.")))},render:function n(){var o=null;if(this.props.improvedContentTags)o=this._compositeSearchSource;else o=c("AudienceInterestsSearchSource").getInstance({whitelistedInterestsOnly:false,accessToken:this.props.accessToken});var p={};if(this.props.improvedContentTags&&!this.state.allowFreeForm)p[this.state.queryString]=new(c("SearchableEntry"))({uniqueID:this.state.queryString,title:this.state.queryString});return c("React").createElement("div",null,c("React").createElement(c("XUITokenizer.react"),{className:"videoContentTagSelectorToken",entries:this.state.entries,excludedEntries:p,limit:k,placeholder:i._("Add tags (ex: comedy, animals, make-up etc.)"),searchSource:o,onEntriesFound:this._onEntriesFound,onQueryStringChange:this._onInputChange,onRemoveEntryAttempt:this._onRemoveEntryAttempt,onAddEntryAttempt:this._onAddEntryAttempt,onInputFocus:this._onNuxClose}),this.renderNotice())}});f.exports=m}),null);
__d("ComposerLiveVideoCaptionsField.react",["cx","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","LiveVideoCaptionsSection.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerLiveVideoCaptionsField",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{disabled:i.bool,videoID:i.string},statics:{calculateState:function k(l,m){}},render:function k(){return c("React").createElement("div",null,c("React").createElement(c("LiveVideoCaptionsSection.react"),{disabled:false,videoID:this.props.videoID,onSaveCaptions:this._onSaveCaptions}))},_onSaveCaptions:function k(l){l=l||[];c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,l)}});f.exports=j}),null);
__d("ComposerVideoUploadAutoCaptionsField.react",["cx","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","VideoCaption","VideoUploadAutoCaptionsSection.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerVideoUploadAutoCaptionsField",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:i.string,addedCaptions:i.arrayOf(i.instanceOf(c("VideoCaption"))).isRequired,className:i.string,disabled:i.bool,videoID:i.string},statics:{calculateState:function k(l,m){var n=c("ComposerVideoUploadStore").getLastCaptionUploadErrorMessage(l),o=false,p=false,q=m.addedCaptions;if(q&&q.length>0){o=q.some(function(r){return r.is_auto_generated});if(!o)p=q.some(function(r){return r.getLocale()==="en_US"})}return{autoCaptionDisabled:p,lastCaptionUploadErrorMessage:n,hasAutoCaption:o}}},render:function k(){return c("React").createElement("div",{className:"_4_90"},c("React").createElement(c("VideoUploadAutoCaptionsSection.react"),{accessToken:this.props.accessToken,addedCaptions:this.props.addedCaptions,disabled:this.state.autoCaptionDisabled,hasAutoCaption:this.state.hasAutoCaption,uploadErrorMessage:this.state.lastCaptionUploadErrorMessage,videoID:this.props.videoID,onSaveCaptions:this._onSaveCaptions}))},_onSaveCaptions:function k(l){l=l||[];c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,l)}});f.exports=j}),null);
__d("VideoCaptionList.react",["cx","fbt","ComposerLiveVideoCaptionsField.react","ComposerVideoUploadAutoCaptionsField.react","ComposerVideoUploadTooltip.react","FileInput.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","InfoTableSimpleRow.react","React","ReactDOM","Token.react","VideoCaption","XUIButton.react","XUINotice.react","XUISelector.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=c("XUISelector.react").Option;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$VideoCaptionList2=function(t){var u=this.$VideoCaptionList8.bind(this,t.getLocale());return c("React").createElement(c("Token.react"),{key:t.getLocale(),label:t.getLocaleName()+": "+t.getLocale(),removable:this.props.captionsEditable,onRemove:u})}.bind(this),this.$VideoCaptionList3=function(){return this.props.uploadErrorMessage?c("React").createElement(c("InfoTableSection.react"),null,c("React").createElement(c("InfoTableSimpleRow.react"),null,c("React").createElement(c("XUINotice.react"),{className:"_3-95",use:"warn"},this.props.uploadErrorMessage))):null}.bind(this),this.$VideoCaptionList5=function(){this.props.onUploadClick&&this.props.onUploadClick()}.bind(this),this.$VideoCaptionList8=function(t){this.props.onRemoveCaption(t)}.bind(this),this.$VideoCaptionList4=function(event){var t=event.target;if(t.value){this.props.onUploadCaption(t);this.refs.captionFileInput.getFileInput().clear()}}.bind(this),this.$VideoCaptionList7=function(t){this.props.onSetDefaultCaption(t.value)}.bind(this),p}n.prototype.componentDidUpdate=function(){if(this.refs.captionsList){var o=c("ReactDOM").findDOMNode(this.refs.captionsList),p=o.scrollHeight-o.clientHeight;o.scrollTop=p}};n.prototype.render=function(){var o=null,p=null;if(this.props.captions.length>0||this.props.liveCaptions.length>0)p=this.$VideoCaptionList1();if(this.props.captions.length>0)o=c("React").createElement("div",{ref:"captionsList",className:"_3di-"+(this.props.uploadErrorMessage&&this.props.uploadErrorMessage.length>0?" _5w5d":"")},this.props.captions.map(this.$VideoCaptionList2),c("React").createElement("div",{className:"clearfix"}));var q=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("You can include captions in multiple languages with your video by uploading a SubRip (.srt) file with it. Each SubRip file must be saved using the format: filename.[two-letter language code]_[two-letter country code].srt"),alignv:"bottom"}),r=this.props.showAutoCaptionsSection?c("React").createElement(c("ComposerVideoUploadAutoCaptionsField.react"),{accessToken:this.props.accessToken,addedCaptions:this.props.captions,disabled:false,videoID:this.props.videoID}):null;return c("React").createElement(c("InfoTable.react"),{className:this.props.className},this.$VideoCaptionList3(),c("React").createElement(c("InfoTableSection.react"),null,c("React").createElement(c("InfoTableRow.react"),{label:i._("Video Captions"),helpLink:q},c("React").createElement("div",{className:"_3-98"},o,c("React").createElement(c("FileInput.react"),{accept:".srt",ref:"captionFileInput",multiple:this.props.allowBulkUpload,onChange:this.$VideoCaptionList4,onClick:this.$VideoCaptionList5,disabled:!this.props.captionsEditable},c("React").createElement(c("XUIButton.react"),{size:"medium",use:"default",label:i._("Upload SRT File"),disabled:!this.props.captionsEditable,href:{url:"#"}})),r)),this.$VideoCaptionList6(),p))};n.prototype.$VideoCaptionList6=function(){if(this.props.liveCaptions.length<=0||!this.props.showLiveCaptionSection)return null;var o=c("React").createElement("div",{ref:"captionsList",className:"_3di-"+(this.props.uploadErrorMessage&&this.props.uploadErrorMessage.length>0?" _5w5d":"")},this.props.liveCaptions.map(this.$VideoCaptionList2),c("React").createElement("div",{className:"clearfix"})),p=c("React").createElement(c("ComposerLiveVideoCaptionsField.react"),{disabled:false,videoID:this.props.videoID}),q=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("These captions appear while your video is live. You can edit live captions after your broadcast is finished."),alignv:"bottom"});return c("React").createElement(c("InfoTableRow.react"),{label:i._("Live Video Captions"),helpLink:q},c("React").createElement("div",{className:"_3-98"},o,p))};n.prototype.$VideoCaptionList1=function(){if(!this.props.showDefaultLocaleRow)return null;var o=this.props.captions.concat(this.props.liveCaptions),p="none",q=o.map(function(s){if(s.getIsDefault())p=s.getLocale();return c("React").createElement(m,{value:s.getLocale(),key:s.getLocale()},s.getLocaleName()+": "+s.getLocale())});q.unshift(c("React").createElement(m,{value:"none",key:"none"},i._("None")));var r=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("You can choose a default language for captions to appear on videos when the preferred language isn't available."),alignv:"bottom"});return c("React").createElement(c("InfoTableRow.react"),{label:i._("Default Language"),helpLink:r},c("React").createElement(c("XUISelector.react"),{className:"_3-98",disabled:!this.props.captionsEditable,value:p,onChange:this.$VideoCaptionList7},q))};n.propTypes={accessToken:l.string,allowBulkUpload:l.bool,captions:l.arrayOf(l.instanceOf(c("VideoCaption"))).isRequired,liveCaptions:l.arrayOf(l.instanceOf(c("VideoCaption"))).isRequired,captionsEditable:l.bool.isRequired,showAutoCaptionsSection:l.bool,showDefaultLocaleRow:l.bool,showLiveCaptionSection:l.bool,uploadErrorMessage:l.string,videoID:l.string,onRemoveCaption:l.func.isRequired,onSetDefaultCaption:l.func.isRequired,onUploadCaption:l.func.isRequired,onUploadClick:l.func};n.defaultProps={captions:[],liveCaptions:[],uploadErrorMessage:"",allowBulkUpload:false,showDefaultLocaleRow:true};f.exports=n}),null);
__d("ComposerCharityTypeahead.react",["cx","fbt","React","XUITypeahead.react","FundraiserForStoryCharityPickerRelaySearchSource","SearchableEntry"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){__p&&__p();k.constructor.call(this,m);this.$ComposerCharityTypeahead2=function(n){var o=n.target.value;this.setState({query:o});if(!o&&this.props.onClear)this.props.onClear()}.bind(this);this.$ComposerCharityTypeahead3=function(n){this.setState({query:n.getTitle()});this.props.onSelect(n)}.bind(this);this.$ComposerCharityTypeahead1=new(c("FundraiserForStoryCharityPickerRelaySearchSource"))();this.state={query:""}}l.prototype.componentDidMount=function(){this.props.focusOnMount&&this.refs.typeahead&&this.refs.typeahead.focusInput()};l.prototype.render=function(){return c("React").createElement(c("XUITypeahead.react"),{className:"_5esx",onChange:this.$ComposerCharityTypeahead2,onSelectAttempt:this.$ComposerCharityTypeahead3,placeholder:this.props.placeholder||i._("Search for a nonprofit to support"),queryString:this.state.query,ref:"typeahead",searchSource:this.$ComposerCharityTypeahead1,showEntriesOnFocus:true})};f.exports=l}),null);
__d("ComposerReferenceFileExcludeSegmentsView.react",["ix","cx","fbt","ComposerVideoUploadSection.react","emptyFunction","Image.react","InputLabel.react","LeftRight.react","Link.react","React","VideoCopyrightMonitoringType","VideoReferenceMatchSegmentBar.react","XUIButton.react","XUIGrayText.react","Grid.react","VideoCopyrightReferenceFileExcludeSegmentRow.react","fbglyph","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("Grid.react").GridItem,n=c("React").PropTypes;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={isEditing:false},this.$ComposerReferenceFileExcludeSegmentsView1=function(){this.setState({isEditing:!this.state.isEditing})}.bind(this),q}o.prototype.$ComposerReferenceFileExcludeSegmentsView2=function(){"use strict";return c("React").createElement("div",{className:"_2xsf"},c("React").createElement(c("Grid.react"),{cols:3,spacing:"_2ph-"},c("React").createElement(m,{className:"_2xsh"},j._("Content type")),c("React").createElement(m,null,c("React").createElement("div",{className:"_2xsh"},j._("Start"))),c("React").createElement(m,null,c("React").createElement("div",{className:"_2xsh"},j._("End")))))};o.prototype.$ComposerReferenceFileExcludeSegmentsView3=function(){"use strict";if(!this.state.isEditing)return null;return c("React").createElement("div",{className:"_2xse"},this.$ComposerReferenceFileExcludeSegmentsView2(),this.props.excludedSegments.map(function(p,q){return p.included?null:this.$ComposerReferenceFileExcludeSegmentsView4(p,q)}.bind(this)),c("React").createElement(c("XUIButton.react"),{className:"_2xsr",label:c("React").createElement("fbtc",null,"Add"),labelIsHidden:false,onClick:function(p){p.preventDefault();p.stopPropagation();this.props.onAddNewExcludedSegmentEntry()}.bind(this),image:c("React").createElement(c("Image.react"),{src:h("123418")})}))};o.prototype.$ComposerReferenceFileExcludeSegmentsView4=function(p,q){"use strict";return c("React").createElement(c("VideoCopyrightReferenceFileExcludeSegmentRow.react"),{key:q,index:q,startTimeInSec:p.matchedStartTimeInSec,durationInSec:p.durationInSec,mediaType:p.mediaType,onExcludedSegmentMonitoringTypeChange:this.props.onExcludedSegmentMonitoringTypeChange,onExcludedSegmentStartTimeChange:this.props.onExcludedSegmentStartTimeChange,onExcludedSegmentEndTimeChange:this.props.onExcludedSegmentEndTimeChange,onDeleteSegment:this.props.onDeleteSegment,onUpdateSeekPlayerPositionInMS:this.props.onUpdateSeekPlayerPositionInMS,totalVideoDurationInSec:this.props.totalDurationInSec})};o.prototype.$ComposerReferenceFileExcludeSegmentsView5=function(){"use strict";__p&&__p();var p=[],q=[];this.props.excludedSegments.forEach(function(r){if(r.included||!r.durationInSec)return;if(r.mediaType!==c("VideoCopyrightMonitoringType").AUDIO_ONLY.value&&!!r.durationInSec&&r.referenceStartTimeInSec!=null)p.push({matchedStartTimeInSec:r.referenceStartTimeInSec,durationInSec:r.durationInSec,referenceStartTimeInSec:r.referenceStartTimeInSec,segmentSource:r.segmentSource,mediaType:r.mediaType});if(r.mediaType!==c("VideoCopyrightMonitoringType").VIDEO_ONLY.value&&!!r.durationInSec&&r.referenceStartTimeInSec!=null)q.push({matchedStartTimeInSec:r.referenceStartTimeInSec,durationInSec:r.durationInSec,referenceStartTimeInSec:r.referenceStartTimeInSec,segmentSource:r.segmentSource,mediaType:r.mediaType})});return c("React").createElement("div",null,c("React").createElement(c("Grid.react"),{cols:3,spacing:"_5r4u"},c("React").createElement(m,null,c("React").createElement(c("XUIGrayText.react"),{className:"_3-95 _2xsj",display:"block",size:"meta1"},j._("Stop detecting matching content for music or clips you don't exclusively own.")," ",c("React").createElement(c("Link.react"),{href:"https://facebook.exceedlms.com/student/catalog/show/182065",target:"_blank"},j._("Learn more.")))),c("React").createElement(m,{className:"_2xsk"},c("React").createElement("div",null,c("React").createElement(c("VideoReferenceMatchSegmentBar.react"),{totalTime:this.props.totalDurationInSec,segments:p,isAudio:false}),c("React").createElement(c("VideoReferenceMatchSegmentBar.react"),{totalTime:this.props.totalDurationInSec,segments:q,isAudio:true}))),c("React").createElement(m,null,c("React").createElement(c("XUIButton.react"),{className:"_2xsm",label:c("React").createElement("fbtc",null,"Edit"),labelIsHidden:true,onClick:function(r){r.preventDefault();r.stopPropagation();this.$ComposerReferenceFileExcludeSegmentsView1()}.bind(this),depressed:this.state.isEditing,image:this.props.isUpload?c("React").createElement(c("Image.react"),{src:h("123418")}):c("React").createElement(c("Image.react"),{src:h("123350")})}))),this.$ComposerReferenceFileExcludeSegmentsView3())};o.prototype.render=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:c("joinClasses")(this.props.className,"_4oto"),title:j._("Exclude segments you don't own")},c("React").createElement("div",{className:"_2xsn"},this.$ComposerReferenceFileExcludeSegmentsView5()))};o.defaultProps={totalDurationInSec:0,excludedSegments:[],isUpload:false,onAddNewExcludedSegmentEntry:c("emptyFunction"),onExcludedSegmentMonitoringTypeChange:c("emptyFunction"),onExcludedSegmentStartTimeChange:c("emptyFunction"),onExcludedSegmentEndTimeChange:c("emptyFunction"),onDeleteSegment:c("emptyFunction"),onUpdateSeekPlayerPositionInMS:c("emptyFunction")};o.propTypes={className:n.string,excludedSegments:n.array,isUpload:n.bool,onAddNewExcludedSegmentEntry:n.func,onExcludedSegmentMonitoringTypeChange:n.func,onExcludedSegmentStartTimeChange:n.func,onExcludedSegmentEndTimeChange:n.func,onDeleteSegment:n.func,onUpdateSeekPlayerPositionInMS:n.func,totalDurationInSec:n.number.isRequired};f.exports=o}),null);
__d("ComposerReferenceFileExcludeSegmentsContainer.react",["ClockFormatConverter","ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileExcludeSegmentsView.react","VideoCopyrightMonitoringType","VideoCopyrightSegmentSource","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileExcludeSegmentsContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{className:h.string,isUpload:h.bool,totalDurationInSec:h.number,logExcludeSegmentsUpdateEvent:h.func},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightExcludedSegments(k),n=c("VideoCopyrightUtils").convertExcludedSegmentsToCopyrightSegments(m.slice(0)),o=Math.round(c("ComposerVideoUploadStore").getVideoDurationInSec(k)||0);return{excludedOwnershipSegments:n,videoDurationInSecFromStore:o}}},onDeleteSegment:function j(k){var l=this.state.excludedOwnershipSegments;l[k].included=true;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onExcludedSegmentMonitoringTypeChange:function j(k,l){var m=this.state.excludedOwnershipSegments;if(m[k].mediaType!=l){m[k].mediaType=l;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments())}this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onExcludedSegmentStartTimeChange:function j(k,l){__p&&__p();var m=this.state.excludedOwnershipSegments,n=c("ClockFormatConverter").timestampToSeconds(l),o=this.calculateNewDurationOnStartTimeChange(k,l);m[k].referenceStartTimeInSec=n;m[k].durationInSec=o;var p=this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore;if(p&&p>0)if(n>=p){m[k].referenceStartTimeInSec=null;m[k].durationInSec=null}else if(n+o>p)m[k].durationInSec=null;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},calculateNewDurationOnStartTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments,n=c("ClockFormatConverter").timestampToSeconds(l);if(m[k].referenceStartTimeInSec==null||m[k].durationInSec==null)return null;var o=m[k].referenceStartTimeInSec||0,p=o-n,q=m[k].durationInSec||0,r=q+p;return r>0?r:null},calculateNewDurationOnEndTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments;if(m[k].referenceStartTimeInSec==null)return null;var n=m[k].referenceStartTimeInSec,o=c("ClockFormatConverter").timestampToSeconds(l),p=this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore;if(!o||o<=n)return null;else if(o>p)o=p;return o-n},onExcludedSegmentEndTimeChange:function j(k,l){var m=this.state.excludedOwnershipSegments,n=this.calculateNewDurationOnEndTimeChange(k,l);m[k].durationInSec=n;c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onAddNewExcludedSegmentEntry:function j(){var k=this.state.excludedOwnershipSegments,l={mediaType:c("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value,included:false,segmentSource:c("VideoCopyrightSegmentSource").PUBLISHER_DEFINED};k.push(l);c("ComposerVideoUploadActions").updateCopyrightExcludedSegments(this.context.composerID,this._getExcludedOwnershipSegments());this.props.logExcludeSegmentsUpdateEvent&&this.props.logExcludeSegmentsUpdateEvent()},onUpdateSeekPlayerPositionInMS:function j(k){c("ComposerVideoUploadActions").updatePlayerSeekPosition(this.context.composerID,c("ClockFormatConverter").timestampToMillis(k))},_getExcludedOwnershipSegments:function j(){return c("VideoCopyrightUtils").convertCopyrightSegmentsToExcludedSegments(this.state.excludedOwnershipSegments.slice(0))},render:function j(){return c("React").createElement(c("ComposerReferenceFileExcludeSegmentsView.react"),{className:this.props.className,excludedSegments:this.state.excludedOwnershipSegments,isUpload:this.props.isUpload,onExcludedSegmentMonitoringTypeChange:this.onExcludedSegmentMonitoringTypeChange,onExcludedSegmentStartTimeChange:this.onExcludedSegmentStartTimeChange,onExcludedSegmentEndTimeChange:this.onExcludedSegmentEndTimeChange,onAddNewExcludedSegmentEntry:this.onAddNewExcludedSegmentEntry,onDeleteSegment:this.onDeleteSegment,onUpdateSeekPlayerPositionInMS:this.onUpdateSeekPlayerPositionInMS,totalDurationInSec:this.props.totalDurationInSec?this.props.totalDurationInSec:this.state.videoDurationInSecFromStore})}});i.defaultProps={excludedSegments:[]};f.exports=i}),null);
__d("ComposerReferenceFileUploadAttributionsTab.react",["cx","fbt","ix","ComposerVideoUploadSection.react","Image.react","MediaCopyrightAttributionType","VideoCopyrightAttributionInfoIcon.react","React","VideoCopyrightAttributionSelector.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){"use strict";l.constructor.call(this,n);this.$ComposerReferenceFileUploadAttributionsTab2=function(o,p){this.props.onAttributionChange(o);if(p&&p.attribution_type)this.setState({attributionType:p.attribution_type})}.bind(this);this.state={attributionType:c("MediaCopyrightAttributionType").VIDEO}}m.prototype.$ComposerReferenceFileUploadAttributionsTab1=function(){"use strict";return c("React").createElement("div",{className:"_2cc2"},c("React").createElement("div",{className:"_5sf4"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",size:"meta1"},i._("Set up attributions to get credit for your work whenever videos that contain your content are posted. Once you assign an attribution to a reference file, a link to your video or Page will appear on every monitored video that includes your content.")),c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Apply Attribution"),tooltip:i._("Your attribution will appear below videos that match your reference files. You can direct viewers to a page, the original video or a related video.")},c("React").createElement(c("VideoCopyrightAttributionSelector.react"),{accessToken:this.props.accessToken,hasError:this.props.hasError,onChange:this.$ComposerReferenceFileUploadAttributionsTab2,pageID:this.props.targetID,selectedAttribution:this.props.attributionID}))))};m.prototype.$ComposerReferenceFileUploadAttributionsTab3=function(){"use strict";return c("React").createElement(c("Image.react"),{className:"_44x5",src:this.state.attributionType===c("MediaCopyrightAttributionType").VIDEO?j("395928"):j("395927")})};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:(!this.props.shown?"_2oq6":"")+" _63ex"},this.$ComposerReferenceFileUploadAttributionsTab1(),c("React").createElement("div",{className:"_44x6"},this.$ComposerReferenceFileUploadAttributionsTab3(),c("React").createElement(c("VideoCopyrightAttributionInfoIcon.react"),{className:"_1mu1"})))};f.exports=m}),null);
__d("ComposerReferenceFileUploadAttributionsTabContainer.react",["ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerReferenceFileUploadAttributionsTab.react","ComposerVideoUploadStore","ReactComponentWithPureRenderMixin","React"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadAttributionsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:h.string.isRequired,onLogEvent:h.func.isRequired,shown:h.bool,targetID:h.string.isRequired},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightAttributionID(k);return{attributionID:m}}},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadAttributionsTab.react"),{accessToken:this.props.accessToken,attributionID:this.state.attributionID,hasError:false,shown:!!this.props.shown,targetID:this.props.targetID,onAttributionChange:this.onAttributionChange})},onAttributionChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightAttributionID(this.context.composerID,k);this.props.onLogEvent("attribution_updated")}});f.exports=i}),null);
__d("ComposerReferenceFileUploadRightsTab.react",["cx","fbt","ComposerVideoUploadSection.react","React","CopyrightReferenceCategorySelector.react","VideoCopyrightGeoSelector.react","VideoCopyrightMatchRuleSelector.react","VideoCopyrightMonitoringSelector.react","VideoCopyrightMatchDetectionSwitch.react","XUIGrayText.react","ReactDOM"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.scrollToMatchDetectionSwitchIfNeeded=function(){if(this.props.shouldShowDetectMatchSection){var s=c("ReactDOM").findDOMNode(this.refs.scrollableMetadataArea);if(s instanceof Element)s.scrollTop=40}}.bind(this),o}m.prototype.$ComposerReferenceFileUploadRightsTab1=function(){"use strict";var n=null;if(this.props.shouldShowDetectMatchSection&&this.props.onReferenceFileStatusChange)n=this.$ComposerReferenceFileUploadRightsTab2();return c("React").createElement("div",{className:"_2cc2"},c("React").createElement("div",{className:"_5sf4",ref:"scrollableMetadataArea"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",size:"meta1"},i._("Establish ownership of your reference file and what match policy to apply.")),this.$ComposerReferenceFileUploadRightsTab3(),this.$ComposerReferenceFileUploadRightsTab4(),this.$ComposerReferenceFileUploadRightsTab5(),this.$ComposerReferenceFileUploadRightsTab6(),n))};m.prototype.$ComposerReferenceFileUploadRightsTab7=function(n){"use strict";if(this.props.logger)this.props.logger.logEvent(n)};m.prototype.$ComposerReferenceFileUploadRightsTab3=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Specify Ownership"),tooltip:i._("Ownership establishes what element of the content belong to you in what parts of the world")},c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:this.props.onMonitoringTypeChange,value:this.props.monitoringType}))};m.prototype.$ComposerReferenceFileUploadRightsTab4=function(){"use strict";return c("React").createElement(c("VideoCopyrightGeoSelector.react"),{className:"_3-8y",onChange:this.props.onGeoChange,selectedCountries:this.props.ownershipCountries,shouldShowIncludeExcludeGeoOptions:true,areCountriesIncluded:this.props.areCountriesIncluded})};m.prototype.$ComposerReferenceFileUploadRightsTab5=function(){"use strict";return c("React").createElement(c("CopyrightReferenceCategorySelector.react"),{disabled:this.props.disableEditReferenceCategory,onReferenceCategoryChange:this.props.onReferenceCategoryChange,selectedCategory:this.props.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError})};m.prototype.$ComposerReferenceFileUploadRightsTab6=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Apply Match Rule"),tooltip:i._("Select which rule to apply to matching content")},c("React").createElement(c("VideoCopyrightMatchRuleSelector.react"),{onChange:this.props.onMatchRuleChange,onCreateNewRule:this.props.onCreateNewMatchRule,pageID:this.props.targetID,selectedRule:this.props.ruleID,onMatchRuleLoaded:this.scrollToMatchDetectionSwitchIfNeeded}))};m.prototype.$ComposerReferenceFileUploadRightsTab2=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Detect Matching Content"),tooltip:i._("Turn Detect Matching Content on if you own the exclusive rights to all of the content in your reference file.")},c("React").createElement(c("VideoCopyrightMatchDetectionSwitch.react"),{onChange:this.props.onReferenceFileStatusChange,isDetectingMatches:!this.props.isReferenceFileDisabled}))};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_63ex"+(!this.props.shown?" _2oq6":"")},this.$ComposerReferenceFileUploadRightsTab1(),this.props.children)};m.propTypes={accessToken:l.string,generateThumbnails:l.bool,onCreateNewMatchRule:l.func,onGeoChange:l.func.isRequired,onMatchRuleChange:l.func.isRequired,onMonitoringTypeChange:l.func.isRequired,onReferenceCategoryChange:l.func.isRequired,onReferenceFileStatusChange:l.func,shown:l.bool,targetID:l.string.isRequired,monitoringType:l.string,ownershipCountries:l.array,areCountriesIncluded:l.bool,isReferenceFileDisabled:l.bool,isVideoUpload:l.bool,ruleID:l.string,isLiveBroadcast:l.bool,shouldShowDetectMatchSection:l.bool,showCategoryRequiredError:l.bool,selectedCategory:l.string,disableEditReferenceCategory:l.bool};f.exports=m}),null);
__d("ComposerVideoPlayer.react",["cx","fbt","BackgroundImage.react","CenteredContainer.react","FileInput.react","FileVideoThumbnail","Link.react","React","VideoAssetPlayer.react","VideoThumbnail","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes,m=465,n=285;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){__p&&__p();var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.getSelectedThumbnail=function(){return this.props.selectedThumbnail||this.props.thumbnails[0]}.bind(this),this.selectThumbnailByIndex=function(u){this.props.onThumbnailChange(this.props.thumbnails[u],u,this.props.thumbnails)}.bind(this),this.onPickerLeftClick=function(){var u=this.getSelectedThumbnailIndex()-1;if(u==-1)u=this.props.thumbnails.length-1;this.selectThumbnailByIndex(u);this.refs.videoPlayer.closePlayer()}.bind(this),this.onPickerRightClick=function(){var u=this.getSelectedThumbnailIndex()+1;if(u==this.props.thumbnails.length)u=0;this.selectThumbnailByIndex(u);this.refs.videoPlayer.closePlayer()}.bind(this),this.onFileInputChange=function(event){if(typeof URL.createObjectURL!=="function")return;if(event.target.files.length!==0){this.refs.videoPlayer.closePlayer();var u=new(c("FileVideoThumbnail"))(event.target.files[0]);this.props.onCustomThumbnailSelected(u);this.refs.customThumbnailFileInput.getFileInput().clear()}}.bind(this),this.getSelectedThumbnailIndex=function(){return this.props.selectedThumbnail===undefined?0:this.props.thumbnails.indexOf(this.props.selectedThumbnail)}.bind(this),this.renderThumbSection=function(){var u=this.getSelectedThumbnailIndex()+1,v=c("React").createElement(c("XUIText.react"),{className:"_58mb",key:"index",weight:"bold"},u+"/"+this.props.thumbnails.length),w=void 0;if(this.props.allowCustomThumbnail)w=c("React").createElement("div",{className:"_3ymm"},c("React").createElement(c("FileInput.react"),{accept:"image/*",ref:"customThumbnailFileInput",name:"custom_thumbnail",onChange:this.onFileInputChange},c("React").createElement(c("Link.react"),{className:"_uhl"},c("React").createElement("span",{className:"_44rr"}),i._("Custom"))));var x=c("React").createElement(c("Link.react"),{className:"_58mc",key:"left-arrow",onClick:this.onPickerLeftClick},c("React").createElement(c("CenteredContainer.react"),{className:"_58mp",vertical:true},c("React").createElement("div",{className:"_58m_"}))),y=c("React").createElement(c("Link.react"),{className:"_58n0",key:"right-arrow",onClick:this.onPickerRightClick},c("React").createElement(c("CenteredContainer.react"),{className:"_58n1",vertical:true},c("React").createElement("div",{className:"_58n2"})));return c("React").createElement("div",{className:"_4n8x"},c("React").createElement("div",{className:"_58n3"},w,y,x,v))}.bind(this),q}o.prototype.componentWillReceiveProps=function(p){"use strict";if(!!p.seekPositionInMs&&this.props.seekPositionInMs!==p.seekPositionInMs){this.refs.videoPlayer.seek(p.seekPositionInMs);this.refs.videoPlayer.playVideo();this.refs.videoPlayer.pause()}};o.prototype.render=function(){"use strict";var p=this.props.renderThumbnailControls?this.renderThumbSection():null;return c("React").createElement("div",{className:"_wde"},c("React").createElement(c("VideoAssetPlayer.react"),{ref:"videoPlayer",pageID:this.props.targetID,videoAssetID:this.props.videoID,playerWidth:m,playerHeight:n,rotation:this.props.rotation,hideCloseButton:true,className:"_54xx"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",width:m,height:n,src:this.getSelectedThumbnail().getURL()})),p)};o.propTypes={onCustomThumbnailSelected:l.func.isRequired,onThumbnailChange:l.func.isRequired,selectedThumbnail:l.instanceOf(c("VideoThumbnail")),targetID:l.string,thumbnails:l.arrayOf(l.instanceOf(c("VideoThumbnail"))).isRequired,videoID:l.string.isRequired,renderThumbnailControls:l.bool,allowCustomThumbnail:l.bool,rotation:l.number,seekPositionInMs:l.number};o.defaultProps={isVideoAsset:false,renderThumbnailControls:true};f.exports=o}),null);
__d("ComposerVideoSquareThumbnailZoomCrop.react",["cx","BasicVector","PhotoZoomCropDimensions","PhotoZoomCropMixin","React","PhotoZoomCropImage.react","PhotoZoomCropSlider.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").PropTypes,j=i.shape({x:i.number.isRequired,y:i.number.isRequired}),k=c("React").createClass({displayName:"ComposerVideoSquareThumbnailZoomCrop",mixins:[c("PhotoZoomCropMixin")],propTypes:{center:j,cropAspectRatio:j,cropSizeRatio:j,cropSize:j,imageSize:i.instanceOf(c("BasicVector")).isRequired,messageText:i.string,onInitialZoomOrMove:i.func,overlay:i.element,src:i.oneOfType([i.string,i.object]),warningText:i.string},getInitialState:function l(){__p&&__p();var m=this.props,n=m.center,o=m.cropAspectRatio,p=m.cropSizeRatio,q=m.cropSize,r=m.imageSize;this._dims=new(c("PhotoZoomCropDimensions"))(r);if(n)this._dims.setCenter(n.x,n.y);if(q){this._dims.setSize(q.x,q.y);this._dims.setZoom(this._dims.getSize().x/r.x)}if(p){var s=p.x*r.x;this._dims.setZoom(this._dims.getSize().x/s)}if(o)this._dims.setRatio(o.x,o.y);var t=this._getDimensionsState();t.position=this._dims.getZoom();return t},render:function l(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_4liw")},c("React").createElement(c("PhotoZoomCropImage.react"),{className:"_1szc",dimensions:this._dims,enableDrag:this._dims.isCurrentlyDragable(),onMove:this._onMove,overlay:this.props.overlay,src:this.props.src}),c("React").createElement(c("PhotoZoomCropSlider.react"),{className:"_4lix",onZoom:this._onZoom,position:this.state.position,zoom:this.state.zoom,zoomRange:this._dims.getZoomRange()}),this._getMessage())},_onZoom:function l(m,n){if(this.props.onInitialZoomOrMove)this.props.onInitialZoomOrMove();this._handleZoom(m,n)},_onMove:function l(m,n){if(this.props.onInitialZoomOrMove)this.props.onInitialZoomOrMove();this._handleMove(m,n)},__getZoom:function l(){return this.state.zoom}});f.exports=k}),null);
__d("ComposerVideoSquareThumbnailCropper.react",["cx","BasicVector","ComposerVideoSquareThumbnailZoomCrop.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=256;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(n,o){j.constructor.call(this,n,o);this.$ComposerVideoSquareThumbnailCropper1=function(){if(!this.state.initialMove){this.setState({initialMove:true});this.props.onInitialZoomOrMove()}}.bind(this);this.state={initialMove:false}}m.prototype.getCropDimensions=function(){this.setState({initialMove:false});return this.refs.thumbCropper.getDimensions().clone()};m.prototype.render=function(){var n=this.props.selectedThumbnail?this.props.selectedThumbnail.getURL():null,o=this.props.width+"."+this.props.height,p=this.props.dimensions,q=p?p.getSize().x/(p.getZoom()*this.props.width):null;return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoSquareThumbnailZoomCrop.react"),{className:"_1h95",ref:"thumbCropper",key:o,imageSize:new(c("BasicVector"))(this.props.width,this.props.height),center:p?{x:p.getCenter().x,y:p.getCenter().y}:null,cropSizeRatio:q?{x:q,y:q}:null,cropSize:{x:l,y:l},onInitialZoomOrMove:this.$ComposerVideoSquareThumbnailCropper1,src:n}))};f.exports=m}),null);
__d("ComposerVideoThumbnailSection.react",["ix","cx","fbt","invariant","BackgroundImage.react","BasicVector","ComposerVideoShowsPreviewState","ComposerVideoSquareThumbnailCropper.react","ComposerVideoThumbnailPicker.react","ComposerVideoUploadActions","Image.react","LeftRight.react","PhotoZoomCropDimensions","React","Tooltip.react","VideoAssetPlayer.react","XUISpinner.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("ComposerVideoShowsPreviewState"),o=c("React").PropTypes,p=100,q=56,r=56,s=465,t=285;l=babelHelpers.inherits(u,c("React").Component);m=l&&l.prototype;function u(v,w){__p&&__p();m.constructor.call(this,v,w);this.$ComposerVideoThumbnailSection4=function(){this.props.onSelectThumbnailPreview(n.SIXTEEN_NINE)}.bind(this);this.$ComposerVideoThumbnailSection5=function(){this.props.onSelectThumbnailPreview(n.SQUARE_CROPPER)}.bind(this);this.$ComposerVideoThumbnailSection6=function(x,y,z){this.setState({showSquareSpinner:true});this.$ComposerVideoThumbnailSection3(x,true);this.props.onThumbnailChange(x,y,z)}.bind(this);this.$ComposerVideoThumbnailSection7=function(x){this.setState({showSquareSpinner:true});this.$ComposerVideoThumbnailSection3(x,true);this.props.onCustomThumbnailSelected(x)}.bind(this);this.$ComposerVideoThumbnailSection8=function(){this.props.onSelectThumbnailPreview(n.VIDEO_PLAYER)}.bind(this);this.state=this.$ComposerVideoThumbnailSection1(v)}u.prototype.$ComposerVideoThumbnailSection1=function(v){var w=this.$ComposerVideoThumbnailSection2(v.squareThumbnailDimensions?v.squareThumbnailDimensions:new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(p,q)));return{showSquareSpinner:false,squareThumbnailPosition:w,thumbnailWidth:0,thumbnailHeight:0,hideShowmark:false}};u.prototype.componentDidMount=function(){if(this.props.selectedThumbnail)this.$ComposerVideoThumbnailSection3(this.props.selectedThumbnail,false)};u.prototype.componentWillReceiveProps=function(v){var w=v.squareThumbnailDimensions;if(w&&w!==this.props.squareThumbnailDimensions)this.setState({squareThumbnailPosition:this.$ComposerVideoThumbnailSection2(w)});if(v.selectedThumbnail&&!this.props.selectedThumbnail&&this.props.isVideoUpload)this.$ComposerVideoThumbnailSection3(v.selectedThumbnail,true)};u.prototype.$ComposerVideoThumbnailSection3=function(v,w){var x=new Image();x.src=v.getURL();x.onload=function(){var y=new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(x.width,x.height)),z=Math.min(x.width,x.height);y.setSize(z,z).setZoom(1);if(w)c("ComposerVideoUploadActions").updateSquareThumbnailDimensions(this.props.composerID,y);this.setState({showSquareSpinner:false,thumbnailWidth:x.width,thumbnailHeight:x.height})}.bind(this)};u.prototype.$ComposerVideoThumbnailSection2=function(v){var w=v.getSize().x/r;v=v.clone().setSize(r,r).setZoom(v.getZoom()/w);return v.getPosition()};u.prototype.getCropDimensions=function(){return this.refs.thumbCropper.getCropDimensions()};u.prototype.$ComposerVideoThumbnailSection9=function(v){switch(this.props.previewState){case n.VIDEO_PLAYER:this.props.videoID||k(0);return c("React").createElement(c("VideoAssetPlayer.react"),{ref:"videoPlayer",pageID:this.props.targetID,videoAssetID:this.props.videoID,playerWidth:s,playerHeight:t,hideCloseButton:true,onBeginPlayback:function(){this.setState({hideShowmark:true})}.bind(this),className:"_54xx"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",width:s,height:t,src:v}));case n.SIXTEEN_NINE:return c("React").createElement(c("ComposerVideoThumbnailPicker.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:this.props.hasGeneratedThumbnails,onSelectedThumbnailsFromScrubber:this.props.onSelectedThumbnailsFromScrubber,onCustomThumbnailSelected:this.$ComposerVideoThumbnailSection7,onScrubbedThumbnailSave:this.props.onScrubbedThumbnailSave,onThumbnailChange:this.$ComposerVideoThumbnailSection6,pageID:this.props.targetID,scrubbedThumbnailTime:this.props.scrubbedThumbnailTime,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:this.props.showThumbnailScrubber,thumbnails:this.props.thumbnails,textOnRight:true,videoFile:this.props.videoFile});case n.SQUARE_CROPPER:return c("React").createElement(c("ComposerVideoSquareThumbnailCropper.react"),{ref:"thumbCropper",selectedThumbnail:this.props.selectedThumbnail,dimensions:this.props.squareThumbnailDimensions,onInitialZoomOrMove:this.props.onInitialZoomOrMove,width:this.state.thumbnailWidth,height:this.state.thumbnailHeight});default:return c("React").createElement("div",null)}};u.prototype.$ComposerVideoThumbnailSection10=function(v){return c("React").createElement("div",{className:"_1d7i"},c("React").createElement(c("Image.react"),{className:"_1moc",src:h("115342")}))};u.prototype.$ComposerVideoThumbnailSection11=function(){if(!this.props.showMarkURI||this.state.hideShowmark)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3e3b"},c("React").createElement(c("Image.react"),{className:"_3e3c"+(this.props.previewState===n.SQUARE_CROPPER?" _3e3d":""),src:this.props.showMarkURI}))};u.prototype.$ComposerVideoThumbnailSection12=function(){if(this.props.previewState===n.VIDEO_PLAYER)return null;var v=this.props.videoID?c("React").createElement(c("XUIText.react"),{className:"_1d7j",onClick:this.$ComposerVideoThumbnailSection8,size:"body2",display:"block"},j._("Exit")):null;return c("React").createElement(c("LeftRight.react"),{className:"_1d7n"},this.props.previewState===n.SIXTEEN_NINE?c("React").createElement(c("XUIText.react"),{size:"body2",display:"block"},j._("Editing")):c("React").createElement(c("Image.react"),{src:h("115340")}),v)};u.prototype.render=function(){var v=this.props.selectedThumbnail?this.props.selectedThumbnail.getURL():null,w=this.$ComposerVideoThumbnailSection12();return c("React").createElement("div",null,c("React").createElement("div",{className:"_x9k"},this.$ComposerVideoThumbnailSection9(v)),c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},c("React").createElement(c("Tooltip.react"),{position:"right",offset:12,tooltip:j._("Thumbnails represent your video when it's not autoplaying. Tip: Avoid text on your thumbnail.")},j._("Thumbnails"))),c("React").createElement("div",{className:"_3-8x"},c("React").createElement("div",{className:"_x9o"+(this.props.previewState===n.SIXTEEN_NINE?" _1d7r":"")},c("React").createElement("div",{className:"_1d7s"},c("React").createElement("div",{className:"_1d7t"},c("React").createElement(c("Image.react"),{onClick:this.$ComposerVideoThumbnailSection4,src:v,height:q,width:p,backgroundSize:"contain"}),this.props.previewState!==n.SIXTEEN_NINE?this.$ComposerVideoThumbnailSection10(false):null)),this.props.previewState===n.SIXTEEN_NINE?w:null),c("React").createElement("div",{className:"_x9p"+(this.props.previewState===n.SQUARE_CROPPER?" _1d7r":"")},c("React").createElement("div",{className:"_1d7s"},this.state.showSquareSpinner?c("React").createElement(c("XUISpinner.react"),{className:"_3-9b _3-8y",size:"large"}):c("React").createElement("div",{className:"_1d7t",style:{height:r,width:r}},c("React").createElement(c("Image.react"),{className:"_1h93",onClick:this.$ComposerVideoThumbnailSection5,src:this.props.squareThumbnailDimensions!==null||!this.props.squareThumbnailURI?v:this.props.squareThumbnailURI,style:this.props.squareThumbnailDimensions!==null?this.state.squareThumbnailPosition:{height:r,width:r}}),this.props.previewState!==n.SQUARE_CROPPER?this.$ComposerVideoThumbnailSection10(true):null)),this.props.previewState===n.SQUARE_CROPPER?w:null),this.$ComposerVideoThumbnailSection11()))};u.propTypes={className:o.string,canSeeUploadVideoDialogShowsNux:o.bool,allowCustomThumbnail:o.bool.isRequired,hasGeneratedThumbnails:o.bool,composerID:o.string.isRequired,selectedThumbnail:o.object,isVideoUpload:o.bool,previewState:o.string.isRequired,onSelectThumbnailPreview:o.func.isRequired,onThumbnailChange:o.func.isRequired,onCustomThumbnailSelected:o.func.isRequired,onScrubbedThumbnailSave:o.func.isRequired,onSelectedThumbnailsFromScrubber:o.func.isRequired,thumbnails:o.array.isRequired,showThumbnailScrubber:o.bool.isRequired,squareThumbnailURI:o.string,squareThumbnailDimensions:o.instanceOf(c("PhotoZoomCropDimensions")),videoFile:o.object};f.exports=u}),null);
__d("ComposerVideoUploadPreviewSection.react",["ix","cx","fbt","Promise","BUISwitch.react","CenteredContainer.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoPlayer.react","ComposerVideoShowsPreviewState","ComposerVideoThumbnailPicker.react","ComposerVideoThumbnailSection.react","ComposerVideoUploadActions","ComposerVideoUploadStore","EventListener","Image.react","Layout.react","LeftRight.react","React","ReactComposerContextTypes","ReactDOM","VideoUploadLogger","XUIGrayText.react","XUIText.react","fbglyph","generateVideoThumbnails","joinClasses","requiredIfPropIsFalsy"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("Layout.react").Column,l=c("ComposerVideoShowsPreviewState"),m=c("React").PropTypes;b.URL=b.URL||b.webkitURL;var n=10,o=5,p=100,q=56,r=80,s=50,t=c("React").createClass({displayName:"ComposerVideoUploadPreviewSection",_loadedmetadataListener:null,_cancelableThumbnailsPromise:null,contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function u(v,w){var x=c("ComposerVideoUploadStore").getThumbnail(v)||w.selectedThumbnail,y=c("ComposerVideoUploadStore").getCustomThumbnail(v),z=c("ComposerVideoUploadStore").getScrubbedThumbnail(v),A=c("ComposerVideoUploadStore").getGeneratedThumbnails(v),B=y?A.concat(y):A;B=z?B.concat(z):B;var C=c("ComposerVideoUploadStore").getSquareThumbnailDimensions(v),D=c("ComposerVideoUploadStore").getPlayerSeekPositionInMs(v),E=c("ComposerVideoUploadStore").getEnableThumbnailExperiment(v);if(w.thumbnails)B=y?w.thumbnails.concat(y):w.thumbnails;return{generatedThumbnails:A,selectedThumbnail:x,squareThumbnailDimensions:C,thumbnails:B,seekPositionInMs:D,enableThumbnailExperiment:E,thumbnailsPromise:null}},getAttachmentInitialState:function u(v,w){return{canGenerateThumbnails:true,showsPreviewState:w.isVideoUpload?l.SIXTEEN_NINE:l.VIDEO_PLAYER,squareApplyState:"NONE",videoUrl:this.generateVideoUrl(w.videoFile)}},getAttachmentWillReceivePropsState:function u(v,w,x){var y={};if(x.videoFile!==w.videoFile){c("ComposerVideoUploadActions").updateThumbnail(v,null);y.videoUrl=this.generateVideoUrl(w.videoFile)}return y},generateVideoUrl:function u(v){if(v&&b.URL&&b.URL.createObjectURL)return b.URL.createObjectURL(v);else return null}},propTypes:{currentAdBreak:m.number,canSeeUploadVideoDialogShowsNux:m.bool,allowCustomThumbnail:m.bool,generateThumbnails:m.bool,isShowPage:m.bool,showMarkURI:m.string,isSquareVideo:m.bool,isVideoUpload:m.bool,logger:m.object,renderThumbnailControls:m.bool,showThumbnailExperimentSection:m.bool,showThumbnailScrubber:m.bool,selectedThumbnail:m.object,squareThumbnailURI:m.string,targetID:m.string,thumbnails:m.array,videoFile:m.object,videoID:c("requiredIfPropIsFalsy")("isVideoUpload",m.string)},componentWillUnmount:function u(){if(this._loadedmetadataListener){this._loadedmetadataListener.remove();this._loadedmetadataListener=null}if(this._cancelableThumbnailsPromise)this._cancelableThumbnailsPromise.cancel()},componentDidMount:function u(){if(this.props.generateThumbnails){var v=c("ReactDOM").findDOMNode(this.refs.videoPlayer);if(v&&!this._loadedmetadataListener)this._loadedmetadataListener=c("EventListener").listen(v,"loadedmetadata",this.generateVideoThumbnails)}},_makeCancelable:function u(v){var w=false,x=new(c("Promise"))(function(y,z){v.then(function(A){return w?z({isCanceled:true}):y(A)})["catch"](function(A){return w?z({isCanceled:true}):z(A)})});return{promise:x,cancel:function y(){w=true}}},generateVideoThumbnails:function u(){__p&&__p();if(this.state.generatedThumbnails.length>0)return null;var v=this.context.composerID,w=c("ReactDOM").findDOMNode(this.refs.videoPlayer),x=c("ReactDOM").findDOMNode(this.refs.previewContainer),y=this.props.isSquareVideo?"cover":"contain",z=this.props.isSquareVideo?x.offsetWidth:x.offsetHeight,A=this._makeCancelable(c("generateVideoThumbnails")(w,x.offsetWidth,z,n,y));this._cancelableThumbnailsPromise=A;this._logEvent(c("VideoUploadLogger").EVENT_STARTED_GENERATE_THUMBNAILS);return A.promise.then(function(B){var C=B.thumbnails,D=B.selectedThumbnail;c("ComposerVideoUploadActions").updateThumbnail(v,D);c("ComposerVideoUploadActions").updateGeneratedThumbnails(v,C);this.setState({thumbnails:C,canGenerateThumbnails:true});this._logEvent(c("VideoUploadLogger").EVENT_FINISHED_GENERATE_THUMBNAILS)}.bind(this),function(){this.setState({canGenerateThumbnails:false});this._logEvent(c("VideoUploadLogger").EVENT_VIDEO_DIMENSIONS_UNREADABLE)}.bind(this))},_logEvent:function u(v){if(this.props.logger)this.props.logger.logEvent(v)},renderVideoPlayer:function u(){var v=this.props.videoID;if(!v)return c("React").createElement("div",null);return c("React").createElement(c("ComposerVideoPlayer.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,onCustomThumbnailSelected:this.onCustomThumbnailSelected,onThumbnailChange:this.onThumbnailChange,renderThumbnailControls:this.props.renderThumbnailControls,selectedThumbnail:this.getSelectedThumbnail(),targetID:this.props.targetID,thumbnails:this.state.thumbnails,videoID:v,seekPositionInMs:this.state.seekPositionInMs})},getSelectedThumbnail:function u(){return this.state.selectedThumbnail||this.state.thumbnails[0]},_renderThumbnailExperimentSection:function u(){if(!this.props.showThumbnailExperimentSection)return c("React").createElement("div",null);var v=this.state.enableThumbnailExperiment?j._("Experiment will be running for 3 days."):j._("Choose up to 5 thumbnails for this experiment to find out the best one."),w=[];for(var x=0;x<o;x++)w.push(c("React").createElement(c("Image.react"),{className:"_3aq0",width:r,height:s,src:null}));var y=this.state.enableThumbnailExperiment?c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},j._("Chosen Thumbnails for Experiment")),c("React").createElement(c("Layout.react"),null,c("React").createElement(k,null,w))):c("React").createElement("div",null);return c("React").createElement("div",{className:"_17vj"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},j._("Run Thumbnail Experiment")),c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{size:"meta1",shade:"light"},v)),c("React").createElement(c("BUISwitch.react"),{value:this.state.enableThumbnailExperiment,showLabel:true,onToggle:this.onEnableThumbnailExperimentChange}),y)},renderThumbnailPicker:function u(){var v=this.props.generateThumbnails&&this.state.canGenerateThumbnails,w=this.props.isShowPage?c("React").createElement(c("ComposerVideoThumbnailSection.react"),{composerID:this.context.composerID,allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:v,key:this.context.composerID,ref:"thumbnailSection",isVideoUpload:this.props.isVideoUpload,onCustomThumbnailSelected:this.onCustomThumbnailSelected,onInitialZoomOrMove:this._onInitialZoomOrMove,onScrubbedThumbnailSave:this._onScrubbedThumbnailSave,onSelectedThumbnailsFromScrubber:this.onSelectedThumbnailsFromScrubber,onSelectThumbnailPreview:this._onSelectThumbnailPreview,previewState:this.state.showsPreviewState,squareThumbnailDimensions:this.state.squareThumbnailDimensions,squareThumbnailURI:this.props.squareThumbnailURI,onThumbnailChange:this.onThumbnailChange,scrubbedThumbnailTime:this._getScrubbedThumbnailTime(),selectedThumbnail:this.getSelectedThumbnail(),showThumbnailScrubber:this.props.showThumbnailScrubber&&this.state.generatedThumbnails.length>0,thumbnails:this.state.thumbnails,targetID:this.props.targetID,videoFile:this.props.videoFile,videoID:this.props.videoID,showMarkURI:this.props.showMarkURI}):c("React").createElement(c("ComposerVideoThumbnailPicker.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,hasGeneratedThumbnails:v,key:"thumbnailPicker",onCustomThumbnailSelected:this.onCustomThumbnailSelected,onScrubbedThumbnailSave:this._onScrubbedThumbnailSave,onSelectedThumbnailsFromScrubber:this.onSelectedThumbnailsFromScrubber,onThumbnailChange:this.onThumbnailChange,pageID:this.props.targetID,scrubbedThumbnailTime:this._getScrubbedThumbnailTime(),selectedThumbnail:this.getSelectedThumbnail(),showThumbnailScrubber:this.props.showThumbnailScrubber&&this.state.generatedThumbnails.length>0,thumbnails:this.state.thumbnails,videoFile:this.props.videoFile,enableThumbnailExperiment:this.state.enableThumbnailExperiment});return[w,c("React").createElement("video",{ref:"videoPlayer",className:"_2mpk",key:"videoPlayer",src:this.state.videoUrl})]},updateThumbnails:function u(v,w,x){this.setState({thumbnails:v,selectedThumbnail:w});c("ComposerVideoUploadActions").updateThumbnail(this.context.composerID,w,x)},_updateSquareThumbnail:function u(){c("ComposerVideoUploadActions").updateSquareThumbnailDimensions(this.context.composerID,this.refs.thumbnailSection.getCropDimensions());this.setState({squareApplyState:"APPLIED"})},_onSelectThumbnailPreview:function u(v){this.setState({showsPreviewState:v,squareApplyState:"NONE"})},_onInitialZoomOrMove:function u(){this.setState({squareApplyState:"EDITING"})},onCustomThumbnailSelected:function u(v){this._logEvent(c("VideoUploadLogger").EVENT_SELECTED_CUSTOM_THUMBNAIL);c("ComposerVideoUploadActions").updateCustomThumbnail(this.context.composerID,v);var w=this.state.generatedThumbnails.concat(v);this.updateThumbnails(w,v,false)},onSelectedThumbnailsFromScrubber:function u(v){__p&&__p();var w=[];if(v)v.then(function(x){__p&&__p();w=x.thumbnails;var y=this.state.generatedThumbnails.concat(w);if(w.length>1){var z=this.state.generatedThumbnails.length;c("ComposerVideoUploadActions").updateGeneratedThumbnails(this.context.composerID,y);this.updateThumbnails(y,y[z],false)}else if(w.length===1){var A=w[0];c("ComposerVideoUploadActions").updateScrubbedThumbnail(this.context.composerID,A);this.updateThumbnails(y,A,false)}}.bind(this)).done()},_onScrubbedThumbnailSave:function u(v){c("ComposerVideoUploadActions").updateScrubbedThumbnailTimestamp(this.context.composerID,v)},_getScrubbedThumbnailTime:function u(){return c("ComposerVideoUploadStore").getScrubbedThumbnailTimestamp(this.context.composerID)},onThumbnailChange:function u(v,w,x){if(!v)return;this.updateThumbnails(x,v,true)},onEnableThumbnailExperimentChange:function u(v){c("ComposerVideoUploadActions").updateEnableThumbnailExperiment(this.context.composerID,v);this.setState({enableThumbnailExperiment:!v})},_renderShowPagePreview:function u(){__p&&__p();var v=null;if(this.state.showsPreviewState===l.SQUARE_CROPPER&&this.state.squareApplyState!=="NONE")if(this.state.squareApplyState==="EDITING")v=c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_u6e",onClick:this._updateSquareThumbnail},j._("Apply"));else if(this.state.squareApplyState==="APPLIED")v=c("React").createElement(c("XUIText.react"),{weight:"bold",className:"_43si"},c("React").createElement(c("Image.react"),{className:"_43sj",src:h("119374")}),j._("Applied"));var w="";switch(this.state.showsPreviewState){case l.VIDEO_PLAYER:w=j._("Video");break;case l.SIXTEEN_NINE:w=j._("Choose Thumbnail");break;case l.SQUARE_CROPPER:w=j._("Square Crop Thumbnail");break}return c("React").createElement("div",{className:"_3-8x"},this._renderThumbnailExperimentSection(),c("React").createElement(c("LeftRight.react"),{className:"_1elc"},c("React").createElement(c("XUIText.react"),{weight:"bold"},w),c("React").createElement("div",null,v)),c("React").createElement(c("CenteredContainer.react"),{ref:"previewContainer",className:c("joinClasses")("_5w5i","_3-8x"),vertical:true},this.renderThumbnailPicker()))},render:function u(){var v;if(this.props.isShowPage)return this._renderShowPagePreview();if(!this.props.isVideoUpload)v=this.renderVideoPlayer();else if(this.state.videoUrl)v=this.renderThumbnailPicker();return c("React").createElement("div",null,this._renderThumbnailExperimentSection(),c("React").createElement(c("CenteredContainer.react"),{ref:"previewContainer",className:"_5w5i",vertical:true},v))}});f.exports=t}),null);
__d("ComposerReferenceFileUploadRightsTabContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileUploadRightsTab.react","ComposerVideoUploadActions","ComposerVideoUploadPreviewSection.react","ComposerVideoUploadStore","React","ReactComposerContextTypes","ReferenceFingerprintPreviewSection.react","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadRightsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightMonitoringType(k)||c("VideoCopyrightUtils").DEFAULT_MONITORING_TYPE,n=c("ComposerVideoUploadStore").getCopyrightRuleID(k),o=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(k),p=c("ComposerVideoUploadStore").getAreCopyrightCountriesIncluded(k),q=c("ComposerVideoUploadStore").getIsCopyrightReferenceDisabled(k),r=c("ComposerVideoUploadStore").getCopyrightReferenceCategory(k);return{monitoringType:m,ownershipCountries:o.slice(),ruleID:n,areCountriesIncluded:p,isReferenceFileDisabled:q,selectedCategory:r}}},propTypes:{accessToken:h.string,generateThumbnails:h.bool,shouldShowDetectMatchSection:h.bool,isVideoUpload:h.bool,logger:h.object,onCreateNewMatchRule:h.func,onLogEvent:h.func.isRequired,selectedThumbnail:h.object,shown:h.bool,targetID:h.string,thumbnails:h.array,uiLogger:h.object,videoFile:h.object,videoID:h.string,showCategoryRequiredError:h.bool,disableEditReferenceCategory:h.bool},onMonitoringTypeChange:function j(event){c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.context.composerID,event.value);this.props.onLogEvent("monitoring_type_updated")},onGeoChange:function j(k,l){c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.context.composerID,k,l);this.props.onLogEvent("ownership_countries_updated")},onMatchRuleChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightRuleID(this.context.composerID,k)},onReferenceFileStatusChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceFileDisabled(this.context.composerID,!k);this.props.onLogEvent("is_reference_file_disabled_toggled")},onReferenceCategoryChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceCategory(this.context.composerID,k);this.props.onLogEvent("reference_category_updated")},renderPreviewSection:function j(){if(this.props.videoID||this.props.isVideoUpload)return c("React").createElement(c("ComposerVideoUploadPreviewSection.react"),{allowCustomThumbnail:false,generateThumbnails:this.props.generateThumbnails,isVideoUpload:this.props.isVideoUpload,logger:this.props.logger,renderThumbnailControls:false,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:false,thumbnails:this.props.thumbnails,videoID:this.props.videoID,videoFile:this.props.videoFile});else return c("React").createElement(c("ReferenceFingerprintPreviewSection.react"),null)},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadRightsTab.react"),{accessToken:this.props.accessToken,shown:this.props.shown,targetID:this.props.targetID||"",onCreateNewMatchRule:this.props.onCreateNewMatchRule,onGeoChange:this.onGeoChange,onMatchRuleChange:this.onMatchRuleChange,onMonitoringTypeChange:this.onMonitoringTypeChange,onReferenceCategoryChange:this.onReferenceCategoryChange,onReferenceFileStatusChange:this.onReferenceFileStatusChange,monitoringType:this.state.monitoringType,ownershipCountries:this.state.ownershipCountries,areCountriesIncluded:this.state.areCountriesIncluded,isReferenceFileDisabled:this.state.isReferenceFileDisabled,isVideoUpload:this.props.isVideoUpload,ruleID:this.state.ruleID,shouldShowDetectMatchSection:this.props.shouldShowDetectMatchSection,selectedCategory:this.state.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError,disableEditReferenceCategory:this.props.disableEditReferenceCategory},this.renderPreviewSection())}});f.exports=i}),null);
__d("ComposerReferenceFileUploadWhitelistTab.react",["cx","fbt","ComposerVideoUploadSection.react","React","VideoCopyrightWhitelistSection.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.$ComposerReferenceFileUploadWhitelistTab1=function(){"use strict";var n=c("React").createElement(c("VideoCopyrightWhitelistSection.react"),{whitelistedFBUsers:this.props.whitelistedFBUsers||[],onFBWhitelistUpdated:this.props.onFBWhitelistUpdated,whitelistedIGUserNames:this.props.whitelistedIGUserNames,onIGWhitelistUpdated:this.props.onIGWhitelistUpdated,canSeeIGMatches:this.props.canSeeIGMatches});return this.props.canSeeIGMatches?n:c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Grant Permissions"),tooltip:i._("Grant permission to any Page or person on {what platform the publisher can see} to upload videos that contain this one.",[i.param("what platform the publisher can see",this.props.canSeeIGMatches?i._("Facebook or Instagram"):i._("Facebook"))])},n)};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_63ex"+(!this.props.shown?" _2oq6":"")},c("React").createElement("div",{className:"_1es5"},c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},i._("Allow Pages and people to upload videos that contain your copyrighted media.")),this.$ComposerReferenceFileUploadWhitelistTab1()))};function m(){"use strict";j.apply(this,arguments)}m.propTypes={shown:l.bool,whitelistedFBUsers:l.array,onFBWhitelistUpdated:l.func.isRequired,whitelistedIGUserNames:l.array,onIGWhitelistUpdated:l.func.isRequired,canSeeIGMatches:l.bool};f.exports=m}),null);
__d("ComposerReferenceFileUploadWhitelistTabContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileUploadWhitelistTab.react","ComposerVideoUploadActions","ComposerVideoUploadStore","React","ReactComposerContextTypes"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerReferenceFileUploadWhitelistTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightWhitelistedFBUsers(k),n=c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(k);return{whitelistedFBUsers:m,whitelistedIGUserNames:n}}},propTypes:{onLogEvent:h.func.isRequired,shown:h.bool,canSeeIGMatches:h.bool},onFBWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedFBUsers(this.context.composerID,k);this.props.onLogEvent("whitelist_updated")},onIGWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedIGUserNames(this.context.composerID,k);this.props.onLogEvent("whitelist_ig_user_names_updated")},render:function j(){return c("React").createElement(c("ComposerReferenceFileUploadWhitelistTab.react"),{shown:this.props.shown,whitelistedFBUsers:this.state.whitelistedFBUsers,whitelistedIGUserNames:this.state.whitelistedIGUserNames,onIGWhitelistUpdated:this.onIGWhitelistUpdated,onFBWhitelistUpdated:this.onFBWhitelistUpdated,canSeeIGMatches:this.props.canSeeIGMatches})}});f.exports=i}),null);
__d("AdBreakAdminPreviewEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADMIN_SEND_NOTIFICATION:"admin_send_notification",ADMIN_SEND_NOTIFICATION_SUCCESS:"admin_send_notification_success",ADMIN_SEND_NOTIFICATION_FAILURE:"admin_send_notification_failure",ADMIN_REQUEST_SHAREABLE_LINK:"admin_request_shareable_link",ADMIN_REQUEST_SHAREABLE_LINK_SUCCESS:"admin_request_shareable_link_success",ADMIN_REQUEST_SHAREABLE_LINK_FAILURE:"admin_request_shareable_link_failure",SERVER_VIDEO_ENCODING_SUCCESS:"server_video_encoding_success",SERVER_VIDEO_ENCODING_FAILURE:"server_video_encoding_failure",NOTIFICATION_INVALIDATION:"notification_invalidation"})}),null);
__d("AdBreakAdminPreviewStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ENCODING:"encoding",NONE:"none",OK:"ok"})}),null);
__d("XAdBreakAdminPreviewNotificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ad_breaks/admin_preview/notification/",{video_id:{type:"FBID",required:true},ad_break_time_offsets:{type:"IntVector"}})}),null);
__d("XAdBreakAdminPreviewShareController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ad_breaks/admin_preview/share/",{video_id:{type:"FBID",required:true},ad_break_time_offsets:{type:"IntVector"}})}),null);
__d("XAdBreakAdminPreviewStatusController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ad_breaks/admin_preview/status/",{video_id:{type:"FBID",required:true}})}),null);
__d("AdBreakAdminPreviewManager",["AdBreakAdminPreviewEvent","AdBreakAdminPreviewStatus","AdBreakAdminPreviewTypedLogger","AsyncRequest","AsyncResponse","XAdBreakAdminPreviewNotificationController","XAdBreakAdminPreviewShareController","XAdBreakAdminPreviewStatusController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=1e3;i.prototype.sendNotification=function(j,k,l,m){"use strict";__p&&__p();this.lastRequestTime=Date.now();new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_SEND_NOTIFICATION).setTimeConsumedInMs(null).log();var n=function(){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_SEND_NOTIFICATION_SUCCESS).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();l()}.bind(this),o=function(){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_SEND_NOTIFICATION_FAILURE).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();m()}.bind(this),p=c("XAdBreakAdminPreviewNotificationController").getURIBuilder().setFBID("video_id",j).setIntVector("ad_break_time_offsets",k).getURI();new(c("AsyncRequest"))(p).setHandler(function(q){if(q.payload.status===c("AdBreakAdminPreviewStatus").OK)n();else this.pollPreviewStatus(j,n,o)}.bind(this)).setErrorHandler(function(q){return o()}).send()};i.prototype.requestShareLink=function(j,k,l,m){"use strict";this.lastRequestTime=Date.now();new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_REQUEST_SHAREABLE_LINK).setTimeConsumedInMs(null).log();var n=function(p){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_REQUEST_SHAREABLE_LINK_SUCCESS).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();l(p)}.bind(this),o=function(p){new(c("AdBreakAdminPreviewTypedLogger"))().setVideoID(String(j)).setAdBreakTimeOffsets(k).setEvent(c("AdBreakAdminPreviewEvent").ADMIN_REQUEST_SHAREABLE_LINK_FAILURE).setTimeConsumedInMs(Date.now()-this.lastRequestTime).log();m(p)}.bind(this);this.requestShareLinkWithoutLogging(j,k,n,o)};i.prototype.requestShareLinkWithoutLogging=function(j,k,l,m){"use strict";var n=c("XAdBreakAdminPreviewShareController").getURIBuilder().setFBID("video_id",j).setIntVector("ad_break_time_offsets",k).getURI();new(c("AsyncRequest"))(n).setHandler(function(o){if(o.payload.status===c("AdBreakAdminPreviewStatus").OK)l(o);else this.pollPreviewStatus(j,function(){return this.requestShareLinkWithoutLogging(j,k,l,m)}.bind(this),function(){return m(o)})}.bind(this)).setErrorHandler(function(o){return m(o)}).send()};i.prototype.pollPreviewStatus=function(j,k,l){"use strict";clearInterval(this.timer);this.timer=setInterval(function(){return this.getPreviewStatus(j,k,l)}.bind(this),h)};i.prototype.stopPolling=function(){"use strict";clearInterval(this.timer)};i.prototype.getPreviewStatus=function(j,k,l){"use strict";var m=c("XAdBreakAdminPreviewStatusController").getURIBuilder().setFBID("video_id",j).getURI();new(c("AsyncRequest"))(m).setHandler(function(n){if(n.payload.status===c("AdBreakAdminPreviewStatus").OK){clearInterval(this.timer);k()}}.bind(this)).setErrorHandler(function(n){clearInterval(this.timer);l()}.bind(this)).send()};function i(){"use strict"}f.exports=new i()}),null);
__d("ComposerVideoAdBreakAdminPreviewLoadingDialog.react",["cx","fbt","CenteredContainer.react","React","SUIBusinessTheme","SUISpinner.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCloseButton.react","XUIDialogFooter.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=475;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={shown:true},this.$ComposerVideoAdBreakAdminPreviewLoadingDialog1=function(){if(this.props.onClose)this.props.onClose()}.bind(this),o}m.prototype.show=function(){this.setState({shown:true})};m.prototype.hide=function(){this.setState({shown:false})};m.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{label:i._("Loading"),layerHideOnBlur:false,shown:this.state.shown,width:l},c("React").createElement(c("CenteredContainer.react"),null,c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",{className:"_380g"},i._("Your preview is being prepared. This may take a moment..."),c("React").createElement(c("SUISpinner.react"),{className:"_3-9b",size:"small",theme:c("SUIBusinessTheme")})))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogCloseButton.react"),{onClick:this.$ComposerVideoAdBreakAdminPreviewLoadingDialog1})))};f.exports=m}),null);
__d("ComposerVideoAdBreakAdminPreviewNotificationHandler",["fbt","AdBreakAdminPreviewManager","ComposerVideoAdBreakAdminPreviewLoadingDialog.react","DOM","React","ReactDOM","SimpleXUIDialog","XUIDialogCloseButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(){__p&&__p();this.$ComposerVideoAdBreakAdminPreviewNotificationHandler2=function(){if(!this.loadingDialog)return;this.$ComposerVideoAdBreakAdminPreviewNotificationHandler4();var j=h._("A notification has been sent to your Facebook account. Please open Facebook on your phone to preview your video with ad breaks."),k=c("React").createElement(c("XUIDialogCloseButton.react"),null),l=h._("Mobile Ad Break Preview");c("SimpleXUIDialog").showEx(j,l,k)}.bind(this);this.$ComposerVideoAdBreakAdminPreviewNotificationHandler3=function(){if(!this.loadingDialog)return;this.$ComposerVideoAdBreakAdminPreviewNotificationHandler4();var j=h._("An error occurred while sending notification."),k=c("React").createElement(c("XUIDialogCloseButton.react"),null),l=h._("Mobile Ad Break Preview");c("SimpleXUIDialog").showEx(j,l,k)}.bind(this)}i.prototype.sendNotification=function(j,k){this.$ComposerVideoAdBreakAdminPreviewNotificationHandler1();c("AdBreakAdminPreviewManager").sendNotification(j,k,this.$ComposerVideoAdBreakAdminPreviewNotificationHandler2,this.$ComposerVideoAdBreakAdminPreviewNotificationHandler3)};i.prototype.$ComposerVideoAdBreakAdminPreviewNotificationHandler1=function(){var j=c("React").createElement(c("ComposerVideoAdBreakAdminPreviewLoadingDialog.react"),null);this.loadingDialog=c("ReactDOM").render(j,c("DOM").create("div"));this.loadingDialog.show()};i.prototype.$ComposerVideoAdBreakAdminPreviewNotificationHandler4=function(){if(this.loadingDialog){this.loadingDialog.hide();this.loadingDialog=null}};f.exports=new i()}),null);
__d("ComposerVideoAdBreakAdminPreviewShareDialog.react",["cx","fbt","AdBreakAdminPreviewManager","AsyncResponse","Clipboard","ComposerVideoAdBreakAdminPreviewLoadingDialog.react","FBClipboardLink.react","Image.react","Link.react","React","SUIBusinessTheme","SUIText.react","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={isLoading:false,shareURL:null,shown:false},this.hide=function(){this.setState({shown:false})}.bind(this),q}l.prototype.componentWillMount=function(){if(this.props.videoID){this.setState({isLoading:true});c("AdBreakAdminPreviewManager").requestShareLink(this.props.videoID,this.props.adBreakTimeOffsets,function(p){this.setState({isLoading:false,shareURL:p.payload.url})}.bind(this),function(p){this.setState({isLoading:false})}.bind(this))}};l.prototype.show=function(){this.setState({shown:true})};l.prototype.render=function(){if(this.state.isLoading)return c("React").createElement(c("ComposerVideoAdBreakAdminPreviewLoadingDialog.react"),{onClose:this.hide});var p=null;if(!this.state.shareURL)p=i._("Failed to load share link.");else p=c("React").createElement("div",{className:"_40s0"},c("React").createElement("div",{className:"_40s1"},c("React").createElement(m,null),c("React").createElement(n,{shareURL:this.state.shareURL}),c("React").createElement(o,null)),c("React").createElement(c("Image.react"),{className:"_40s7",src:"/images/aet/ShareAdPreview.png"}));return c("React").createElement(c("XUIDialog.react"),{layerHideOnBlur:false,shown:this.state.shown,width:700},c("React").createElement(c("XUIDialogTitle.react"),null,i._("Preview This Video with Ad Breaks")),c("React").createElement(c("XUIDialogBody.react"),null,p),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:i._("Done"),onClick:this.hide,use:"confirm"})))};function m(){return c("React").createElement("div",null,c("React").createElement(c("SUIText.react"),{display:"block",size:"meta1",theme:c("SUIBusinessTheme"),weight:"bold"},i._("Send Link")),c("React").createElement(c("SUIText.react"),{className:"_3-8x",display:"block",size:"meta1",theme:c("SUIBusinessTheme")},i._("Use this URL to preview this video with ad breaks on desktop. You can share this link with others.")))}function n(p){var q=null;if(c("Clipboard").isSupported())q=c("React").createElement(c("FBClipboardLink.react"),{value:p.shareURL},c("React").createElement(c("XUIButton.react"),{className:"_3-9b",label:i._("Copy"),use:"confirm"}));var r=c("React").createElement(c("XUITextInput.react"),{className:"_40s8",disabled:true,value:p.shareURL});if(c("Clipboard").isSupported())r=c("React").createElement(c("FBClipboardLink.react"),{value:p.shareURL},c("React").createElement(c("Link.react"),null,p.shareURL));return c("React").createElement("div",{className:"_2pie"},r,q)}function o(){return c("React").createElement("div",{className:"_2pie"},c("React").createElement(c("XUIGrayText.react"),{display:"block"},i._("A sample ad will play during your ad break placements.")))}f.exports=l}),null);
__d("ComposerVideoAdBreakAdminPreviewMenu.react",["ix","cx","fbt","AccessibleLayer","AdBreakAdminPreviewManager","ComposerVideoAdBreakAdminPreviewNotificationHandler","ComposerVideoAdBreakAdminPreviewShareDialog.react","ContextualLayerHideOnScroll","DateConsts","DOM","Image.react","LayerFadeOnHide","LayerFadeOnShow","LayerFitHeightToScreen","LayerHideOnBlur","LayerHideOnEscape","React","ReactDOM","ShimButton.react","SUIBusinessTheme","SUIButton.react","SUIGlyphIcon.react","SUIText.react","XUIContextualDialog.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(){__p&&__p();l.constructor.call(this);this.$ComposerVideoAdBreakAdminPreviewMenu7=function(n){return c("React").createElement("div",{key:n.id},c("React").createElement("div",{className:"_-em"},c("React").createElement(c("SUIText.react"),{className:"_2pit",shade:"medium",theme:c("SUIBusinessTheme"),weight:"bold"},n.header)),c("React").createElement("div",null,n.items.map(this.$ComposerVideoAdBreakAdminPreviewMenu8,this)))}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu8=function(n){return c("React").createElement(c("ShimButton.react"),{className:"_-en",key:n.id,onClick:function(event){return this.$ComposerVideoAdBreakAdminPreviewMenu9(event,n.onClick)}.bind(this)},c("React").createElement(c("Image.react"),{src:n.icon}),c("React").createElement(c("SUIText.react"),{className:"_2pit",shade:"medium",theme:c("SUIBusinessTheme"),weight:"bold"},n.title))}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu6=function(n){this.setState({showMenu:n})}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu5=function(event){this.setState({showMenu:!this.state.showMenu});event.stopPropagation()}.bind(this);this.$ComposerVideoAdBreakAdminPreviewMenu3=[{id:"share_preview_section",header:j._("Share Previews"),items:[{id:"share_a_link_menu_item",icon:h("124778"),title:j._("Share a Link"),onClick:function(){var n=c("React").createElement(c("ComposerVideoAdBreakAdminPreviewShareDialog.react"),{adBreakTimeOffsets:this.$ComposerVideoAdBreakAdminPreviewMenu11(),videoID:this.$ComposerVideoAdBreakAdminPreviewMenu10()});n=c("ReactDOM").render(n,c("DOM").create("div"));n.show()}.bind(this)}]},{id:"preview_on_device_section",header:j._("Preview on Device"),items:[{id:"send_notification_to_facebook_menu_item",icon:h("123839"),title:j._("Send Notification to Facebook"),onClick:function(){c("ComposerVideoAdBreakAdminPreviewNotificationHandler").sendNotification(this.$ComposerVideoAdBreakAdminPreviewMenu10(),this.$ComposerVideoAdBreakAdminPreviewMenu11())}.bind(this)}]}];this.state={showMenu:false}}m.prototype.componentWillUnmount=function(){c("AdBreakAdminPreviewManager").stopPolling()};m.prototype.render=function(){return c("React").createElement("div",null,this.$ComposerVideoAdBreakAdminPreviewMenu1(),this.$ComposerVideoAdBreakAdminPreviewMenu2(this.$ComposerVideoAdBreakAdminPreviewMenu3))};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu1=function(){return c("React").createElement(c("SUIButton.react"),{disabled:this.$ComposerVideoAdBreakAdminPreviewMenu4(),icon:c("React").createElement(c("SUIGlyphIcon.react"),{disabled:this.$ComposerVideoAdBreakAdminPreviewMenu4(),srcDefault:h("112854"),srcDisabled:h("125669")}),label:j._("Preview"),onClick:this.$ComposerVideoAdBreakAdminPreviewMenu5,ref:"button",theme:c("SUIBusinessTheme")})};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu2=function(n){if(this.$ComposerVideoAdBreakAdminPreviewMenu4())return null;return c("React").createElement(c("XUIContextualDialog.react"),{alignment:"right",behaviors:{AccessibleLayer:c("AccessibleLayer"),ContextualLayerHideOnScroll:c("ContextualLayerHideOnScroll"),LayerHideOnTransition:false,LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape"),LayerFadeOnShow:c("LayerFadeOnShow"),LayerFadeOnHide:c("LayerFadeOnHide"),LayerFitHeightToScreen:c("LayerFitHeightToScreen")},contextRef:function(){return this.refs.button}.bind(this),label:j._("Ad Break Admin Preview Menu"),onToggle:this.$ComposerVideoAdBreakAdminPreviewMenu6,position:"below",shown:this.state.showMenu,width:c("XUIContextualDialog.react").WIDTH.NORMAL},n.map(this.$ComposerVideoAdBreakAdminPreviewMenu7,this))};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu9=function(event,n){n();this.setState({showMenu:!this.state.showMenu});event.stopPropagation()};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu4=function(){return!this.$ComposerVideoAdBreakAdminPreviewMenu10()};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu10=function(){if(this.props.videoID)return this.props.videoID;if(this.props.uploadVideoID)return this.props.uploadVideoID;return null};m.prototype.$ComposerVideoAdBreakAdminPreviewMenu11=function(){var n=[];if(!this.props.adBreaksDisabled)n=this.props.insertedAdBreaks.map(function(o){return Math.round(o.timeOffset*c("DateConsts").MS_PER_SEC)});return n};f.exports=m}),null);
__d("ComposerVideoAdBreaksTabAdvancedSettings.react",["ix","cx","fbt","Image.react","React","XUICardSection.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.state={expanded:true}}m.prototype.render=function(){var n=this.state.expanded?h("127423"):h("127393");return c("React").createElement("div",null,c("React").createElement(c("XUICardSection.react"),{className:"_489l",onClick:this.onClickHeader.bind(this)},c("React").createElement(c("XUIText.react"),{className:"_3-9a"},j._("ADVANCED SETTINGS")),c("React").createElement(c("Image.react"),{className:"_3-9a",src:n}),c("React").createElement("div",{className:"_636m"},this.props.secondary)),c("React").createElement("div",{className:"_438h"+(!this.state.expanded?" _489q":"")},this.props.children))};m.prototype.onClickHeader=function(){this.setState({expanded:!this.state.expanded})};f.exports=m}),null);
__d("ComposerVideoAdBreakInsertionDisabledView.react",["ix","cx","Image.react","React","XUIGrayText.react","XUIText.react","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_1_hd"},c("React").createElement("div",{className:"_29_0"},c("React").createElement(c("Image.react"),{src:h("401154")}),c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold",className:"_3-9a"},this.props.errorMessageHeader)),c("React").createElement(c("XUIGrayText.react"),{size:"meta1"},this.props.errorMessageContent))};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("AdBreakOffsetEditorNuxAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOG_VIEW:"log_view",DISMISS:"dismiss"})}),null);
__d("AdBreakOffsetSpinner.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=10;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$AdBreakOffsetSpinner1=function(){if(!this.props.disabled)this.props.onChange(this.props.value+k)}.bind(this),this.$AdBreakOffsetSpinner4=function(){if(!this.props.disabled)this.props.onChange(this.props.value-k)}.bind(this),this.$AdBreakOffsetSpinner2=function(){!this.props.disabled&&this.props.onFocus&&this.props.onFocus()}.bind(this),this.$AdBreakOffsetSpinner3=function(){!this.props.disabled&&this.props.onBlur&&this.props.onBlur()}.bind(this),n}l.prototype.render=function(){var m=this.props.disabled;return c("React").createElement("div",{className:"_3etf"},c("React").createElement("div",{className:(!m?"_2yv_":"")+(m?" _62dv":""),onMouseDown:this.$AdBreakOffsetSpinner1,onFocus:this.$AdBreakOffsetSpinner2,onBlur:this.$AdBreakOffsetSpinner3}),c("React").createElement("div",{className:(!m?"_2yw0":"")+(m?" _62dw":""),onMouseDown:this.$AdBreakOffsetSpinner4,onFocus:this.$AdBreakOffsetSpinner2,onBlur:this.$AdBreakOffsetSpinner3}))};f.exports=l}),null);
__d("XAdBreakOffsetEditorNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/instream_ads/ads_insertion/editor_nux/",{action:{type:"Enum",required:true,enumType:1}})}),null);
__d("ComposerVideoAdBreakInsertionSection.react",["cx","fbt","AdBreakOffsetEditorNuxAction","AdBreakOffsetSpinner.react","AsyncRequest","ComposerVideoUploadSection.react","DateConsts","React","Tooltip.react","VideoComposerDialogAdBreakAutoAdjustmentSettings.react","VideoInstreamAdsConstants","VideoInstreamUtils","XAdBreakOffsetEditorNuxController","XUIAmbientNUX.react","XUIButton.react","XUIGrayText.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e5;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(n){__p&&__p();k.constructor.call(this,n);this.$ComposerVideoAdBreakInsertionSection7=function(event){this.setState({isInputtingCurrentAdBreak:true});this.props.onSetCurrentAdBreak(this.props.currentOffset,true,true)}.bind(this);this.$ComposerVideoAdBreakInsertionSection4=function(event){this.setState({isInputtingCurrentAdBreak:false});this.props.onSetCurrentAdBreak(this.props.currentOffset,false,false)}.bind(this);this.$ComposerVideoAdBreakInsertionSection5=function(event){var o=c("VideoInstreamUtils").convertFormattedTimeToSeconds(event.target.value);this.setState({value:event.target.value});if(o!==null){this.setState({currentTime:o});if(this.state.isInputtingCurrentAdBreak)this.props.onSetCurrentAdBreak(o,true,true)}}.bind(this);this.$ComposerVideoAdBreakInsertionSection8=function(o){var p=o/c("DateConsts").MS_PER_SEC;this.props.onSetCurrentAdBreak(p,true,true)}.bind(this);this.$ComposerVideoAdBreakInsertionSection12=function(){this.props.onInsertAdBreak&&this.props.onInsertAdBreak()}.bind(this);this.$ComposerVideoAdBreakInsertionSection13=function(){var o=c("XAdBreakOffsetEditorNuxController").getURIBuilder().setEnum("action",c("AdBreakOffsetEditorNuxAction").DISMISS).getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(o).send();this.setState({showAdBreakOffsetEditorNux:false})}.bind(this);this.state={currentTime:0,value:"00:00.000",showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,isInputtingCurrentAdBreak:false}}m.prototype.componentWillReceiveProps=function(n){if(n.currentOffset!==null&&!this.state.isInputtingCurrentAdBreak)this.setState({currentTime:n.currentOffset,value:c("VideoInstreamUtils").convertTimestampToFormattedString(n.currentOffset)})};m.prototype.componentDidMount=function(){if(this.state.showAdBreakOffsetEditorNux)this.$ComposerVideoAdBreakInsertionSection1()};m.prototype.$ComposerVideoAdBreakInsertionSection2=function(){var n=c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration,this.props.hasGapRule);return c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},this.props.hasGapRule?i._({"*":"This video can have {number} ad breaks placed within the highlighted area of the video preview. Enter the time for each break.","_1":"This video can have 1 ad break placed within the highlighted area of the video preview. Enter the time for each break."},[i.plural(n,"number")]):i._({"*":"Select up to {number} places where an ad break may be played. Ad break placements will be filled for each individual viewer based on ad availability.","_1":"Select up to 1 place where an ad break may be played. Ad break placements will be filled for each individual viewer based on ad availability."},[i.plural(c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration),"number")]))};m.prototype.$ComposerVideoAdBreakInsertionSection3=function(){return c("React").createElement("div",{className:"_3-8x"},c("React").createElement("div",{className:"_4yj6"},c("React").createElement(c("XUITextInput.react"),{className:"_19jl",disabled:this.props.isPreviewingAdBreak,height:"short",placeholder:i._("00:00.000"),value:this.state.value,onBlur:this.$ComposerVideoAdBreakInsertionSection4,onChange:this.$ComposerVideoAdBreakInsertionSection5,onDownArrow:this.$ComposerVideoAdBreakInsertionSection6.bind(this,-10/c("DateConsts").MS_PER_SEC),onFocus:this.$ComposerVideoAdBreakInsertionSection7,onUpArrow:this.$ComposerVideoAdBreakInsertionSection6.bind(this,10/c("DateConsts").MS_PER_SEC)}),c("React").createElement("div",{className:"_4yj7",ref:"ad_break_offset_editor_nux"},c("React").createElement(c("AdBreakOffsetSpinner.react"),{disabled:this.props.isPreviewingAdBreak,value:this.state.currentTime*c("DateConsts").MS_PER_SEC,onChange:this.$ComposerVideoAdBreakInsertionSection8}))),this.$ComposerVideoAdBreakInsertionSection9(),c("React").createElement(c("Tooltip.react"),{alignH:"right",position:"right",tooltip:this.$ComposerVideoAdBreakInsertionSection10()},c("React").createElement(c("XUIButton.react"),{className:"_gq_",disabled:this.$ComposerVideoAdBreakInsertionSection11(),label:this.props.hasGapRule?i._("Add"):i._("Insert"),labelIsHidden:false,type:"button",onClick:this.$ComposerVideoAdBreakInsertionSection12})))};m.prototype.$ComposerVideoAdBreakInsertionSection9=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.ad_break_offset_editor_nux}.bind(this),customwidth:300,position:"above",shown:this.state.showAdBreakOffsetEditorNux,width:"custom",onCloseButtonClick:this.$ComposerVideoAdBreakInsertionSection13},i._("Adjust the timing of your ad breaks more accurately. You can also use your keyboard's up and down arrow keys."))};m.prototype.render=function(){if(this.props.hidden)return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:this.props.hasGapRule?i._("Place Ad Breaks"):i._("Choose Ad Break Placements"),tooltip:this.props.hasGapRule?i._({"*":{"*":"Ad breaks can be placed after the first {start time offset} seconds and must be at least {insertion interval} minutes apart. When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."}},[i.param("start time offset",c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC,[0]),i.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])]):i._({"*":{"*":"Videos need to be at least {min video length} minutes long, and ad breaks may only be placed after {min start time} seconds . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys.","_1":"Videos need to be at least {min video length} minutes long, and ad breaks may only be placed after 1 second . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."},"_1":{"*":"Videos need to be at least 1 minute long, and ad breaks may only be placed after {min start time} seconds . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys.","_1":"Videos need to be at least 1 minute long, and ad breaks may only be placed after 1 second . When using the highlighted area in the video preview, you can find the exact frame with the up and down arrow keys."}},[i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_MINIMUM_VIDEO_LENGTH_MS/c("DateConsts").MS_PER_MIN,"min video length"),i.plural(c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC,"min start time")])},c("React").createElement("div",{className:"_19jk"},this.$ComposerVideoAdBreakInsertionSection2(),this.$ComposerVideoAdBreakInsertionSection3(),this.props.isAdBreakInsertionRedesignV1?c("React").createElement("div",{className:"_3-8y _2fb1"}):null,this.props.isAdBreakInsertionRedesignV1?c("React").createElement(c("VideoComposerDialogAdBreakAutoAdjustmentSettings.react"),{isAdBreakAutoAdjustmentEnabled:Boolean(this.props.isAdBreakAutoAdjustmentEnabled),onEnableAdBreakAutoAdjustment:this.props.onEnableAdBreakAutoAdjustment}):null))};m.prototype.$ComposerVideoAdBreakInsertionSection6=function(n){if(this.props.isPreviewingAdBreak)return;var o=this.props.currentOffset+n;o=Math.max(o,0);o=Math.min(o,this.props.videoDuration);o=Math.round(o*l)/l;this.setState({currentTime:o,value:c("VideoInstreamUtils").convertTimestampToFormattedString(o)});this.props.onSetCurrentAdBreak(o,true,true)};m.prototype.$ComposerVideoAdBreakInsertionSection11=function(){return this.props.isPreviewingAdBreak||!c("VideoInstreamUtils").isInEligibleTimeSegments(this.state.currentTime,this.props.videoDuration,this.props.insertedAdBreaks,this.props.hasGapRule)};m.prototype.$ComposerVideoAdBreakInsertionSection10=function(){__p&&__p();if(this.props.isPreviewingAdBreak)return null;var n=c("VideoInstreamUtils").getEligibleTimeSegments(this.props.insertedAdBreaks,this.props.videoDuration,this.props.hasGapRule);if(n.length===0){var o=c("VideoInstreamUtils").getMaxPossibleAdBreaks(this.props.videoDuration,this.props.hasGapRule);if(o>this.props.insertedAdBreaks.length)return i._({"*":"Ad breaks need to be at least {interval} minutes apart. Based on where you've placed your current ad breaks, there isn't space for another one."},[i.param("interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])]);return i._("You've reached your ad break limit for this video.")}var p=c("VideoInstreamUtils").isInEligibleTimeSegments(this.state.currentTime,this.props.videoDuration,this.props.insertedAdBreaks,this.props.hasGapRule);if(p)return null;var q=c("VideoInstreamAdsConstants").AD_INSERTION_START_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.state.currentTime<q)return i._({"*":"Ad breaks cannot be placed in the first {start time offset} seconds."},[i.param("start time offset",q,[0])]);var r=c("VideoInstreamAdsConstants").AD_INSERTION_END_TIME_OFFSET_MS/c("DateConsts").MS_PER_SEC;if(this.state.currentTime>this.props.videoDuration-r)return i._({"*":"Ad breaks cannot be placed in the last {end time offset} seconds."},[i.param("end time offset",r,[0])]);return i._({"*":"Ad breaks cannot be placed less than {insertion interval} minutes apart."},[i.param("insertion interval",c("VideoInstreamAdsConstants").AD_INSERTION_INTERVAL_MS/c("DateConsts").MS_PER_MIN,[0])])};m.prototype.$ComposerVideoAdBreakInsertionSection1=function(){var n=c("XAdBreakOffsetEditorNuxController").getURIBuilder().setEnum("action",c("AdBreakOffsetEditorNuxAction").LOG_VIEW).getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(n).send()};m.defaultProps={showAdBreakOffsetEditorNux:false};f.exports=m}),null);
__d("ComposerVideoAdBreakPageOnboardingSection.react",["cx","fbt","AdBreakPageOnboardingConstants","AdBreakPageOnboardingType","AdBreakPageOnboardingTypedLogger","ComposerVideoUploadSection.react","React","XAdBreakPageOnboardingController","XUIButton.react","XUIGrayText.react","goURI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$ComposerVideoAdBreakPageOnboardingSection1=function(){new(c("AdBreakPageOnboardingTypedLogger"))().setPageID(this.props.creatorID).setAdBreakPageOnboardingEventType(c("AdBreakPageOnboardingType").COMPOSER_ENTRY_POINT).log();var r=c("XAdBreakPageOnboardingController").getURIBuilder().setFBID("creator_id",this.props.creatorID).setEnum("entrypoint",c("AdBreakPageOnboardingConstants").FROM_COMPOSER).getURI();c("goURI")(r,true)}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Earn Money With Ads")},c("React").createElement(c("XUIGrayText.react"),{size:"meta1",display:"block"},i._("Set up ad breaks to start earning money from your videos. You can choose when to start each break, which pauses your video so that a short ad can play.")),c("React").createElement(c("XUIButton.react"),{className:"_3oop _3-8x _3-95",onClick:this.$ComposerVideoAdBreakPageOnboardingSection1,label:i._("Get Started"),type:"button"}))};f.exports=l}),null);
__d("ComposerVideoGeneralPlayer.react",["cx","AsyncRequest","EventListener","React","ReactDOM","VideoData","XVideoDataController","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){__p&&__p();j.constructor.call(this,l);this.$ComposerVideoGeneralPlayer4=function(m){var n=new(c("VideoData"))(JSON.parse(m.payload.responseText)),o=n.hasHD()?n.getPlayableSrcHD():n.getPlayableSrcSD();if(!o){this.$ComposerVideoGeneralPlayer5();return}this.setState({videoUrl:o})}.bind(this);this.$ComposerVideoGeneralPlayer5=function(){this.setState({hasError:true,videoLoaded:false})}.bind(this);this.$ComposerVideoGeneralPlayer3=function(){this.setState({videoLoaded:true})}.bind(this);this.state=this.$ComposerVideoGeneralPlayer1()}k.prototype.$ComposerVideoGeneralPlayer1=function(){var l=null;if(this.props.videoFile)l=this.$ComposerVideoGeneralPlayer2(this.props.videoFile);return{hasError:false,videoLoaded:false,videoUrl:l}};k.prototype.componentDidMount=function(){c("EventListener").listen(c("ReactDOM").findDOMNode(this.refs.preview),"loadeddata",this.$ComposerVideoGeneralPlayer3);if(!this.state.videoUrl&&this.props.videoID){var l=c("XVideoDataController").getURIBuilder().setString("video_id",this.props.videoID).getURI();new(c("AsyncRequest"))().setMethod("GET").setURI(l).setReadOnly(true).setOption("suppressEvaluation",true).setAllowCrossPageTransition(true).setHandler(this.$ComposerVideoGeneralPlayer4).setErrorHandler(this.$ComposerVideoGeneralPlayer5).send()}};k.prototype.render=function(){var l=this.props.defaultMuted!==null?this.props.defaultMuted:true;return c("React").createElement("div",null,c("React").createElement("video",{ref:"preview",crossOrigin:"anonymous",className:c("joinClasses")(this.props.className,"_5rm1"),src:this.state.videoUrl,muted:l}))};k.prototype.$ComposerVideoGeneralPlayer2=function(l){if(l&&b.URL&&b.URL.createObjectURL)return b.URL.createObjectURL(l);else return null};f.exports=k}),null);
__d("ComposerVideoAdBreakPreviewContainer.react",["cx","fbt","CenteredContainer.react","ComposerVideoGeneralPlayer.react","DateConsts","EmbeddedVideoControls.react","EventListener","InstreamPlacement","InstreamVideoAdBreak","React","ReactDOM","SubscriptionsHandler","VideoComponentClickPlayPause.react","VideoComponentCommercialBreakStartingIndicator.react","VideoComponentCommercialBreakVideoAdOverlay.react","VideoComponentCommercialBreakVodTransitionOverlay.react","VideoComponentContextMenu.react","VideoComponentEmbeddedControls.react","VideoComponentScrubberPreview.react","VideoComponentVodWithCommercialBreak.react","VideoComponentWithCommercialBreak.react","VideoComponentWithInstreamVideo.react","VideoComponentWithSpacePlayPause.react","VideoData","VideoFrameBuffer","VideoPlayer.react","VideoPlayerMetaData","VideoPlayerOrigins","VideoPlayerReactExperiments","VideoPlayerReason","XUISpinner.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=3e3,m=.5,n=false,o=60,p=60,q=1e6,r=.001;j=babelHelpers.inherits(s,c("React").Component);k=j&&j.prototype;function s(t){__p&&__p();k.constructor.call(this,t);this.$ComposerVideoAdBreakPreviewContainer16=function(){if(this.$ComposerVideoAdBreakPreviewContainer12){var u=this.$ComposerVideoAdBreakPreviewContainer12.videoHeight,v=this.$ComposerVideoAdBreakPreviewContainer12.videoWidth,w={video_id:"",original_height:u,original_width:v,aspect_ratio:v/u,sd_src:this.$ComposerVideoAdBreakPreviewContainer14,stream_type:"progressive",player_version_overwrite:"pleasantville"};this.setState({videoData:new(c("VideoData"))(w)})}}.bind(this);this.$ComposerVideoAdBreakPreviewContainer18=function(){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer4>=this.$ComposerVideoAdBreakPreviewContainer3.length){this.$ComposerVideoAdBreakPreviewContainer4=0;return}var u=document.createElement("canvas");u.width=p;u.height=o;var v=new(c("VideoFrameBuffer"))(u,this.$ComposerVideoAdBreakPreviewContainer10,"cover");v.updateFrameBuffer();this.$ComposerVideoAdBreakPreviewContainer3[this.$ComposerVideoAdBreakPreviewContainer4].thumbnailURL=u.toDataURL("image/jpeg");this.$ComposerVideoAdBreakPreviewContainer4+=1;this.$ComposerVideoAdBreakPreviewContainer20()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer17=function(){__p&&__p();if(!this.$ComposerVideoAdBreakPreviewContainer11)throw new Error("_setup must be called after video is mounted.");this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"timeupdate",function(){if(this.$ComposerVideoAdBreakPreviewContainer11.currentTime!==this.state.position)this.props.onSetCurrentAdBreak(this.$ComposerVideoAdBreakPreviewContainer11.currentTime,false,false);this.setState({position:this.$ComposerVideoAdBreakPreviewContainer11.currentTime});this.$ComposerVideoAdBreakPreviewContainer29(this.$ComposerVideoAdBreakPreviewContainer11.currentTime)}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"progress",function(){this.setState({buffered:this.$ComposerVideoAdBreakPreviewContainer11.buffered.end(0)})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"ended",function(){this.setState({playing:false})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"pause",function(){this.setState({playing:false})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"play",function(){this.setState({playing:true})}.bind(this)),c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"volumechange",function(){this.setState({muted:this.$ComposerVideoAdBreakPreviewContainer11.muted})}.bind(this)));this.setState({duration:this.$ComposerVideoAdBreakPreviewContainer11.duration});this.props.onSetVideoDuration(this.$ComposerVideoAdBreakPreviewContainer11.duration)}.bind(this);this.$ComposerVideoAdBreakPreviewContainer25=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.play()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer24=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.pause()}.bind(this);this.$ComposerVideoAdBreakPreviewContainer26=function(u){if(this.$ComposerVideoAdBreakPreviewContainer11){this.$ComposerVideoAdBreakPreviewContainer11.currentTime=u;this.setState({position:this.$ComposerVideoAdBreakPreviewContainer11.currentTime});var v=Math.round(u*q)/q;this.props.onSetCurrentAdBreak(v,false,!this.state.playing)}}.bind(this);this.$ComposerVideoAdBreakPreviewContainer27=function(){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.muted=!this.state.muted}.bind(this);this.$ComposerVideoAdBreakPreviewContainer28=function(u){if(this.$ComposerVideoAdBreakPreviewContainer11)this.$ComposerVideoAdBreakPreviewContainer11.volume=u}.bind(this);this.$ComposerVideoAdBreakPreviewContainer3=[];this.$ComposerVideoAdBreakPreviewContainer4=0;this.$ComposerVideoAdBreakPreviewContainer5=[];this.$ComposerVideoAdBreakPreviewContainer7=false;this.$ComposerVideoAdBreakPreviewContainer9=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer;if(this.$ComposerVideoAdBreakPreviewContainer9){this.$ComposerVideoAdBreakPreviewContainer1=this.$ComposerVideoAdBreakPreviewContainer15(this.props.insertedAdBreaks,this.props.isAdBreakDisabled);if(this.props.videoFile)this.$ComposerVideoAdBreakPreviewContainer14=b.URL.createObjectURL(this.props.videoFile)}this.state={buffered:0,duration:0,hasScheduledToShowAdPreview:false,muted:n,playAdPreview:false,playing:false,position:0,videoData:null}}s.prototype.componentDidMount=function(){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer9)if(this.props.videoID)c("VideoPlayerMetaData").genVideoData(this.props.videoID).then(function(t){return this.setState({videoData:t})}.bind(this)).done();else this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer12,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer16));else{this.$ComposerVideoAdBreakPreviewContainer11=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer13.refs.preview);this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer17))}this.$ComposerVideoAdBreakPreviewContainer10=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer6.refs.preview);if(this.$ComposerVideoAdBreakPreviewContainer10)this.$ComposerVideoAdBreakPreviewContainer8=c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer10,"seeked",this.$ComposerVideoAdBreakPreviewContainer18)};s.prototype.componentDidUpdate=function(t,u){__p&&__p();if(this.$ComposerVideoAdBreakPreviewContainer13&&!this.$ComposerVideoAdBreakPreviewContainer11){this.$ComposerVideoAdBreakPreviewContainer11=c("ReactDOM").findDOMNode(this.$ComposerVideoAdBreakPreviewContainer13.refs.video);this.$ComposerVideoAdBreakPreviewContainer5.push(c("EventListener").listen(this.$ComposerVideoAdBreakPreviewContainer11,"loadeddata",this.$ComposerVideoAdBreakPreviewContainer17));if(this.$ComposerVideoAdBreakPreviewContainer9&&!this.$ComposerVideoAdBreakPreviewContainer2){this.$ComposerVideoAdBreakPreviewContainer2=new(c("SubscriptionsHandler"))();this.$ComposerVideoAdBreakPreviewContainer2.addSubscriptions(this.$ComposerVideoAdBreakPreviewContainer13.vpc.addListener("commercialBreak/vodBreakStarting",function(){if(!this.props.isPreviewingAdBreak)this.props.onSetIsPreviewingAdBreak(true)}.bind(this)),this.$ComposerVideoAdBreakPreviewContainer13.vpc.addListener("playRequested",function(v){if(this.props.isPreviewingAdBreak&&v===c("VideoPlayerReason").COMMERCIAL_BREAK)this.props.onSetIsPreviewingAdBreak(false)}.bind(this)))}}};s.prototype.componentWillReceiveProps=function(t){__p&&__p();if(t.shouldUpdateVideoPosition){var u=t.currentAdBreak;if(this.$ComposerVideoAdBreakPreviewContainer11&&u!==null&&u!==undefined){this.$ComposerVideoAdBreakPreviewContainer11.pause();if(!t.shouldPauseVideo)this.$ComposerVideoAdBreakPreviewContainer11.play();this.$ComposerVideoAdBreakPreviewContainer11.currentTime=u}}var v=t.insertedAdBreaks;this.$ComposerVideoAdBreakPreviewContainer1=this.$ComposerVideoAdBreakPreviewContainer15(v,t.isAdBreakDisabled);if(this.$ComposerVideoAdBreakPreviewContainer10&&v!==null&&v!==undefined){this.$ComposerVideoAdBreakPreviewContainer19(v);if(!this.$ComposerVideoAdBreakPreviewContainer7)this.$ComposerVideoAdBreakPreviewContainer20()}};s.prototype.componentWillUnmount=function(){this.$ComposerVideoAdBreakPreviewContainer5.forEach(function(event){return event.remove()});if(this.$ComposerVideoAdBreakPreviewContainer8)this.$ComposerVideoAdBreakPreviewContainer8.remove();if(this.$ComposerVideoAdBreakPreviewContainer2)this.$ComposerVideoAdBreakPreviewContainer2.release()};s.prototype.render=function(){return c("React").createElement(c("CenteredContainer.react"),{className:!this.props.isAdBreakInsertionRedesign?"_5w5i":"",vertical:true},this.$ComposerVideoAdBreakPreviewContainer9?this.$ComposerVideoAdBreakPreviewContainer21():this.$ComposerVideoAdBreakPreviewContainer22())};s.prototype.$ComposerVideoAdBreakPreviewContainer22=function(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_3d4u"+(!this.state.playAdPreview?" _bfe":"")},c("React").createElement("text",{className:"_bfg"},i._("Your 15 sec ad break will occur here"))),c("React").createElement(c("ComposerVideoGeneralPlayer.react"),{ref:function(t){this.$ComposerVideoAdBreakPreviewContainer13=t}.bind(this),videoFile:this.props.videoFile,videoID:this.props.videoID,defaultMuted:n}),this.$ComposerVideoAdBreakPreviewContainer23(),c("React").createElement(c("EmbeddedVideoControls.react"),{allowFullscreen:false,allowEnqueuing:false,areHLSActive:false,areSubtitlesActive:false,bufferedPosition:this.state.buffered,doesFullscreenEnterTahoe:false,displayElapsedTime:true,displayMilliseconds:true,finishedPlaying:false,hasHD:false,hasScrubberPreview:false,hasSubtitles:false,hasWatchAndScroll:false,hidden:this.state.playAdPreview,hidePlaybackControl:false,hidePlaybackScrubber:false,hideRemainingTime:false,hideSettings:true,insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:!this.props.hasGapRule,isCommercialBreak:false,isEmbedded:false,isFullscreen:false,isHD:false,isInline:true,isLive:false,isSphericalVideo:false,isMuted:this.state.muted,isPlaying:this.state.playing,isSidePaneOpen:false,isSlidingWNSEligible:false,onEnterTahoe:c("emptyFunction"),onEnterWatchAndScroll:c("emptyFunction"),onPause:this.$ComposerVideoAdBreakPreviewContainer24,onPlay:this.$ComposerVideoAdBreakPreviewContainer25,onScrubBegin:c("emptyFunction"),onScrubEnd:this.$ComposerVideoAdBreakPreviewContainer26,onSeek:c("emptyFunction"),onSettingsNUXClose:c("emptyFunction"),onToggleFullscreen:c("emptyFunction"),onToggleHD:c("emptyFunction"),onToggleHLS:c("emptyFunction"),onToggleMuted:this.$ComposerVideoAdBreakPreviewContainer27,onToggleSubtitles:c("emptyFunction"),onVolumeChange:this.$ComposerVideoAdBreakPreviewContainer28,onEnqueueVideo:c("emptyFunction"),permalinkURL:"",playbackDuration:this.state.duration,playbackPosition:this.state.position,previewThumbnailInformation:{},scrubberPreviewSprites:{},volume:this.$ComposerVideoAdBreakPreviewContainer11?this.$ComposerVideoAdBreakPreviewContainer11.volume:0,videoID:this.props.videoID}))};s.prototype.$ComposerVideoAdBreakPreviewContainer21=function(){var t=this.state.videoData;return c("React").createElement("div",null,!t&&!this.props.videoID&&c("React").createElement("video",{className:"_3iej",ref:function(u){this.$ComposerVideoAdBreakPreviewContainer12=u}.bind(this),src:this.$ComposerVideoAdBreakPreviewContainer14}),!t?c("React").createElement(c("XUISpinner.react"),{background:"light",size:"large"}):c("React").createElement(c("VideoPlayer.react"),{ref:function(u){this.$ComposerVideoAdBreakPreviewContainer13=u}.bind(this),className:"_5rm1",videoData:t,playerOrigin:c("VideoPlayerOrigins").COMPOSER,height:284,width:this.props.isAdBreakInsertionRedesign?744:465,autoplay:false},c("React").createElement(c("VideoComponentEmbeddedControls.react"),{adBreaks:{insertedAdBreaks:this.props.insertedAdBreaks,isAdBreakDisabled:this.props.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:!this.props.hasGapRule,isPreviewingAdBreak:this.props.isPreviewingAdBreak},displayElapsedTime:true,displayMilliseconds:true,showFullscreenButton:false,showSettingsButton:false}),c("React").createElement(c("VideoComponentContextMenu.react"),null),c("React").createElement(c("VideoComponentClickPlayPause.react"),null),c("React").createElement(c("VideoComponentWithSpacePlayPause.react"),null),c("React").createElement(c("VideoComponentScrubberPreview.react"),null),c("React").createElement(c("VideoComponentWithInstreamVideo.react"),{shouldUsePreviewConfig:true,thumbnailURLForPreview:this.props.thumbnailURLForPreview}),c("React").createElement(c("VideoComponentWithCommercialBreak.react"),null),c("React").createElement(c("VideoComponentVodWithCommercialBreak.react"),{adBreaks:this.$ComposerVideoAdBreakPreviewContainer1}),c("React").createElement(c("VideoComponentCommercialBreakVideoAdOverlay.react"),{adsStopped:!this.props.isPreviewingAdBreak}),c("React").createElement(c("VideoComponentCommercialBreakVodTransitionOverlay.react"),null),c("React").createElement(c("VideoComponentCommercialBreakStartingIndicator.react"),{adsStopped:!this.props.isPreviewingAdBreak})),this.$ComposerVideoAdBreakPreviewContainer23())};s.prototype.$ComposerVideoAdBreakPreviewContainer23=function(){return c("React").createElement(c("ComposerVideoGeneralPlayer.react"),{className:"_3lqa",ref:function(t){this.$ComposerVideoAdBreakPreviewContainer6=t}.bind(this),videoFile:this.props.videoFile,videoID:this.props.videoID,defaultMuted:true})};s.prototype.$ComposerVideoAdBreakPreviewContainer15=function(t,u){if(!t||u)return[];return t.map(function(v,w){return new(c("InstreamVideoAdBreak"))({instreamPlacement:c("InstreamPlacement").MID_ROLL,index:0,timeOffsetInMs:v.timeOffset*c("DateConsts").MS_PER_SEC,adBreakDurationInMs:null,adBreakAutoInsertionVersion:null,isAdBreakAutoInserted:false})})};s.prototype.$ComposerVideoAdBreakPreviewContainer19=function(t){this.$ComposerVideoAdBreakPreviewContainer3=this.$ComposerVideoAdBreakPreviewContainer3.concat(t.filter(function(u){if(u.thumbnailURL!==null)return false;this.$ComposerVideoAdBreakPreviewContainer3.forEach(function(v){if(u.timeOffset===v.timeOffset)return false;return true});return true}.bind(this)))};s.prototype.$ComposerVideoAdBreakPreviewContainer20=function(){__p&&__p();this.$ComposerVideoAdBreakPreviewContainer7=true;if(this.$ComposerVideoAdBreakPreviewContainer4>=this.$ComposerVideoAdBreakPreviewContainer3.length){if(this.$ComposerVideoAdBreakPreviewContainer3.length!==0)this.props.onSetThumbnailURLForAdBreak(this.$ComposerVideoAdBreakPreviewContainer3);this.$ComposerVideoAdBreakPreviewContainer3=[];this.$ComposerVideoAdBreakPreviewContainer7=false;this.$ComposerVideoAdBreakPreviewContainer4=0;return}this.$ComposerVideoAdBreakPreviewContainer10.currentTime=this.$ComposerVideoAdBreakPreviewContainer3[this.$ComposerVideoAdBreakPreviewContainer4].timeOffset};s.prototype.$ComposerVideoAdBreakPreviewContainer29=function(t){__p&&__p();if(!this.$ComposerVideoAdBreakPreviewContainer11||!this.props.insertedAdBreaks||this.props.isAdBreakDisabled||this.$ComposerVideoAdBreakPreviewContainer9)return;this.props.insertedAdBreaks.forEach(function(u){__p&&__p();if(u.timeOffset<=t||u.timeOffset-t>=m||this.state.hasScheduledToShowAdPreview)return;this.setState({hasScheduledToShowAdPreview:true});setTimeout(function(){this.$ComposerVideoAdBreakPreviewContainer11.pause();this.setState({playAdPreview:true});setTimeout(function(){this.setState({playAdPreview:false,hasScheduledToShowAdPreview:false});this.$ComposerVideoAdBreakPreviewContainer11.currentTime=u.timeOffset+r;this.$ComposerVideoAdBreakPreviewContainer11.play()}.bind(this),l)}.bind(this),(u.timeOffset-t)*c("DateConsts").MS_PER_SEC)}.bind(this))};f.exports=s}),null);
__d("ComposerVideoAdBreak.react",["ix","cx","fbt","Image.react","React","Tooltip.react","VideoInstreamAdsConstants","VideoInstreamUtils","VideoPlayerReactExperiments","XUIButton.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;function m(o){if(c("VideoInstreamAdsConstants").IS_INSERTION_RULE_V2_LAUNCHED&&o.isAdBreakViolatingInsertionRules)return c("React").createElement("div",{className:"_4gs3"},c("React").createElement(c("Tooltip.react"),{tooltip:c("React").createElement("div",{style:{maxWidth:"200px"}},j._("The placement of this ad break is not eligible for monetization."))},c("React").createElement(c("Image.react"),{src:h("117758")})));return null}k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){"use strict";var o=c("VideoInstreamUtils").convertTimestampToFormattedString(this.props.adBreak.timeOffset),p=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer,q=this.props.currentPreviewIndex!==null,r=this.props.currentPreviewIndex===this.props.index;return c("React").createElement("div",{className:"_5r95"+(q&&!r?" _3bbq":"")},c("React").createElement("div",{className:"_4gs4"},c("React").createElement(c("XUIButton.react"),{className:"_9gb"+(q?" _3bbq":""),label:this.props.index+1,type:"button",onClick:this.props.onDeleteClick.bind(this,this.props.index)}),c("React").createElement(c("XUIText.react"),{size:"body2",className:"_5r97"},o)),c("React").createElement("div",{className:"_4gs4"},c("React").createElement(m,{isAdBreakViolatingInsertionRules:this.props.isAdBreakViolatingInsertionRules}),c("React").createElement("div",{className:"_2f48",onClick:this.props.onPreviewClick.bind(this,this.props.index),role:"presentation"},c("React").createElement("div",{className:p?"_41gm":""},c("React").createElement("div",{className:p&&!r?"_41gn":""}),c("React").createElement("div",{className:p&&r?"_41go":""})),c("React").createElement(c("Image.react"),{className:"_5r96",src:this.props.adBreak.thumbnailURL}))))};function n(){"use strict";k.apply(this,arguments)}f.exports=n}),null);
__d("ComposerVideoAdBreakThumbnailsPreviewSection.react",["cx","fbt","BUISwitch.react","ComposerVideoAdBreak.react","LayerFadeOnHide","React","ReactDOM","VideoInstreamUtils","VideoPlayerReactExperiments","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogConfirmButton.react","XUIDialogTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer?7:3,m=1;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){"use strict";__p&&__p();k.constructor.call(this,o);this.$ComposerVideoAdBreakThumbnailsPreviewSection4=function(p,event){event.stopPropagation();this.props.onDeleteAdBreak(p)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection5=function(p){if(this.props.isPreviewingAdBreak&&p===this.state.currentPreviewIndex){this.props.onSetIsPreviewingAdBreak(false);this.setState({currentPreviewIndex:null});return}var q=this.props.insertedAdBreaks[p];this.props.onSetCurrentAdBreak(q.timeOffset-l,true,false);this.setState({currentPreviewIndex:p});this.props.onSetIsPreviewingAdBreak(c("VideoPlayerReactExperiments").composerVideoAdBreaksReactPlayer)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection9=function(p){if(!p)this.setState({showDisableAdBreaksDialog:true});else this.props.onUpdateAdBreaksStatus(!p)}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection8=function(p){this.setState({showDisableAdBreaksDialog:p})}.bind(this);this.$ComposerVideoAdBreakThumbnailsPreviewSection7=function(){this.props.onUpdateAdBreaksStatus(!this.props.adBreaksDisabled);this.setState({showDisableAdBreaksDialog:false})}.bind(this);this.state={currentPreviewIndex:null,showDisableAdBreaksDialog:false}}n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection3=function(){"use strict";this.$ComposerVideoAdBreakThumbnailsPreviewSection2=null;var o=this.props.isPreviewingAdBreak?this.state.currentPreviewIndex:null,p=this.props.insertedAdBreaks.map(function(q,r){var s=this.props.lastInsertedAdBreak!==null&&this.props.lastInsertedAdBreak!==undefined&&this.props.lastInsertedAdBreak.timeOffset===q.timeOffset;return c("React").createElement(c("ComposerVideoAdBreak.react"),{key:r,adBreak:q,currentPreviewIndex:o,index:r,isAdBreakViolatingInsertionRules:c("VideoInstreamUtils").isAdBreakViolatingInsertionRules(this.props.insertedAdBreaks,r,this.props.videoDuration,this.props.hasGapRule),onDeleteClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection4,onPreviewClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection5,ref:function(t){if(s)this.$ComposerVideoAdBreakThumbnailsPreviewSection2=c("ReactDOM").findDOMNode(t)}.bind(this)})}.bind(this));return p};n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection6=function(){"use strict";if(!this.state.showDisableAdBreaksDialog)return null;if(!this.props.adBreaksExperimentMetadata||!this.props.adBreaksExperimentMetadata.isEligibleCreator||this.props.adBreaksExperimentMetadata.isExpired||!this.props.adBreaksExperimentEnabled){this.$ComposerVideoAdBreakThumbnailsPreviewSection7();return null}return c("React").createElement(c("XUIDialog.react"),{causalElementRef:function(){return this.refs.toggle}.bind(this),shown:this.state.showDisableAdBreaksDialog,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},width:645,onToggle:this.$ComposerVideoAdBreakThumbnailsPreviewSection8},c("React").createElement(c("XUIDialogTitle.react"),null,c("React").createElement("span",null,"Turn Off Ad Breaks?")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",null,"If holdout testing is currently running for this video, turning off ad breaks will immediately end the holdout test and disable holdout testing permanently for this video.")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogCancelButton.react"),null),c("React").createElement(c("XUIDialogConfirmButton.react"),{action:"confirm",use:"confirm",onClick:this.$ComposerVideoAdBreakThumbnailsPreviewSection7})))};n.prototype.componentDidUpdate=function(){"use strict";var o=this.$ComposerVideoAdBreakThumbnailsPreviewSection1,p=this.$ComposerVideoAdBreakThumbnailsPreviewSection2;if(o!==null&&o!==undefined&&p!==null&&p!==undefined)o.scrollTop=p.offsetTop};n.prototype.$ComposerVideoAdBreakThumbnailsPreviewSection10=function(){"use strict";__p&&__p();var o=this.props,p=o.currentOffset,q=o.insertedAdBreaks;if(!p||!q)return null;for(var r=0;r<q.length;r++){var s=q[r].timeOffset;if(p>=s-l&&p<=s+m)return r}return null};n.prototype.componentWillUpdate=function(o,p){"use strict";if(!o.isPreviewingAdBreak){if(this.state.currentPreviewIndex!==null&&p.currentPreviewIndex!==null)this.setState({currentPreviewIndex:null})}else if(this.state.currentPreviewIndex===null&&p.currentPreviewIndex===null)this.setState({currentPreviewIndex:this.$ComposerVideoAdBreakThumbnailsPreviewSection10()})};n.prototype.render=function(){"use strict";if(this.props.hidden||this.props.insertedAdBreaks.length===0)return null;return c("React").createElement("div",{className:"_5r94 _1_hd"+(this.props.isAdBreakInsertionRedesignV1?" _65nj":""),ref:function(o){return this.$ComposerVideoAdBreakThumbnailsPreviewSection1=o}.bind(this)},c("React").createElement("div",{className:"_3-95"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Ad Breaks")),c("React").createElement("div",{className:"_3bbp _3-8_"},c("React").createElement(c("BUISwitch.react"),{value:!this.props.adBreaksDisabled,onToggle:this.$ComposerVideoAdBreakThumbnailsPreviewSection9,disabled:this.props.isPreviewingAdBreak,ref:"toggle"})),this.$ComposerVideoAdBreakThumbnailsPreviewSection6()),c("React").createElement("div",{className:this.props.adBreaksDisabled?"_3bbq":""},this.$ComposerVideoAdBreakThumbnailsPreviewSection3()))};f.exports=n}),null);
__d("ComposerVideoAdBreakVideoRightsSection.react",["cx","fbt","ComposerVideoUploadSection.react","React","XUIButton.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Content Ownership Rights")},c("React").createElement(c("XUIGrayText.react"),{size:"meta1",display:"block"},i._("To include ad breaks, you agree that you have the rights to use all of the content in your video.")),c("React").createElement(c("XUIButton.react"),{className:"_3oop _3-8x _3-95",label:i._("I Agree"),labelIsHidden:false,onClick:this.props.onAgree,type:"button"}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoInstreamAdsBlockListSettings.react",["cx","fbt","ComposerVideoUploadTooltip.react","PagesSettingsInstreamAdsBlockListContainer","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=c("React").createElement("div",{className:"_46v-"},c("React").createElement("div",{className:"_46w0"},c("React").createElement(c("XUIText.react"),null,i._("Block Lists For Ad Breaks")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Use block lists to prevent certain types of ads from appearing in your videos. Block lists can be applied to specific videos or to all videos on your Page.")}))),n=this.props.targetIsVideoAssetId?[this.props.targetIsVideoAssetId]:[],o=c("React").createElement("div",{className:"_46v_"},c("React").createElement(c("PagesSettingsInstreamAdsBlockListContainer"),{appliable:true,currentPageId:this.props.currentPageId,targetIsVideoAssetIds:n}));return c("React").createElement("div",{className:"_46vz"},m,o)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ComposerVideoInstreamAdsExperimentalSection.react",["cx","fbt","AdBreakExperimentalTextUtils","AdsCurrencyFormatter","AsyncRequest","ComposerVideoUploadTooltip.react","HubbleConstants","Link.react","React","XBasicFBNuxDismissController","XPagesManagerInsightsController","XUIAmbientNUX.react","XUICheckboxInput.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e4,m=5505;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={experimentState:this.props.enabled,initialExperimentState:this.props.enabled,isNuxVisible:this.props.metadata.isNuxVisible};this.$ComposerVideoInstreamAdsExperimentalSection6=function(){var p=c("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",m).getURI();new(c("AsyncRequest"))().setURI(p).send();this.setState({isNuxVisible:!this.state.isNuxVisible})}.bind(this);this.props.onAdBreaksEnableExperimentChange(this.props.enabled);this.props.onSetAdBreaksRevenueLoss(l)}n.prototype.render=function(){if(!this.props.metadata||!this.props.metadata.isEligibleCreator)return null;var o=c("React").createElement("div",{className:"_46v-"},c("React").createElement("div",{className:"_46w0"},c("React").createElement(c("XUIText.react"),null,i._("Viewer Holdout Testing")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:c("AdBreakExperimentalTextUtils").getHoldoutToolTipContentForVideo()}))),p=c("React").createElement("div",{className:"_46v_"},this.$ComposerVideoInstreamAdsExperimentalSection1());return c("React").createElement("div",{className:"_46vz"},o,p)};n.prototype.$ComposerVideoInstreamAdsExperimentalSection1=function(){if(this.props.metadata.isExpired)return c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Test results are available in your")),c("React").createElement(c("Link.react"),{className:"_1er8",href:this.$ComposerVideoInstreamAdsExperimentalSection2()},"Page's Insights."));else if(this.state.initialExperimentState&&this.props.metadata.isStarted)return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("A holdout test is in progress for this video."))),c("React").createElement("div",{className:"_1er9"},c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.experimentState,onClick:this.$ComposerVideoInstreamAdsExperimentalSection3.bind(this)}),c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Turn off test and disable holdout testing permanently for this video."))));else{var o=c("XPagesManagerInsightsController").getURIBuilder().setString("page_token",this.props.pageId).setString("section",c("HubbleConstants").NAV_SECTIONS.AD_BREAKS).getURI();return c("React").createElement("div",null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.experimentState,onClick:this.$ComposerVideoInstreamAdsExperimentalSection4.bind(this),ref:"checkbox"}),c("React").createElement(c("XUIText.react"),{className:"_64zm"},i._("Enable holdout testing. You can see test results in your {redirect}.",[i.param("redirect",c("React").createElement(c("Link.react"),{href:o}," Ad Breaks Insights"))])),this.$ComposerVideoInstreamAdsExperimentalSection5())}};n.prototype.$ComposerVideoInstreamAdsExperimentalSection5=function(){return c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"left",contextRef:function(){return this.refs.checkbox}.bind(this),onCloseButtonClick:this.$ComposerVideoInstreamAdsExperimentalSection6,position:"above",shown:this.state.isNuxVisible,width:"auto"},i._("New! Enable holdout testing to learn how your videos perform when there are ad breaks."))};n.prototype.$ComposerVideoInstreamAdsExperimentalSection4=function(event){this.setState({experimentState:!this.state.experimentState});this.props.onAdBreaksEnableExperimentChange(event.target.checked)};n.prototype.$ComposerVideoInstreamAdsExperimentalSection3=function(event){this.setState({experimentState:!this.state.experimentState});this.props.onAdBreaksEnableExperimentChange(!event.target.checked)};n.prototype.$ComposerVideoInstreamAdsExperimentalSection2=function(){return c("XPagesManagerInsightsController").getURIBuilder().setString("page_token",this.props.pageId).setString("section",c("HubbleConstants").NAV_SECTIONS.AD_BREAKS).getURI()};n.prototype.$ComposerVideoInstreamAdsExperimentalSection7=function(o){return c("AdsCurrencyFormatter").formatCurrencyWithOptionalDecimals("USD",o,true)};f.exports=n}),null);
__d("ComposerVideoAdBreaksTabContainer.react",["cx","ComposerVideoAdBreakActions","ComposerVideoAdBreakAdminPreviewMenu.react","ComposerVideoAdBreakInsertionDisabledView.react","ComposerVideoAdBreakInsertionSection.react","ComposerVideoAdBreakPageOnboardingSection.react","ComposerVideoAdBreakPreviewContainer.react","ComposerVideoAdBreaksTabAdvancedSettings.react","ComposerVideoAdBreakStore","ComposerVideoAdBreakThumbnailsPreviewSection.react","ComposerVideoAdBreakVideoRightsSection.react","ComposerVideoInstreamAdsBlockListSettings.react","ComposerVideoInstreamAdsExperimentalSection.react","ComposerVideoUploadStore","React","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","VideoComposerDialogAdBreakDemonetizationNotice.react","VideoComposerDialogAdBreakProgramRulesChangesNotice.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"ComposerVideoAdBreaksTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoAdBreakStore"))],statics:{calculateState:function k(l,m){var n=c("ComposerVideoAdBreakStore").getAdBreaksStatus(l),o=c("ComposerVideoAdBreakStore").getAdBreaksExperimentEnabled(l),p=c("ComposerVideoAdBreakStore").getAdBreaksExperimentRevenueLossThreshold(l),q=c("ComposerVideoAdBreakStore").getAdBreakTabState(l,m.serverSideDisabledReasons,m.hasGapRule),r=c("ComposerVideoAdBreakStore").getCurrentAdBreak(l),s=c("ComposerVideoAdBreakStore").getInsertedAdBreaks(l),t=c("ComposerVideoAdBreakStore").getIsAdBreakAutoAdjustmentEnabled(l),u=c("ComposerVideoAdBreakStore").getLastInsertedAdBreak(l),v=c("ComposerVideoAdBreakStore").getShouldDisableAdBreakInsertion(l,m.serverSideDisabledReasons,m.hasGapRule),w=c("ComposerVideoAdBreakStore").getVideoDuration(l),x=c("ComposerVideoAdBreakStore").getVideoRightsAgreed(l);return{adBreaksDisabled:n,adBreaksExperimentEnabled:o,adBreaksExperimentRevenueLossThreshold:p,adBreakTabState:q,currentAdBreak:r,insertedAdBreaks:s,isAdBreakAutoAdjustmentEnabled:t,lastInsertedAdBreak:u,shouldDisableAdInsertionTab:v,videoDuration:w,videoRightsAgreed:x}}},propTypes:{adBreaksExperimentPublicMetadata:i.object,hasGapRule:i.bool.isRequired,isAdBreakInsertionRedesignV1:i.bool,isAdBreakInsertionRedesignV2:i.bool,isDemonetized:i.bool,isEditing:i.bool.isRequired,pageId:i.string.isRequired,serverSideDisabledReasons:i.array,shouldShowPageOnboardingForAdBreak:i.bool,shown:i.bool.isRequired,showAdBreakAdminPreviewSettings:i.bool,showAdBreakOffsetEditorNux:i.bool,uploadVideoID:i.string,videoAssetID:i.string,videoFile:i.object,videoID:i.string},componentDidMount:function k(){if(!this.props.isEditing&&(this.props.isAdBreakInsertionRedesignV1||this.props.isAdBreakInsertionRedesignV2))this._onEnableAdBreakAutoAdjustment(true)},componentWillUpdate:function k(l,m){if(!this.state.shouldDisableAdInsertionTab&&m.shouldDisableAdInsertionTab&&this.state.isPreviewingAdBreak&&m.isPreviewingAdBreak){this._onSetIsPreviewingAdBreak(false);this.setState({shouldUpdateVideoPosition:true,shouldPauseVideo:true})}},render:function k(){return c("React").createElement("div",{className:(this._shouldShowAdvancedSettings()?"_427i":"")+(!this.props.shown?" _2oq6":"")},this._renderTabContent(),c("React").createElement(c("VideoComposerDialogAdBreakDemonetizationNotice.react"),{isDemonetized:!!this.props.isDemonetized}),c("React").createElement(c("VideoComposerDialogAdBreakProgramRulesChangesNotice.react"),null))},_renderTabContent:function k(){if(this.props.isAdBreakInsertionRedesignV1)return c("React").createElement("div",{className:"_19jn"},this._renderPreviewSection(),this._renderMetadataSection(),this._renderAdvancedSection());return c("React").createElement("div",{className:"_19jn"},this._renderMetadataSection(),this._renderPreviewSection(),this._renderAdvancedSection())},_renderMetadataSection:function k(){var l=null;if(this.props.shouldShowPageOnboardingForAdBreak)l=c("React").createElement(c("ComposerVideoAdBreakPageOnboardingSection.react"),{creatorID:this.props.pageId});else if(this.state.shouldDisableAdInsertionTab)l=c("React").createElement(c("ComposerVideoAdBreakInsertionDisabledView.react"),{errorMessageContent:this.state.adBreakTabState.errorMessageContent,errorMessageHeader:this.state.adBreakTabState.errorMessageHeader});else if(!this.state.videoRightsAgreed)l=c("React").createElement(c("ComposerVideoAdBreakVideoRightsSection.react"),{onAgree:this._onAgree});var m=this.props.isAdBreakInsertionRedesignV1||this.props.isAdBreakInsertionRedesignV2;return c("React").createElement("div",null,c("React").createElement("div",{className:(!m?"_1_hc":"")+(this.props.isAdBreakInsertionRedesignV1?" _3ix_":"")},c("React").createElement("div",{className:"_5r7-"+(this.props.isAdBreakInsertionRedesignV1?" _65nj":"")},l,c("React").createElement(c("ComposerVideoAdBreakInsertionSection.react"),{hasGapRule:this.props.hasGapRule,hidden:!this.state.videoRightsAgreed||this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak,insertedAdBreaks:this.state.insertedAdBreaks,isAdBreakAutoAdjustmentEnabled:this.state.isAdBreakAutoAdjustmentEnabled,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,isPreviewingAdBreak:this.state.isPreviewingAdBreak,videoDuration:this.state.videoDuration,currentOffset:this.state.currentAdBreak,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,onEnableAdBreakAutoAdjustment:this._onEnableAdBreakAutoAdjustment,onInsertAdBreak:this._onInsertAdBreak,onSetCurrentAdBreak:this._onSetCurrentAdBreak})),c("React").createElement(c("ComposerVideoAdBreakThumbnailsPreviewSection.react"),{adBreaksDisabled:this.state.adBreaksDisabled,adBreaksExperimentEnabled:this.state.adBreaksExperimentEnabled,adBreaksExperimentMetadata:this.props.adBreaksExperimentPublicMetadata,currentOffset:this.state.currentAdBreak,hasGapRule:this.props.hasGapRule,hidden:!this.state.videoRightsAgreed||this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak,insertedAdBreaks:this.state.insertedAdBreaks,isPreviewingAdBreak:this.state.isPreviewingAdBreak,lastInsertedAdBreak:this.state.lastInsertedAdBreak,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,videoDuration:this.state.videoDuration,onDeleteAdBreak:this._onDeleteAdBreak,onSetCurrentAdBreak:this._onSetCurrentAdBreak,onSetIsPreviewingAdBreak:this._onSetIsPreviewingAdBreak,onUpdateAdBreaksStatus:this._onUpdateAdBreaksStatus})))},_renderPreviewSection:function k(){var l=this.state.shouldDisableAdInsertionTab||this.props.shouldShowPageOnboardingForAdBreak||!this.state.videoRightsAgreed?null:this.state.insertedAdBreaks,m=c("ComposerVideoUploadStore").getThumbnail(this.context.composerID);return c("React").createElement(c("ComposerVideoAdBreakPreviewContainer.react"),{currentAdBreak:this.state.currentAdBreak,hasGapRule:this.props.hasGapRule,insertedAdBreaks:l,isAdBreakDisabled:this.state.adBreaksDisabled,isAdBreakInsertionRedesign:this.props.isAdBreakInsertionRedesignV1||this.props.isAdBreakInsertionRedesignV2,isPreviewingAdBreak:this.state.isPreviewingAdBreak,shouldPauseVideo:this.state.shouldPauseVideo,shouldUpdateVideoPosition:this.state.shouldUpdateVideoPosition,thumbnailURLForPreview:m&&m.getURL(),videoFile:this.props.videoFile,videoID:this.props.videoID,onSetCurrentAdBreak:this._onSetCurrentAdBreak,onSetIsPreviewingAdBreak:this._onSetIsPreviewingAdBreak,onSetThumbnailURLForAdBreak:this._onSetThumbnailURLForAdBreak,onSetVideoDuration:this._onSetVideoDuration})},_renderAdvancedSection:function k(){if(!this._shouldShowAdvancedSettings())return null;var l=null;if(this.props.showAdBreakAdminPreviewSettings)l=c("React").createElement(c("ComposerVideoAdBreakAdminPreviewMenu.react"),{adBreaksDisabled:this.state.adBreaksDisabled,insertedAdBreaks:this.state.insertedAdBreaks,uploadVideoID:this.props.uploadVideoID,videoID:this.props.videoID});return c("React").createElement(c("ComposerVideoAdBreaksTabAdvancedSettings.react"),{secondary:l},this._renderAdBreaksExperimentSection(),this._renderAdBreaksBlockListSection())},_renderAdBreaksExperimentSection:function k(){if(this.state.adBreaksDisabled||this.state.insertedAdBreaks.length===0)return null;return c("React").createElement(c("ComposerVideoInstreamAdsExperimentalSection.react"),{enabled:this.state.adBreaksExperimentEnabled,metadata:this.props.adBreaksExperimentPublicMetadata,onAdBreaksEnableExperimentChange:this._onAdBreaksEnableExperimentChange,onSetAdBreaksRevenueLoss:this._onSetAdBreaksRevenueLoss,pageId:this.props.pageId,revenueThreshold:this.state.adBreaksExperimentRevenueLossThreshold})},_renderAdBreaksBlockListSection:function k(){return c("React").createElement(c("ComposerVideoInstreamAdsBlockListSettings.react"),{currentPageId:this.props.pageId,targetIsVideoAssetId:this.props.videoAssetID?this.props.videoAssetID:this.props.videoID})},_onAgree:function k(){c("ComposerVideoAdBreakActions").setVideoRightsAgreed(this.context.composerID,true)},_onEnableAdBreakAutoAdjustment:function k(l){c("ComposerVideoAdBreakActions").setIsAdBreakAutoAdjustmentEnabled(this.context.composerID,l)},_onInsertAdBreak:function k(){c("ComposerVideoAdBreakActions").insertCurrentAdBreak(this.context.composerID)},_onSetCurrentAdBreak:function k(l,m,n){c("ComposerVideoAdBreakActions").setCurrentAdBreak(this.context.composerID,l);this.setState({shouldUpdateVideoPosition:m,shouldPauseVideo:n})},_onSetIsPreviewingAdBreak:function k(l){this.setState({isPreviewingAdBreak:l})},_onSetThumbnailURLForAdBreak:function k(l){c("ComposerVideoAdBreakActions").setThumbnailURLForAdBreak(this.context.composerID,l)},_onSetVideoDuration:function k(l){c("ComposerVideoAdBreakActions").setVideoDuration(this.context.composerID,l)},_onDeleteAdBreak:function k(l){c("ComposerVideoAdBreakActions").deleteAdBreak(this.context.composerID,l)},_onUpdateAdBreaksStatus:function k(l){c("ComposerVideoAdBreakActions").updateAdBreaksStatus(this.context.composerID,l)},_onAdBreaksEnableExperimentChange:function k(l){c("ComposerVideoAdBreakActions").setAdBreaksExperimentEnabled(this.context.composerID,l)},_onSetAdBreaksRevenueLoss:function k(l){c("ComposerVideoAdBreakActions").setAdBreaksExperimentRevenueLossThreshold(this.context.composerID,l)},_shouldShowAdvancedSettings:function k(){return!this.state.shouldDisableAdInsertionTab}});f.exports=j}),null);
__d("ComposerVideoUploadCustomLabels.react",["cx","fbt","ComposerVideoUploadTooltip.react","React","SearchableEntry","WebAsyncSearchSource","XUIText.react","XUITokenizer.react","XVideoCustomLabelsTypeaheadController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.state={entries:this.props.customLabels.map(function(n){return new(c("SearchableEntry"))({uniqueID:n,title:n})}),queryString:"",searchSource:this.$ComposerVideoUploadCustomLabels1.bind(this)()}}l.prototype.render=function(){var m=[],n={},o=this.state.queryString.trim();if(o){m=[new(c("SearchableEntry"))({uniqueID:o,title:o})];n[o]=o}return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Custom Labels")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Describe your videos with custom labels. Unlike content tags, custom labels are not published and only appear in insights data."),alignV:"above",alignH:"right"})),c("React").createElement(c("XUITokenizer.react"),{additionalEntries:m,disabled:!this.props.editable,entries:this.state.entries,excludedEntries:n,onQueryStringChange:this.$ComposerVideoUploadCustomLabels2.bind(this),onAddEntryAttempt:this.$ComposerVideoUploadCustomLabels3.bind(this),onRemoveEntryAttempt:this.$ComposerVideoUploadCustomLabels4.bind(this),queryString:this.state.queryString,placeholder:i._("Add a custom label (Optional)"),searchSource:this.state.searchSource,showEntriesOnFocus:true}))};l.prototype.$ComposerVideoUploadCustomLabels3=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(!o)n.push(m);this.setState({entries:n,queryString:""});this.props.onCustomLabelsChange(n.map(function(p){return p.getUniqueID()}))};l.prototype.$ComposerVideoUploadCustomLabels4=function(m){var n=this.state.entries,o=n.some(function(p){return p.getUniqueID()===m.getUniqueID()});if(o)n.splice(n.indexOf(m),1);this.setState({entries:n,queryString:""});this.props.onCustomLabelsChange(n.map(function(p){return p.getUniqueID()}))};l.prototype.$ComposerVideoUploadCustomLabels2=function(event){this.setState({queryString:event.target.value})};l.prototype.$ComposerVideoUploadCustomLabels1=function(){var m=c("XVideoCustomLabelsTypeaheadController").getURIBuilder().setFBID("profile_id",this.props.targetID).getURI();return new(c("WebAsyncSearchSource"))({bootstrapRequests:[{uri:m}],getAllForEmptyQuery:true})};f.exports=l}),null);
__d("ComposerVideoUploadUtils",["fbt"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={getDistributionSummaryItems:function j(k,l,m,n,o){__p&&__p();var p=[];if(k&&!n)p.push(h._("Will appear on your Page's Videos tab, but not News Feed or Timeline"));if(l)p.push(h._("Video will not be available to users under 18."));if(!m)p.push(h._("Embedding on third-party websites is not allowed"));if(n){p.push(h._("Add as a secret video that is unpublished and non-searchable"));if(o)p.push(h._("Likes, comments and sharing are turned off"))}if(p.length===0)p.push(h._("Standard distribution with no restrictions"));return p}};f.exports=i}),null);
__d("ComposerVideoUploadAdvancedTab.react",["cx","fbt","BUITextInput_DEPRECATED.react","ComposerCharityTypeahead.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadCustomLabels.react","ComposerVideoUploadStore","ComposerVideoUploadTooltip.react","ComposerVideoUploadUtils","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","Link.react","React","ReactComposerContextTypes","SearchableEntry","Tooltip.react","VideoPermalinkText.react","XUICheckboxInput.react","XUISelector.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("XUISelector.react").Option,k=c("React").PropTypes,l=c("React").createClass({displayName:"ComposerVideoUploadAdvancedTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function m(n,o){var p=c("ComposerVideoUploadStore").getCopyrighted(n),q=c("ComposerVideoUploadStore").getSpherical(n),r=c("ComposerVideoUploadStore").getEmbeddable(n),s=c("ComposerVideoUploadStore").getInternalSetting(n),t=c("ComposerVideoUploadStore").getFteOnly(n),u=c("ComposerVideoUploadStore").getExternalVideoID(n),v=c("ComposerVideoUploadStore").getCustomLabels(n),w=c("ComposerVideoUploadStore").getExcludeNewsfeed(n),x=c("ComposerVideoUploadStore").getFundraiserForStoryCharityID(n);return{copyrighted:p,spherical:q,isFTEOnly:t,isInternalVideo:s,embeddableForEdit:r,externalVideoID:u,customLabels:v,excludeFromNewsfeed:w,fundraiserForStoryCharityID:x}},getAttachmentInitialState:function m(n,o){return{blockSocialActions:false,distribution:"everywhere",disturbing:false,embeddable:true,excludeFromNewsfeed:false,isSecretVideo:false,baseProgress:0,isInternalVideo:false,isFTEOnly:false,embeddableForEdit:true,externalVideoID:"",customLabels:[],wasCopyrighted:c("ComposerVideoUploadStore").getCopyrighted(n),fundraiserForStoryCharityID:c("ComposerVideoUploadStore").getFundraiserForStoryCharityID(n)}}},propTypes:{canEditCustomLabels:k.bool,canEditExternalVideoID:k.bool,canEditFundraiserForStoryCharityID:k.bool,isEditing:k.bool,isPageTrailer:k.bool,isVideoUpload:k.bool,isShowPage:k.bool,showCopyrightSection:k.bool,showCustomLabels:k.bool,showExternalVideoIDSection:k.bool,showDisturbingSection:k.bool,showAdvancedTabSphericalCheckbox:k.bool,showSecretVideoOption:k.bool,showInternalVideoSettings:k.bool,targetID:k.string,toggleRightsTab:k.func.isRequired,toggleSphericalTab:k.func.isRequired,shown:k.bool,wasCopyrighted:k.bool},updateStoreDistributionValuesWithCustomOptions:function m(){this.updateStoreDistributionValues(this.state.blockSocialActions,this.state.disturbing,this.state.embeddable,this.state.excludeFromNewsfeed,this.state.isSecretVideo,this.state.isInternalVideo,this.state.isFTEOnly)},onExcludeFromNewsfeedOptionChange:function m(event){this.setState({excludeFromNewsfeed:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onDisturbingOptionChange:function m(event){this.setState({disturbing:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onEmbeddableOptionChange:function m(event){this.setState({embeddable:!event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onSecretVideoOptionChange:function m(event){this.setState({isSecretVideo:event.target.checked,blockSocialActions:event.target.checked,excludeFromNewsfeed:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onInternalVideoOptionChange:function m(event){this.setState({isInternalVideo:event.target.checked,isFTEOnly:event.target.checked?this.state.isFTEOnly:false},this.updateStoreDistributionValuesWithCustomOptions)},onFTEVideoOptionChange:function m(event){this.setState({isFTEOnly:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onSocialActionsOptionChange:function m(event){this.setState({blockSocialActions:event.target.checked},this.updateStoreDistributionValuesWithCustomOptions)},onExternalVideoIDChange:function m(event){var n=event.target.value,o=this.context.composerID;c("ComposerVideoUploadActions").updateExternalVideoID(o,n);this.setState({externalVideoID:n})},onCustomLabelsChange:function m(n){this.setState({customLabels:n});c("ComposerVideoUploadActions").updateCustomLabels(this.context.composerID,n)},updateStoreDistributionValues:function m(n,o,p,q,r,s,t){var u=this.context.composerID;c("ComposerVideoUploadActions").updateBlockSocialActions(u,n);c("ComposerVideoUploadActions").updateDisturbing(u,o);c("ComposerVideoUploadActions").updateEmbeddable(u,p);c("ComposerVideoUploadActions").updateExcludeNewsfeed(u,q);c("ComposerVideoUploadActions").updateIsSecretVideo(u,r);c("ComposerVideoUploadActions").updateInternalVideoSettings(u,s);c("ComposerVideoUploadActions").updateFTEOnly(u,t)},renderDistributionSelector:function m(){if(this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement(c("XUISelector.react"),{onChange:this.onDistributionChange,value:this.state.distribution},c("React").createElement(j,{value:"everywhere"},i._("Everywhere")),c("React").createElement(j,{value:"exclude_newsfeed"},i._("Exclude from News Feed")),c("React").createElement(j,{value:"custom"},i._("Custom")))},renderDistributionEditComponent:function m(){return c("React").createElement("div",{className:"_1_hg"},this.renderDistributionHeader(),this.renderDistributionHelperText(),this.renderEditEmbeddableOption(),this.renderInternalSettingsOption(),this.renderVideoPermalinkSection())},renderEditEmbeddableOption:function m(){return c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.embeddableForEdit,onChange:this.onEditEmbeddableOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Prohibit embedding")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, third-party websites can embed your video. Check to prohibit embedding."),alignv:"bottom"})))},onEditEmbeddableOptionChange:function m(event){c("ComposerVideoUploadActions").updateEmbeddable(this.context.composerID,!event.target.checked)},renderCustomDistributionOptions:function m(){return c("React").createElement("div",{className:"_2t3n"},this.renderExcludeFromNewsfeedOption(),this.renderDisturbingOption(),this.renderEmbeddableOption(),this.renderSecretVideoOption(),this.renderInternalSettingsOption())},renderInternalSettingsOption:function m(){if(!this.props.showInternalVideoSettings)return[];var n=!this.state.isInternalVideo,o=this.props.isEditing;return[c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"internal_video",className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isInternalVideo,onChange:this.onInternalVideoOptionChange,disabled:o}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(o?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Is Internal Video")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Internal videos are only available to FB employees including contractors."),alignv:"bottom"}))),c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"fte_only",className:"_2t3o _2t3r"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isFTEOnly,onChange:this.onFTEVideoOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("FTE And Interns Only")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Restrict access to the internal video to full-time employees and interns only"),alignv:"bottom"})))]},renderExcludeFromNewsfeedOption:function m(){var n=this.state.isSecretVideo;return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.excludeFromNewsfeed,onChange:this.onExcludeFromNewsfeedOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Exclude from News Feed")),this.renderExcludeFromNewsfeedTooltip()))},renderEmbeddableOption:function m(){return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:!this.state.embeddable,onChange:this.onEmbeddableOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Prohibit embedding")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, third-party websites can embed your video. Check to prohibit embedding."),alignv:"bottom"})))},renderDisturbingOption:function m(){if(!this.props.showDisturbingSection)return null;return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.disturbing,onChange:this.onDisturbingOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Show graphic content warning")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Displays a warning and turns off autoplay. Graphic content will be hidden from people 18 and under."),alignv:"bottom"})))},renderSecretVideoOption:function m(){if(!this.props.showSecretVideoOption)return[];var n=!this.state.isSecretVideo;return[c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"secret_video",className:"_2t3o"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.isSecretVideo,onChange:this.onSecretVideoOptionChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Add as secret video")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Secret videos are only available on embeds and to the person that has the link to the video."),alignv:"bottom"}))),c("React").createElement(c("InputLabel_DEPRECATED.react"),{key:"social_actions",className:"_2t3o _2t3r"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.blockSocialActions,onChange:this.onSocialActionsOptionChange,disabled:n}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(n?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Block social actions")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Blocking social actions will disallow likes and comments"),alignv:"bottom"})))]},isEmptyCustomDistribution:function m(){if(this.isCustomDistribution()&&!this.state.excludeFromNewsfeed&&!this.state.disturbing&&this.state.embeddable&&!this.state.isSecretVideo)return true;else return false},onCopyrightedChange:function m(event){c("ComposerVideoUploadActions").updateCopyrighted(this.context.composerID,event.target.checked);this.props.toggleRightsTab(event.target.checked)},renderCopyrightSection:function m(){if(!this.props.showCopyrightSection||!this.props.isEditing&&!this.props.isVideoUpload)return null;return c("React").createElement("div",{className:"_3guc"},c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Rights Management"))),c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Facebook can alert you if anyone posts a video that matches this one"))),c("React").createElement("div",null,c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.copyrighted,onChange:this.onCopyrightedChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Monitor for matching uploads")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("Identifies other Facebook videos that include all or part of this video"),alignH:"right"})))))},getDistributionSummaryItems:function m(){if(this.isCustomDistribution())return c("ComposerVideoUploadUtils").getDistributionSummaryItems(this.state.excludeFromNewsfeed,this.state.disturbing,this.state.embeddable,this.state.isSecretVideo,this.state.blockSocialActions);else if(this.isExcludeFromNewsfeedDistribution())return c("ComposerVideoUploadUtils").getDistributionSummaryItems(true,false,true,false,false);else return c("ComposerVideoUploadUtils").getDistributionSummaryItems(false,false,true,false,false)},isCustomDistribution:function m(){return this.state.distribution==="custom"},isExcludeFromNewsfeedDistribution:function m(){return this.state.distribution==="exclude_newsfeed"},_shouldShowDistributionSection:function m(){if(this.props.isPageTrailer)return false;return true},onDistributionChange:function m(event){if(event.value==="exclude_newsfeed")this.updateStoreDistributionValues(false,false,true,true,false,false,false);else if(event.value==="custom")this.updateStoreDistributionValuesWithCustomOptions();else this.updateStoreDistributionValues(false,false,true,false,false,false,false);this.setState({distribution:event.value})},renderDistributionSummary:function m(){if(this.isEmptyCustomDistribution())return c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Use of these options reduces the number of views your video will receive.")));var n=this.getDistributionSummaryItems(),o=n.map(function(p,q){return c("React").createElement("li",{key:q},c("React").createElement(c("XUIText.react"),{size:"meta1"},p))});return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Distribution Summary")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("A summary of where your video will appear, based on the distribution options you selected.")})),c("React").createElement("ul",{className:"_59uq"},o))},onSphericalChange:function m(event){c("ComposerVideoUploadActions").updateSpherical(this.context.composerID,event.target.checked);this.props.toggleSphericalTab(event.target.checked)},renderSphericalSection:function m(){if(!this.props.showAdvancedTabSphericalCheckbox)return null;return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement(c("InputLabel_DEPRECATED.react"),{display:"inline"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.spherical,onChange:this.onSphericalChange,disabled:!this.props.isVideoUpload}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"+(!this.props.isVideoUpload?" _2t3q":"")},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("This video was recorded in 360\u00b0 format")))),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("360 Video is a special format that enables a user-controlled, spherical perspective.").toString(),alignH:"right",className:"_3iot"})),c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},c("React").createElement(c("Link.react"),{href:"/help/828417127257368",target:"_blank"},i._("Learn more about 360 Video in the Help Center")))))},renderDistributionHeader:function m(){return c("React").createElement("div",{className:"_1_hd _5m7y"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Distribution")))},renderExcludeFromNewsfeedTooltip:function m(){if(this.props.isShowPage)return c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, the episode or video will not appear in people's News Feed"),alignv:"bottom"});return c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("By default, video posts will be shown on people's News Feed."),alignv:"bottom"})},renderDistributionHelperText:function m(){return c("React").createElement("div",{className:"_1_hd"},c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Choose where you want this video to appear.")))},renderExternalId:function m(){if(!this.props.canEditExternalVideoID&&!this.state.externalVideoID)return null;var n=c("React").createElement(c("BUITextInput_DEPRECATED.react"),{height:"xtall",className:"_3xjx _26uc",placeholder:i._("Add an asset management code (Optional)"),onChange:this.onExternalVideoIDChange,value:this.state.externalVideoID,disabled:!this.props.canEditExternalVideoID});return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Universal Video Identifier")),c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If there is an unique code associated with this video in your own video content management system, you can add it here. This is for your own use; Facebook will not use this data."),alignV:"above",alignH:"right"})),n)},_onSelectCharity:function m(n){var o=n.getUniqueID();c("ComposerVideoUploadActions").updateFundraiserForStoryCharityID(this.context.composerID,o)},_onClearCharity:function m(){c("ComposerVideoUploadActions").updateFundraiserForStoryCharityID(this.context.composerID,null)},renderFundraiserSection:function m(){if(!this.props.canEditFundraiserForStoryCharityID)return null;var n=i._("Add a button to raise money for a nonprofit (Optional)");return c("React").createElement("div",null,c("React").createElement("div",{className:"_1_hd _5m7y _5m7z"},c("React").createElement(c("XUIText.react"),{size:"meta1",weight:"bold"},i._("Donate Button"))),c("React").createElement("div",{className:"_2cg4 _3xjx"},c("React").createElement(c("ComposerCharityTypeahead.react"),{onSelect:this._onSelectCharity,onClear:this._onClearCharity,focusOnMount:false,placeholder:n})))},renderCustomLabels:function m(){if(!this.props.showCustomLabels)return null;return c("React").createElement(c("ComposerVideoUploadCustomLabels.react"),{customLabels:this.state.customLabels?this.state.customLabels:[],editable:this.props.canEditCustomLabels,onCustomLabelsChange:this.onCustomLabelsChange,targetID:this.props.targetID})},renderDistribution:function m(){if(this.props.isEditing)return this.renderDistributionEditComponent();else{var n;if(this.isCustomDistribution()||this.props.isShowPage)n=this.renderCustomDistributionOptions();return c("React").createElement("div",{className:"_1_hg"},this.renderDistributionHeader(),this.renderDistributionHelperText(),this.renderDistributionSelector(),n,c("React").createElement("div",{className:"_1_hd _5m7z"},this.renderDistributionSummary()))}},renderVideoPermalinkSection:function m(){if(!this.props.isEditing||!this.props.isSecret)return null;return c("React").createElement("div",{className:"_4x8f"},i._("The secret video is available at this location"),c("React").createElement(c("VideoPermalinkText.react"),{targetID:this.context.targetID,videoID:this.props.videoID}))},render:function m(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",{className:"_1_he"+(!this.props.shown?" _2oq6":"")},c("React").createElement("div",{className:"_1_hg"},this.renderCopyrightSection()));return c("React").createElement("div",{className:"_1_he"+(!this.props.shown?" _2oq6":"")},this._shouldShowDistributionSection()?this.renderDistribution():null,c("React").createElement("div",{className:"_1_hg"+(this._shouldShowDistributionSection()?" _5m8o":"")},this.renderSphericalSection(),this.renderCopyrightSection(),this.renderExternalId(),this.renderCustomLabels(),this.renderFundraiserSection()))}});f.exports=l}),null);
__d("ComposerVideoUploadBasicTab.react",["cx","fbt","BUITextInput_DEPRECATED.react","ComposerVideoShowsActions","InputLabel.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadPreviewSection.react","ComposerVideoUploadSection.react","ComposerVideoUploadStore","ComposerVideoUploadTooltip.react","GamesTypeahead.react","Image.react","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","React","ReactComposerContextTypes","ShowsUploadDialogNuxTour.react","SimpleNUXMessage","SimpleNUXMessageTypes","VideoContentCategorySelector.react","VideoContentCategoryType","VideoContentTagSelectorToken.react","VideoFeedType","VideoUploadVideoListSectionContainer.react","VideoUploadVideoTypeSectionContainer.react","XUIAmbientNUX.react","XUICheckboxInput.react","XUIText.react","Link.react","XUIGrayText.react","requiredIfPropIsFalsy"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ComposerVideoUploadBasicTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function l(m,n){var o=c("ComposerVideoUploadStore").getTitle(m),p=c("ComposerVideoUploadStore").getCategory(m)||c("VideoContentCategoryType").OTHER.value,q=c("ComposerVideoUploadStore").getContentTags(m),r=c("ComposerVideoUploadStore").getFeedType(m),s=r===c("VideoFeedType").HIGHLIGHTED.index,t=c("ComposerVideoUploadStore").getEpisodeData(m),u=t&&t.isEpisode,v=c("ComposerVideoUploadStore").getExcludeNewsfeed(m),w=c("ComposerVideoUploadStore").getVideoDurationInSec(m),x=c("ComposerVideoUploadStore").getShareToParentPageOptionSelected(m);return{category:p,contentTags:q,highlightedInFeed:s,title:o,isEpisode:u,excludeNewsfeed:v,durationInSec:w,shareToParentPageOptionSelected:x}}},propTypes:{accessToken:j.string,allowCustomThumbnail:j.bool,canSeeUploadVideoDialogShowsNux:j.bool,compactMode:j.bool,generateThumbnails:j.bool,improvedContentTags:j.bool,isCarouselPreviewEditing:j.bool,isDisabled:j.bool,isPageTrailer:j.bool,isShowPage:j.bool,isSquareVideo:j.bool,isVideoUpload:j.bool,logger:j.object,makeTitleMandatory:j.bool,parentPageName:j.string,parentPageProfilePic:j.string,parentPageURI:j.string,selectedThumbnail:j.object,showAutoCaptionsSection:j.bool,showThumbnailExperimentSection:j.bool,showCategorySelector:j.bool,showFeedTypeCheckbox:j.bool,showHighlightedVideosNux:j.bool,shown:j.bool,showShareToParentPageOption:j.bool,showCrosspostToParentPageOption:j.bool,canEditShowAndParent:j.bool,showTagSelector:j.bool,showTagSelectorNux:j.bool,showTagSelectorToken:j.bool,showThumbnailScrubber:j.bool,squareThumbnailURI:j.string,showMarkURI:j.string,minEpisodeDuration:j.number,targetID:j.string,thumbnails:j.array,uiLogger:j.object,videoFile:j.object,videoID:c("requiredIfPropIsFalsy")("isVideoUpload",j.string),showGamesTypeahead:j.bool},getInitialState:function l(){return{shouldShowHighlightedVideosNux:this.props.showHighlightedVideosNux,shouldShowTitleRequiredNux:!c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").VIDEO_MANDATORY_TITLE)&&this.props.makeTitleMandatory,shouldShowTitleErrorMessage:false,componentsLoaded:false}},componentDidMount:function l(){if(this.props.isShowPage)c("ComposerVideoShowsActions").initialize(this.context.composerID,this.context.composerType,!this.props.isVideoUpload);if(this.props.showCrosspostToParentPageOption&&this.props.canEditShowAndParent){c("ComposerVideoUploadActions").updateShareToParentPageOptionSelected(this.context.composerID,true);this.setState({shareToParentPageOptionSelected:true})}},_getTitleErrorMessage:function l(){if(!this.state.title&&this.state.shouldShowTitleErrorMessage){if(this.props.isShowPage)return i._("Title is required for videos in Show Page");if(this.props.isPageTrailer)return i._("Title is required for the Show Trailer")}return null},_renderTitleSection:function l(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);var m=i._("Title"),n=i._("Write a title"),o=null;if(this.props.isPageTrailer)m=i._("Trailer Title");if(this.props.isPageTrailer||this.props.isShowPage||this.props.makeTitleMandatory)o=i._("(required)");return c("React").createElement("div",{id:"writeVideoTitle"},c("React").createElement(c("ComposerVideoUploadSection.react"),{title:m,subtitle:o},c("React").createElement(c("BUITextInput_DEPRECATED.react"),{disabled:this.props.isDisabled,height:"xtall",className:"_3xjx _3xjy",placeholder:n,onChange:this.onTitleChange,onBlur:function(){return this.setState({shouldShowTitleErrorMessage:true})}.bind(this),ref:"video_title",value:this.state.title,xuiError:this._getTitleErrorMessage()})))},_renderMetadataSection:function l(){__p&&__p();if(this.props.compactMode)return c("React").createElement("div",null);var m;if(this.props.showTagSelectorToken)m=this._renderTagSection();else m=this._renderCategorySection();var n=null;if(this.props.showFeedTypeCheckbox)n=this._renderFeedSection();return c("React").createElement("div",null,c("React").createElement("div",{className:"_3xjw _1_hc"+(this.state.isEpisode&&(this.props.showShareToParentPageOption||this.props.showCrosspostToParentPageOption)?" _3yq7":"")+(!this.props.showTabSelector?" _vev":"")},c("React").createElement("div",{className:"_5sf4"+(this.props.showShareToParentPageOption||this.props.showCrosspostToParentPageOption?" _4btb":"")},this._renderVideoTypeSection(),this._renderTitleSection(),m,this._renderVideoGameSection(),n,this._renderVideoListSection(),this._renderExcludeNewsFeedSection(),this._renderShareOnParentPageSection(),this._renderCrosspostOnParentPageSection())))},_logEvent:function l(m){if(this.props.logger)this.props.logger.logEvent(m)},_onHighlightedVideosNuxDismiss:function l(){this.setState({shouldShowHighlightedVideosNux:false});this.props.onHighlightedVideosNuxDismiss()},_onTitleRequiredNuxDismiss:function l(){c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").VIDEO_MANDATORY_TITLE);this.setState({shouldShowTitleRequiredNux:false})},renderLayers:function l(){if(!this.state.shouldShowHighlightedVideosNux&&!this.state.shouldShowTitleRequiredNux)return null;if(this.state.shouldShowTitleRequiredNux)return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.video_title}.bind(this),shown:true,position:"left",width:"custom",customwidth:250,onCloseButtonClick:this._onTitleRequiredNuxDismiss,key:"videoTitleNux"},c("React").createElement(c("XUIText.react"),{display:"block",size:"body1",headingLevel:1},i._("Titles Are Now Required")),c("React").createElement(c("XUIText.react"),{size:"body2"},i._("All video uploads must now include a title. The title appears with your video on Facebook.")));else if(this.state.shouldShowHighlightedVideosNux)return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.highlighted_video_checkbox}.bind(this),shown:true,width:"custom",customwidth:384,position:"right",offsetX:168,onCloseButtonClick:this._onHighlightedVideosNuxDismiss,key:"videoLibraryNux"},i._("Highlight your best non-promotional videos so they appear more prominently in your video channel."));return null},_renderFeedSection:function l(){return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8y",title:i._("Highlight Video"),tooltip:i._("Highlight your best non-promotional videos so they appear more prominently in your video channel.")},c("React").createElement("span",null,c("React").createElement(c("XUICheckboxInput.react"),{className:"_3-8_",checked:this.state.highlightedInFeed,onChange:this.onFeedTypeChange,ref:"highlighted_video_checkbox"}),c("React").createElement(c("XUIText.react"),{size:"meta1"},i._("Highlight in your video channel"))))},_renderCategorySection:function l(){if(!this.props.showCategorySelector||this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Video Category"),tooltip:i._("Select a category that matches the content of your video")},c("React").createElement(c("VideoContentCategorySelector.react"),{onChange:this.onCategoryChange,value:this.state.category}))},_renderTagSection:function l(){if(this.props.isCarouselPreviewEditing)return c("React").createElement("div",null);return c("React").createElement("div",{id:"addVideoTags"},c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Tags"),tooltip:i._("Tags help make your video more discoverable. They aren't displayed to the public.")},c("React").createElement(c("VideoContentTagSelectorToken.react"),{accessToken:this.props.accessToken,improvedContentTags:this.props.improvedContentTags,logger:this.props.uiLogger,onChange:this.onContentTagChange,showTagSelectorNux:this.props.showTagSelectorNux,value:this.state.contentTags})))},_renderVideoGameSection:function l(){if(this.props.isCarouselPreviewEditing||!this.props.isVideoUpload||!this.props.showGamesTypeahead)return c("React").createElement("div",null);return c("React").createElement("div",null,c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Video Game"),tooltip:i._("Add the video game featured in the content of this video")},c("React").createElement(c("GamesTypeahead.react"),{className:"_oie",clearOnSelect:false,filterVideoTags:true,includeSeries:false,onGameSelect:this.onGameChange,placeholder:i._("Tag a game (ex: Overwatch)"),tallInput:true})))},_renderVideoTypeSection:function l(){if(!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{id:"selectVideoTypeStep"},c("React").createElement(c("VideoUploadVideoTypeSectionContainer.react"),{pageID:this.props.targetID,composerID:this.context.composerID,duration:this.state.durationInSec,minEpisodeDuration:this.props.minEpisodeDuration}))},_renderVideoListSection:function l(){if(!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{id:"addToSeasonAndPlaylist"},c("React").createElement(c("VideoUploadVideoListSectionContainer.react"),{pageID:this.props.targetID,composerID:this.context.composerID}))},_renderExcludeNewsFeedSection:function l(){if(!this.props.isVideoUpload||!this.props.isPageTrailer)return c("React").createElement("div",null);var m=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, the episode or video will not appear in people's News Feed"),alignH:"left"});if(this.props.isPageTrailer)m=c("React").createElement(c("ComposerVideoUploadTooltip.react"),{tooltip:i._("If checked, your trailer will not appear in News Feed"),alignH:"left"});return c("React").createElement("div",{className:"_3-8-"},c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.excludeNewsfeed,onChange:this.onExcludeNewsfeedChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2t3p"},c("React").createElement(c("XUIText.react"),{weight:"normal"},i._("Exclude from News Feed")),m)))},_renderShareOnParentPageSection:function l(){if(!this.state.isEpisode||!this.props.showShareToParentPageOption||!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("InputLabel.react"),{label:i._("Share this episode to {parent page name} when you publish",[i.param("parent page name",this.props.parentPageName)])},c("React").createElement(c("XUICheckboxInput.react"),{onChange:this.onSelectShareToParentPageOption})),this.state.shareToParentPageOptionSelected?c("React").createElement("label",{className:"_4btg"},c("React").createElement("textarea",{className:"_4bth",onChange:this.onSelectShareToParentTextChange,placeholder:i._("Say something about this episode..."),resize:"none",rows:3,shouldAutoGrow:false}),c("React").createElement(c("Image.react"),{className:"_4bti",src:this.props.parentPageProfilePic})):null)},_renderCrosspostOnParentPageSection:function l(){if(!this.state.isEpisode||!this.props.showCrosspostToParentPageOption||!this.props.isShowPage)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("InputLabel.react"),{label:i._("Crosspost to {parent page name}",[i.param("parent page name",c("React").createElement(c("XUIText.react"),{weight:"bold"},this.props.parentPageName))]),labelClassName:"_2iy_"+(!this.props.canEditShowAndParent?" _1h65":""),helpText:i._("When you publish your episode, it will be crossposted to {parent page name}. The post will include your original description and a link to follow your Show.",[i.param("parent page name",this.props.parentPageName)])},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.state.shareToParentPageOptionSelected,onChange:this.onSelectShareToParentPageOption,disabled:!this.props.canEditShowAndParent})),this.props.canEditShowAndParent?null:c("React").createElement(c("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"light",size:"meta1"},i._("Your show is attributed to another Page, so you can automatically crosspost to that Page if you're an admin. Contact {parent page link} to become an admin.",[i.param("parent page link",c("React").createElement(c("Link.react"),{href:this.props.parentPageURI,target:"_blank"},this.props.parentPageName))])))},onCategoryChange:function l(event){c("ComposerVideoUploadActions").updateCategory(this.context.composerID,event.value)},onContentTagChange:function l(event){c("ComposerVideoUploadActions").updateContentTags(this.context.composerID,event)},onGameChange:function l(event){c("ComposerVideoUploadActions").updateGame(this.context.composerID,event)},onTitleChange:function l(event){c("ComposerVideoUploadActions").updateTitle(this.context.composerID,event.target.value);this.setState({title:event.target.value,shouldShowTitleErrorMessage:true})},onFeedTypeChange:function l(event){var m=event.target.checked?c("VideoFeedType").HIGHLIGHTED.index:c("VideoFeedType").NOT_HIGHLIGHTED.index;c("ComposerVideoUploadActions").updateFeedType(this.context.composerID,m);this.setState({highlightedInFeed:event.target.checked})},onExcludeNewsfeedChange:function l(event){var m=event.target.checked;c("ComposerVideoUploadActions").updateExcludeNewsfeed(this.context.composerID,m);this.setState({excludeNewsfeed:event.target.checked})},onSelectShareToParentPageOption:function l(event){var m=event.target.checked;c("ComposerVideoUploadActions").updateShareToParentPageOptionSelected(this.context.composerID,m);this.setState({shareToParentPageOptionSelected:m})},onSelectShareToParentTextChange:function l(event){c("ComposerVideoUploadActions").updateShareToParentPageText(this.context.composerID,event.target.value)},renderPreviewSection:function l(){return c("React").createElement("div",{id:"customizeThumbnail"},c("React").createElement(c("ComposerVideoUploadPreviewSection.react"),{allowCustomThumbnail:this.props.allowCustomThumbnail,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,generateThumbnails:this.props.generateThumbnails,isShowPage:this.props.isShowPage||this.props.isPageTrailer,showMarkURI:this.props.showMarkURI,isSquareVideo:this.props.isSquareVideo,isVideoUpload:this.props.isVideoUpload,squareThumbnailURI:this.props.squareThumbnailURI,logger:this.props.logger,selectedThumbnail:this.props.selectedThumbnail,showThumbnailScrubber:this.props.showThumbnailScrubber,targetID:this.props.targetID,thumbnails:this.props.thumbnails,videoID:this.props.videoID,videoFile:this.props.videoFile,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection}))},_renderNuxTour:function l(){if(this.props.isShowPage&&this.props.canSeeUploadVideoDialogShowsNux)return c("React").createElement(c("ShowsUploadDialogNuxTour.react"),null);return null},render:function l(){return c("React").createElement("div",{className:"_4q0-"+(this.state.isEpisode&&(this.props.showShareToParentPageOption||this.props.showCrosspostToParentPageOption)?" _3yq9":"")+(this.props.compactMode?" _2d5h":"")+(!this.props.shown?" _2oq6":"")},this._renderMetadataSection(),this.renderPreviewSection(),this.renderLayers(),this._renderNuxTour())}});f.exports=k}),null);
__d("ComposerVideoUploadCaptionsTab.react",["cx","fbt","invariant","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoTabsIdentifiers","ComposerVideoUploadStore","ComposerVideoUploadActions","React","ReactComposerContextTypes","VideoCaptionList.react","VideoCaptionFile","VideoComposerDialogCaptionsContainer.react","VideoComposerDialogCaptionsStore","VideoComposerDialogCaptionsTabActions","VideoUploadUILoggerEvents","VideoUploadUIError"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("React").PropTypes,l=c("React").createClass({displayName:"ComposerVideoUploadCaptionsTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function m(n,o){var p=c("ComposerVideoUploadStore").getCaptions(n),q=c("ComposerVideoUploadStore").getLiveCaptions(n),r=c("ComposerVideoUploadStore").getLastCaptionUploadErrorMessage(n),s=c("ComposerVideoUploadStore").getVideoDurationInSec(n);return{captions:p,liveCaptions:q,lastCaptionUploadErrorMessage:r,videoDurationInSec:s}}},propTypes:{accessToken:k.string,isDisabled:k.bool,logger:k.object,showAutoCaptionsSection:k.bool,showDefaultLocaleRow:k.bool,showLiveCaptionSection:k.bool,shown:k.bool,videoFile:k.object,videoID:k.string,pageID:k.string,shouldShowNewCaptionsFlow:k.bool,isVideoUploaded:k.bool,isEditFlow:k.bool},componentWillReceiveProps:function m(n){var o=this.props&&this.props.shouldShowNewCaptionsFlow&&!this.props.shown&&n.shown;if(o&&!c("VideoComposerDialogCaptionsStore").wasTabOpenedInOldComposer()){c("VideoComposerDialogCaptionsTabActions").emitOldComposerCaptionTabOpenEvent();c("VideoComposerDialogCaptionsTabActions").tryLogCaptionLandingScreenOpenEvent()}},_onRemoveCaption:function m(n){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_REMOVED);var o=this.state.captions.filter(function(q){return n!=q.getLocale()});c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,o);var p=this.state.liveCaptions.filter(function(q){return n!=q.getLocale()});c("ComposerVideoUploadActions").updateLiveCaptions(this.context.composerID,p)},_onUploadClick:function m(){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_UPLOAD_BUTTON_CLICKED)},_onUploadCaption:function m(n){__p&&__p();var o=n.files,p=this.state.captions.slice(0),q=this.state.liveCaptions.slice(0),r=false,s=null,t=null;Array.from(o).forEach(function(u){__p&&__p();this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_SELECTED);var v=c("VideoCaptionFile").fromFile(u),w=this._getCaptionError(v,p,q);if(w){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_ERROR,w);s=w;t=v}else{p.push(v);r=true}}.bind(this));if(r)c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,p);if(s)c("ComposerVideoUploadActions").updateLastCaptionUploadErrorMessage(this.context.composerID,this._getCaptionErrorMessage(s,t))},_getCaptionError:function m(n,o,p){var q=null;if(!n)q=c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT;else if(this._isDuplicateLocale(n.getLocale(),o)||this._isDuplicateLocale(n.getLocale(),p))q=c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE;return q},_getCaptionErrorMessage:function m(n,o){switch(n){case c("VideoUploadUIError").CAPTION_ERROR_WRONG_FORMAT:return i._("You uploaded a .SRT file with an incorrect file name. Please use this format: filename{suffix}",[i.param("suffix",".en_US.srt")]);case c("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE:return i._("You have already added a caption file for {language}. Please remove the older caption file before adding a new one.",[i.param("language",o.getLocaleName())]);default:return i._("There was an error uploading your caption file.")}},_isDuplicateLocale:function m(n,o){return o.some(function(p){return p.getLocale()===n})},_onChangeDefaultLocale:function m(n){this._logEvent(c("VideoUploadUILoggerEvents").CAPTION_DEFAULT_LOCALE_CHANGED);var o=this.state.captions.slice(0);o.forEach(function(q){q.setIsDefault(n==q.getLocale())});c("ComposerVideoUploadActions").updateCaptions(this.context.composerID,o);var p=this.state.liveCaptions.slice(0);p.forEach(function(q){q.setIsDefault(n==q.getLocale())});c("ComposerVideoUploadActions").updateLiveCaptions(this.context.composerID,p)},_renderCaptions:function m(){var n=this.state.captions,o=this.props.videoFile;if(o)o instanceof File||j(0);var p=this.props.shouldShowNewCaptionsFlow?c("React").createElement(c("VideoComposerDialogCaptionsContainer.react"),{accessToken:this.props.accessToken,videoFile:o,video_id:this.props.videoID?this.props.videoID:"",composerID:this.context.composerID,pageID:this.props.pageID?this.props.pageID:"",isVideoUploaded:this.props.isVideoUploaded===true,videoDurationInSec:this.state.videoDurationInSec,isEditFlow:this.props.isEditFlow,isOldComposer:true}):c("React").createElement(c("VideoCaptionList.react"),{accessToken:this.props.accessToken,allowBulkUpload:true,className:"_4vnn",captions:n,captionsEditable:!this.props.isDisabled,liveCaptions:this.state.liveCaptions,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showDefaultLocaleRow:this.props.showDefaultLocaleRow,showLiveCaptionSection:this.props.showLiveCaptionSection,videoID:this.props.videoID,onUploadClick:this._onUploadClick,onRemoveCaption:this._onRemoveCaption,onUploadCaption:this._onUploadCaption,onSetDefaultCaption:this._onChangeDefaultLocale,uploadErrorMessage:this.state.lastCaptionUploadErrorMessage});return c("React").createElement("div",null,p)},_logEvent:function m(n,o){if(this.props.logger)this.props.logger.logEvent(n,c("ComposerVideoTabsIdentifiers").CAPTIONS,o)},render:function m(){return c("React").createElement("div",{className:(!this.props.shouldShowNewCaptionsFlow?"_4vnp":"")+(!this.props.shown?" _2oq6":"")+(this.props.shouldShowNewCaptionsFlow?" _1vbd":"")},c("React").createElement("div",{className:"_4vnq"},this._renderCaptions()))}});f.exports=l}),null);
__d("ComposerVideoUploadPermissionsTab.react",["cx","fbt","BUISwitch.react","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoTabsIdentifiers","ComposerVideoUploadActions","ComposerVideoUploadStore","FixedDataTable.react","FixedDataTableColumn.react","Link.react","PageSettingsRef","React","ReactComposerContextTypes","VideoUploadUILoggerEvents","XPagesManagerSettingsController","XUIGrayText.react","XUIText.react","XUIButton.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=54,k=666,l=28,m=52,n=235,o=c("React").PropTypes,p=c("React").createClass({displayName:"ComposerVideoUploadPermissionsTab",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],statics:{calculateState:function q(r,s){var t=c("ComposerVideoUploadStore").getPermissions(r);return{permissions:t}}},propTypes:{canCrosspostOutsideBusiness:o.bool,isDisabled:o.bool,logger:o.object,shown:o.bool,showCrosspostingHelpCenter:o.bool,targetID:o.string.isRequired},onPermissionsChange:function q(r,s){this._logEvent(c("VideoUploadUILoggerEvents").PERMISSIONS_CHANGED);var t=this.state.permissions;t[s].allow=r;this.setState({permissions:t});c("ComposerVideoUploadActions").updatePermissions(this.context.composerID,t)},_getColumnsConfig:function q(){var r=[{cellRenderer:function(s,t,u,v){return c("React").createElement("div",null,c("React").createElement(c("BUISwitch.react"),{value:s,onToggle:function(){return this.onPermissionsChange(!s,v)}.bind(this)}))}.bind(this),key:"allow",label:i._("Allow"),width:j,visible:true},{cellRenderer:function s(t){return c("React").createElement("div",null,t)},width:k,key:"business",label:i._("Business"),visible:!this.props.canCrosspostOutsideBusiness},{cellRenderer:function s(t){return c("React").createElement("div",null,t)},width:k,key:"name",label:i._("Other Pages"),visible:this.props.canCrosspostOutsideBusiness}];return r.filter(function(s){return s.visible})},_renderColumns:function q(){var r=this._getColumnsConfig();return r.map(function(s){return c("React").createElement(c("FixedDataTableColumn.react"),{width:s.width,key:s.key,dataKey:s.key,label:s.label,cellRenderer:s.cellRenderer})})},_renderTitle:function q(){if(this.props.canCrosspostOutsideBusiness){var r=c("XPagesManagerSettingsController").getURIBuilder().setString("page_token",this.props.targetID).setString("tab","video_crossposting").setString("ref",c("PageSettingsRef").VIDEO_COMPOSER).getURI(),s=c("React").createElement(c("Link.react"),{href:r,target:"_blank"},i._("Settings")),t=c("React").createElement(c("Link.react"),{href:"/help/678485232304895",target:"_blank"},i._("Help Center"));return i._("Allow other Pages to use this video in their posts. Add Pages in {Link. =Settings}. Learn more about crossposting in the {Link. =Help Center}.",[i.param("Link. =Settings",s),i.param("Link. =Help Center",t)])}else{var u=null;if(this.props.showCrosspostingHelpCenter)u=c("React").createElement(c("Link.react"),{href:"/business/help/457328234477362",target:"_blank"},i._("Learn more"));return i._("Allow other Pages within your Business Manager to use this video. {Link. =Learn more}.",[i.param("Link. =Learn more",u)])}},_renderNoPermissions:function q(){if(this.state.permissions.length>0)return null;return c("React").createElement("div",{className:"_4pbx"},c("React").createElement(c("XUIText.react"),{display:"block",size:"body2",weight:"normal"},i._("Share Your Video With Other Pages")),c("React").createElement(c("XUIGrayText.react"),{className:"_3-8y",display:"block",size:"meta1",weight:"normal"},i._("You can choose to crosspost videos with any Page and have access to total performance insights.")),c("React").createElement(c("XUIGrayText.react"),{className:"_3-8w",display:"block",size:"meta1",weight:"normal"},i._("You control which of your videos are allowed to be crossposted.")),c("React").createElement(c("XUIButton.react"),{className:"_3-8y",href:"/help/678485232304895",label:i._("Learn More"),size:"medium"}))},_renderBody:function q(){var r=this._getColumnsConfig().reduce(function(u,v){return u+v.width},0),s=this.state.permissions.length>0,t=this.state.permissions.length>0?n:l+2;return c("React").createElement("div",{className:"_4vov"+(!s?" _4pby":"")},c("React").createElement(c("FixedDataTable.react"),{width:r,height:t,rowsCount:this.state.permissions.length,rowGetter:function(u){return this.state.permissions[u]}.bind(this),headerHeight:l,rowHeight:m},this._renderColumns()),this._renderNoPermissions())},_logEvent:function q(r,s){if(this.props.logger)this.props.logger.logEvent(r,c("ComposerVideoTabsIdentifiers").PERMISSIONS,s)},render:function q(){return c("React").createElement("div",{className:"_4vp0"+(!this.props.shown?" _2oq6":"")+" _4vp1"},c("React").createElement("div",{className:"_4vp2"},this._renderTitle()),this._renderBody())}});f.exports=p}),null);
__d("ComposerVideoUploadRightsTab.react",["cx","fbt","ComposerVideoUploadSection.react","React","VideoCopyrightAttributionSelector.react","VideoCopyrightGeoSelector.react","VideoCopyrightMatchRuleSelector.react","VideoCopyrightMonitoringSelector.react","VideoCopyrightWhitelistSection.react","CopyrightReferenceCategorySelector.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.$ComposerVideoUploadRightsTab1=function(){"use strict";var n=c("React").createElement(c("VideoCopyrightWhitelistSection.react"),{canSeeIGMatches:this.props.canSeeIGMatches,whitelistedFBUsers:this.props.whitelistedFBUsers||[],onFBWhitelistUpdated:this.props.onFBWhitelistUpdated,disabled:this.props.isLive,whitelistedIGUserNames:this.props.whitelistedIGUserNames,onIGWhitelistUpdated:this.props.onIGWhitelistUpdated});return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Grant Permissions"),tooltip:i._("Grant permission to any Page or person on {what platform the publisher can see} to upload videos that contain this one.",[i.param("what platform the publisher can see",this.props.canSeeIGMatches?i._("Facebook or Instagram"):i._("Facebook"))])},n)};m.prototype.$ComposerVideoUploadRightsTab2=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Specify Ownership"),tooltip:i._("Ownership establishes what element of the content belong to you in what parts of the world")},c("React").createElement(c("VideoCopyrightMonitoringSelector.react"),{onChange:this.props.onMonitoringTypeChange,value:this.props.monitoringType,disabled:this.props.isLive}))};m.prototype.$ComposerVideoUploadRightsTab3=function(){"use strict";if(!this.props.showAttributionsSection||!this.props.onAttributionChange)return null;return c("React").createElement(c("ComposerVideoUploadSection.react"),{className:"_3-8-",title:i._("Apply Attribution"),tooltip:i._("Attribution is for matching videos connected to your Monitor match rules. Attribution is added to matching content on Facebook. Reference files can only be connected to one Attribution.")},c("React").createElement(c("VideoCopyrightAttributionSelector.react"),{accessToken:this.props.accessToken,hasError:this.props.hasAttributionError,onChange:this.props.onAttributionChange,pageID:this.props.targetID,selectedAttribution:this.props.attributionID}))};m.prototype.$ComposerVideoUploadRightsTab4=function(){"use strict";return c("React").createElement(c("VideoCopyrightGeoSelector.react"),{className:"_3-8y _3ee0",onChange:this.props.onGeoChange,selectedCountries:this.props.ownershipCountries,areCountriesIncluded:this.props.areCountriesIncluded,shouldShowIncludeExcludeGeoOptions:true,disabled:this.props.isLive})};m.prototype.$ComposerVideoUploadRightsTab5=function(){"use strict";return c("React").createElement(c("ComposerVideoUploadSection.react"),{title:i._("Apply Match Rule"),tooltip:i._("Select which rule to apply to matching content")},c("React").createElement(c("VideoCopyrightMatchRuleSelector.react"),{accessToken:this.props.accessToken,onChange:this.props.onMatchRuleChange,onCreateNewRule:this.props.onCreateNewMatchRule,pageID:this.props.targetID,selectedRule:this.props.ruleID,disabled:this.props.isLive}))};m.prototype.$ComposerVideoUploadRightsTab6=function(){"use strict";return c("React").createElement(c("CopyrightReferenceCategorySelector.react"),{onReferenceCategoryChange:this.props.onReferenceCategoryChange,selectedCategory:this.props.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError})};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_4clk"+(!this.props.shown?" _2oq6":"")},c("React").createElement("div",{className:"_4cll"},this.$ComposerVideoUploadRightsTab2(),this.$ComposerVideoUploadRightsTab4(),this.$ComposerVideoUploadRightsTab6()),c("React").createElement("div",{className:"_4cll _4clm"},this.$ComposerVideoUploadRightsTab5(),this.$ComposerVideoUploadRightsTab3(),this.$ComposerVideoUploadRightsTab1()))};function m(){"use strict";j.apply(this,arguments)}m.propTypes={accessToken:l.string,areCountriesIncluded:l.bool,attributionID:l.string,hasAttributionError:l.bool,onAttributionChange:l.func,onCreateNewMatchRule:l.func,onGeoChange:l.func.isRequired,onMatchRuleChange:l.func.isRequired,onMonitoringTypeChange:l.func.isRequired,onReferenceCategoryChange:l.func.isRequired,onFBWhitelistUpdated:l.func.isRequired,onIGWhitelistUpdated:l.func.isRequired,shown:l.bool,targetID:l.string.isRequired,monitoringType:l.string,ownershipCountries:l.array,ruleID:l.string,whitelistedFBUsers:l.array,isLiveBroadcast:l.bool,isLive:l.bool,selectedCategory:l.string,showCategoryRequiredError:l.bool,showAttributionsSection:l.bool,canSeeIGMatches:l.bool};m.defaultProps={areCountriesIncluded:true};f.exports=m}),null);
__d("ComposerVideoUploadRightsTabContainer.react",["ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerVideoUploadActions","ComposerVideoUploadRightsTab.react","ComposerVideoUploadStore","ReactComponentWithPureRenderMixin","React","VideoCopyrightUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ComposerVideoUploadRightsTabContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"))],propTypes:{accessToken:h.string,onCreateNewMatchRule:h.func.isRequired,onLogEvent:h.func.isRequired,shown:h.bool,targetID:h.string.isRequired,showAttributionsSection:h.bool,showCategoryRequiredError:h.bool,canSeeIGMatches:h.bool},statics:{calculateState:function j(k,l){var m=c("ComposerVideoUploadStore").getCopyrightMonitoringType(k)||c("VideoCopyrightUtils").DEFAULT_MONITORING_TYPE,n=c("ComposerVideoUploadStore").getCopyrightRuleID(k),o=c("ComposerVideoUploadStore").getCopyrightWhitelistedFBUsers(k),p=c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(k),q=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(k),r=c("ComposerVideoUploadStore").getAreCopyrightCountriesIncluded(k),s=c("ComposerVideoUploadStore").getCopyrightReferenceCategory(k),t=c("ComposerVideoUploadStore").getCopyrightAttributionID(k);return{attributionID:t,monitoringType:m,ownershipCountries:q,areCountriesIncluded:r,ruleID:n,whitelistedIGUserNames:p,whitelistedFBUsers:o,selectedCategory:s}}},render:function j(){return c("React").createElement(c("ComposerVideoUploadRightsTab.react"),{accessToken:this.props.accessToken,attributionID:this.state.attributionID,hasAttributionError:false,shown:this.props.shown,targetID:this.props.targetID,onAttributionChange:this.onAttributionChange,onCreateNewMatchRule:this.props.onCreateNewMatchRule,onGeoChange:this.onGeoChange,onMatchRuleChange:this.onMatchRuleChange,onMonitoringTypeChange:this.onMonitoringTypeChange,onReferenceCategoryChange:this.onReferenceCategoryChange,whitelistedIGUserNames:this.state.whitelistedIGUserNames,onIGWhitelistUpdated:this.onIGWhitelistUpdated,onFBWhitelistUpdated:this.onFBWhitelistUpdated,monitoringType:this.state.monitoringType,ownershipCountries:this.state.ownershipCountries,areCountriesIncluded:this.state.areCountriesIncluded,ruleID:this.state.ruleID,whitelistedFBUsers:this.state.whitelistedFBUsers,selectedCategory:this.state.selectedCategory,showCategoryRequiredError:this.props.showCategoryRequiredError,showAttributionsSection:this.props.showAttributionsSection,canSeeIGMatches:this.props.canSeeIGMatches})},onMonitoringTypeChange:function j(event){c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.context.composerID,event.value);this.props.onLogEvent("monitoring_type_updated")},onFBWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedFBUsers(this.context.composerID,k.slice());this.props.onLogEvent("whitelist_updated")},onIGWhitelistUpdated:function j(k){c("ComposerVideoUploadActions").updateCopyrightWhitelistedIGUserNames(this.context.composerID,k);this.props.onLogEvent("whitelist_ig_users_updated")},onGeoChange:function j(k,l){c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.context.composerID,k,l);this.props.onLogEvent("ownership_countries_updated")},onMatchRuleChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightRuleID(this.context.composerID,k);this.props.onLogEvent("rule_updated")},onAttributionChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightAttributionID(this.context.composerID,k);this.props.onLogEvent("attribution_updated")},onReferenceCategoryChange:function j(k){c("ComposerVideoUploadActions").updateCopyrightReferenceCategory(this.context.composerID,k);this.props.onLogEvent("reference_category_updated")}});f.exports=i}),null);
__d("XEmbeddedVideoEmbedDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/embed/async/dialog/",{url:{type:"String",required:true},source:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d("ComposerVideoUploadDetails.react",["ix","cx","fbt","xuiglyph","ActorURI","Arbiter","AsyncDialog","AsyncRequest","ComposerVideoUploadSphericalConstants","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ComposerReferenceFileExcludeSegmentsContainer.react","ComposerReferenceFileUploadAttributionsTabContainer.react","ComposerReferenceFileUploadRightsTabContainer.react","ComposerReferenceFileUploadWhitelistTabContainer.react","ComposerVideoAdBreaksTabContainer.react","ComposerVideoAdBreakStore","ComposerVideoTabsIdentifiers","ComposerVideoUploadActions","ComposerVideoUploadAdvancedTab.react","ComposerVideoUploadBasicTab.react","ComposerVideoUploadCaptionsTab.react","ComposerVideoUploadPermissionsTab.react","ComposerVideoUploadRightsTabContainer.react","ComposerVideoUploadSphericalControlsTabContainer.react","ComposerVideoUploadStore","DOM","DOMScroll","FileInput.react","Image.react","MNPageComposerUtils","PopoverMenu.react","ProfileVideoWWWFrontendActionTypedLogger","ProgressBar.react","PublishingToolsWebdriverTestDataIDs","React","ReactLayeredComponentMixin_DEPRECATED","ReactXUIMenu","UserAgent","VideoComposerDialogUIEvent","VideoCopyrightRuleDialogSource","VideoCopyrightRuleTemplateBlankSelectDialog","VideoCopyrightUITypedLogger","VideoUploadFileValidator","VideoUploadLogger","VideoUploadUILogger","VideoUploadUILoggerEvents","XEmbeddedVideoEmbedDialogController","XUIAmbientNUX.react","XUIButton.react","XUIMenuSeparator.react","XUINotice.react","XUIPageNavigation.react","XVideoCopyrightRuleDialogController","dotAccess","intlNumUtils","nullthrows","requiredIfPropIsTruthy"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=c("ReactXUIMenu").Item,m=c("XUIPageNavigation.react").Group,n=c("XUIPageNavigation.react").Item,o=c("React").PropTypes,p=c("React").createClass({displayName:"ComposerVideoUploadDetails",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComposerPropsAndStoreBasedStateMixin")(c("ComposerVideoUploadStore"),c("ComposerVideoAdBreakStore")),c("ReactLayeredComponentMixin_DEPRECATED")],statics:{calculateState:function q(r,s){var t=c("ComposerVideoUploadStore").getEpisodeData(r),u=c("ComposerVideoUploadStore").getTitle(r).trim(),v=s.isShowPage&&(u===""||!t||t.isEpisode===undefined||t.isEpisode===null),w=s.isPageTrailer&&u==="",x=s.makeTitleMandatory&&u==="",y=c("ComposerVideoUploadStore").getNumProducts(r);return{shown:true,showRightsTab:c("ComposerVideoUploadStore").getCopyrighted(r),showSphericalTab:c("ComposerVideoUploadStore").getSpherical(r),shouldDisableAdInsertionTab:c("ComposerVideoAdBreakStore").getShouldDisableAdBreakInsertion(r,s.adBreaksTabDisabledReasons,s.hasAdBreakInsertionGapRule),permissions:c("ComposerVideoUploadStore").getPermissions(r)||[],isFeatured:c("ComposerVideoUploadStore").getIsFeaturedVideo(r),embeddable:c("ComposerVideoUploadStore").getEmbeddable(r),isRequiredFieldsMissingForShowsVideo:v,isTitleMissingForShowTrailer:w,isTitleMandatoryAndMissing:x,isProductTaggerPostButtonDisabled:c("MNPageComposerUtils").isProductTaggerPostButtonDisabled(y||0,s.minNumProducts||0)}},getAttachmentWillReceivePropsState:function q(r,s,t){var u={baseProgress:0};if(!t.showUploadProgressBar&&s.showUploadProgressBar)u.baseProgress=t.progress;if(t.videoFile!==s.videoFile){u.baseProgress=0;c("ComposerVideoUploadActions").updateGeneratedThumbnails(r,[])}return u},getAttachmentInitialState:function q(r,s){var t=c("ComposerVideoUploadStore").getPermissions(r)||[];return{editorTab:s.isReferenceVideo?c("ComposerVideoTabsIdentifiers").RIGHTS:s.editorTab,initialPermissionsAllowState:t.map(function(u){return u.allow})}}},propTypes:{accessToken:o.string,allowCustomThumbnail:o.bool,canCrosspostOutsideBusiness:o.bool,canEditCustomLabels:o.bool,canEditExternalVideoID:o.bool,canEditFundraiserForStoryCharityID:o.bool,isDemonetized:o.bool,showAdBreaksTab:o.bool,adBreaksTabDisabledReasons:o.array,composerID:o.string,hasAdBreakInsertionGapRule:o.bool.isRequired,isAdBreakInsertionRedesignV1:o.bool,isAdBreakInsertionRedesignV2:o.bool,showAdBreakAdminPreviewSettings:o.bool,showAdBreakOffsetEditorNux:o.bool,defaultCategory:o.number,editorTab:o.string,generateThumbnails:o.bool,improvedContentTags:o.bool,isCarouselPreviewEditing:o.bool,isEditing:o.bool.isRequired,canMakeFeatured:o.bool,isReferenceVideo:o.bool,isProfileVideo:o.bool,isSecret:o.bool,isUserUploadFlow:o.bool,isVideoUpload:o.bool,logger:o.instanceOf(c("VideoUploadLogger")),onVideoFileInputChange:o.func,onMakeFeaturedVideo:o.func,pageAccessToken:o.string,postPending:o.bool,progress:o.number,selectedThumbnail:o.object,canEditAdBreaksTabBlockListContent:o.bool.isRequired,adBreaksExperimentPublicMetadata:o.object,showAutoCaptionsSection:o.bool,showLiveCaptionSection:o.bool,showCaptionsTab:o.bool,showCopyrightSection:o.bool,showCrosspostingHelpCenter:o.bool,showCustomLabels:o.bool,showDisturbingSection:o.bool,showExternalVideoIDSection:o.bool,showFeedTypeCheckbox:o.bool,showHighlightedVideosNux:o.bool,showInternalVideoSettings:o.bool,showPermissionsTab:o.bool,showAdvancedTabSphericalCheckbox:o.bool,showSphericalControlsTab:o.bool,showTagSelectorNux:o.bool,showTagSelectorToken:o.bool,showThumbnailExperimentSection:o.bool,showThumbnailScrubber:o.bool,showAttributionsSection:o.bool,showUploadProgressBar:o.bool,squareThumbnailURI:o.string,stage:o.oneOf(["idle","uploading","upload-finished","upload-failed","processing","processingFinished","posting","finished","post-failed"]).isRequired,thumbnail:o.object,UILogger:o.instanceOf(c("VideoUploadUILogger")),newUIEventLogFunc:o.func,uploadVideoID:o.string,videoAssetID:o.string,videoFile:o.object,videoID:c("requiredIfPropIsTruthy")("isEditing",o.string),videoUrlHD:o.string,videoUrlSD:o.string,showOmnistabSection:o.bool,hasOmnistabEncoding:o.bool,expirableCrosspostsCount:o.number,showCrosspostedPermissionsNUX:o.bool,useEmbedOptions:o.bool,embedUrl:o.string,isShowPage:o.bool,isPageTrailer:o.bool,showMarkURI:o.string,minEpisodeDuration:o.number,canSeeUploadVideoDialogShowsNux:o.bool,shouldShowPageOnboardingForAdBreak:o.bool,showCategoryRequiredError:o.bool,isMonetizationOnboarded:o.bool,canSeeNewMatchRuleDialog:o.bool,makeTitleMandatory:o.bool,showShareToParentPageOption:o.bool,showCrosspostToParentPageOption:o.bool,canEditShowAndParent:o.bool,parentPageName:o.string,parentPageProfilePic:o.string,parentPageURI:o.string,shouldShowNewCaptionsFlow:o.bool,canSeeIGMatches:o.bool,showGamesTypeahead:o.bool,isEditFlow:o.bool,minNumProducts:o.number},getDefaultProps:function q(){return{accessToken:null,allowCustomThumbnail:false,canCrosspostOutsideBusiness:false,canEditAdBreaksTabBlockListContent:false,canEditCustomLabels:false,canEditExternalVideoID:false,canEditFundraiserForStoryCharityID:false,showAdBreaksTab:false,adBreaksTabDisabledReasons:null,canMakeFeatured:false,editorTab:c("ComposerVideoTabsIdentifiers").BASIC,generateThumbnails:false,hasOmnistabEncoding:false,improvedContentTags:false,isCarouselPreviewEditing:false,isEditing:false,isPageTrailer:false,isProfileVideo:false,isReferenceVideo:false,isSecret:false,isUserUploadFlow:false,isVideoUpload:false,makeTitleMandatory:false,hasAdBreakInsertionGapRule:true,isAdBreakInsertionRedesignV1:false,isAdBreakInsertionRedesignV2:false,showAdBreakAdminPreviewSettings:false,showAdBreakOffsetEditorNux:false,showAdvancedTabSphericalCheckbox:false,showCaptionsTab:false,showCopyrightSection:false,showCrosspostingHelpCenter:false,showCrosspostedPermissionsNUX:false,showCustomLabels:false,showDisturbingSection:false,showExternalVideoIDSection:false,showFeedTypeCheckbox:false,showHighlightedVideosNux:false,showInternalVideoSettings:false,showPermissionsTab:false,showSecretVideoOption:true,showSphericalControlsTab:false,showThumbnailExperimentSection:false,showThumbnailScrubber:false,showUploadProgressBar:false,shouldShowPageOnboardingForAdBreak:false,showCategoryRequiredError:false,stage:"idle",showShareToParentPageOption:false,showCrosspostToParentPageOption:false,canEditShowAndParent:false,parentPageName:null,parentPageProfilePic:null,parentPageURI:null,showAttributionsSection:false,canSeeIGMatches:false,showGamesTypeahead:false,isEditFlow:false,minNumProducts:0}},componentWillReceiveProps:function q(r){if(r.dialogVisible&&!this.props.dialogVisible){this.forceUpdate();if(!this.props.isVideoUpload)this.refs.tabbar.resizeNavbarGroups()}},_shouldDisablePostButton:function q(){return this.state.isRequiredFieldsMissingForShowsVideo||this.state.isTitleMissingForShowTrailer||this.state.isTitleMandatoryAndMissing||this.state.isProductTaggerPostButtonDisabled},_getDisabledErrorMessage:function q(){if(this.state.isTitleMandatoryAndMissing)return j._("To publish, your video needs a title");else if(this.state.isProductTaggerPostButtonDisabled&&this.props.minNumProducts!==0)return j._("You must add at least {min_num_products} products",[j.param("min_num_products",this.props.minNumProducts)]);return null},componentDidUpdate:function q(){c("Arbiter").inform("composer/disablePostButton",{disabled:this._shouldDisablePostButton(),errorMessage:this._getDisabledErrorMessage()});window.dispatchEvent(new Event("componentDidUpdate"))},reset:function q(){this.setState({editorTab:this.props.isReferenceVideo?c("ComposerVideoTabsIdentifiers").RIGHTS:c("ComposerVideoTabsIdentifiers").BASIC,shown:true,showCategoryRequiredError:false})},_logEvent:function q(r){if(this.props.logger)this.props.logger.logEvent(r)},logCopyrightEvent:function q(r){var s=c("ComposerVideoUploadStore").getCopyrightOwnershipCountries(this.context.composerID).join(","),t=(c("ComposerVideoUploadStore").getCopyrightWhitelistedFBUsers(this.context.composerID)||[]).map(function(A){return A.id}).join(","),u=(c("ComposerVideoUploadStore").getCopyrightWhitelistedIGUserNames(this.context.composerID)||[]).join(","),v=c("ComposerVideoUploadStore").getCopyrightRuleID(this.context.composerID),w=c("ComposerVideoUploadStore").getCopyrightMonitoringType(this.context.composerID),x=c("ComposerVideoUploadStore").getCopyrighted(this.context.composerID),y=c("ComposerVideoUploadStore").getCopyrightExcludedSegments(this.context.composerID),z=y.map(function(A){return[A.start_time_in_sec,A.duration_in_sec,A.media_type].join(",")}).join(";");new(c("VideoCopyrightUITypedLogger"))().setEvent(r).setSource(this.props.isEditing?"video_edit_dialog":"video_upload_composer").setCopyrightContentID(this.props.videoID).setCopyrightChecked(x).setRightsHolderID(this._getTargetID()).setMonitoringType(w).setIsReference(this.props.isReferenceVideo).setOwnershipCountries(s).setWhitelistedIds(t).setWhitelistedIgUserIds(u).setRuleID(v).setMessage(z).log()},logExcludeSegmentsUpdateEvent:function q(){this.logCopyrightEvent("exclude_segments_updated")},isDisabled:function q(){return this.state.stage==="posting"},onTabClick:function q(r){if(this.props.UILogger)this.props.UILogger.logEvent(c("VideoUploadUILoggerEvents").TAB_SWITCH,r);if(this.props.newUIEventLogFunc&&r!==this.state.editorTab)this.props.newUIEventLogFunc(c("VideoComposerDialogUIEvent").TAB_SWITCHED,this.state.editorTab,r);var s={editorTab:r,hidePermissionsNUX:this.state.hidePermissionsNUX};if(r===c("ComposerVideoTabsIdentifiers").PERMISSIONS)s.hidePermissionsNUX=true;this.setState(s)},_toggleRightsTab:function q(r){this.logCopyrightEvent("copyright_toggled");this.setState({showRightsTab:r},function(){if(r===true)this.onTabClick(c("ComposerVideoTabsIdentifiers").RIGHTS)}.bind(this))},_toggleSphericalTab:function q(r){this.setState({showSphericalTab:r})},onVideoFileInputChange:function q(event){this._logEvent(c("VideoUploadLogger").EVENT_REPLACE_VIDEO);if(this.props.isProfileVideo)new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("replace_profile_video").setSessionID(this.props.composerID).log();var r=this.props.onVideoFileInputChange;if(r){var s=this.refs.videoFileInput.getFileInput();r(s)}},_getTargetID:function q(){return c("dotAccess")(this.props,"config.targetID")||this.props.targetID},getExpirableCrosspostCount:function q(){var r=0;if(!this.props.canCrosspostOutsideBusiness)r=this.props.expirableCrosspostsCount||0;else{var s=this.state.permissions,t=this.state.initialPermissionsAllowState;for(var u=0;u<s.length;u++)if(!s[u].allow&&t[u]&&s[u].expirable_posts_count)r+=s[u].expirable_posts_count}return r},hasRemovedBusinessSharing:function q(){return this.state.permissions.some(function(r,s){return!r.allow&&this.state.initialPermissionsAllowState[s]}.bind(this))},hasAddedBusinessSharing:function q(){return this.state.permissions.some(function(r,s){return r.allow&&!this.state.initialPermissionsAllowState[s]}.bind(this))},_downloadURL:function q(r){var s=c("DOM").create("a");s.download="";s.href=r;s.click()},_getDownloadMenuItemProps:function q(r){return c("UserAgent").isBrowser("Firefox")?{href:r,target:"_blank"}:{onclick:this._downloadURL.bind(this,r)}},_renderEditMenu:function q(){__p&&__p();var r=this.props.videoUrlSD,s=this.props.videoUrlHD,t=null,u=null;if(r!=null)t=c("React").createElement(l,this._getDownloadMenuItemProps(r),j._("Download SD"));if(s!=null)u=c("React").createElement(l,this._getDownloadMenuItemProps(s),j._("Download HD"));var v=null,w=null,x=this.state.isFeatured;if(this.props.onMakeFeaturedVideo&&this.props.canMakeFeatured&&!x){w=c("React").createElement(c("XUIMenuSeparator.react"),null);v=c("React").createElement(l,{onclick:this.props.onMakeFeaturedVideo},j._("Make Featured Video"))}var y=null,z=null;if(this.props.useEmbedOptions&&this.state.embeddable){y=c("React").createElement(c("XUIMenuSeparator.react"),null);var A=c("XEmbeddedVideoEmbedDialogController").getURIBuilder().setString("url",this.props.embedUrl).getURI();z=c("React").createElement(l,{href:A,rel:"dialog"},j._("Embed"))}var B=c("React").createElement(c("ReactXUIMenu"),null,v,z,y||w,t,u);return c("React").createElement(c("PopoverMenu.react"),{className:"_1j9",alignh:"right",menu:B},c("React").createElement(c("XUIButton.react"),{className:"_2pi7",image:c("React").createElement(c("Image.react"),{src:h("89847")}),label:j._("Settings"),labelIsHidden:true}))},renderTabbedEditor:function q(){__p&&__p();var r=void 0;if(this.props.showCaptionsTab)r=c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").CAPTIONS},j._("Captions"));var s;if(this.props.showPermissionsTab)s=c("React").createElement(n,{ref:"permissionsTabItem",href:"#",key:c("ComposerVideoTabsIdentifiers").PERMISSIONS},j._("Crossposting"));var t=null;if(this.props.showAdBreaksTab)t=c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADBREAKS},c("React").createElement("div",{className:this.state.shouldDisableAdInsertionTab?"_2kln":""}),j._("Ad Breaks"));return c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").BASIC,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").BASIC},j._("Basic")),r,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADVANCED},j._("Advanced")),this.state.showSphericalTab&&this.props.showSphericalControlsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").SPHERICAL},j._("360 Controls")):null,s,this.state.showRightsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")):null,t),this.props.isEditing?this._renderEditMenu():c("React").createElement("span",null)),this.renderBasicTab(),this.renderCaptionsTab(),this.renderAdvancedTab(),this.renderSphericalControlsTab(),this.renderPermissionsTab(),this.renderRightsTab(),this.renderAdBreaksTab())},hidePermissionsNux:function q(){this.setState({hidePermissionsNUX:true})},renderExcludeSegmentSection:function q(){if(this.props.showCopyrightSection)return c("React").createElement(c("ComposerReferenceFileExcludeSegmentsContainer.react"),{isUpload:!this.props.isEditing,logExcludeSegmentsUpdateEvent:this.logExcludeSegmentsUpdateEvent});return null},renderReferenceFileEditor:function q(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").RIGHTS,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")),this.props.showAttributionsSection?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ATTRIBUTIONS},j._("Attributions")):null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").WHITELIST},j._("Permissions")))),this.renderReferenceFileRightsTab(),this.renderReferenceFileWhitelistTab(),this.renderReferenceFileAttributionsTab()),this.renderExcludeSegmentSection())},renderRightsTab:function q(){if(!this.state.showRightsTab)return null;return c("React").createElement(c("ComposerVideoUploadRightsTabContainer.react"),{accessToken:this.props.pageAccessToken,onCreateNewMatchRule:this.createNewMatchRule,targetID:this._getTargetID(),onLogEvent:this.logCopyrightEvent,shown:!!this.state.showRightsTab&&this.state.editorTab===c("ComposerVideoTabsIdentifiers").RIGHTS,showAttributionsSection:this.props.showAttributionsSection,showCategoryRequiredError:this.props.showCategoryRequiredError,canSeeIGMatches:this.props.canSeeIGMatches})},renderReferenceFileRightsTab:function q(){return c("React").createElement(c("ComposerReferenceFileUploadRightsTabContainer.react"),{accessToken:this.props.pageAccessToken,targetID:this._getTargetID(),generateThumbnails:this.props.generateThumbnails,thumbnails:this.props.thumbnails,logger:this.props.logger,onCreateNewMatchRule:this.createNewMatchRule,videoFile:this.props.videoFile,selectedThumbnail:this.props.selectedThumbnail,showTabSelector:!this.props.isUserUploadFlow,videoID:this.props.videoID,isVideoUpload:this.props.isVideoUpload,onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").RIGHTS,showCategoryRequiredError:this.props.showCategoryRequiredError})},renderReferenceFileWhitelistTab:function q(){return c("React").createElement(c("ComposerReferenceFileUploadWhitelistTabContainer.react"),{onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").WHITELIST,canSeeIGMatches:this.props.canSeeIGMatches})},renderReferenceFileAttributionsTab:function q(){if(!this.props.showAttributionsSection)return null;return c("React").createElement(c("ComposerReferenceFileUploadAttributionsTabContainer.react"),{accessToken:c("nullthrows")(this.props.pageAccessToken),onLogEvent:this.logCopyrightEvent,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").ATTRIBUTIONS,targetID:this._getTargetID()})},renderLayers:function q(){if(!this.props.showCrosspostedPermissionsNUX||!this.props.showPermissionsTab||this.state.hidePermissionsNUX||!this.refs.permissionsTabItem)return null;return{tabNUX:c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.permissionsTabItem}.bind(this),onCloseButtonClick:function(){return this.hidePermissionsNux()}.bind(this),position:"below",alignment:"center",shown:!this.state.hidePermissionsNUX},j._("NEW! Now you can allow any Page to use your videos in their posts."))}},renderAdBreaksTab:function q(){if(!this.props.showAdBreaksTab)return null;return c("React").createElement(c("ComposerVideoAdBreaksTabContainer.react"),{adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,isDemonetized:this.props.isDemonetized,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,isEditing:this.props.isEditing,pageId:this._getTargetID(),serverSideDisabledReasons:this.props.adBreaksTabDisabledReasons,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,hasGapRule:this.props.hasAdBreakInsertionGapRule,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,isAdBreakInsertionRedesignV2:this.props.isAdBreakInsertionRedesignV2,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,shown:this.state.editorTab==c("ComposerVideoTabsIdentifiers").ADBREAKS,uploadVideoID:this.props.uploadVideoID,videoAssetID:this.props.videoAssetID,videoFile:this.props.videoFile,videoID:this.props.videoID})},renderBasicTab:function q(){return c("React").createElement(c("ComposerVideoUploadBasicTab.react"),{accessToken:this.props.pageAccessToken?this.props.pageAccessToken:this.props.accessToken,allowCustomThumbnail:this.props.allowCustomThumbnail,compactMode:this.props.compactMode,generateThumbnails:this.props.generateThumbnails,improvedContentTags:this.props.improvedContentTags,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isDisabled:this.isDisabled(),isPageTrailer:this.props.isPageTrailer,isShowPage:this.props.isShowPage,isSquareVideo:this.props.isProfileVideo,isVideoUpload:this.props.isVideoUpload,logger:this.props.logger,makeTitleMandatory:this.props.makeTitleMandatory,selectedThumbnail:this.props.selectedThumbnail,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showCategorySelector:!this.props.isUserUploadFlow,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").BASIC,showTabSelector:!this.props.isUserUploadFlow,showTagSelectorNux:this.props.showTagSelectorNux,showTagSelectorToken:this.props.showTagSelectorToken,showHighlightedVideosNux:this.props.showHighlightedVideosNux,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,showThumbnailScrubber:this.props.showThumbnailScrubber,squareThumbnailURI:this.props.squareThumbnailURI,onHighlightedVideosNuxDismiss:this.props.onHighlightedVideosNuxDismiss,targetID:this._getTargetID(),thumbnails:this.props.thumbnails,uiLogger:this.props.UILogger,videoFile:this.props.videoFile,videoID:this.props.videoID,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection,showShareToParentPageOption:this.props.showShareToParentPageOption,showCrosspostToParentPageOption:this.props.showCrosspostToParentPageOption,canEditShowAndParent:this.props.canEditShowAndParent,parentPageName:this.props.parentPageName,parentPageProfilePic:this.props.parentPageProfilePic,parentPageURI:this.props.parentPageURI,showGamesTypeahead:this.props.showGamesTypeahead})},_getCaptionsFlowVideoID:function q(){var r=!this.props.videoID&&this.props.shouldShowNewCaptionsFlow,s=r?this.props.uploadVideoID:this.props.videoID;return s||""},renderCaptionsTab:function q(){var r=!this.props.isSharedAsset,s=this._getCaptionsFlowVideoID()!=="",t=(this.props.stage==="upload-finished"||this.props.stage==="uploading")&&s||this.props.isEditing;return c("React").createElement(c("ComposerVideoUploadCaptionsTab.react"),{accessToken:this.props.pageAccessToken?this.props.pageAccessToken:this.props.accessToken,isDisabled:this.isDisabled(),logger:this.props.UILogger,showAutoCaptionsSection:this.props.showAutoCaptionsSection,showDefaultLocaleRow:r,showLiveCaptionSection:this.props.showLiveCaptionSection,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").CAPTIONS,videoFile:this.props.videoFile,videoID:this._getCaptionsFlowVideoID(),pageID:this._getTargetID(),shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,isEditFlow:this.props.isEditFlow,isVideoUploaded:t})},renderAdvancedTab:function q(){return c("React").createElement(c("ComposerVideoUploadAdvancedTab.react"),{canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,canEditFundraiserForStoryCharityID:this.props.canEditFundraiserForStoryCharityID,isCarouselPreviewEditing:this.props.isCarouselPreviewEditing,isEditing:this.props.isEditing,isPageTrailer:this.props.isPageTrailer,isSecret:this.props.isSecret,isVideoUpload:this.props.isVideoUpload,isShowPage:this.props.isShowPage,renderDistribution:this.renderDistribution,showCopyrightSection:this.props.showCopyrightSection,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showInternalVideoSettings:this.props.showInternalVideoSettings,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").ADVANCED,showSecretVideoOption:this.props.showSecretVideoOption,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showSphericalControlsTab:this.props.showSphericalControlsTab,targetID:this._getTargetID(),toggleRightsTab:this._toggleRightsTab,toggleSphericalTab:this._toggleSphericalTab,videoID:this.props.videoID,showDisturbingSection:this.props.showDisturbingSection})},renderSphericalControlsTab:function q(){if(!this.props.showSphericalControlsTab)return null;var r=c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.PAGE_COMPOSER_V1;if(this.props.isEditing)r=c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.EDIT_DIALOG_V1;if(this.props.isSharedAsset)r=c("ComposerVideoUploadSphericalConstants").COMPONENT_SOURCE.CROSSPOST_DIALOG_V1;return c("React").createElement(c("ComposerVideoUploadSphericalControlsTabContainer.react"),{showOmnistabSection:this.props.showOmnistabSection,hasOmnistabEncoding:this.props.hasOmnistabEncoding,isEditing:this.props.isEditing,shown:!!this.state.showSphericalTab&&this.state.editorTab===c("ComposerVideoTabsIdentifiers").SPHERICAL,videoFile:this.props.videoFile,videoID:this.props.videoID,targetID:this._getTargetID(),onTabClick:this.onTabClick,componentSource:r})},renderPermissionsTab:function q(){if(!this.props.showPermissionsTab)return null;return c("React").createElement(c("ComposerVideoUploadPermissionsTab.react"),{canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,isDisabled:this.isDisabled(),logger:this.props.UILogger,shown:this.state.editorTab===c("ComposerVideoTabsIdentifiers").PERMISSIONS,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,targetID:this._getTargetID()})},renderCarouselPreviewEditor:function q(){if(!this.props.showCopyrightSection)return c("React").createElement("div",{className:"_1_ha _5j6r"},this.renderBasicTab());return c("React").createElement("div",{className:"_5vx1 _1_ha"},c("React").createElement(c("XUIPageNavigation.react"),{className:"_1_hb",activeTabKey:this.state.editorTab,onTabClick:this.onTabClick,defaultActiveTabKey:c("ComposerVideoTabsIdentifiers").BASIC,ref:"tabbar"},c("React").createElement(m,null,c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").BASIC},j._("Basic")),this.props.showCopyrightSection?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").ADVANCED},j._("Advanced")):null,this.state.showRightsTab?c("React").createElement(n,{href:"#",key:c("ComposerVideoTabsIdentifiers").RIGHTS},j._("Rights")):null)),this.renderBasicTab(),this.renderAdvancedTab(),this.renderRightsTab())},renderUserUploadFlowEditor:function q(){return c("React").createElement("div",{className:"_1_ha"},this.renderBasicTab())},toggleVisible:function q(r){this.setState({shown:r})},openCreateNewMatchRuleDialog:function q(){__p&&__p();var r=c("dotAccess")(this.props,"config.targetID")||this.props.targetID;if(this.props.canSeeNewMatchRuleDialog)c("VideoCopyrightRuleTemplateBlankSelectDialog").show(r,this.props.pageAccessToken,this.props.isMonetizationOnboarded);else{var s=c("XVideoCopyrightRuleDialogController").getURIBuilder().setFBID("page_id",r).setEnum("source",c("VideoCopyrightRuleDialogSource").COMPOSER).setString("access_token",this.props.pageAccessToken).getURI();s=c("ActorURI").create(s,r);c("AsyncDialog").send(new(c("AsyncRequest"))(s),function(t){this.toggleVisible(false);var u=t.subscribe("hide",function(){this.toggleVisible(true);if(u){u.unsubscribe();u=null}}.bind(this))}.bind(this))}},createNewMatchRule:function q(){this.logCopyrightEvent("create_new_match_rule_clicked");if(c("DOMScroll").getScrollState().y!==0){c("DOMScroll").scrollToTop();setTimeout(this.openCreateNewMatchRuleDialog,500)}else this.openCreateNewMatchRuleDialog()},_navigateToBasicTab:function q(){this.setState({editorTab:c("ComposerVideoTabsIdentifiers").BASIC})},calculatePerceivedProgress:function q(){if(this.state.baseProgress===100)return 100;var r=this.state.baseProgress,s=100-r,t=this.props.progress?this.props.progress:0;return(t-r)*100/s},renderProgressBar:function q(){var r;if(!this.props.showUploadProgressBar)return null;var s=this.calculatePerceivedProgress(),t=c("intlNumUtils").formatNumber(s,1);if(s)r=j._("{percent}\u0025",[j.param("percent",t)]);return c("React").createElement("div",{"data-testid":s>=100?c("PublishingToolsWebdriverTestDataIDs").VIDEO_UPLOAD_COMPLETE_BAR:null,className:"_5w5h"+(!!s?" _3ufe":"")},c("React").createElement(c("ProgressBar.react"),{value:s,label:r}))},renderErrorNotice:function q(r,s){var t;if(s)t=c("React").createElement("div",{className:"_1gip"},c("React").createElement(c("FileInput.react"),{ref:"videoFileInput",onChange:this.onVideoFileInputChange},c("React").createElement(c("XUIButton.react"),{href:"#",label:j._("Replace Video")})));return c("React").createElement(c("XUINotice.react"),{use:"warn",className:"_3edu"},t,r)},renderErrorMessage:function q(r){if(!this.props.errorMessage)return null;return this.renderErrorNotice(this.props.errorMessage,r)},renderWarningMessages:function q(){var r=[];if(this.hasAddedBusinessSharing())r.push(c("React").createElement(c("XUINotice.react"),{key:"addedBusinessSharing",className:"_3-8y",use:"notify"},j._("By allowing other Pages to use this video, their Page admins will be able to see this post and use this video, even before it is published.")));var s=this.getExpirableCrosspostCount();if(this.hasRemovedBusinessSharing()&&s>0)r.push(c("React").createElement(c("XUINotice.react"),{key:"removedBusinessSharing",className:"_3-8y",use:"notify"},j._({"post":"By removing permission to use this video, {posts} post on other Pages that use it will be unpublished automatically.","posts":"By removing permission to use this video, {posts} posts on other Pages that use it will be unpublished automatically."},[j.param("posts",s),j["enum"](s===1?"post":"posts",{post:"post",posts:"posts"})])));return r},render:function q(){__p&&__p();var r=void 0,s=void 0,t=void 0;if(this.props.isReferenceVideo)t=this.renderReferenceFileEditor();else if(this.props.isCarouselPreviewEditing)t=this.renderCarouselPreviewEditor();else if(!this.props.isUserUploadFlow)t=this.renderTabbedEditor();else t=this.renderUserUploadFlowEditor();if(this.props.stage==="idle")return c("React").createElement("div",null);else if(this.props.stage==="post-failed"||this.props.stage==="upload-failed")r=this.renderErrorMessage(c("VideoUploadFileValidator").canReplaceVideoForError(this.props.errorCode));else s=this.renderProgressBar();return c("React").createElement("div",{className:"_5w5j"+(!this.state.shown?" _u_u":"")},t,s,r,this.renderWarningMessages())}});f.exports=p}),null);
__d("ComposerXVideoUploadWrapperMixin",["Arbiter","DOMContainer.react","React","SubscriptionsHandler","VideoUploadProgressBar","VideoUploadFile","VideoUploadUILogger","VideoUploadUILoggerEvents"],(function a(b,c,d,e,f,g){__p&&__p();var h={componentWillUnmount:function i(){this.subscriptionsHandler.release()},getInitialState:function i(){return{fileInput:null,stage:"idle",progress:0,videoFile:null}},addSubscriptions:function i(){this.subscriptionsHandler=new(c("SubscriptionsHandler"))();this.subscriptionsHandler.addSubscriptions(this.props.videoUploader.subscribe("upload-requested",this.handleUploadRequested),this.props.videoUploader.subscribe("upload-started",this.handleUploadStarted),this.props.videoUploader.subscribe("upload-finished",this.handleUploadFinished),this.props.videoUploader.subscribe("upload-failed",this.handleUploadFailed),this.props.videoUploader.subscribe("upload-progressed",this.handleUploadProgress),this.props.videoUploader.subscribe("post-started",this.handlePostStarted),this.props.videoUploader.subscribe("post-finished",this.handlePostFinished),this.props.videoUploader.subscribe("post-failed",this.handlePostFailed))},handleUploadRequested:function i(){this.setState({errorMessage:null})},handleUploadStarted:function i(){this.setState({stage:"uploading"})},handleUploadFinished:function i(){this.setState({stage:"upload-finished"})},convertErrorMessageToReact:function i(j){if(Array.isArray(j))return j.map(function(k,l){if(k instanceof Node)return c("React").createElement(c("DOMContainer.react"),{key:l},k);else return k});else if(j&&j.__html)return c("React").createElement("span",{dangerouslySetInnerHTML:j});else return c("React").createElement("span",{dangerouslySetInnerHTML:{__html:j}})},handleUploadFailed:function i(j,k){k=k||{};this.setState({stage:"upload-failed",videoID:k.video_id,errorMessage:this.convertErrorMessageToReact(k.error_description),errorCode:k.error_code})},onFileSelected:function i(j,k){this.videoFileSelected=true;var l=k.fileInput,m=l.getInput(),n;if(m.files&&m.files.length>0)n=m.files[0];this.setState({fileInput:l,videoFile:n,progress:0},this.uploadVideo);c("Arbiter").inform("videoUpload/started",{composerID:this.state.originalComposerID})},onFileDropped:function i(j,k){this.videoFileSelected=true;var l;if(k.files)l=k.files[0];this.setState({fileInput:null,videoFile:l},this.uploadVideo);c("Arbiter").inform("videoUpload/started",{composerID:this.state.originalComposerID})},uploadVideo:function i(){__p&&__p();if(!this.props.videoUploader)return;var j;if(this.state.videoFile)j=c("VideoUploadFile").fromFile(this.state.videoFile);else j=c("VideoUploadFile").fromFileInput(this.state.fileInput.getInput());this.props.videoUploader.upload(j);var k=this.props.videoUploader.getLoggerData(),l=new(c("VideoUploadUILogger"))({waterfall_id:k.waterfall_id,actor_id:k.actor_id,target_id:k.target_id,target_type:k.target_type,composer_entry_point_ref:k.composer_entry_point_ref});this.setState({logger:this.props.videoUploader.getLogger&&this.props.videoUploader.getLogger(),UILogger:l});l.logEvent(c("VideoUploadUILoggerEvents").VIDEO_FILE_SELECTED)},handleUploadProgress:function i(event,j){var k=c("VideoUploadProgressBar").computeProgress(j.start_offset,j.sent_bytes,j.file_size,0,0);this.setState({progress:k})},handlePostStarted:function i(){this.setState({stage:"posting"})},handlePostFinished:function i(j,k){this.setState({stage:"finished",videoID:k.video_id})},handlePostFailed:function i(j,k){this.setState({stage:"post-failed",videoID:k.video_id,errorMessage:k.error_description,errorCode:k.error_code})}};f.exports=h}),null);
__d("ComposerXVideoUploadAttachmentForDialog",["fbt","Arbiter","AsyncRequest","Button","ComposerVideoUploadSphericalMetadataUtils","ReactComposerStatusStore","ComposerVideoAdBreakStore","ComposerVideoUploadActions","ComposerVideoUploadDetails.react","ComposerVideoUploadSphericalStore","ComposerVideoUploadStore","ComposerWaterfallEvent","ComposerXAttachmentUtils","ComposerXController","ComposerXVideoUploadAttachment","ComposerXVideoUploadWrapperMixin","PagesSettingsInstreamAdsBlockListStore","ProfileVideoWWWFrontendActionTypedLogger","React","ReactDOM","ReactComposerContextProviderMixin","SubscriptionsHandler","URI","VideoComposerDialogCaptionEditorUtils","VideoComposerDialogCaptionsStore","VideoComposerDialogUIEvent","VideoComposerDialogUITypedLogger","VideoComposerDialogVersion","VideoContainerType","VideoCopyrightUploadSettings","VideoLibraryNuxAction","VideoLibraryNuxType","VideoSphericalMetadataInjector","VideoSphericalMetadataReaderController","XVideoLibraryNuxController","Run"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").createClass({displayName:"Wrapper",mixins:[c("ReactComposerContextProviderMixin"),c("ComposerXVideoUploadWrapperMixin")],getInitialState:function m(){return{shown:true,showCategoryRequiredError:false}},componentDidMount:function m(){if(!this._filesAddedSubscription)this._filesAddedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesAdded/"+this.props.originalComposerID+"/videoupload",this.onFileSelected);if(!this.filesDroppedSubscription)this.filesDroppedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesDropped/"+this.props.originalComposerID+"/videoupload",this.onFileDropped);this.addSubscriptions()},updateSpherical:function m(n){c("ComposerVideoUploadActions").updateSpherical(this.getChildContext().composerID,n)},updateOriginalSphericalMetadata:function m(n){c("ComposerVideoUploadSphericalMetadataUtils").initWithOriginalSphericalMetadata(this.getChildContext().composerID,n)},show:function m(){this.setState({shown:true})},hide:function m(){this.setState({shown:false})},isShown:function m(){return this.state.shown},reset:function m(){if(this.refs.videoUploadDetails)this.refs.videoUploadDetails.reset()},_onVideoFileInputChange:function m(n){this.props.onVideoFileInputChange(n);this.onFileSelected("",{fileInput:n})},render:function m(){if(!this.state.shown)return null;return c("React").createElement(c("ComposerVideoUploadDetails.react"),{ref:"videoUploadDetails",accessToken:this.props.accessToken,allowCustomThumbnail:this.props.allowCustomThumbnail,canCrosspostOutsideBusiness:this.props.canCrosspostOutsideBusiness,canEditCustomLabels:this.props.canEditCustomLabels,canEditExternalVideoID:this.props.canEditExternalVideoID,canEditFundraiserForStoryCharityID:this.props.canEditFundraiserForStoryCharityID,compactMode:this.props.compactMode,composerID:this.props.originalComposerID,config:this.props.config,errorCode:this.state.errorCode,errorMessage:this.state.errorMessage,generateThumbnails:this.props.generateThumbnails,hideDescriptionEditor:true,improvedContentTags:this.props.improvedContentTags,isReferenceVideo:this.props.isReferenceVideo,isProfileVideo:this.props.isProfileVideo,isUserUploadFlow:this.props.isUserUploadFlow,isVideoUpload:true,logger:this.state.logger,mentionsSearchSource:this.props.mentionsSearchSource,onHighlightedVideosNuxDismiss:this.props.onHighlightedVideosNuxDismiss,onVideoFileChange:this.props.onVideoFileChange,onVideoFileInputChange:this._onVideoFileInputChange,pageAccessToken:this.props.pageAccessToken,postPending:this.props.postPending,progress:this.state.progress,showCaptionsTab:this.props.showCaptionsTab,showCopyrightSection:this.props.showCopyrightSection,showCrosspostingHelpCenter:this.props.showCrosspostingHelpCenter,showDisturbingSection:this.props.showDisturbingSection,showCustomLabels:this.props.showCustomLabels,showExternalVideoIDSection:this.props.showExternalVideoIDSection,showFeedTypeCheckbox:this.props.showFeedTypeCheckbox,showHighlightedVideosNux:this.props.showHighlightedVideosNux,showInternalVideoSettings:this.props.showInternalVideoSettings,showPermissionsTab:this.props.showPermissionsTab,showSecretVideoOption:this.props.showSecretVideoOption,showAdvancedTabSphericalCheckbox:this.props.showAdvancedTabSphericalCheckbox,showSphericalControlsTab:this.props.showSphericalControlsTab,showTagSelectorNux:this.props.showTagSelectorNux,showTagSelectorToken:this.props.showTagSelectorToken,showThumbnailScrubber:this.props.showThumbnailScrubber,showUploadProgressBar:this.props.showUploadProgressBar,showCrosspostedPermissionsNUX:this.props.showCrosspostedPermissionsNUX,stage:this.state.stage,tagsSearchSource:this.props.tagsSearchSource,UILogger:this.state.UILogger,newUIEventLogFunc:this.props.newUIEventLogFunc,uploadVideoID:this.props.uploadVideoID,useSimpleVersion:this.props.useSimpleVersion,videoFile:this.state.videoFile,showOmnistabSection:this.props.showOmnistabSection,showAdBreaksTab:this.props.showAdBreaksTab,canEditAdBreaksTabBlockListContent:this.props.canEditAdBreaksTabBlockListContent,adBreaksExperimentPublicMetadata:this.props.adBreaksExperimentPublicMetadata,hasAdBreakInsertionGapRule:this.props.hasAdBreakInsertionGapRule,isAdBreakInsertionRedesignV1:this.props.isAdBreakInsertionRedesignV1,isAdBreakInsertionRedesignV2:this.props.isAdBreakInsertionRedesignV2,showAdBreakAdminPreviewSettings:this.props.showAdBreakAdminPreviewSettings,showAdBreakOffsetEditorNux:this.props.showAdBreakOffsetEditorNux,isShowPage:this.props.isShowPage,isPageTrailer:this.props.isPageTrailer,showMarkURI:this.props.showMarkURI,minEpisodeDuration:this.props.minEpisodeDuration,canSeeUploadVideoDialogShowsNux:this.props.canSeeUploadVideoDialogShowsNux,canExcludeSegments:this.props.canExcludeSegments,showThumbnailExperimentSection:this.props.showThumbnailExperimentSection,showCategoryRequiredError:this.state.showCategoryRequiredError,shouldShowPageOnboardingForAdBreak:this.props.shouldShowPageOnboardingForAdBreak,isMonetizationOnboarded:this.props.isMonetizationOnboarded,canSeeNewMatchRuleDialog:this.props.canSeeNewMatchRuleDialog,makeTitleMandatory:this.props.makeTitleMandatory,showShareToParentPageOption:this.props.showShareToParentPageOption,showCrosspostToParentPageOption:this.props.showCrosspostToParentPageOption,canEditShowAndParent:this.props.canEditShowAndParent,parentPageName:this.props.parentPageName,parentPageProfilePic:this.props.parentPageProfilePic,parentPageURI:this.props.parentPageURI,showAttributionsSection:this.props.showAttributionsSection,shouldShowNewCaptionsFlow:this.props.shouldShowNewCaptionsFlow,canSeeIGMatches:this.props.canSeeIGMatches,showGamesTypeahead:this.props.showGamesTypeahead,minNumProducts:this.props.minNumProducts})}});i=babelHelpers.inherits(l,c("ComposerXVideoUploadAttachment"));j=i&&i.prototype;function l(m,n){"use strict";__p&&__p();j.constructor.call(this,m,n);this.$ComposerXVideoUploadAttachmentForDialog80=function(event,o,p,q){if(o)o="old_"+o;if(p)p="old_"+p;new(c("VideoComposerDialogUITypedLogger"))().setEvent(event).setComposerDialogVersion(c("VideoComposerDialogVersion").V1).setActorID(this.$ComposerXVideoUploadAttachmentForDialog2).setComposerEntryPoint(this.$ComposerXVideoUploadAttachmentForDialog6).setCurrentTab(o).setNextTab(p).setErrorMessage(q&&q.toString()).log()}.bind(this);this.$ComposerXVideoUploadAttachmentForDialog1=n.accessToken;this.$ComposerXVideoUploadAttachmentForDialog2=n.actorID;this.$ComposerXVideoUploadAttachmentForDialog3=n.allowCustomThumbnail;this.$ComposerXVideoUploadAttachmentForDialog4=n.alwaysShowUploadProgressBar;this.$ComposerXVideoUploadAttachmentForDialog5=n.compactMode;this.$ComposerXVideoUploadAttachmentForDialog6=n.composerType;this.$ComposerXVideoUploadAttachmentForDialog7=n.defaultCategory;this.$ComposerXVideoUploadAttachmentForDialog8=n.generateThumbnails;this.$ComposerXVideoUploadAttachmentForDialog9=n.isReferenceVideo;this.$ComposerXVideoUploadAttachmentForDialog10=n.isProfileVideo;this.$ComposerXVideoUploadAttachmentForDialog11=n.initialCopyrightData;this.$ComposerXVideoUploadAttachmentForDialog12=n.isUserUploadFlow;this.$ComposerXVideoUploadAttachmentForDialog13=n.mentionsSearchSource;this.$ComposerXVideoUploadAttachmentForDialog14=n.originalComposerID;this.$ComposerXVideoUploadAttachmentForDialog15=n.pageAccessToken;this.$ComposerXVideoUploadAttachmentForDialog16=n.showCaptionsTab;this.$ComposerXVideoUploadAttachmentForDialog17=n.showCopyrightSection;this.$ComposerXVideoUploadAttachmentForDialog18=n.showDisturbingSection;this.$ComposerXVideoUploadAttachmentForDialog19=n.showFeedTypeCheckbox;this.$ComposerXVideoUploadAttachmentForDialog20=n.showHighlightedVideosNux;this.$ComposerXVideoUploadAttachmentForDialog21=n.showInternalVideoSettings;this.$ComposerXVideoUploadAttachmentForDialog22=n.showPermissionsTab;this.$ComposerXVideoUploadAttachmentForDialog23=n.showSecretVideoOption;this.$ComposerXVideoUploadAttachmentForDialog24=n.showAdvancedTabSphericalCheckbox;this.$ComposerXVideoUploadAttachmentForDialog25=n.showSphericalControlsTab;this.$ComposerXVideoUploadAttachmentForDialog26=n.showTagSelector;this.$ComposerXVideoUploadAttachmentForDialog27=n.showTagSelectorNux;this.$ComposerXVideoUploadAttachmentForDialog28=n.showTagSelectorToken;this.$ComposerXVideoUploadAttachmentForDialog29=n.showThumbnailScrubber;this.$ComposerXVideoUploadAttachmentForDialog30=n.tagsSearchSource;this.$ComposerXVideoUploadAttachmentForDialog31=n.targetData;this.$ComposerXVideoUploadAttachmentForDialog32=n.useSimpleVersion;this.$ComposerXVideoUploadAttachmentForDialog33=n.videoUploadContainer;this.$ComposerXVideoUploadAttachmentForDialog34=n.sharedWithBusiness;this.$ComposerXVideoUploadAttachmentForDialog35=n.business;this.$ComposerXVideoUploadAttachmentForDialog36=n.showCrosspostedPermissionsNUX;this.$ComposerXVideoUploadAttachmentForDialog37=n.showCrosspostingHelpCenter;this.$ComposerXVideoUploadAttachmentForDialog38=n.canCrosspostOutsideBusiness;this.$ComposerXVideoUploadAttachmentForDialog39=n.crosspostingConfig;this.$ComposerXVideoUploadAttachmentForDialog40=n.canEditCustomLabels;this.$ComposerXVideoUploadAttachmentForDialog41=n.canEditExternalVideoID;this.$ComposerXVideoUploadAttachmentForDialog42=n.canEditFundraiserForStoryCharityID;this.$ComposerXVideoUploadAttachmentForDialog43=n.showCustomLabels;this.$ComposerXVideoUploadAttachmentForDialog44=n.showExternalVideoIDSection;this.$ComposerXVideoUploadAttachmentForDialog45=n.showOmnistabSection;this.$ComposerXVideoUploadAttachmentForDialog46=n.showAdBreaksTab;this.$ComposerXVideoUploadAttachmentForDialog47=n.canEditAdBreaksTabBlockListContent;this.$ComposerXVideoUploadAttachmentForDialog48=n.hasAdBreakInsertionGapRule;this.$ComposerXVideoUploadAttachmentForDialog49=n.isAdBreakInsertionRedesignV1;this.$ComposerXVideoUploadAttachmentForDialog50=n.isAdBreakInsertionRedesignV2;this.$ComposerXVideoUploadAttachmentForDialog51=n.showAdBreakAdminPreviewSettings;this.$ComposerXVideoUploadAttachmentForDialog52=n.showAdBreakOffsetEditorNux;this.$ComposerXVideoUploadAttachmentForDialog53=n.isShowPage;this.$ComposerXVideoUploadAttachmentForDialog54=n.isPageTrailer;this.$ComposerXVideoUploadAttachmentForDialog55=n.showMarkURI;this.$ComposerXVideoUploadAttachmentForDialog56=n.minEpisodeDuration;this.$ComposerXVideoUploadAttachmentForDialog57=n.canSeeUploadVideoDialogShowsNux;this.$ComposerXVideoUploadAttachmentForDialog58=n.adBreaksExperimentPublicMetadata;this.$ComposerXVideoUploadAttachmentForDialog59=n.canExcludeSegments;this.$ComposerXVideoUploadAttachmentForDialog60=n.showThumbnailExperimentSection;this.$ComposerXVideoUploadAttachmentForDialog61=n.showGamesTypeahead;this.$ComposerXVideoUploadAttachmentForDialog62=n.shouldShowPageOnboardingForAdBreak;this.$ComposerXVideoUploadAttachmentForDialog63=n.isMonetizationOnboarded;this.$ComposerXVideoUploadAttachmentForDialog64=n.canSeeNewMatchRuleDialog;this.$ComposerXVideoUploadAttachmentForDialog65=n.makeTitleMandatory;this.$ComposerXVideoUploadAttachmentForDialog66=n.showShareToParentPageOption;this.$ComposerXVideoUploadAttachmentForDialog67=n.showCrosspostToParentPageOption;this.$ComposerXVideoUploadAttachmentForDialog68=n.canEditShowAndParent;this.$ComposerXVideoUploadAttachmentForDialog69=n.parentPageName;this.$ComposerXVideoUploadAttachmentForDialog70=n.parentPageProfilePic;this.$ComposerXVideoUploadAttachmentForDialog71=n.parentPageURI;this.$ComposerXVideoUploadAttachmentForDialog72=n.showAttributionsSection;this.$ComposerXVideoUploadAttachmentForDialog73=n.improvedContentTags;this.$ComposerXVideoUploadAttachmentForDialog74=n.shouldShowNewCaptionsFlow;this.$ComposerXVideoUploadAttachmentForDialog75=n.canSeeIGMatches;this.$ComposerXVideoUploadAttachmentForDialog76=n.minNumProducts}l.prototype.$ComposerXVideoUploadAttachmentForDialog77=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog20=false;var m=c("XVideoLibraryNuxController").getURIBuilder().setEnum("action",c("VideoLibraryNuxAction").DISMISS).setEnum("nux_type",c("VideoLibraryNuxType").HIGHLIGHTED_VIDEOS_NUX).getURI();new(c("AsyncRequest"))().setURI(m).send()};l.prototype.$ComposerXVideoUploadAttachmentForDialog78=function(){"use strict";var m=c("XVideoLibraryNuxController").getURIBuilder().setEnum("action",c("VideoLibraryNuxAction").IMPRESSION).setEnum("nux_type",c("VideoLibraryNuxType").HIGHLIGHTED_VIDEOS_NUX).getURI();new(c("AsyncRequest"))().setURI(m).send()};l.prototype.initFileSubscription=function(){"use strict";if(!this.filesAddedSubscription)this.filesAddedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesAdded/"+this.$ComposerXVideoUploadAttachmentForDialog14+"/videoupload",this.$ComposerXVideoUploadAttachmentForDialog79.bind(this,this.onFileSelected));if(!this.filesDroppedSubscription)this.filesDroppedSubscription=c("Arbiter").subscribe("ComposerXFilesStore/filesDropped/"+this.$ComposerXVideoUploadAttachmentForDialog14+"/videoupload",this.$ComposerXVideoUploadAttachmentForDialog79.bind(this,this.onFileDropped))};l.prototype.getVideoStoreData=function(){"use strict";__p&&__p();var m=["areCopyrightCountriesIncluded","ad_breaks","ad_breaks_block_lists","captions","civic_product_source","composertags_with","content_category","content_tags","copyrighted","copyrightRuleID","copyrightMonitoringType","copyrightWhitelistedFBUsers","copyrightWhitelistedIGUserNames","copyrightOwnershipCountries","copyrightExcludedSegments","copyrightAttributionID","crossposting_config","custom_labels","guide_enabled","guide_keyframes","disturbing","embeddable","feed_type","fov","free_form_tags","fte_only","external_video_id","initialHeading","initialPitch","internal_video","monitoring_type","no_story","shared_with_business","secret","social_actions","spherical","thumb","thumbnail_type","user_uploaded_custom_thumbnail_timestamp","user_scrubbed_thumbnail_timestamp","video_title","enable_omnistab","projection","stereoMode","hotspotXML","sponsor_relationship","episode_data_json","direct_share_status","square_custom_thumbnail_dimensions","enable_ad_breaks_experiment","ad_breaks_experiment_revenue_loss_threshold","should_auto_adjust_manual_ad_breaks","videoDurationInSec","selectedCategory","enable_thumbnail_experiment","fundraiser_for_story_charity_id","share_to_parent_page_option_selected","share_to_parent_page_text","gameID","numProducts"];return c("ComposerVideoUploadStore").getPostData(this.getComposerID()).then(function(n){__p&&__p();var o=c("ComposerVideoUploadSphericalStore").getPostData(this.getComposerID());if(o.hotspots)o.hotspotXML=c("VideoSphericalMetadataInjector").convertFBHotspotMetadataToXML(o.hotspots);Object.assign(n,o);Object.assign(n,c("ComposerVideoAdBreakStore").getPostData(this.getComposerID()));var p=c("PagesSettingsInstreamAdsBlockListStore").getComposerBlockListIdsToApply();if(p)Object.assign(n,{ad_breaks_block_lists:p});return m.reduce(function(q,r){__p&&__p();if(r in n)q[r]=n[r];if(this.$ComposerXVideoUploadAttachmentForDialog9){q.video_container=c("VideoContainerType").COPYRIGHT_REFERENCE_VIDEO;q.copyrighted=true}if(q.copyrighted){q.access_token=this.$ComposerXVideoUploadAttachmentForDialog15;q.create_copyright_via_api=true}if(q.copyrightExcludedSegments){var s=q.copyrightExcludedSegments.filter(function(t){return!t.included&&t.start_time_in_sec!=null&&t.duration_in_sec!=null});s.forEach(function(t){return delete t.included});q.copyrightExcludedSegments=s}return q}.bind(this),{})}.bind(this))["catch"](function(n){return false})};l.prototype.onCancel=function(m,n){"use strict";__p&&__p();if(n.composerID==this.$ComposerXVideoUploadAttachmentForDialog14){if(this.fileInput&&!this.fileInput.input)this.fileInput=null;this.videoUploader.cancel();this.isUploading=false;c("ComposerXController").reset(this.getComposerID());this.logComposerWaterfallEvent(c("ComposerWaterfallEvent").VIDEO_REMOVE);this.clear()}};l.prototype.initWithComponents=function(){"use strict";__p&&__p();c("Button").setEnabled(this.submitButton,false);this.videoFileSelected=false;this.uploadFinished=false;if(this.tagger)this.tagger.init(this);this.subscriptionsHandler=new(c("SubscriptionsHandler"))();this.initFileSubscription();this.initVideoUploader();this.videoUploader.subscribe("metadata-parsed",function(event,n){if(n)this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").METADATA_LOAD_SUCCESS);else this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").METADATA_LOAD_FAILED);this.$ComposerXVideoUploadAttachmentForDialog81(n)}.bind(this));if(!this.$ComposerXVideoUploadAttachmentForDialog82)this.$ComposerXVideoUploadAttachmentForDialog82=c("Arbiter").subscribe("videoUpload/cancel",this.onCancel.bind(this));var m;if(this.$ComposerXVideoUploadAttachmentForDialog9)m=h._("Add a title (optional)");else if(this.$ComposerXVideoUploadAttachmentForDialog10)m=h._("Add a description...");else m=h._("Say something about this video. This description will appear with your video across Facebook.");if(this.getComponent("maininput")!=null){c("ComposerXAttachmentUtils").initMentions(this.getComponent("maininput"),m,this.getComposerRoot());c("ComposerXAttachmentUtils").setValueForMentions(this.getComponent("maininput"),c("ReactComposerStatusStore").getMessageText(this.$ComposerXVideoUploadAttachmentForDialog14))}this.setInitialData();this.renderReactComponent();if(this.$ComposerXVideoUploadAttachmentForDialog20){this.$ComposerXVideoUploadAttachmentForDialog78();this.$ComposerXVideoUploadAttachmentForDialog20=false}c("Run").onLeave(function(){if(this.$ComposerXVideoUploadAttachmentForDialog83.isShown())this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").NAVIGATED_FROM_PAGE)}.bind(this));c("Run").onUnload(function(){if(this.$ComposerXVideoUploadAttachmentForDialog83.isShown())this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").NAVIGATED_FROM_PAGE)}.bind(this))};l.prototype.setInitialData=function(){"use strict";c("ComposerVideoUploadActions").updateCategory(this.getComposerID(),this.$ComposerXVideoUploadAttachmentForDialog7);this.updatePermissions();this.updateCopyrightSettings()};l.prototype.renderReactComponent=function(){"use strict";var m={composerID:this.getComposerID(),targetID:this.$ComposerXVideoUploadAttachmentForDialog31.targetID,actorID:this.$ComposerXVideoUploadAttachmentForDialog2,composerType:this.$ComposerXVideoUploadAttachmentForDialog6},n;if(this.$ComposerXVideoUploadAttachmentForDialog4)n=true;else n=this.$ComposerXVideoUploadAttachmentForDialog84;var o=this.videoUploader&&this.videoUploader.getUploadSession(),p=o&&o.getVideoID();c("ReactDOM").render(c("React").createElement(k,{ref:function(q){return this.$ComposerXVideoUploadAttachmentForDialog83=q}.bind(this),accessToken:this.$ComposerXVideoUploadAttachmentForDialog1,allowCustomThumbnail:this.$ComposerXVideoUploadAttachmentForDialog3,canCrosspostOutsideBusiness:this.$ComposerXVideoUploadAttachmentForDialog38,canEditCustomLabels:this.$ComposerXVideoUploadAttachmentForDialog40,adBreaksExperimentPublicMetadata:this.$ComposerXVideoUploadAttachmentForDialog58,canEditExternalVideoID:this.$ComposerXVideoUploadAttachmentForDialog41,canEditFundraiserForStoryCharityID:this.$ComposerXVideoUploadAttachmentForDialog42,compactMode:this.$ComposerXVideoUploadAttachmentForDialog5,config:m,contextConfig:m,generateThumbnails:this.$ComposerXVideoUploadAttachmentForDialog8,improvedContentTags:this.$ComposerXVideoUploadAttachmentForDialog73,isProfileVideo:this.$ComposerXVideoUploadAttachmentForDialog10,isReferenceVideo:this.$ComposerXVideoUploadAttachmentForDialog9,isUserUploadFlow:this.$ComposerXVideoUploadAttachmentForDialog12,logger:this.$ComposerXVideoUploadAttachmentForDialog85,mentionsSearchSource:this.$ComposerXVideoUploadAttachmentForDialog13,onVideoFileInputChange:this.$ComposerXVideoUploadAttachmentForDialog86.bind(this),onHighlightedVideosNuxDismiss:this.$ComposerXVideoUploadAttachmentForDialog77.bind(this),originalComposerID:this.$ComposerXVideoUploadAttachmentForDialog14,pageAccessToken:this.$ComposerXVideoUploadAttachmentForDialog15,postPending:this.postPending,showCaptionsTab:this.$ComposerXVideoUploadAttachmentForDialog16,showCopyrightSection:this.$ComposerXVideoUploadAttachmentForDialog17,showCustomLabels:this.$ComposerXVideoUploadAttachmentForDialog43,showDisturbingSection:this.$ComposerXVideoUploadAttachmentForDialog18,showExternalVideoIDSection:this.$ComposerXVideoUploadAttachmentForDialog44,showFeedTypeCheckbox:this.$ComposerXVideoUploadAttachmentForDialog19,showHighlightedVideosNux:this.$ComposerXVideoUploadAttachmentForDialog20,showInternalVideoSettings:this.$ComposerXVideoUploadAttachmentForDialog21,showPermissionsTab:this.$ComposerXVideoUploadAttachmentForDialog22,showSecretVideoOption:this.$ComposerXVideoUploadAttachmentForDialog23,showAdvancedTabSphericalCheckbox:this.$ComposerXVideoUploadAttachmentForDialog24,showSphericalControlsTab:this.$ComposerXVideoUploadAttachmentForDialog25,showTagSelector:this.$ComposerXVideoUploadAttachmentForDialog26,showTagSelectorNux:this.$ComposerXVideoUploadAttachmentForDialog27,showTagSelectorToken:this.$ComposerXVideoUploadAttachmentForDialog28,showThumbnailScrubber:this.$ComposerXVideoUploadAttachmentForDialog29,showUploadProgressBar:n,showCrosspostedPermissionsNUX:this.$ComposerXVideoUploadAttachmentForDialog36,showCrosspostingHelpCenter:this.$ComposerXVideoUploadAttachmentForDialog37,tagsSearchSource:this.$ComposerXVideoUploadAttachmentForDialog30,uploadVideoID:p,useSimpleVersion:this.$ComposerXVideoUploadAttachmentForDialog32,videoUploader:this.videoUploader,showOmnistabSection:this.$ComposerXVideoUploadAttachmentForDialog45,showAdBreaksTab:this.$ComposerXVideoUploadAttachmentForDialog46,canEditAdBreaksTabBlockListContent:this.$ComposerXVideoUploadAttachmentForDialog47,hasAdBreakInsertionGapRule:this.$ComposerXVideoUploadAttachmentForDialog48,isAdBreakInsertionRedesignV1:this.$ComposerXVideoUploadAttachmentForDialog49,isAdBreakInsertionRedesignV2:this.$ComposerXVideoUploadAttachmentForDialog50,showAdBreakAdminPreviewSettings:this.$ComposerXVideoUploadAttachmentForDialog51,showAdBreakOffsetEditorNux:this.$ComposerXVideoUploadAttachmentForDialog52,isShowPage:this.$ComposerXVideoUploadAttachmentForDialog53,isPageTrailer:this.$ComposerXVideoUploadAttachmentForDialog54,showMarkURI:this.$ComposerXVideoUploadAttachmentForDialog55,minEpisodeDuration:this.$ComposerXVideoUploadAttachmentForDialog56,canSeeUploadVideoDialogShowsNux:this.$ComposerXVideoUploadAttachmentForDialog57,canExcludeSegments:this.$ComposerXVideoUploadAttachmentForDialog59,showThumbnailExperimentSection:this.$ComposerXVideoUploadAttachmentForDialog60,showGamesTypeahead:this.$ComposerXVideoUploadAttachmentForDialog61,shouldShowPageOnboardingForAdBreak:this.$ComposerXVideoUploadAttachmentForDialog62,isMonetizationOnboarded:this.$ComposerXVideoUploadAttachmentForDialog63,canSeeNewMatchRuleDialog:this.$ComposerXVideoUploadAttachmentForDialog64,makeTitleMandatory:this.$ComposerXVideoUploadAttachmentForDialog65,showShareToParentPageOption:this.$ComposerXVideoUploadAttachmentForDialog66,showCrosspostToParentPageOption:this.$ComposerXVideoUploadAttachmentForDialog67,canEditShowAndParent:this.$ComposerXVideoUploadAttachmentForDialog68,parentPageName:this.$ComposerXVideoUploadAttachmentForDialog69,parentPageProfilePic:this.$ComposerXVideoUploadAttachmentForDialog70,parentPageURI:this.$ComposerXVideoUploadAttachmentForDialog71,showAttributionsSection:this.$ComposerXVideoUploadAttachmentForDialog72,shouldShowNewCaptionsFlow:this.$ComposerXVideoUploadAttachmentForDialog74,canSeeIGMatches:this.$ComposerXVideoUploadAttachmentForDialog75,minNumProducts:this.$ComposerXVideoUploadAttachmentForDialog76,newUIEventLogFunc:this.$ComposerXVideoUploadAttachmentForDialog80}),this.$ComposerXVideoUploadAttachmentForDialog33)};l.prototype.$ComposerXVideoUploadAttachmentForDialog79=function(m,n,o){"use strict";var p=o.fileInput.input,q=document.createElement("video"),r=this.getComposerID(),s=URL.createObjectURL(p.files[0]);q.src=s;q.ondurationchange=function(){c("ComposerVideoUploadActions").updateVideoDurationInSec(r,this.duration)};m.call(this,n,o);if(this.$ComposerXVideoUploadAttachmentForDialog83)this.$ComposerXVideoUploadAttachmentForDialog83.show();this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").DIALOG_OPENED)};l.prototype.$ComposerXVideoUploadAttachmentForDialog86=function(m){"use strict";this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").FILE_REPLACED);this.onFileSelected("",{fileInput:m})};l.prototype.$ComposerXVideoUploadAttachmentForDialog81=function(m){"use strict";__p&&__p();if(m&&this.$ComposerXVideoUploadAttachmentForDialog83){var n=m.format.isSpherical;this.$ComposerXVideoUploadAttachmentForDialog83.updateSpherical(n);if(n){var o=c("VideoSphericalMetadataReaderController").objectToRawSphericalMetadata(m);new(c("VideoSphericalMetadataReaderController"))({sourceType:"metadata",metadata:o}).getFileMetadata().then(function(p){return this.$ComposerXVideoUploadAttachmentForDialog83.updateOriginalSphericalMetadata(p)}.bind(this)).done()}}};l.prototype.isCopyrightDataValid=function(m){"use strict";if(m.copyrighted&&!m.selectedCategory)return false;return true};l.prototype.validateData=function(m){"use strict";__p&&__p();if(!j.validateData.call(this,m))return false;if(!this.isCopyrightDataValid(m)){this.hideThrobber();c("Button").setEnabled(this.submitButton,true);this.$ComposerXVideoUploadAttachmentForDialog83.setState({showCategoryRequiredError:true});return false}if(m.guide_enabled&&m.guide_keyframes.length===0){c("Button").setEnabled(this.submitButton,true);var n={error_description:h._("Guide must have at least one point of interest."),error_code:"VIDEO__INVALID_GUIDE_DATA"};this.$ComposerXVideoUploadAttachmentForDialog83.handlePostFailed("post-failed",n);return false}if(m.cta_url&&!c("URI").isValidURI(m.cta_url)){c("Button").setEnabled(this.submitButton,true);var o={error_description:h._("The provided link is not a valid URI.")};this.$ComposerXVideoUploadAttachmentForDialog83.handlePostFailed("post-failed",o);return false}return true};l.prototype.doSubmit=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").POST_PUBLISH_ATTEMPT);return j.doSubmit.call(this)};l.prototype.handleUploadFinished=function(){"use strict";if(this.fileInput&&!this.fileInput.input)this.fileInput=null;this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").UPLOAD_FINISHED);j.handleUploadFinished.call(this)};l.prototype.handlePostFinished=function(event,m){"use strict";__p&&__p();var n=this.$ComposerXVideoUploadAttachmentForDialog74&&c("VideoComposerDialogCaptionsStore").getpublishedStateChangeset().size>0;if(n)c("VideoComposerDialogCaptionEditorUtils").updatePublishedStatesOnServer(m.video_id,this.$ComposerXVideoUploadAttachmentForDialog2,c("VideoComposerDialogCaptionsStore").getpublishedStateChangeset());var o=this.$ComposerXVideoUploadAttachmentForDialog74;if(o)c("VideoComposerDialogCaptionsStore").logComposerSaveEvent();this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").POST_SUCCESS);j.handlePostFinished.call(this,event,m);this.clear()};l.prototype.updatePermissions=function(){"use strict";var m=[];if(this.$ComposerXVideoUploadAttachmentForDialog38)m=this.$ComposerXVideoUploadAttachmentForDialog39;else if(this.$ComposerXVideoUploadAttachmentForDialog35!==""){var n={allow:this.$ComposerXVideoUploadAttachmentForDialog34,business:this.$ComposerXVideoUploadAttachmentForDialog35};m.push(n)}c("ComposerVideoUploadActions").updatePermissions(this.getComposerID(),m)};l.prototype.showCopyrightDialog=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").RIGHTS_DIALOG_SHOWN);j.showCopyrightDialog.call(this)};l.prototype.handleCopyrightConfirmation=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").RIGHTS_DIALOG_CONFIRM);j.handleCopyrightConfirmation.call(this)};l.prototype.updateCopyrightSettings=function(){"use strict";__p&&__p();if(!this.$ComposerXVideoUploadAttachmentForDialog11||!this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").USE_CUSTOM])return;var m=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").ALLOW_AUTO_MONITORING],n=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").MONITORING_TYPE],o=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").MATCH_RULE],p=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").OWNERSHIP_COUNTRIES],q=this.$ComposerXVideoUploadAttachmentForDialog11[c("VideoCopyrightUploadSettings").ARE_COUNTRIES_INCLUDED];if(m)c("ComposerVideoUploadActions").updateCopyrighted(this.getComposerID(),m);if(n)c("ComposerVideoUploadActions").updateCopyrightMonitoringType(this.getComposerID(),n);if(o)c("ComposerVideoUploadActions").updateCopyrightRuleID(this.getComposerID(),o);if(p)c("ComposerVideoUploadActions").updateCopyrightOwnershipCountries(this.getComposerID(),p,q)};l.prototype.clear=function(){"use strict";__p&&__p();if(this.$ComposerXVideoUploadAttachmentForDialog83)this.$ComposerXVideoUploadAttachmentForDialog83.reset();var m=this.getComposerID();c("ComposerVideoAdBreakStore").clearComposerData(m);c("ComposerVideoUploadSphericalStore").clearComposerData(m);c("ComposerVideoUploadStore").clearComposerData(m);this.setInitialData();if(this.$ComposerXVideoUploadAttachmentForDialog83)this.$ComposerXVideoUploadAttachmentForDialog83.hide()};l.prototype.showUploadProgressBar=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog84=true;this.renderReactComponent()};l.prototype.hideUploadProgressBar=function(){"use strict";this.$ComposerXVideoUploadAttachmentForDialog84=false;this.renderReactComponent()};l.prototype.handleUploadFailed=function(event,m){"use strict";if(this.$ComposerXVideoUploadAttachmentForDialog10)new(c("ProfileVideoWWWFrontendActionTypedLogger"))().setEvent("profile_video_upload_error").setSessionID(this.$ComposerXVideoUploadAttachmentForDialog14).setUploadError(m.error_summary).log();this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").UPLOAD_FAILURE,null,null,m.error_summary);this.isUploading=false;c("Button").setEnabled(this.submitButton,false)};l.prototype.handlePostFailed=function(event,m){"use strict";this.$ComposerXVideoUploadAttachmentForDialog80(c("VideoComposerDialogUIEvent").POST_FAILURE,null,null,m.error_summary);c("ComposerXController").hideAttachmentThrobber(this.getComposerID());c("Button").setEnabled(this.submitButton,true)};l.prototype.showThrobber=function(){"use strict";c("Arbiter").inform("videoUpload/showThrobber",{composerID:this.$ComposerXVideoUploadAttachmentForDialog14})};l.prototype.hideThrobber=function(){"use strict";c("Arbiter").inform("videoUpload/hideThrobber",{composerID:this.$ComposerXVideoUploadAttachmentForDialog14})};f.exports=l}),null);